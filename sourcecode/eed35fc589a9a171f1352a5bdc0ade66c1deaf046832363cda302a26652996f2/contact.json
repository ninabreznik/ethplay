{
  "address": "0x18B5B6696E6569F437F48b111734D72b225D14a7",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "NCStandardInterestRateModel",
  "compilerVersion": "v0.4.24+commit.e67f0147",
  "optimization": false,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "pragma solidity ^0.4.24;\n\nimport \"./Exponential.sol\";\nimport \"./ErrorReporter.sol\";\nimport \"./CarefulMath.sol\";\nimport \"./InterestRateModel.sol\";\nimport \"./LiquidationChecker.sol\";\n\n/**\n  * @title The Compound Standard Interest Rate Model with LiquidationChecker\n  * @author Compound\n  * @notice See Section 2.4 of the Compound Whitepaper\n  */\ncontract NCStandardInterestRateModel is Exponential, LiquidationChecker {\n\n    uint constant oneMinusSpreadBasisPoints = 9000;\n    uint constant blocksPerYear = 2102400;\n    uint constant mantissaFivePercent = 5 * 10**16;\n\n    enum IRError {\n        NO_ERROR,\n        FAILED_TO_ADD_CASH_PLUS_BORROWS,\n        FAILED_TO_GET_EXP,\n        FAILED_TO_MUL_PRODUCT_TIMES_BORROW_RATE\n    }\n\n    constructor(address moneyMarket, address liquidator) LiquidationChecker(moneyMarket, liquidator) {}\n\n    /*\n     * @dev Calculates the utilization rate (borrows / (cash + borrows)) as an Exp\n     */\n    function getUtilizationRate(uint cash, uint borrows) pure internal returns (IRError, Exp memory) {\n        if (borrows == 0) {\n            // Utilization rate is zero when there's no borrows\n            return (IRError.NO_ERROR, Exp({mantissa: 0}));\n        }\n\n        (Error err0, uint cashPlusBorrows) = add(cash, borrows);\n        if (err0 != Error.NO_ERROR) {\n            return (IRError.FAILED_TO_ADD_CASH_PLUS_BORROWS, Exp({mantissa: 0}));\n        }\n\n        (Error err1, Exp memory utilizationRate) = getExp(borrows, cashPlusBorrows);\n        if (err1 != Error.NO_ERROR) {\n            return (IRError.FAILED_TO_GET_EXP, Exp({mantissa: 0}));\n        }\n\n        return (IRError.NO_ERROR, utilizationRate);\n    }\n\n    /*\n     * @dev Calculates the utilization and borrow rates for use by get{Supply,Borrow}Rate functions\n     */\n    function getUtilizationAndAnnualBorrowRate(uint cash, uint borrows) pure internal returns (IRError, Exp memory, Exp memory) {\n        (IRError err0, Exp memory utilizationRate) = getUtilizationRate(cash, borrows);\n        if (err0 != IRError.NO_ERROR) {\n            return (err0, Exp({mantissa: 0}), Exp({mantissa: 0}));\n        }\n\n        // Borrow Rate is 5% + UtilizationRate * 45%\n        // 45% of utilizationRate, is `rate * 45 / 100`\n        (Error err1, Exp memory utilizationRateMuled) = mulScalar(utilizationRate, 45);\n        // `mulScalar` only overflows when the product is >= 2^256.\n        // utilizationRate is a real number on the interval [0,1], which means that\n        // utilizationRate.mantissa is in the interval [0e18,1e18], which means that 45 times\n        // that is in the interval [0e18,45e18]. That interval has no intersection with 2^256, and therefore\n        // this can never overflow. As such, we assert.\n        assert(err1 == Error.NO_ERROR);\n\n        (Error err2, Exp memory utilizationRateScaled) = divScalar(utilizationRateMuled, 100);\n        // 100 is a constant, and therefore cannot be zero, which is the only error case of divScalar.\n        assert(err2 == Error.NO_ERROR);\n\n        // Add the 5% for (5% + 45% * Ua)\n        (Error err3, Exp memory annualBorrowRate) = addExp(utilizationRateScaled, Exp({mantissa: mantissaFivePercent}));\n        // `addExp` only fails when the addition of mantissas overflow.\n        // As per above, utilizationRateMuled is capped at 45e18,\n        // and utilizationRateScaled is capped at 4.5e17. mantissaFivePercent = 0.5e17, and thus the addition\n        // is capped at 5e17, which is less than 2^256.\n        assert(err3 == Error.NO_ERROR);\n\n        return (IRError.NO_ERROR, utilizationRate, annualBorrowRate);\n    }\n\n    /**\n      * @notice Gets the current supply interest rate based on the given asset, total cash and total borrows\n      * @dev The return value should be scaled by 1e18, thus a return value of\n      *      `(true, 1000000000000)` implies an interest rate of 0.000001 or 0.0001% *per block*.\n      * @param _asset The asset to get the interest rate of\n      * @param cash The total cash of the asset in the market\n      * @param borrows The total borrows of the asset in the market\n      * @return Success or failure and the supply interest rate per block scaled by 10e18\n      */\n    function getSupplyRate(address _asset, uint cash, uint borrows) public view returns (uint, uint) {\n        _asset; // pragma ignore unused argument\n\n        (IRError err0, Exp memory utilizationRate0, Exp memory annualBorrowRate) = getUtilizationAndAnnualBorrowRate(cash, borrows);\n        if (err0 != IRError.NO_ERROR) {\n            return (uint(err0), 0);\n        }\n\n        // We're going to multiply the utilization rate by the spread's numerator\n        (Error err1, Exp memory utilizationRate1) = mulScalar(utilizationRate0, oneMinusSpreadBasisPoints);\n        // mulScalar only overflows when product is greater than or equal to 2^256.\n        // utilization rate's mantissa is a number between [0e18,1e18]. That means that\n        // utilizationRate1 is a value between [0e18,9e21]. This is strictly less than 2^256.\n        assert(err1 == Error.NO_ERROR);\n\n        // Next multiply this product times the borrow rate\n        (Error err2, Exp memory supplyRate0) = mulExp(utilizationRate1, annualBorrowRate);\n        // If the product of the mantissas for mulExp are both less than 2^256,\n        // then this operation will never fail. TODO: Verify.\n        // We know that borrow rate is in the interval [0, 4e17] from above.\n        // We know that utilizationRate1 is in the interval [0, 9e21] from directly above.\n        // As such, the multiplication is in the interval of [0, 3.6e39]. This is strictly\n        // less than 2^256 (which is about 10e77).\n        assert(err2 == Error.NO_ERROR);\n\n        // And then divide down by the spread's denominator (basis points divisor)\n        // as well as by blocks per year.\n        (Error err3, Exp memory supplyRate1) = divScalar(supplyRate0, 10000 * blocksPerYear); // basis points * blocks per year\n        // divScalar only fails when divisor is zero. This is clearly not the case.\n        assert(err3 == Error.NO_ERROR);\n\n        // Note: mantissa is the rate scaled 1e18, which matches the expected result\n        return (uint(IRError.NO_ERROR), supplyRate1.mantissa);\n    }\n\n    /**\n      * @notice Gets the current borrow interest rate based on the given asset, total cash and total borrows\n      * @dev The return value should be scaled by 1e18, thus a return value of\n      *      `(true, 1000000000000)` implies an interest rate of 0.000001 or 0.0001% *per block*.\n      * @param asset The asset to get the interest rate of\n      * @param cash The total cash of the asset in the market\n      * @param borrows The total borrows of the asset in the market\n      * @return Success or failure and the borrow interest rate per block scaled by 10e18\n      */\n    function getBorrowRate(address asset, uint cash, uint borrows) public returns (uint, uint) {\n        require(isAllowed(asset, cash, borrows));\n\n        (IRError err0, Exp memory _utilizationRate, Exp memory annualBorrowRate) = getUtilizationAndAnnualBorrowRate(cash, borrows);\n        if (err0 != IRError.NO_ERROR) {\n            return (uint(err0), 0);\n        }\n\n        // And then divide down by blocks per year.\n        (Error err1, Exp memory borrowRate) = divScalar(annualBorrowRate, blocksPerYear); // basis points * blocks per year\n        // divScalar only fails when divisor is zero. This is clearly not the case.\n        assert(err1 == Error.NO_ERROR);\n\n        _utilizationRate; // pragma ignore unused variable\n\n        // Note: mantissa is the rate scaled 1e18, which matches the expected result\n        return (uint(IRError.NO_ERROR), borrowRate.mantissa);\n    }\n}\n",
  "bytecode": "608060405234801561001057600080fd5b506040516040806113ca83398101806040528101908080519060200190929190805190602001909291905050508181816000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600160146101000a81548160ff021916908315150217905550505050506112dc806100ee6000396000f300608060405260043610610077576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680620fba161461007c57806325468f68146100ab5780634046ebae146100da578063517cf73e14610131578063d6d75f51146101a3578063ed2b5a3c146101fa575b600080fd5b34801561008857600080fd5b5061009161026c565b604051808215151515815260200191505060405180910390f35b3480156100b757600080fd5b506100d860048036038101908080351515906020019092919050505061027f565b005b3480156100e657600080fd5b506100ef610387565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561013d57600080fd5b50610186600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190803590602001909291905050506103ad565b604051808381526020018281526020019250505060405180910390f35b3480156101af57600080fd5b506101b86104eb565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561020657600080fd5b5061024f600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919080359060200190929190505050610510565b604051808381526020018281526020019250505060405180910390f35b600160149054906101000a900460ff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561036a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260268152602001807f4c49515549444154494f4e5f434845434b45525f494e56414c49445f4c49515581526020017f494441544f52000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b80600160146101000a81548160ff02191690831515021790555050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008060006103ba61129c565b6103c261129c565b60006103cc61129c565b60006103d661129c565b60006103e061129c565b6103ea8d8d6105e6565b985098509850600060038111156103fd57fe5b89600381111561040957fe5b14151561042a5788600381111561041c57fe5b60008090509a509a506104da565b61043688612328610744565b955095506000601981111561044757fe5b86601981111561045357fe5b14151561045c57fe5b61046685886107c4565b935093506000601981111561047757fe5b84601981111561048357fe5b14151561048c57fe5b61049d8362201480612710026108ea565b91509150600060198111156104ae57fe5b8260198111156104ba57fe5b1415156104c357fe5b600060038111156104d057fe5b81600001519a509a505b505050505050505050935093915050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600080600061051d61129c565b61052561129c565b600061052f61129c565b61053a8a8a8a61096a565b151561054557600080fd5b61054f89896105e6565b9450945094506000600381111561056257fe5b85600381111561056e57fe5b14151561058f5784600381111561058157fe5b6000809050965096506105d9565b61059c83622014806108ea565b91509150600060198111156105ad57fe5b8260198111156105b957fe5b1415156105c257fe5b600060038111156105cf57fe5b8160000151965096505b5050505050935093915050565b60006105f061129c565b6105f861129c565b600061060261129c565b600061060c61129c565b600061061661129c565b600061062061129c565b61062a8d8d6109ab565b975097506000600381111561063b57fe5b88600381111561064757fe5b1415156106825787602060405190810160405280600081525060206040519081016040528060008152508191508090509a509a509a50610735565b61068d87602d610744565b955095506000601981111561069e57fe5b8660198111156106aa57fe5b1415156106b357fe5b6106be8560646108ea565b93509350600060198111156106cf57fe5b8460198111156106db57fe5b1415156106e457fe5b6107048360206040519081016040528066b1a2bc2ec50000815250610a97565b915091506000601981111561071557fe5b82601981111561072157fe5b14151561072a57fe5b600087829a509a509a505b50505050505050509250925092565b600061074e61129c565b60008061075f866000015186610adb565b915091506000601981111561077057fe5b82601981111561077c57fe5b1415156107a157816020604051908101604052806000815250809050935093506107bb565b600060206040519081016040528083815250809050935093505b50509250929050565b60006107ce61129c565b6000806000806000806107e98a600001518a60000151610adb565b95509550600060198111156107fa57fe5b86601981111561080657fe5b14151561082b57856020604051908101604052806000815250809050975097506108dd565b6108496002670de0b6b3a764000081151561084257fe5b0486610b30565b935093506000601981111561085a57fe5b84601981111561086657fe5b14151561088b57836020604051908101604052806000815250809050975097506108dd565b61089d83670de0b6b3a7640000610b63565b91509150600060198111156108ae57fe5b8260198111156108ba57fe5b1415156108c357fe5b600060206040519081016040528083815250809050975097505b5050505050509250929050565b60006108f461129c565b600080610905866000015186610b63565b915091506000601981111561091657fe5b82601981111561092257fe5b1415156109475781602060405190810160405280600081525080905093509350610961565b600060206040519081016040528083815250809050935093505b50509250929050565b6000600160149054906101000a900460ff168061098e575061098c8484610b99565b155b80156109a257506109a0848484610bbd565b155b90509392505050565b60006109b561129c565b60008060006109c261129c565b60008714156109ea576000602060405190810160405280600081525080905095509550610a8c565b6109f48888610b30565b9350935060006019811115610a0557fe5b846019811115610a1157fe5b141515610a37576001602060405190810160405280600081525080905095509550610a8c565b610a418784610be4565b9150915060006019811115610a5257fe5b826019811115610a5e57fe5b141515610a84576002602060405190810160405280600081525080905095509550610a8c565b600081955095505b505050509250929050565b6000610aa161129c565b600080610ab686600001518660000151610b30565b9150915081602060405190810160405280838152508090509350935050509250929050565b600080600080851415610af75760008080905092509250610b28565b8385029050838582811515610b0857fe5b04141515610b20576003600080905092509250610b28565b600081925092505b509250929050565b600080600083850190508481101515610b4f5760008192509250610b5b565b60036000809050925092505b509250929050565b6000806000831415610b7f576005600080905091509150610b92565b60008385811515610b8c57fe5b04915091505b9250929050565b6000610ba58383610cb9565b8015610bb55750610bb4610dc2565b5b905092915050565b6000610bc9848461100e565b8015610bdb5750610bda8483611116565b5b90509392505050565b6000610bee61129c565b600080600080610c0688670de0b6b3a7640000610adb565b9350935060006019811115610c1757fe5b846019811115610c2357fe5b141515610c485783602060405190810160405280600081525080905095509550610cae565b610c528388610b63565b9150915060006019811115610c6357fe5b826019811115610c6f57fe5b141515610c945781602060405190810160405280600081525080905095509550610cae565b600060206040519081016040528083815250809050955095505b505050509250929050565b6000808373ffffffffffffffffffffffffffffffffffffffff166370a082316000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff166040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b158015610d7857600080fd5b505af1158015610d8c573d6000803e3d6000fd5b505050506040513d6020811015610da257600080fd5b810190808051906020019092919050505090508083101591505092915050565b6000806000806000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16637dc0d1d06040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015610e4d57600080fd5b505af1158015610e61573d6000803e3d6000fd5b505050506040513d6020811015610e7757600080fd5b810190808051906020019092919050505092503273ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1663be59b4b16040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015610f0557600080fd5b505af1158015610f19573d6000803e3d6000fd5b505050506040513d6020811015610f2f57600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff16149150438373ffffffffffffffffffffffffffffffffffffffff16636084747f6040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015610fbe57600080fd5b505af1158015610fd2573d6000803e3d6000fd5b505050506040513d6020811015610fe857600080fd5b81019080805190602001909291905050501490508180156110065750805b935050505090565b6000808373ffffffffffffffffffffffffffffffffffffffff166370a082316000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff166040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1580156110cd57600080fd5b505af11580156110e1573d6000803e3d6000fd5b505050506040513d60208110156110f757600080fd5b8101908080519060200190929190505050905080831091505092915050565b6000806000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16638e8f294b856040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505061012060405180830381600087803b1580156111d657600080fd5b505af11580156111ea573d6000803e3d6000fd5b505050506040513d61012081101561120157600080fd5b810190808051906020019092919080519060200190929190805190602001909291908051906020019092919080519060200190929190805190602001909291908051906020019092919080519060200190929190805190602001909291905050509091929394959697509091929394959650909192939495509091929394509091929350909192509050508091505082811091505092915050565b6020604051908101604052806000815250905600a165627a7a723058202f28168c783c7dd0cf4b3144a8a59f2373be0617c0679a660046e63f7a3f613600290000000000000000000000003fda67f7583380e67ef93072294a7fac882fd7e70000000000000000000000001055be4bf7338c7606d9efdcf80593f180ba043e",
  "constructorArguments": "0000000000000000000000003fda67f7583380e67ef93072294a7fac882fd7e70000000000000000000000001055be4bf7338c7606d9efdcf80593f180ba043e"
}