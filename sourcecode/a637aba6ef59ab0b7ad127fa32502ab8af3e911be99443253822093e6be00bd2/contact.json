{
  "address": "0x8f27b7331944a5f48ef73f262aee69ed7bf31797",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "IMCUnlockRecord",
  "compilerVersion": "v0.4.25+commit.59dbf8f1",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2018-10-19\n*/\n\npragma solidity ^0.4.24;\n\n// ----------------------------------------------------------------------------\n// Owned contract\n// ----------------------------------------------------------------------------\ncontract Owned {\n    address public owner;\n    address public newOwner;\n\n    event OwnershipTransferred(address indexed _from, address indexed _to);\n\n    constructor() public {\n        owner = msg.sender;\n    }\n\n    modifier onlyOwner {\n        require(msg.sender == owner);\n        _;\n    }\n\n    function transferOwnership(address _newOwner) public onlyOwner {\n        newOwner = _newOwner;\n    }\n    function acceptOwnership() public {\n        require(msg.sender == newOwner);\n        emit OwnershipTransferred(owner, newOwner);\n        owner = newOwner;\n        newOwner = address(0);\n    }\n}\n\n// ----------------------------------------------------------------------------\n// 解锁记录合约\n// ----------------------------------------------------------------------------\ncontract IMCUnlockRecord is Owned{\n\n    // 解锁记录添加日志\n    event UnlockRecordAdd(uint _date, bytes32 _hash, string _data, string _fileFormat, uint _stripLen);\n\n    // Token解锁统计记录\n    struct RecordInfo {\n        uint date;  // 记录日期（解锁ID）\n        bytes32 hash;  // 文件hash\n        string data; // 统计数据\n        string fileFormat; // 上链存证的文件格式\n        uint stripLen; // 上链存证的文件分区\n    }\n\n    // 执行者地址\n    address public executorAddress;\n    \n    // 解锁记录\n    mapping(uint => RecordInfo) public unlockRecord;\n    \n    constructor() public{\n        // 初始化合约执行者\n        executorAddress = msg.sender;\n    }\n    \n    /**\n     * 修改executorAddress，只有owner能够修改\n     * @param _addr address 地址\n     */\n    function modifyExecutorAddr(address _addr) public onlyOwner {\n        executorAddress = _addr;\n    }\n    \n     \n    /**\n     * 解锁记录添加\n     * @param _date uint 记录日期（解锁ID）\n     * @param _hash bytes32 文件hash\n     * @param _data string 统计数据\n     * @param _fileFormat string 上链存证的文件格式\n     * @param _stripLen uint 上链存证的文件分区\n     * @return success 添加成功\n     */\n    function unlockRecordAdd(uint _date, bytes32 _hash, string _data, string _fileFormat, uint _stripLen) public returns (bool) {\n        // 调用者需和Owner设置的执行者地址一致\n        require(msg.sender == executorAddress);\n        // 防止重复记录\n        require(unlockRecord[_date].date != _date);\n\n        // 记录解锁信息\n        unlockRecord[_date] = RecordInfo(_date, _hash, _data, _fileFormat, _stripLen);\n\n        // 解锁日志记录\n        emit UnlockRecordAdd(_date, _hash, _data, _fileFormat, _stripLen);\n        \n        return true;\n        \n    }\n\n}",
  "abi": "[{\"constant\":false,\"inputs\":[{\"name\":\"_date\",\"type\":\"uint256\"},{\"name\":\"_hash\",\"type\":\"bytes32\"},{\"name\":\"_data\",\"type\":\"string\"},{\"name\":\"_fileFormat\",\"type\":\"string\"},{\"name\":\"_stripLen\",\"type\":\"uint256\"}],\"name\":\"unlockRecordAdd\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_addr\",\"type\":\"address\"}],\"name\":\"modifyExecutorAddr\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"acceptOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"unlockRecord\",\"outputs\":[{\"name\":\"date\",\"type\":\"uint256\"},{\"name\":\"hash\",\"type\":\"bytes32\"},{\"name\":\"data\",\"type\":\"string\"},{\"name\":\"fileFormat\",\"type\":\"string\"},{\"name\":\"stripLen\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"executorAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"newOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_date\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_hash\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"_data\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"_fileFormat\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"_stripLen\",\"type\":\"uint256\"}],\"name\":\"UnlockRecordAdd\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_to\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"}]",
  "bytecode": "608060405234801561001057600080fd5b506000805433600160a060020a0319918216811783556002805490921617905561083790819061004090396000f30060806040526004361061008d5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166311efff1f811461009257806333e7fb971461014657806379ba5097146101695780638da5cb5b1461017e578063a129124d146101af578063a8e9a539146102c2578063d4ee1d90146102d7578063f2fde38b146102ec575b600080fd5b34801561009e57600080fd5b50604080516020600460443581810135601f810184900484028501840190955284845261013294823594602480359536959460649492019190819084018382808284375050604080516020601f89358b018035918201839004830284018301909452808352979a999881019791965091820194509250829150840183828082843750949750509335945061030d9350505050565b604080519115158252519081900360200190f35b34801561015257600080fd5b50610167600160a060020a03600435166104f0565b005b34801561017557600080fd5b50610167610536565b34801561018a57600080fd5b506101936105be565b60408051600160a060020a039092168252519081900360200190f35b3480156101bb57600080fd5b506101c76004356105cd565b6040518086815260200185600019166000191681526020018060200180602001848152602001838103835286818151815260200191508051906020019080838360005b8381101561022257818101518382015260200161020a565b50505050905090810190601f16801561024f5780820380516001836020036101000a031916815260200191505b50838103825285518152855160209182019187019080838360005b8381101561028257818101518382015260200161026a565b50505050905090810190601f1680156102af5780820380516001836020036101000a031916815260200191505b5097505050505050505060405180910390f35b3480156102ce57600080fd5b5061019361070c565b3480156102e357600080fd5b5061019361071b565b3480156102f857600080fd5b50610167600160a060020a036004351661072a565b600254600090600160a060020a0316331461032757600080fd5b60008681526003602052604090205486141561034257600080fd5b6040805160a0810182528781526020808201888152828401888152606084018890526080840187905260008b8152600384529490942083518155905160018201559251805192939261039a9260028501920190610770565b50606082015180516103b6916003840191602090910190610770565b50608082015181600401559050507f0998951843dde74a3f3327e785ae199b04ad5b166a312f9e5d08d18361fc0ed486868686866040518086815260200185600019166000191681526020018060200180602001848152602001838103835286818151815260200191508051906020019080838360005b8381101561044557818101518382015260200161042d565b50505050905090810190601f1680156104725780820380516001836020036101000a031916815260200191505b50838103825285518152855160209182019187019080838360005b838110156104a557818101518382015260200161048d565b50505050905090810190601f1680156104d25780820380516001836020036101000a031916815260200191505b5097505050505050505060405180910390a150600195945050505050565b600054600160a060020a0316331461050757600080fd5b6002805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600154600160a060020a0316331461054d57600080fd5b60015460008054604051600160a060020a0393841693909116917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a3600180546000805473ffffffffffffffffffffffffffffffffffffffff19908116600160a060020a03841617909155169055565b600054600160a060020a031681565b60036020908152600091825260409182902080546001808301546002808501805488519481161561010002600019011691909104601f81018790048702840187019097528683529295909491929183018282801561066c5780601f106106415761010080835404028352916020019161066c565b820191906000526020600020905b81548152906001019060200180831161064f57829003601f168201915b5050505060038301805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529495949350908301828280156106fc5780601f106106d1576101008083540402835291602001916106fc565b820191906000526020600020905b8154815290600101906020018083116106df57829003601f168201915b5050505050908060040154905085565b600254600160a060020a031681565b600154600160a060020a031681565b600054600160a060020a0316331461074157600080fd5b6001805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106107b157805160ff19168380011785556107de565b828001600101855582156107de579182015b828111156107de5782518255916020019190600101906107c3565b506107ea9291506107ee565b5090565b61080891905b808211156107ea57600081556001016107f4565b905600a165627a7a72305820eb9da746eb8dc69b2ae4e125434ba8de486becf406517d861fd001da44581a1b0029"
}