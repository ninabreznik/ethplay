{
  "address": "0x000000eade0fe9269d0412a6055b6f3c5d968488",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "UpgradeHelper",
  "compilerVersion": "v0.4.23+commit.124ca40d",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2019-01-03\n*/\n\npragma solidity ^0.4.23;\n\n// File: contracts/utilities/UpgradeHelper.sol\n\ncontract OldTrueUSDInterface {\n    function delegateToNewContract(address _newContract) public;\n    function claimOwnership() public;\n    function balances() public returns(address);\n    function allowances() public returns(address);\n    function totalSupply() public returns(uint);\n    function transferOwnership(address _newOwner) external;\n}\ncontract NewTrueUSDInterface {\n    function setTotalSupply(uint _totalSupply) public;\n    function transferOwnership(address _newOwner) public;\n    function claimOwnership() public;\n}\n\ncontract TokenControllerInterface {\n    function claimOwnership() external;\n    function transferChild(address _child, address _newOwner) external;\n    function requestReclaimContract(address _child) external;\n    function issueClaimOwnership(address _child) external;\n    function setTrueUSD(address _newTusd) external;\n    function setTusdRegistry(address _Registry) external;\n    function claimStorageForProxy(address _delegate,\n        address _balanceSheet,\n        address _alowanceSheet) external;\n    function setGlobalPause(address _globalPause) external;\n    function transferOwnership(address _newOwner) external;\n    function owner() external returns(address);\n}\n\n/**\n */\ncontract UpgradeHelper {\n    OldTrueUSDInterface public constant oldTrueUSD = OldTrueUSDInterface(0x8dd5fbCe2F6a956C3022bA3663759011Dd51e73E);\n    NewTrueUSDInterface public constant newTrueUSD = NewTrueUSDInterface(0x0000000000085d4780B73119b644AE5ecd22b376);\n    TokenControllerInterface public constant tokenController = TokenControllerInterface(0x0000000000075EfBeE23fe2de1bd0b7690883cc9);\n    address public constant registry = address(0x0000000000013949F288172bD7E36837bDdC7211);\n    address public constant globalPause = address(0x0000000000027f6D87be8Ade118d9ee56767d993);\n\n    function upgrade() public {\n        // TokenController should have end owner as it's pending owner at the end\n        address endOwner = tokenController.owner();\n\n        // Helper contract becomes the owner of controller, and both TUSD contracts\n        tokenController.claimOwnership();\n        newTrueUSD.claimOwnership();\n\n        // Initialize TrueUSD totalSupply\n        newTrueUSD.setTotalSupply(oldTrueUSD.totalSupply());\n\n        // Claim storage contract from oldTrueUSD\n        address balanceSheetAddress = oldTrueUSD.balances();\n        address allowanceSheetAddress = oldTrueUSD.allowances();\n        tokenController.requestReclaimContract(balanceSheetAddress);\n        tokenController.requestReclaimContract(allowanceSheetAddress);\n\n        // Transfer storage contract to controller then transfer it to NewTrueUSD\n        tokenController.issueClaimOwnership(balanceSheetAddress);\n        tokenController.issueClaimOwnership(allowanceSheetAddress);\n        tokenController.transferChild(balanceSheetAddress, newTrueUSD);\n        tokenController.transferChild(allowanceSheetAddress, newTrueUSD);\n        \n        newTrueUSD.transferOwnership(tokenController);\n        tokenController.issueClaimOwnership(newTrueUSD);\n        tokenController.setTrueUSD(newTrueUSD);\n        tokenController.claimStorageForProxy(newTrueUSD, balanceSheetAddress, allowanceSheetAddress);\n\n        // Configure TrueUSD\n        tokenController.setTusdRegistry(registry);\n        tokenController.setGlobalPause(globalPause);\n\n        // Point oldTrueUSD delegation to NewTrueUSD\n        tokenController.transferChild(oldTrueUSD, address(this));\n        oldTrueUSD.claimOwnership();\n        oldTrueUSD.delegateToNewContract(newTrueUSD);\n        \n        // Controller owns both old and new TrueUSD\n        oldTrueUSD.transferOwnership(tokenController);\n        tokenController.issueClaimOwnership(oldTrueUSD);\n        tokenController.transferOwnership(endOwner);\n    }\n}",
  "bytecode": "608060405234801561001057600080fd5b50610ea4806100206000396000f30060806040526004361061005e5763ffffffff60e060020a6000350416634bd29cfb81146100635780637b10399914610094578063b1bb437d146100a9578063d55ec697146100be578063eddd9d82146100d5578063f12d54d8146100ea575b600080fd5b34801561006f57600080fd5b506100786100ff565b60408051600160a060020a039092168252519081900360200190f35b3480156100a057600080fd5b50610078610117565b3480156100b557600080fd5b5061007861012a565b3480156100ca57600080fd5b506100d361013d565b005b3480156100e157600080fd5b50610078610e52565b3480156100f657600080fd5b50610078610e65565b738dd5fbce2f6a956c3022ba3663759011dd51e73e81565b6e013949f288172bd7e36837bddc721181565b6e085d4780b73119b644ae5ecd22b37681565b60008060006e075efbee23fe2de1bd0b7690883cc9600160a060020a0316638da5cb5b6040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561018f57600080fd5b505af11580156101a3573d6000803e3d6000fd5b505050506040513d60208110156101b957600080fd5b5051604080517f4e71e0c800000000000000000000000000000000000000000000000000000000815290519194506e075efbee23fe2de1bd0b7690883cc991634e71e0c89160048082019260009290919082900301818387803b15801561021f57600080fd5b505af1158015610233573d6000803e3d6000fd5b505050506e085d4780b73119b644ae5ecd22b376600160a060020a0316634e71e0c86040518163ffffffff1660e060020a028152600401600060405180830381600087803b15801561028457600080fd5b505af1158015610298573d6000803e3d6000fd5b505050506e085d4780b73119b644ae5ecd22b376600160a060020a031663f7ea7a3d738dd5fbce2f6a956c3022ba3663759011dd51e73e600160a060020a03166318160ddd6040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561030c57600080fd5b505af1158015610320573d6000803e3d6000fd5b505050506040513d602081101561033657600080fd5b50516040805160e060020a63ffffffff8516028152600481019290925251602480830192600092919082900301818387803b15801561037457600080fd5b505af1158015610388573d6000803e3d6000fd5b50505050738dd5fbce2f6a956c3022ba3663759011dd51e73e600160a060020a0316637bb98a686040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156103de57600080fd5b505af11580156103f2573d6000803e3d6000fd5b505050506040513d602081101561040857600080fd5b5051604080517f3ed10b920000000000000000000000000000000000000000000000000000000081529051919350738dd5fbce2f6a956c3022ba3663759011dd51e73e91633ed10b92916004808201926020929091908290030181600087803b15801561047457600080fd5b505af1158015610488573d6000803e3d6000fd5b505050506040513d602081101561049e57600080fd5b5051604080517fa050975b000000000000000000000000000000000000000000000000000000008152600160a060020a038516600482015290519192506e075efbee23fe2de1bd0b7690883cc99163a050975b9160248082019260009290919082900301818387803b15801561051357600080fd5b505af1158015610527573d6000803e3d6000fd5b5050604080517fa050975b000000000000000000000000000000000000000000000000000000008152600160a060020a038516600482015290516e075efbee23fe2de1bd0b7690883cc9935063a050975b9250602480830192600092919082900301818387803b15801561059a57600080fd5b505af11580156105ae573d6000803e3d6000fd5b50506040805160e160020a6302c09a2f028152600160a060020a038616600482015290516e075efbee23fe2de1bd0b7690883cc99350630581345e9250602480830192600092919082900301818387803b15801561060b57600080fd5b505af115801561061f573d6000803e3d6000fd5b50506040805160e160020a6302c09a2f028152600160a060020a038516600482015290516e075efbee23fe2de1bd0b7690883cc99350630581345e9250602480830192600092919082900301818387803b15801561067c57600080fd5b505af1158015610690573d6000803e3d6000fd5b5050604080517fae11ea9b000000000000000000000000000000000000000000000000000000008152600160a060020a03861660048201526e085d4780b73119b644ae5ecd22b376602482015290516e075efbee23fe2de1bd0b7690883cc9935063ae11ea9b9250604480830192600092919082900301818387803b15801561071857600080fd5b505af115801561072c573d6000803e3d6000fd5b5050604080517fae11ea9b000000000000000000000000000000000000000000000000000000008152600160a060020a03851660048201526e085d4780b73119b644ae5ecd22b376602482015290516e075efbee23fe2de1bd0b7690883cc9935063ae11ea9b9250604480830192600092919082900301818387803b1580156107b457600080fd5b505af11580156107c8573d6000803e3d6000fd5b5050604080517ff2fde38b0000000000000000000000000000000000000000000000000000000081526e075efbee23fe2de1bd0b7690883cc9600482015290516e085d4780b73119b644ae5ecd22b376935063f2fde38b9250602480830192600092919082900301818387803b15801561084157600080fd5b505af1158015610855573d6000803e3d6000fd5b50506040805160e160020a6302c09a2f0281526e085d4780b73119b644ae5ecd22b376600482015290516e075efbee23fe2de1bd0b7690883cc99350630581345e9250602480830192600092919082900301818387803b1580156108b857600080fd5b505af11580156108cc573d6000803e3d6000fd5b5050604080517ff8e8b93d0000000000000000000000000000000000000000000000000000000081526e085d4780b73119b644ae5ecd22b376600482015290516e075efbee23fe2de1bd0b7690883cc9935063f8e8b93d9250602480830192600092919082900301818387803b15801561094557600080fd5b505af1158015610959573d6000803e3d6000fd5b5050604080517f9747145b0000000000000000000000000000000000000000000000000000000081526e085d4780b73119b644ae5ecd22b3766004820152600160a060020a0386811660248301528516604482015290516e075efbee23fe2de1bd0b7690883cc99350639747145b9250606480830192600092919082900301818387803b1580156109e957600080fd5b505af11580156109fd573d6000803e3d6000fd5b5050604080517fea669a8a0000000000000000000000000000000000000000000000000000000081526e013949f288172bd7e36837bddc7211600482015290516e075efbee23fe2de1bd0b7690883cc9935063ea669a8a9250602480830192600092919082900301818387803b158015610a7657600080fd5b505af1158015610a8a573d6000803e3d6000fd5b5050604080517f070485a90000000000000000000000000000000000000000000000000000000081526e027f6d87be8ade118d9ee56767d993600482015290516e075efbee23fe2de1bd0b7690883cc9935063070485a99250602480830192600092919082900301818387803b158015610b0357600080fd5b505af1158015610b17573d6000803e3d6000fd5b5050604080517fae11ea9b000000000000000000000000000000000000000000000000000000008152738dd5fbce2f6a956c3022ba3663759011dd51e73e600482015230600160a060020a0316602482015290516e075efbee23fe2de1bd0b7690883cc9935063ae11ea9b9250604480830192600092919082900301818387803b158015610ba457600080fd5b505af1158015610bb8573d6000803e3d6000fd5b50505050738dd5fbce2f6a956c3022ba3663759011dd51e73e600160a060020a0316634e71e0c86040518163ffffffff1660e060020a028152600401600060405180830381600087803b158015610c0e57600080fd5b505af1158015610c22573d6000803e3d6000fd5b5050604080517f1d2d84000000000000000000000000000000000000000000000000000000000081526e085d4780b73119b644ae5ecd22b37660048201529051738dd5fbce2f6a956c3022ba3663759011dd51e73e9350631d2d84009250602480830192600092919082900301818387803b158015610ca057600080fd5b505af1158015610cb4573d6000803e3d6000fd5b5050604080517ff2fde38b0000000000000000000000000000000000000000000000000000000081526e075efbee23fe2de1bd0b7690883cc960048201529051738dd5fbce2f6a956c3022ba3663759011dd51e73e935063f2fde38b9250602480830192600092919082900301818387803b158015610d3257600080fd5b505af1158015610d46573d6000803e3d6000fd5b50506040805160e160020a6302c09a2f028152738dd5fbce2f6a956c3022ba3663759011dd51e73e600482015290516e075efbee23fe2de1bd0b7690883cc99350630581345e9250602480830192600092919082900301818387803b158015610dae57600080fd5b505af1158015610dc2573d6000803e3d6000fd5b5050604080517ff2fde38b000000000000000000000000000000000000000000000000000000008152600160a060020a038716600482015290516e075efbee23fe2de1bd0b7690883cc9935063f2fde38b9250602480830192600092919082900301818387803b158015610e3557600080fd5b505af1158015610e49573d6000803e3d6000fd5b50505050505050565b6e075efbee23fe2de1bd0b7690883cc981565b6e027f6d87be8ade118d9ee56767d993815600a165627a7a723058202a59e33c10cc71b3385f56728201fb899b92430c973a99a435f064d0adb33f290029"
}