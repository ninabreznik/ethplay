{
  "address": "0x5ee66ba3e2f8c870866cc6892b985314e904d2c0",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "OracleAdapter",
  "compilerVersion": "v0.5.7+commit.6da8b019",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2019-04-29\n*/\n\n// File: contracts/interfaces/IERC173.sol\n\npragma solidity ^0.5.7;\n\n\n/// @title ERC-173 Contract Ownership Standard\n/// @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-173.md\n///  Note: the ERC-165 identifier for this interface is 0x7f5828d0\ncontract IERC173 {\n    /// @dev This emits when ownership of a contract changes.\n    event OwnershipTransferred(address indexed _previousOwner, address indexed _newOwner);\n\n    /// @notice Get the address of the owner\n    /// @return The address of the owner.\n    //// function owner() external view returns (address);\n\n    /// @notice Set the address of the new owner of the contract\n    /// @param _newOwner The address of the new owner of the contract\n    function transferOwnership(address _newOwner) external;\n}\n\n// File: contracts/commons/Ownable.sol\n\npragma solidity ^0.5.7;\n\n\n\ncontract Ownable is IERC173 {\n    address internal _owner;\n\n    modifier onlyOwner() {\n        require(msg.sender == _owner, \"The owner should be the sender\");\n        _;\n    }\n\n    constructor() public {\n        _owner = msg.sender;\n        emit OwnershipTransferred(address(0x0), msg.sender);\n    }\n\n    function owner() external view returns (address) {\n        return _owner;\n    }\n\n    /**\n        @dev Transfers the ownership of the contract.\n\n        @param _newOwner Address of the new owner\n    */\n    function transferOwnership(address _newOwner) external onlyOwner {\n        require(_newOwner != address(0), \"0x0 Is not a valid owner\");\n        emit OwnershipTransferred(_owner, _newOwner);\n        _owner = _newOwner;\n    }\n}\n\n// File: contracts/interfaces/IERC165.sol\n\npragma solidity ^0.5.7;\n\n\ninterface IERC165 {\n    /// @notice Query if a contract implements an interface\n    /// @param interfaceID The interface identifier, as specified in ERC-165\n    /// @dev Interface identification is specified in ERC-165. This function\n    ///  uses less than 30,000 gas.\n    /// @return `true` if the contract implements `interfaceID` and\n    ///  `interfaceID` is not 0xffffffff, `false` otherwise\n    function supportsInterface(bytes4 interfaceID) external view returns (bool);\n}\n\n// File: contracts/core/diaspore/interfaces/RateOracle.sol\n\npragma solidity ^0.5.7;\n\n\n\n/**\n    @dev Defines the interface of a standard Diaspore RCN Oracle,\n\n    The contract should also implement it's ERC165 interface: 0xa265d8e0\n\n    @notice Each oracle can only support one currency\n\n    @author Agustin Aguilar\n*/\ncontract RateOracle is IERC165 {\n    uint256 public constant VERSION = 5;\n    bytes4 internal constant RATE_ORACLE_INTERFACE = 0xa265d8e0;\n\n    constructor() internal {}\n\n    /**\n        3 or 4 letters symbol of the currency, Ej: ETH\n    */\n    function symbol() external view returns (string memory);\n\n    /**\n        Descriptive name of the currency, Ej: Ethereum\n    */\n    function name() external view returns (string memory);\n\n    /**\n        The number of decimals of the currency represented by this Oracle,\n            it should be the most common number of decimal places\n    */\n    function decimals() external view returns (uint256);\n\n    /**\n        The base token on which the sample is returned\n            should be the RCN Token address.\n    */\n    function token() external view returns (address);\n\n    /**\n        The currency symbol encoded on a UTF-8 Hex\n    */\n    function currency() external view returns (bytes32);\n\n    /**\n        The name of the Individual or Company in charge of this Oracle\n    */\n    function maintainer() external view returns (string memory);\n\n    /**\n        Returns the url where the oracle exposes a valid \"oracleData\" if needed\n    */\n    function url() external view returns (string memory);\n\n    /**\n        Returns a sample on how many token() are equals to how many currency()\n    */\n    function readSample(bytes calldata _data) external returns (uint256 _tokens, uint256 _equivalent);\n}\n\n// File: contracts/commons/ERC165.sol\n\npragma solidity ^0.5.7;\n\n\n\n/**\n * @title ERC165\n * @author Matt Condon (@shrugs)\n * @dev Implements ERC165 using a lookup table.\n */\ncontract ERC165 is IERC165 {\n    bytes4 private constant _InterfaceId_ERC165 = 0x01ffc9a7;\n    /**\n    * 0x01ffc9a7 ===\n    *   bytes4(keccak256('supportsInterface(bytes4)'))\n    */\n\n    /**\n    * @dev a mapping of interface id to whether or not it's supported\n    */\n    mapping(bytes4 => bool) private _supportedInterfaces;\n\n    /**\n    * @dev A contract implementing SupportsInterfaceWithLookup\n    * implement ERC165 itself\n    */\n    constructor()\n        internal\n    {\n        _registerInterface(_InterfaceId_ERC165);\n    }\n\n    /**\n    * @dev implement supportsInterface(bytes4) using a lookup table\n    */\n    function supportsInterface(bytes4 interfaceId)\n        external\n        view\n        returns (bool)\n    {\n        return _supportedInterfaces[interfaceId];\n    }\n\n    /**\n    * @dev internal method for registering an interface\n    */\n    function _registerInterface(bytes4 interfaceId)\n        internal\n    {\n        require(interfaceId != 0xffffffff, \"Can't register 0xffffffff\");\n        _supportedInterfaces[interfaceId] = true;\n    }\n}\n\n// File: contracts/core/basalt/utils/OwnableBasalt.sol\n\npragma solidity ^0.5.7;\n\n\ncontract OwnableBasalt {\n    address public owner;\n\n    modifier onlyOwner() {\n        require(msg.sender == owner, \"The owner should be the sender\");\n        _;\n    }\n\n    constructor() public {\n        owner = msg.sender;\n    }\n\n    /**\n        @dev Transfers the ownership of the contract.\n\n        @param _to Address of the new owner\n    */\n    function transferTo(address _to) public onlyOwner returns (bool) {\n        require(_to != address(0), \"0x0 Is not a valid owner\");\n        owner = _to;\n        return true;\n    }\n}\n\n// File: contracts/core/basalt/interfaces/Oracle.sol\n\npragma solidity ^0.5.7;\n\n\n\n/**\n    @dev Defines the interface of a standard RCN oracle.\n\n    The oracle is an agent in the RCN network that supplies a convertion rate between RCN and any other currency,\n    it's primarily used by the exchange but could be used by any other agent.\n*/\ncontract Oracle is OwnableBasalt {\n    uint256 public constant VERSION = 4;\n\n    event NewSymbol(bytes32 _currency);\n\n    mapping(bytes32 => bool) public supported;\n    bytes32[] public currencies;\n\n    /**\n        @dev Returns the url where the oracle exposes a valid \"oracleData\" if needed\n    */\n    function url() public view returns (string memory);\n\n    /**\n        @dev Returns a valid convertion rate from the currency given to RCN\n\n        @param symbol Symbol of the currency\n        @param data Generic data field, could be used for off-chain signing\n    */\n    function getRate(bytes32 symbol, bytes memory data) public returns (uint256 rate, uint256 decimals);\n\n    /**\n        @dev Adds a currency to the oracle, once added it cannot be removed\n\n        @param ticker Symbol of the currency\n\n        @return if the creation was done successfully\n    */\n    function addCurrency(string memory ticker) public onlyOwner returns (bool) {\n        bytes32 currency = encodeCurrency(ticker);\n        emit NewSymbol(currency);\n        supported[currency] = true;\n        currencies.push(currency);\n        return true;\n    }\n\n    /**\n        @return the currency encoded as a bytes32\n    */\n    function encodeCurrency(string memory currency) public pure returns (bytes32 o) {\n        require(bytes(currency).length <= 32);\n        assembly {\n            o := mload(add(currency, 32))\n        }\n    }\n\n    /**\n        @return the currency string from a encoded bytes32\n    */\n    function decodeCurrency(bytes32 b) public pure returns (string memory o) {\n        uint256 ns = 256;\n        while (true) {\n            if (ns == 0 || (b<<ns-8) != 0)\n                break;\n            ns -= 8;\n        }\n        assembly {\n            ns := div(ns, 8)\n            o := mload(0x40)\n            mstore(0x40, add(o, and(add(add(ns, 0x20), 0x1f), not(0x1f))))\n            mstore(o, ns)\n            mstore(add(o, 32), b)\n        }\n    }\n\n}\n\n// File: contracts/core/diaspore/utils/OracleAdapter.sol\n\npragma solidity ^0.5.7;\n\n\n\n\n\ncontract OracleAdapter is Ownable, RateOracle, ERC165 {\n    Oracle public legacyOracle;\n\n    string private isymbol;\n    string private iname;\n    string private imaintainer;\n\n    uint256 private idecimals;\n    bytes32 private icurrency;\n\n    address private itoken;\n\n    constructor(\n        Oracle _legacyOracle,\n        string memory _symbol,\n        string memory _name,\n        string memory _maintainer,\n        uint256 _decimals,\n        bytes32 _currency,\n        address _token\n    ) public {\n        legacyOracle = _legacyOracle;\n        isymbol = _symbol;\n        iname = _name;\n        imaintainer = _maintainer;\n        idecimals = _decimals;\n        icurrency = _currency;\n        itoken = _token;\n\n        _registerInterface(RATE_ORACLE_INTERFACE);\n    }\n\n    function symbol() external view returns (string memory) { return isymbol; }\n\n    function name() external view returns (string memory) { return iname; }\n\n    function decimals() external view returns (uint256) { return idecimals; }\n\n    function token() external view returns (address) { return itoken; }\n\n    function currency() external view returns (bytes32) { return icurrency; }\n\n    function maintainer() external view returns (string memory) { return imaintainer; }\n\n    function url() external view returns (string memory) {\n        return legacyOracle.url();\n    }\n    \n    function setMaintainer(string calldata _maintainer) external onlyOwner {\n        imaintainer = _maintainer;\n    }\n    \n    function setName(string calldata _name) external onlyOwner {\n        iname = _name;\n    }\n    \n    function setLegacyOracle(Oracle _legacyOracle) external onlyOwner {\n        legacyOracle = _legacyOracle;\n    }\n\n    function readSample(bytes calldata _data) external returns (uint256 _tokens, uint256 _equivalent) {\n        (_tokens, _equivalent) = legacyOracle.getRate(icurrency, _data);\n        _equivalent = 10 ** _equivalent;\n    }\n}",
  "bytecode": "60806040523480156200001157600080fd5b5060405162000e2d38038062000e2d833981018060405260e08110156200003757600080fd5b8151602083018051919392830192916401000000008111156200005957600080fd5b820160208101848111156200006d57600080fd5b81516401000000008111828201871017156200008857600080fd5b50509291906020018051640100000000811115620000a557600080fd5b82016020810184811115620000b957600080fd5b8151640100000000811182820187101715620000d457600080fd5b50509291906020018051640100000000811115620000f157600080fd5b820160208101848111156200010557600080fd5b81516401000000008111828201871017156200012057600080fd5b50506020820151604080840151606090940151600080546001600160a01b0319163390811782559251949750929550929091907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908290a3620001906301ffc9a760e01b6200025160201b60201c565b600280546001600160a01b0319166001600160a01b0389161790558551620001c090600390602089019062000323565b508451620001d690600490602088019062000323565b508351620001ec90600590602087019062000323565b5060068390556007829055600880546001600160a01b0319166001600160a01b038316179055620002447fa265d8e00000000000000000000000000000000000000000000000000000000062000251602090811b901c565b50505050505050620003c8565b7fffffffff000000000000000000000000000000000000000000000000000000008082161415620002e357604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601960248201527f43616e2774207265676973746572203078666666666666666600000000000000604482015290519081900360640190fd5b7fffffffff00000000000000000000000000000000000000000000000000000000166000908152600160208190526040909120805460ff19169091179055565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200036657805160ff191683800117855562000396565b8280016001018555821562000396579182015b828111156200039657825182559160200191906001019062000379565b50620003a4929150620003a8565b5090565b620003c591905b80821115620003a45760008155600101620003af565b90565b610a5580620003d86000396000f3fe608060405234801561001057600080fd5b50600436106101005760003560e01c8063996107aa11610097578063e5a6b10f11610066578063e5a6b10f146103a6578063f2fde38b146103ae578063fc0c546a146103d4578063ffa1ad74146103dc57610100565b8063996107aa1461023b578063b077c09b14610243578063c47f0027146102ca578063d92714eb1461033857610100565b80635600f04f116100d35780635600f04f146101ff5780638da5cb5b1461020757806395d89b411461022b5780639850d32b1461023357610100565b806301ffc9a71461010557806306fdde0314610140578063300ec434146101bd578063313ce567146101e5575b600080fd5b61012c6004803603602081101561011b57600080fd5b50356001600160e01b0319166103e4565b604080519115158252519081900360200190f35b610148610403565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561018257818101518382015260200161016a565b50505050905090810190601f1680156101af5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6101e3600480360360208110156101d357600080fd5b50356001600160a01b031661049a565b005b6101ed61050c565b60408051918252519081900360200190f35b610148610512565b61020f6105e5565b604080516001600160a01b039092168252519081900360200190f35b6101486105f4565b610148610655565b61020f6106b6565b6102b16004803603602081101561025957600080fd5b810190602081018135600160201b81111561027357600080fd5b82018360208201111561028557600080fd5b803590602001918460018302840111600160201b831117156102a657600080fd5b5090925090506106c5565b6040805192835260208301919091528051918290030190f35b6101e3600480360360208110156102e057600080fd5b810190602081018135600160201b8111156102fa57600080fd5b82018360208201111561030c57600080fd5b803590602001918460018302840111600160201b8311171561032d57600080fd5b509092509050610791565b6101e36004803603602081101561034e57600080fd5b810190602081018135600160201b81111561036857600080fd5b82018360208201111561037a57600080fd5b803590602001918460018302840111600160201b8311171561039b57600080fd5b5090925090506107f2565b6101ed61084e565b6101e3600480360360208110156103c457600080fd5b50356001600160a01b0316610854565b61020f61095d565b6101ed61096c565b6001600160e01b03191660009081526001602052604090205460ff1690565b60048054604080516020601f600260001961010060018816150201909516949094049384018190048102820181019092528281526060939092909183018282801561048f5780601f106104645761010080835404028352916020019161048f565b820191906000526020600020905b81548152906001019060200180831161047257829003601f168201915b505050505090505b90565b6000546001600160a01b031633146104ea5760408051600160e51b62461bcd02815260206004820152601e6024820152600080516020610a0a833981519152604482015290519081900360640190fd5b600280546001600160a01b0319166001600160a01b0392909216919091179055565b60065490565b60025460408051600160e01b635600f04f02815290516060926001600160a01b031691635600f04f916004808301926000929190829003018186803b15801561055a57600080fd5b505afa15801561056e573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052602081101561059757600080fd5b810190808051600160201b8111156105ae57600080fd5b820160208101848111156105c157600080fd5b8151600160201b8111828201871017156105da57600080fd5b509094505050505090565b6000546001600160a01b031690565b60038054604080516020601f600260001961010060018816150201909516949094049384018190048102820181019092528281526060939092909183018282801561048f5780601f106104645761010080835404028352916020019161048f565b60058054604080516020601f600260001961010060018816150201909516949094049384018190048102820181019092528281526060939092909183018282801561048f5780601f106104645761010080835404028352916020019161048f565b6002546001600160a01b031681565b60025460075460408051600160e11b631d71357d02815260048101838152602482019283526044820186905260009485946001600160a01b0390911693633ae26afa9391928992899290606401848480828437600081840152601f19601f8201169050808301925050509450505050506040805180830381600087803b15801561074e57600080fd5b505af1158015610762573d6000803e3d6000fd5b505050506040513d604081101561077857600080fd5b5080516020909101519095600a9190910a945092505050565b6000546001600160a01b031633146107e15760408051600160e51b62461bcd02815260206004820152601e6024820152600080516020610a0a833981519152604482015290519081900360640190fd5b6107ed60048383610971565b505050565b6000546001600160a01b031633146108425760408051600160e51b62461bcd02815260206004820152601e6024820152600080516020610a0a833981519152604482015290519081900360640190fd5b6107ed60058383610971565b60075490565b6000546001600160a01b031633146108a45760408051600160e51b62461bcd02815260206004820152601e6024820152600080516020610a0a833981519152604482015290519081900360640190fd5b6001600160a01b0381166109025760408051600160e51b62461bcd02815260206004820152601860248201527f307830204973206e6f7420612076616c6964206f776e65720000000000000000604482015290519081900360640190fd5b600080546040516001600160a01b03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a3600080546001600160a01b0319166001600160a01b0392909216919091179055565b6008546001600160a01b031690565b600581565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106109b25782800160ff198235161785556109df565b828001600101855582156109df579182015b828111156109df5782358255916020019190600101906109c4565b506109eb9291506109ef565b5090565b61049791905b808211156109eb57600081556001016109f556fe546865206f776e65722073686f756c64206265207468652073656e6465720000a165627a7a7230582049e28e77f0a8ae4ecc89a29b603f6f04ae9df95346155cb9141e0e518e788d50002900000000000000000000000033332025ad35a821eec5f1e10459222c8e4c62c300000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000000024152530000000000000000000000000000000000000000000000000000000000000000000000000000000000f970b8e36e23f7fc3fd752eea86f8be8d83375a600000000000000000000000000000000000000000000000000000000000000034152530000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e417267656e74696e65207065736f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
  "constructorArguments": "00000000000000000000000033332025ad35a821eec5f1e10459222c8e4c62c300000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000000024152530000000000000000000000000000000000000000000000000000000000000000000000000000000000f970b8e36e23f7fc3fd752eea86f8be8d83375a600000000000000000000000000000000000000000000000000000000000000034152530000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e417267656e74696e65207065736f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
}