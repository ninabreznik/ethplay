{
  "address": "0x45f918d15d58e38a41a712798a0b9e5ab7d81dd7",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "Sablier",
  "compilerVersion": "v0.5.8+commit.23d335f2",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2019-05-29\n*/\n\n// File: contracts/interfaces/IERC1620.sol\n\npragma solidity 0.5.8;\n\n/// @title ERC-1620 Money Streaming Standard\n/// @dev See https://github.com/ethereum/eips/issues/1620\n\ninterface IERC1620 {\n\n    /// @dev This emits when streams are successfully created and added\n    ///  in the mapping object.\n    event CreateStream(\n        uint256 indexed streamId,\n        address indexed sender,\n        address indexed recipient,\n        address tokenAddress,\n        uint256 startBlock,\n        uint256 stopBlock,\n        uint256 payment,\n        uint256 interval\n    );\n\n    /// @dev This emits when the receiver of a stream withdraws a portion\n    ///  or all of their available funds from an ongoing stream, without\n    ///  stopping it. Note that we don't emit both the sender and the\n    ///  recipient's balance because only the recipient can withdraw\n    ///  while the stream is active.\n    event WithdrawFromStream(\n        uint256 indexed streamId,\n        address indexed recipient,\n        uint256 amount\n    );\n\n    /// @dev This emits when a stream is successfully redeemed and\n    ///  all involved parties get their share of the available funds.\n    event RedeemStream(\n        uint256 indexed streamId,\n        address indexed sender,\n        address indexed recipient,\n        uint256 senderAmount,\n        uint256 recipientAmount\n    );\n\n    /// @dev This emits when an update is successfully committed by\n    ///  one of the involved parties.\n    event ConfirmUpdate(\n        uint256 indexed streamId,\n        address indexed confirmer,\n        address newTokenAddress,\n        uint256 newStopBlock,\n        uint256 newPayment,\n        uint256 newInterval\n    );\n\n    /// @dev This emits when one of the involved parties revokes\n    ///  a proposed update to the stream.\n    event RevokeUpdate(\n        uint256 indexed streamId,\n        address indexed revoker,\n        address newTokenAddress,\n        uint256 newStopBlock,\n        uint256 newPayment,\n        uint256 newInterval\n    );\n\n    /// @dev This emits when an update (that is, modifications to\n    ///  payment rate, starting or stopping block) is successfully\n    ///  approved by all involved parties.\n    event ExecuteUpdate(\n        uint256 indexed streamId,\n        address indexed sender,\n        address indexed recipient,\n        address newTokenAddress,\n        uint256 newStopBlock,\n        uint256 newPayment,\n        uint256 newInterval\n    );\n\n    /// @notice Creates a new stream between `msg.sender` and `_recipient`\n    /// @dev Throws unless `msg.value` is exactly\n    ///  `_payment * ((_stopBlock - _startBlock) / _interval)`.\n    ///  Throws if `_startBlock` is not higher than `block.number`.\n    ///  Throws if `_stopBlock` is not higher than `_startBlock`.\n    ///  Throws if the total streaming duration `_stopBlock - _startBlock`\n    ///  is not a multiple of `_interval`.\n    /// @param _recipient The stream sender or the payer\n    /// @param _recipient The stream recipient or the payee\n    /// @param _tokenAddress The token contract address\n    /// @param _startBlock The starting time of the stream\n    /// @param _stopBlock The stopping time of the stream\n    /// @param _payment How much money moves from sender to recipient\n    /// @param _interval How often the `payment` moves from sender to recipient\n    function createStream(\n        address _sender,\n        address _recipient,\n        address _tokenAddress,\n        uint256 _startBlock,\n        uint256 _stopBlock,\n        uint256 _payment,\n        uint256 _interval\n    )\n    external;\n\n    /// @notice Withdraws all or a fraction of the available funds\n    /// @dev If the stream ended and the recipient withdraws the deposit in full,\n    ///  the stream object gets deleted after this operation\n    ///  to save gas for the user and optimise contract storage.\n    ///  Throws if `_streamId` doesn't point to a valid stream.\n    ///  Throws if `msg.sender` is not the recipient of the given `streamId`\n    /// @param _streamId The stream to withdraw from\n    /// @param _funds The amount of money to withdraw\n    function withdrawFromStream(\n        uint256 _streamId,\n        uint256 _funds\n    )\n    external;\n\n    /// @notice Redeems the stream by distributing the funds to the sender and the recipient\n    /// @dev The stream object gets deleted after this operation\n    ///  to save gas for the user and optimise contract storage.\n    ///  Throws if `_streamId` doesn't point to a valid stream.\n    ///  Throws unless `msg.sender` is either the sender or the recipient\n    ///  of the given `streamId`.\n    /// @param _streamId The stream to stop\n    function redeemStream(\n        uint256 _streamId\n    )\n    external;\n\n    /// @notice Signals one party's willingness to update the stream\n    /// @dev Throws if `_streamId` doesn't point to a valid stream.\n    ///  Not executed prior to everyone agreeing to the new terms.\n    ///  In terms of validation, it works exactly the same as the `createStream` function.\n    /// @param _streamId The stream to update\n    /// @param _tokenAddress The token contract address\n    /// @param _stopBlock The new stopping time of the stream\n    /// @param _payment How much money moves from sender to recipient\n    /// @param _interval How often the `payment` moves from sender to recipient\n    function confirmUpdate(\n        uint256 _streamId,\n        address _tokenAddress,\n        uint256 _stopBlock,\n        uint256 _payment,\n        uint256 _interval\n    )\n    external;\n\n    /// @notice Revokes an update proposed by one of the involved parties\n    /// @dev Throws if `_streamId` doesn't point to a valid stream. The parameters\n    ///  are merely for logging purposes.\n    function revokeUpdate(\n        uint256 _streamId,\n        address _tokenAddress,\n        uint256 _stopBlock,\n        uint256 _payment,\n        uint256 _interval\n    )\n    external;\n\n    /// @notice Returns available funds for the given stream id and address\n    /// @dev Streams assigned to the zero address are considered invalid, and\n    ///  this function throws for queries about the zero address.\n    /// @param _streamId The stream for whom to query the balance\n    /// @param _addr The address for whom to query the balance\n    /// @return The total funds available to `addr` to withdraw\n    function balanceOf(\n        uint256 _streamId,\n        address _addr\n    )\n    external\n    view\n    returns (\n        uint256 balance\n    );\n\n    /// @notice Returns the full stream data\n    /// @dev Throws if `_streamId` doesn't point to a valid stream.\n    /// @param _streamId The stream to return data for\n    function getStream(\n        uint256 _streamId\n    )\n    external\n    view\n    returns (\n        address _sender,\n        address _recipient,\n        address _tokenAddress,\n        uint256 _balance,\n        uint256 _startBlock,\n        uint256 _stopBlock,\n        uint256 _payment,\n        uint256 _interval\n    );\n}\n\n// File: contracts/zeppelin/IERC20.sol\n\npragma solidity 0.5.8;\n\n/// @title ERC20 interface\n/// @author /// OpenZeppelin Community - <[email protected]>\n/// @dev see https://eips.ethereum.org/EIPS/eip-20\n\ninterface IERC20 {\n    function transfer(address to, uint256 value) external returns (bool);\n\n    function approve(address spender, uint256 value) external returns (bool);\n\n    function transferFrom(address from, address to, uint256 value) external returns (bool);\n\n    function totalSupply() external view returns (uint256);\n\n    function balanceOf(address who) external view returns (uint256);\n\n    function allowance(address owner, address spender) external view returns (uint256);\n\n    event Transfer(address indexed from, address indexed to, uint256 value);\n\n    event Approval(address indexed owner, address indexed spender, uint256 value);\n}\n\n// File: contracts/zeppelin/SafeMath.sol\n\npragma solidity 0.5.8;\n\n/// @title SafeMath\n/// @author OpenZeppelin Community - <[email protected]>\n/// @dev Unsigned math operations with safety checks that revert on error\n\nlibrary SafeMath {\n    /**\n     * @dev Multiplies two unsigned integers, reverts on overflow.\n     */\n    function mul(uint256 a, uint256 b) internal pure returns (uint256) {\n        // Gas optimization: this is cheaper than requiring 'a' not being zero, but the\n        // benefit is lost if 'b' is also tested.\n        // See: https://github.com/OpenZeppelin/openzeppelin-solidity/pull/522\n        if (a == 0) {\n            return 0;\n        }\n\n        uint256 c = a * b;\n        require(c / a == b);\n\n        return c;\n    }\n\n    /**\n     * @dev Integer division of two unsigned integers truncating the quotient, reverts on division by zero.\n     */\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\n        // Solidity only automatically asserts when dividing by 0\n        require(b > 0);\n        uint256 c = a / b;\n        // assert(a == b * c + a % b); // There is no case in which this doesn't hold\n\n        return c;\n    }\n\n    /**\n     * @dev Subtracts two unsigned integers, reverts on overflow (i.e. if subtrahend is greater than minuend).\n     */\n    function sub(uint256 a, uint256 b) internal pure returns (uint256) {\n        require(b <= a);\n        uint256 c = a - b;\n\n        return c;\n    }\n\n    /**\n     * @dev Adds two unsigned integers, reverts on overflow.\n     */\n    function add(uint256 a, uint256 b) internal pure returns (uint256) {\n        uint256 c = a + b;\n        require(c >= a);\n\n        return c;\n    }\n\n    /**\n     * @dev Divides two unsigned integers and returns the remainder (unsigned integer modulo),\n     * reverts when dividing by zero.\n     */\n    function mod(uint256 a, uint256 b) internal pure returns (uint256) {\n        require(b != 0);\n        return a % b;\n    }\n}\n\n// File: contracts/Sablier.sol\n\npragma solidity 0.5.8;\n\n\n\n\n/// @title Sablier - ERC Money Streaming Implementation\n/// @author Paul Berg - <[email protected]>\n\ncontract Sablier is IERC1620 {\n    using SafeMath for uint256;\n\n    /**\n     * Types\n     */\n    struct Timeframe {\n        uint256 start;\n        uint256 stop;\n    }\n\n    struct Rate {\n        uint256 payment;\n        uint256 interval;\n    }\n\n    struct Stream {\n        address sender;\n        address recipient;\n        address tokenAddress;\n        Timeframe timeframe;\n        Rate rate;\n        uint256 balance;\n    }\n\n    /**\n     * Storage\n     */\n    mapping(uint256 => Stream) private streams;\n    uint256 private streamNonce;\n    mapping(uint256 => mapping(address => bool)) private updates;\n\n    /**\n     * Events\n     */\n    event CreateStream(\n        uint256 indexed streamId,\n        address indexed sender,\n        address indexed recipient,\n        address tokenAddress,\n        uint256 startBlock,\n        uint256 stopBlock,\n        uint256 payment,\n        uint256 interval,\n        uint256 deposit\n    );\n\n    event WithdrawFromStream(\n        uint256 indexed streamId,\n        address indexed recipient,\n        uint256 amount\n    );\n\n    event RedeemStream(\n        uint256 indexed streamId,\n        address indexed sender,\n        address indexed recipient,\n        uint256 senderAmount,\n        uint256 recipientAmount\n    );\n\n    event ConfirmUpdate(\n        uint256 indexed streamId,\n        address indexed confirmer,\n        address newTokenAddress,\n        uint256 newStopBlock,\n        uint256 newPayment,\n        uint256 newInterval\n    );\n\n    event RevokeUpdate(\n        uint256 indexed streamId,\n        address indexed revoker,\n        address newTokenAddress,\n        uint256 newStopBlock,\n        uint256 newPayment,\n        uint256 newInterval\n    );\n\n    event ExecuteUpdate(\n        uint256 indexed streamId,\n        address indexed sender,\n        address indexed recipient,\n        address newTokenAddress,\n        uint256 newStopBlock,\n        uint256 newPayment,\n        uint256 newInterval\n    );\n\n    /*\n    * Modifiers\n    */\n    modifier onlyRecipient(uint256 _streamId) {\n        require(\n            streams[_streamId].recipient == msg.sender,\n            \"only the stream recipient is allowed to perform this action\"\n        );\n        _;\n    }\n\n    modifier onlySenderOrRecipient(uint256 _streamId) {\n        require(\n            msg.sender == streams[_streamId].sender ||\n            msg.sender == streams[_streamId].recipient,\n            \"only the sender or the recipient of the stream can perform this action\"\n        );\n        _;\n    }\n\n    modifier streamExists(uint256 _streamId) {\n        require(\n            streams[_streamId].sender != address(0x0), \"stream doesn't exist\");\n        _;\n    }\n\n    modifier updateConfirmed(uint256 _streamId, address _addr) {\n        require(\n            updates[_streamId][_addr] == true,\n            \"msg.sender has not confirmed the update\"\n        );\n        _;\n    }\n\n    /**\n     * Functions\n     */\n    constructor() public {\n        streamNonce = 1;\n    }\n\n    function balanceOf(uint256 _streamId, address _addr)\n    public\n    view\n    streamExists(_streamId)\n    returns (uint256 balance)\n    {\n        Stream memory stream = streams[_streamId];\n        uint256 deposit = depositOf(_streamId);\n        uint256 delta = deltaOf(_streamId);\n        uint256 funds = delta.div(stream.rate.interval).mul(stream.rate.payment);\n\n        if (stream.balance != deposit)\n            funds = funds.sub(deposit.sub(stream.balance));\n\n        if (_addr == stream.recipient) {\n            return funds;\n        } else if (_addr == stream.sender) {\n            return stream.balance.sub(funds);\n        } else {\n            return 0;\n        }\n    }\n\n    function getStream(uint256 _streamId)\n    public\n    view\n    streamExists(_streamId)\n    returns (\n        address sender,\n        address recipient,\n        address tokenAddress,\n        uint256 balance,\n        uint256 startBlock,\n        uint256 stopBlock,\n        uint256 payment,\n        uint256 interval\n    )\n    {\n        Stream memory stream = streams[_streamId];\n        return (\n            stream.sender,\n            stream.recipient,\n            stream.tokenAddress,\n            stream.balance,\n            stream.timeframe.start,\n            stream.timeframe.stop,\n            stream.rate.payment,\n            stream.rate.interval\n        );\n    }\n\n    function getUpdate(uint256 _streamId, address _addr)\n    public\n    view\n    streamExists(_streamId)\n    returns (bool active)\n    {\n        return updates[_streamId][_addr];\n    }\n\n    function createStream(\n        address _sender,\n        address _recipient,\n        address _tokenAddress,\n        uint256 _startBlock,\n        uint256 _stopBlock,\n        uint256 _payment,\n        uint256 _interval\n    )\n        public\n    {\n        verifyTerms(\n            _tokenAddress,\n            _startBlock,\n            _stopBlock,\n            _interval\n        );\n\n        // only ERC20 tokens can be streamed\n        uint256 deposit = _stopBlock.sub(_startBlock).div(_interval).mul(_payment);\n        IERC20 tokenContract = IERC20(_tokenAddress);\n        uint256 allowance = tokenContract.allowance(_sender, address(this));\n        require(allowance >= deposit, \"contract not allowed to transfer enough tokens\");\n\n        // create and log the stream if the deposit is okay\n        streams[streamNonce] = Stream({\n            balance : deposit,\n            sender : _sender,\n            recipient : _recipient,\n            tokenAddress : _tokenAddress,\n            timeframe : Timeframe(_startBlock, _stopBlock),\n            rate : Rate(_payment, _interval)\n        });\n        emit CreateStream(\n            streamNonce,\n            _sender,\n            _recipient,\n            _tokenAddress,\n            _startBlock,\n            _stopBlock,\n            _payment,\n            _interval,\n            deposit\n        );\n        streamNonce = streamNonce.add(1);\n\n        // apply Checks-Effects-Interactions\n        tokenContract.transferFrom(_sender, address(this), deposit);\n    }\n\n    function withdrawFromStream(\n        uint256 _streamId,\n        uint256 _amount\n    )\n    public\n    streamExists(_streamId)\n    onlyRecipient(_streamId)\n    {\n        Stream memory stream = streams[_streamId];\n        uint256 availableFunds = balanceOf(_streamId, stream.recipient);\n        require(availableFunds >= _amount, \"not enough funds\");\n\n        streams[_streamId].balance = streams[_streamId].balance.sub(_amount);\n        emit WithdrawFromStream(_streamId, stream.recipient, _amount);\n\n        // saving gas\n        uint256 deposit = depositOf(_streamId);\n        if (_amount == deposit) {\n            delete streams[_streamId];\n            updates[_streamId][stream.sender] = false;\n            updates[_streamId][stream.recipient] = false;\n        }\n\n        // saving gas by checking beforehand\n        if (_amount > 0)\n            IERC20(stream.tokenAddress).transfer(stream.recipient, _amount);\n    }\n\n    function redeemStream(uint256 _streamId)\n    public\n    streamExists(_streamId)\n    onlySenderOrRecipient(_streamId)\n    {\n        Stream memory stream = streams[_streamId];\n        uint256 senderAmount = balanceOf(_streamId, stream.sender);\n        uint256 recipientAmount = balanceOf(_streamId, stream.recipient);\n        emit RedeemStream(\n            _streamId,\n            stream.sender,\n            stream.recipient,\n            senderAmount,\n            recipientAmount\n        );\n\n        // saving gas\n        delete streams[_streamId];\n        updates[_streamId][stream.sender] = false;\n        updates[_streamId][stream.recipient] = false;\n\n        // reverts when the token address is not an ERC20 contract\n        IERC20 tokenContract = IERC20(stream.tokenAddress);\n        // saving gas by checking beforehand\n        if (recipientAmount > 0)\n            tokenContract.transfer(stream.recipient, recipientAmount);\n        if (senderAmount > 0)\n            tokenContract.transfer(stream.sender, senderAmount);\n    }\n\n    function confirmUpdate(\n        uint256 _streamId,\n        address _tokenAddress,\n        uint256 _stopBlock,\n        uint256 _payment,\n        uint256 _interval\n    )\n    public\n    streamExists(_streamId)\n    onlySenderOrRecipient(_streamId)\n    {\n        onlyNewTerms(\n            _streamId,\n            _tokenAddress,\n            _stopBlock,\n            _payment,\n            _interval\n        );\n        verifyTerms(\n            _tokenAddress,\n            block.number,\n            _stopBlock,\n            _interval\n        );\n\n        emit ConfirmUpdate(\n            _streamId,\n            msg.sender,\n            _tokenAddress,\n            _stopBlock,\n            _payment,\n            _interval\n        );\n        updates[_streamId][msg.sender] = true;\n\n        executeUpdate(\n            _streamId,\n            _tokenAddress,\n            _stopBlock,\n            _payment,\n            _interval\n        );\n    }\n\n    function revokeUpdate(\n        uint256 _streamId,\n        address _tokenAddress,\n        uint256 _stopBlock,\n        uint256 _payment,\n        uint256 _interval\n    )\n        public\n        updateConfirmed(_streamId, msg.sender)\n    {\n        emit RevokeUpdate(\n            _streamId,\n            msg.sender,\n            _tokenAddress,\n            _stopBlock,\n            _payment,\n            _interval\n        );\n        updates[_streamId][msg.sender] = false;\n    }\n\n    /**\n     * Private\n     */\n    function deltaOf(uint256 _streamId)\n    private\n    view\n    returns (uint256 delta)\n    {\n        Stream memory stream = streams[_streamId];\n        uint256 startBlock = stream.timeframe.start;\n        uint256 stopBlock = stream.timeframe.stop;\n\n        // before the start of the stream\n        if (block.number <= startBlock)\n            return 0;\n\n        // during the stream\n        if (block.number <= stopBlock)\n            return block.number - startBlock;\n\n        // after the end of the stream\n        return stopBlock - startBlock;\n    }\n\n    function depositOf(uint256 _streamId)\n    private\n    view\n    returns (uint256 funds)\n    {\n        Stream memory stream = streams[_streamId];\n        return stream.timeframe.stop\n            .sub(stream.timeframe.start)\n            .div(stream.rate.interval)\n            .mul(stream.rate.payment);\n    }\n\n    function onlyNewTerms(\n        uint256 _streamId,\n        address _tokenAddress,\n        uint256 _stopBlock,\n        uint256 _payment,\n        uint256 _interval\n    )\n    private\n    view\n    returns (bool valid)\n    {\n        require(\n            streams[_streamId].tokenAddress != _tokenAddress ||\n            streams[_streamId].timeframe.stop != _stopBlock ||\n            streams[_streamId].rate.payment != _payment ||\n            streams[_streamId].rate.interval != _interval,\n            \"stream has these terms already\"\n        );\n        return true;\n    }\n\n    function verifyTerms(\n        address _tokenAddress,\n        uint256 _startBlock,\n        uint256 _stopBlock,\n        uint256 _interval\n    )\n    private\n    view\n    returns (bool valid)\n    {\n        require(\n            _tokenAddress != address(0x0),\n            \"token contract address needs to be provided\"\n        );\n        require(\n            _startBlock >= block.number,\n            \"the start block needs to be higher than the current block number\"\n        );\n        require(\n            _stopBlock > _startBlock,\n            \"the stop block needs to be higher than the start block\"\n        );\n        uint256 delta = _stopBlock - _startBlock;\n        require(\n            delta >= _interval,\n            \"the block difference needs to be higher than the payment interval\"\n        );\n        require(\n            delta.mod(_interval) == 0,\n            \"the block difference needs to be a multiple of the payment interval\"\n        );\n        return true;\n    }\n\n    function executeUpdate(\n        uint256 _streamId,\n        address _tokenAddress,\n        uint256 _stopBlock,\n        uint256 _payment,\n        uint256 _interval\n    )\n        private\n        streamExists(_streamId)\n    {\n        Stream memory stream = streams[_streamId];\n        if (updates[_streamId][stream.sender] == false)\n            return;\n        if (updates[_streamId][stream.recipient] == false)\n            return;\n\n        // adjust stop block\n        uint256 remainder = _stopBlock.sub(block.number).mod(_interval);\n        uint256 adjustedStopBlock = _stopBlock.sub(remainder);\n        emit ExecuteUpdate(\n            _streamId,\n            stream.sender,\n            stream.recipient,\n            _tokenAddress,\n            adjustedStopBlock,\n            _payment,\n            _interval\n        );\n        updates[_streamId][stream.sender] = false;\n        updates[_streamId][stream.recipient] = false;\n\n        redeemStream(_streamId);\n        createStream(\n            stream.sender,\n            stream.recipient,\n            _tokenAddress,\n            block.number,\n            adjustedStopBlock,\n            _payment,\n            _interval\n        );\n    }\n}",
  "abi": "[{\"constant\":true,\"inputs\":[{\"name\":\"_streamId\",\"type\":\"uint256\"},{\"name\":\"_addr\",\"type\":\"address\"}],\"name\":\"getUpdate\",\"outputs\":[{\"name\":\"active\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_streamId\",\"type\":\"uint256\"},{\"name\":\"_addr\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"balance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_streamId\",\"type\":\"uint256\"}],\"name\":\"redeemStream\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_streamId\",\"type\":\"uint256\"},{\"name\":\"_tokenAddress\",\"type\":\"address\"},{\"name\":\"_stopBlock\",\"type\":\"uint256\"},{\"name\":\"_payment\",\"type\":\"uint256\"},{\"name\":\"_interval\",\"type\":\"uint256\"}],\"name\":\"confirmUpdate\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_streamId\",\"type\":\"uint256\"},{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"withdrawFromStream\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_streamId\",\"type\":\"uint256\"}],\"name\":\"getStream\",\"outputs\":[{\"name\":\"sender\",\"type\":\"address\"},{\"name\":\"recipient\",\"type\":\"address\"},{\"name\":\"tokenAddress\",\"type\":\"address\"},{\"name\":\"balance\",\"type\":\"uint256\"},{\"name\":\"startBlock\",\"type\":\"uint256\"},{\"name\":\"stopBlock\",\"type\":\"uint256\"},{\"name\":\"payment\",\"type\":\"uint256\"},{\"name\":\"interval\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_streamId\",\"type\":\"uint256\"},{\"name\":\"_tokenAddress\",\"type\":\"address\"},{\"name\":\"_stopBlock\",\"type\":\"uint256\"},{\"name\":\"_payment\",\"type\":\"uint256\"},{\"name\":\"_interval\",\"type\":\"uint256\"}],\"name\":\"revokeUpdate\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sender\",\"type\":\"address\"},{\"name\":\"_recipient\",\"type\":\"address\"},{\"name\":\"_tokenAddress\",\"type\":\"address\"},{\"name\":\"_startBlock\",\"type\":\"uint256\"},{\"name\":\"_stopBlock\",\"type\":\"uint256\"},{\"name\":\"_payment\",\"type\":\"uint256\"},{\"name\":\"_interval\",\"type\":\"uint256\"}],\"name\":\"createStream\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"streamId\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"recipient\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"tokenAddress\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"startBlock\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"stopBlock\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"payment\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"interval\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"deposit\",\"type\":\"uint256\"}],\"name\":\"CreateStream\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"streamId\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"recipient\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"WithdrawFromStream\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"streamId\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"recipient\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"senderAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"recipientAmount\",\"type\":\"uint256\"}],\"name\":\"RedeemStream\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"streamId\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"confirmer\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"newTokenAddress\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"newStopBlock\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"newPayment\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"newInterval\",\"type\":\"uint256\"}],\"name\":\"ConfirmUpdate\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"streamId\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"revoker\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"newTokenAddress\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"newStopBlock\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"newPayment\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"newInterval\",\"type\":\"uint256\"}],\"name\":\"RevokeUpdate\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"streamId\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"recipient\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"newTokenAddress\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"newStopBlock\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"newPayment\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"newInterval\",\"type\":\"uint256\"}],\"name\":\"ExecuteUpdate\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"streamId\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"recipient\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"tokenAddress\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"startBlock\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"stopBlock\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"payment\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"interval\",\"type\":\"uint256\"}],\"name\":\"CreateStream\",\"type\":\"event\"}]",
  "bytecode": "608060405234801561001057600080fd5b5060018055611c15806100246000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c80637a9b2c6c1161005b5780637a9b2c6c14610168578063894e9a0d1461018b578063c5daca92146101f8578063c765e1f01461023657610088565b806326d056cc1461008d5780633656eec2146100cd5780634a97919c1461010b57806363aef6821461012a575b600080fd5b6100b9600480360360408110156100a357600080fd5b50803590602001356001600160a01b0316610284565b604080519115158252519081900360200190f35b6100f9600480360360408110156100e357600080fd5b50803590602001356001600160a01b0316610310565b60408051918252519081900360200190f35b6101286004803603602081101561012157600080fd5b50356104e8565b005b610128600480360360a081101561014057600080fd5b508035906001600160a01b036020820135169060408101359060608101359060800135610889565b6101286004803603604081101561017e57600080fd5b5080359060200135610a03565b6101a8600480360360208110156101a157600080fd5b5035610d47565b604080516001600160a01b03998a168152978916602089015295909716868601526060860193909352608085019190915260a084015260c083015260e08201929092529051908190036101000190f35b610128600480360360a081101561020e57600080fd5b508035906001600160a01b036020820135169060408101359060608101359060800135610e72565b610128600480360360e081101561024c57600080fd5b506001600160a01b03813581169160208101358216916040820135169060608101359060808101359060a08101359060c00135610f54565b60008281526020819052604081205483906001600160a01b03166102e05760408051600160e51b62461bcd02815260206004820152601460248201526000805160206119cf833981519152604482015290519081900360640190fd5b60008481526002602090815260408083206001600160a01b038716845290915290205460ff1691505b5092915050565b60008281526020819052604081205483906001600160a01b031661036c5760408051600160e51b62461bcd02815260206004820152601460248201526000805160206119cf833981519152604482015290519081900360640190fd5b610374611970565b50600084815260208181526040808320815160c08101835281546001600160a01b0390811682526001830154811682860152600283015416818401528251808401845260038301548152600483015481860152606082015282518084019093526005820154835260068201549383019390935260808301919091526007015460a082015290610402866112d8565b9050600061040f87611396565b9050600061044684608001516000015161043a8660800151602001518561145b90919063ffffffff16565b9063ffffffff61147f16565b9050828460a001511461047d5761047a61046d8560a00151856114ad90919063ffffffff16565b829063ffffffff6114ad16565b90505b83602001516001600160a01b0316876001600160a01b031614156104a657945061030992505050565b83516001600160a01b03888116911614156104db5760a08401516104d0908263ffffffff6114ad16565b955050505050610309565b6000955050505050610309565b60008181526020819052604090205481906001600160a01b03166105445760408051600160e51b62461bcd02815260206004820152601460248201526000805160206119cf833981519152604482015290519081900360640190fd5b60008281526020819052604090205482906001600160a01b031633148061058457506000818152602081905260409020600101546001600160a01b031633145b6105c257604051600160e51b62461bcd028152600401808060200182810382526046815260200180611b3b6046913960600191505060405180910390fd5b6105ca611970565b50600083815260208181526040808320815160c08101835281546001600160a01b0390811682526001830154811682860152600283015416818401528251808401845260038301548152600483015481860152606082015282518084019093526005820154835260068201549383019390935260808301919091526007015460a0820152805190919061065e908690610310565b90506000610670868460200151610310565b905082602001516001600160a01b031683600001516001600160a01b0316877ffe46ddcd2cd1b3f7fd71cc508b3764a00a1701e894d28090d11bf3f90fb8dea28585604051808381526020018281526020019250505060405180910390a460008681526020818152604080832080546001600160a01b03199081168255600182018054821690556002808301805490921690915560038201859055600482018590556005820185905560068201859055600790910184905580835281842087516001600160a01b039081168652818552838620805460ff199081169091558c875292855288850151168552909252918290208054909116905583015181156107f55760208085015160408051600160e01b63a9059cbb0281526001600160a01b0392831660048201526024810186905290519184169263a9059cbb926044808401938290030181600087803b1580156107c857600080fd5b505af11580156107dc573d6000803e3d6000fd5b505050506040513d60208110156107f257600080fd5b50505b821561088057835160408051600160e01b63a9059cbb0281526001600160a01b0392831660048201526024810186905290519183169163a9059cbb916044808201926020929091908290030181600087803b15801561085357600080fd5b505af1158015610867573d6000803e3d6000fd5b505050506040513d602081101561087d57600080fd5b50505b50505050505050565b60008581526020819052604090205485906001600160a01b03166108e55760408051600160e51b62461bcd02815260206004820152601460248201526000805160206119cf833981519152604482015290519081900360640190fd5b60008681526020819052604090205486906001600160a01b031633148061092557506000818152602081905260409020600101546001600160a01b031633145b61096357604051600160e51b62461bcd028152600401808060200182810382526046815260200180611b3b6046913960600191505060405180910390fd5b61097087878787876114c2565b5061097d86438786611597565b50604080516001600160a01b038816815260208101879052808201869052606081018590529051339189917f1cce0c004942fc2ff42b63a6cfb316ef8cb92a936961aaca2ca1eb31b890961f9181900360800190a360008781526002602090815260408083203384529091529020805460ff1916600117905561088087878787876116f8565b60008281526020819052604090205482906001600160a01b0316610a5f5760408051600160e51b62461bcd02815260206004820152601460248201526000805160206119cf833981519152604482015290519081900360640190fd5b60008381526020819052604090206001015483906001600160a01b03163314610abc57604051600160e51b62461bcd02815260040180806020018281038252603b815260200180611b81603b913960400191505060405180910390fd5b610ac4611970565b50600084815260208181526040808320815160c08101835281546001600160a01b039081168252600183015481168286019081526002840154909116828501528351808501855260038401548152600484015481870152606083015283518085019094526005830154845260068301549484019490945260808101929092526007015460a08201529051909190610b5c908790610310565b905084811015610bb65760408051600160e51b62461bcd02815260206004820152601060248201527f6e6f7420656e6f7567682066756e647300000000000000000000000000000000604482015290519081900360640190fd5b600086815260208190526040902060070154610bd8908663ffffffff6114ad16565b6000808881526020019081526020016000206007018190555081602001516001600160a01b0316867f36c3ab437e6a424ed25dc4bfdeb62706aa06558660fab2dab229d2555adaf89c876040518082815260200191505060405180910390a36000610c42876112d8565b905080861415610ce75760008781526020818152604080832080546001600160a01b03199081168255600182018054821690556002808301805490921690915560038201859055600482018590556005820185905560068201859055600790910184905580835281842087516001600160a01b039081168652818552838620805460ff199081169091558d875292855288850151168552909252909120805490911690555b8515610880576040808401516020808601518351600160e01b63a9059cbb0281526001600160a01b039182166004820152602481018b9052935192169263a9059cbb92604480830193928290030181600087803b15801561085357600080fd5b600081815260208190526040812054819081908190819081908190819089906001600160a01b0316610db15760408051600160e51b62461bcd02815260206004820152601460248201526000805160206119cf833981519152604482015290519081900360640190fd5b610db9611970565b50505060009788525050506020858152604095869020865160c08101885281546001600160a01b039081168252600183015481168285019081526002840154909116828a019081528951808b018b5260038501548152600485015481870152606084019081528a51808c01909b5260058501548b5260068501548b8701908152608085018c905260079095015460a08501819052935192519151905180519601519a519451929b919a9099509297509395509093509091565b60008581526002602090815260408083203380855292529091205486919060ff161515600114610ed657604051600160e51b62461bcd0281526004018080602001828103825260278152602001806119ef6027913960400191505060405180910390fd5b604080516001600160a01b038816815260208101879052808201869052606081018590529051339189917f652aa7dfd60d34135d95736f012daa465d0471f7c908dff2d69b9848680c68859181900360800190a350505060009384525050600260209081526040808420338552909152909120805460ff1916905550565b610f6085858584611597565b506000610f878361043a84610f7b888a63ffffffff6114ad16565b9063ffffffff61145b16565b60408051600160e11b636eb1769f0281526001600160a01b038b811660048301523060248301529151929350889260009284169163dd62ed3e916044808301926020929190829003018186803b158015610fe057600080fd5b505afa158015610ff4573d6000803e3d6000fd5b505050506040513d602081101561100a57600080fd5b505190508281101561105057604051600160e51b62461bcd02815260040180806020018281038252602e815260200180611bbc602e913960400191505060405180910390fd5b6040518060c001604052808b6001600160a01b031681526020018a6001600160a01b03168152602001896001600160a01b0316815260200160405180604001604052808a8152602001898152508152602001604051806040016040528088815260200187815250815260200184815250600080600154815260200190815260200160002060008201518160000160006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060208201518160010160006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060408201518160020160006101000a8154816001600160a01b0302191690836001600160a01b03160217905550606082015181600301600082015181600001556020820151816001015550506080820151816005016000820151816000015560208201518160010155505060a08201518160070155905050886001600160a01b03168a6001600160a01b03166001547fb3ec17fd3e5ef689e147851f57c4182d97501571839b78360958ef6887aad5858b8b8b8b8b8b60405180876001600160a01b03166001600160a01b03168152602001868152602001858152602001848152602001838152602001828152602001965050505050505060405180910390a4600180546112419163ffffffff61194116565b60015560408051600160e01b6323b872dd0281526001600160a01b038c81166004830152306024830152604482018690529151918416916323b872dd916064808201926020929091908290030181600087803b1580156112a057600080fd5b505af11580156112b4573d6000803e3d6000fd5b505050506040513d60208110156112ca57600080fd5b505050505050505050505050565b60006112e2611970565b5060008281526020818152604091829020825160c08101845281546001600160a01b03908116825260018301548116828501526002830154168185015283518085018552600383015481526004830154818501526060820190815284518086019095526005830154855260068301548585019081526080830186905260079093015460a08301529351915193518051930151909361138d9361043a92610f7b9163ffffffff6114ad16565b9150505b919050565b60006113a0611970565b5060008281526020818152604091829020825160c08101845281546001600160a01b039081168252600183015481168285015260028301541681850152835180850185526003830154815260048301548185015260608201908152845180860190955260058301548552600683015485850152608082019490945260079091015460a0820152915180519101514382106114405760009350505050611391565b8043116114535750430391506113919050565b039392505050565b600080821161146957600080fd5b600082848161147457fe5b049150505b92915050565b60008261148e57506000611479565b8282028284828161149b57fe5b04146114a657600080fd5b9392505050565b6000828211156114bc57600080fd5b50900390565b6000858152602081905260408120600201546001600160a01b0386811691161415806114ff57506000868152602081905260409020600401548414155b8061151b57506000868152602081905260409020600501548314155b8061153757506000868152602081905260409020600601548214155b61158b5760408051600160e51b62461bcd02815260206004820152601e60248201527f73747265616d20686173207468657365207465726d7320616c72656164790000604482015290519081900360640190fd5b50600195945050505050565b60006001600160a01b0385166115e157604051600160e51b62461bcd02815260040180806020018281038252602b815260200180611a8c602b913960400191505060405180910390fd5b4384101561162357604051600160e51b62461bcd028152600401808060200182810382526040815260200180611a4c6040913960400191505060405180910390fd5b83831161166457604051600160e51b62461bcd028152600401808060200182810382526036815260200180611a166036913960400191505060405180910390fd5b838303828110156116a957604051600160e51b62461bcd028152600401808060200182810382526041815260200180611ab76041913960600191505060405180910390fd5b6116b9818463ffffffff61195316565b1561158b57604051600160e51b62461bcd028152600401808060200182810382526043815260200180611af86043913960600191505060405180910390fd5b60008581526020819052604090205485906001600160a01b03166117545760408051600160e51b62461bcd02815260206004820152601460248201526000805160206119cf833981519152604482015290519081900360640190fd5b61175c611970565b50600086815260208181526040808320815160c08101835281546001600160a01b0390811682526001830154811682860152600280840154821683860152845180860186526003850154815260048501548188015260608401528451808601865260058501548152600685015481880152608084015260079093015460a08301528b86529184528285208151909216855292529091205460ff166118005750611939565b6000878152600260209081526040808320848301516001600160a01b0316845290915290205460ff166118335750611939565b600061185584611849884363ffffffff6114ad16565b9063ffffffff61195316565b90506000611869878363ffffffff6114ad16565b6020808501518551604080516001600160a01b038e811682529481018690528082018c9052606081018b90529051949550918316939216918c917fd586e7f196fc84f737a1eba26ba1ad9e0b4b64d5803b17433c89a2608b887245919081900360800190a4600089815260026020818152604080842087516001600160a01b039081168652818452828620805460ff199081169091558f87529484528884015116855290915290912080549091169055611922896104e8565b61087d836000015184602001518a43858b8b610f54565b505050505050565b6000828201838110156114a657600080fd5b60008161195f57600080fd5b81838161196857fe5b069392505050565b6040805161010081018252600080825260208201819052918101919091526060810161199a6119b4565b81526020016119a76119b4565b8152602001600081525090565b60405180604001604052806000815260200160008152509056fe73747265616d20646f65736e27742065786973740000000000000000000000006d73672e73656e64657220686173206e6f7420636f6e6669726d656420746865207570646174657468652073746f7020626c6f636b206e6565647320746f20626520686967686572207468616e2074686520737461727420626c6f636b74686520737461727420626c6f636b206e6565647320746f20626520686967686572207468616e207468652063757272656e7420626c6f636b206e756d626572746f6b656e20636f6e74726163742061646472657373206e6565647320746f2062652070726f766964656474686520626c6f636b20646966666572656e6365206e6565647320746f20626520686967686572207468616e20746865207061796d656e7420696e74657276616c74686520626c6f636b20646966666572656e6365206e6565647320746f2062652061206d756c7469706c65206f6620746865207061796d656e7420696e74657276616c6f6e6c79207468652073656e646572206f722074686520726563697069656e74206f66207468652073747265616d2063616e20706572666f726d207468697320616374696f6e6f6e6c79207468652073747265616d20726563697069656e7420697320616c6c6f77656420746f20706572666f726d207468697320616374696f6e636f6e7472616374206e6f7420616c6c6f77656420746f207472616e7366657220656e6f75676820746f6b656e73a165627a7a723058202d549b605af21feee4e9a2ec25023b21cb47fedd634f1c6da52ca937b5533e660029"
}