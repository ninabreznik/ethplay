{
  "address": "0x39483c87bcf082856adff009df883044ea1a5483",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "MerchantWallet",
  "compilerVersion": "v0.4.25+commit.59dbf8f1",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2019-01-25\n*/\n\npragma solidity ^0.4.24;\n\n// File: openzeppelin-solidity/contracts/ownership/Ownable.sol\n\n/**\n * @title Ownable\n * @dev The Ownable contract has an owner address, and provides basic authorization control\n * functions, this simplifies the implementation of \"user permissions\".\n */\ncontract Ownable {\n  address public owner;\n\n\n  event OwnershipRenounced(address indexed previousOwner);\n  event OwnershipTransferred(\n    address indexed previousOwner,\n    address indexed newOwner\n  );\n\n\n  /**\n   * @dev The Ownable constructor sets the original `owner` of the contract to the sender\n   * account.\n   */\n  constructor() public {\n    owner = msg.sender;\n  }\n\n  /**\n   * @dev Throws if called by any account other than the owner.\n   */\n  modifier onlyOwner() {\n    require(msg.sender == owner);\n    _;\n  }\n\n  /**\n   * @dev Allows the current owner to relinquish control of the contract.\n   * @notice Renouncing to ownership will leave the contract without an owner.\n   * It will not be possible to call the functions with the `onlyOwner`\n   * modifier anymore.\n   */\n  function renounceOwnership() public onlyOwner {\n    emit OwnershipRenounced(owner);\n    owner = address(0);\n  }\n\n  /**\n   * @dev Allows the current owner to transfer control of the contract to a newOwner.\n   * @param _newOwner The address to transfer ownership to.\n   */\n  function transferOwnership(address _newOwner) public onlyOwner {\n    _transferOwnership(_newOwner);\n  }\n\n  /**\n   * @dev Transfers control of the contract to a newOwner.\n   * @param _newOwner The address to transfer ownership to.\n   */\n  function _transferOwnership(address _newOwner) internal {\n    require(_newOwner != address(0));\n    emit OwnershipTransferred(owner, _newOwner);\n    owner = _newOwner;\n  }\n}\n\n// File: openzeppelin-solidity/contracts/lifecycle/Pausable.sol\n\n/**\n * @title Pausable\n * @dev Base contract which allows children to implement an emergency stop mechanism.\n */\ncontract Pausable is Ownable {\n  event Pause();\n  event Unpause();\n\n  bool public paused = false;\n\n\n  /**\n   * @dev Modifier to make a function callable only when the contract is not paused.\n   */\n  modifier whenNotPaused() {\n    require(!paused);\n    _;\n  }\n\n  /**\n   * @dev Modifier to make a function callable only when the contract is paused.\n   */\n  modifier whenPaused() {\n    require(paused);\n    _;\n  }\n\n  /**\n   * @dev called by the owner to pause, triggers stopped state\n   */\n  function pause() public onlyOwner whenNotPaused {\n    paused = true;\n    emit Pause();\n  }\n\n  /**\n   * @dev called by the owner to unpause, returns to normal state\n   */\n  function unpause() public onlyOwner whenPaused {\n    paused = false;\n    emit Unpause();\n  }\n}\n\n// File: openzeppelin-solidity/contracts/ownership/Contactable.sol\n\n/**\n * @title Contactable token\n * @dev Basic version of a contactable contract, allowing the owner to provide a string with their\n * contact information.\n */\ncontract Contactable is Ownable {\n\n  string public contactInformation;\n\n  /**\n    * @dev Allows the owner to set a string with their contact information.\n    * @param _info The contact information to attach to the contract.\n    */\n  function setContactInformation(string _info) public onlyOwner {\n    contactInformation = _info;\n  }\n}\n\n// File: monetha-utility-contracts/contracts/Restricted.sol\n\n/** @title Restricted\n *  Exposes onlyMonetha modifier\n */\ncontract Restricted is Ownable {\n\n    //MonethaAddress set event\n    event MonethaAddressSet(\n        address _address,\n        bool _isMonethaAddress\n    );\n\n    mapping (address => bool) public isMonethaAddress;\n\n    /**\n     *  Restrict methods in such way, that they can be invoked only by monethaAddress account.\n     */\n    modifier onlyMonetha() {\n        require(isMonethaAddress[msg.sender]);\n        _;\n    }\n\n    /**\n     *  Allows owner to set new monetha address\n     */\n    function setMonethaAddress(address _address, bool _isMonethaAddress) onlyOwner public {\n        isMonethaAddress[_address] = _isMonethaAddress;\n\n        emit MonethaAddressSet(_address, _isMonethaAddress);\n    }\n}\n\n// File: monetha-utility-contracts/contracts/SafeDestructible.sol\n\n/**\n * @title SafeDestructible\n * Base contract that can be destroyed by owner.\n * Can be destructed if there are no funds on contract balance.\n */\ncontract SafeDestructible is Ownable {\n    function destroy() onlyOwner public {\n        require(address(this).balance == 0);\n        selfdestruct(owner);\n    }\n}\n\n// File: contracts/GenericERC20.sol\n\n/**\n* @title GenericERC20 interface\n*/\ncontract GenericERC20 {\n    function totalSupply() public view returns (uint256);\n\n    function decimals() public view returns(uint256);\n\n    function balanceOf(address _who) public view returns (uint256);\n\n    function allowance(address _owner, address _spender)\n        public view returns (uint256);\n        \n    // Return type not defined intentionally since not all ERC20 tokens return proper result type\n    function transfer(address _to, uint256 _value) public;\n\n    function approve(address _spender, uint256 _value)\n        public returns (bool);\n\n    function transferFrom(address _from, address _to, uint256 _value)\n        public returns (bool);\n\n    event Transfer(\n        address indexed from,\n        address indexed to,\n        uint256 value\n    );\n\n    event Approval(\n        address indexed owner,\n        address indexed spender,\n        uint256 value\n    );\n}\n\n// File: contracts/MerchantWallet.sol\n\n/**\n *  @title MerchantWallet\n *  Serves as a public Merchant profile with merchant profile info,\n *      payment settings and latest reputation value.\n *  Also MerchantWallet accepts payments for orders.\n */\n\ncontract MerchantWallet is Pausable, SafeDestructible, Contactable, Restricted {\n\n    string constant VERSION = \"0.5\";\n\n    /// Address of merchant's account, that can withdraw from wallet\n    address public merchantAccount;\n\n    /// Address of merchant's fund address.\n    address public merchantFundAddress;\n\n    /// Unique Merchant identifier hash\n    bytes32 public merchantIdHash;\n\n    /// profileMap stores general information about the merchant\n    mapping (string=>string) profileMap;\n\n    /// paymentSettingsMap stores payment and order settings for the merchant\n    mapping (string=>string) paymentSettingsMap;\n\n    /// compositeReputationMap stores composite reputation, that compraises from several metrics\n    mapping (string=>uint32) compositeReputationMap;\n\n    /// number of last digits in compositeReputation for fractional part\n    uint8 public constant REPUTATION_DECIMALS = 4;\n\n    /**\n     *  Restrict methods in such way, that they can be invoked only by merchant account.\n     */\n    modifier onlyMerchant() {\n        require(msg.sender == merchantAccount);\n        _;\n    }\n\n    /**\n     *  Fund Address should always be Externally Owned Account and not a contract.\n     */\n    modifier isEOA(address _fundAddress) {\n        uint256 _codeLength;\n        assembly {_codeLength := extcodesize(_fundAddress)}\n        require(_codeLength == 0, \"sorry humans only\");\n        _;\n    }\n\n    /**\n     *  Restrict methods in such way, that they can be invoked only by merchant account or by monethaAddress account.\n     */\n    modifier onlyMerchantOrMonetha() {\n        require(msg.sender == merchantAccount || isMonethaAddress[msg.sender]);\n        _;\n    }\n\n    /**\n     *  @param _merchantAccount Address of merchant's account, that can withdraw from wallet\n     *  @param _merchantId Merchant identifier\n     *  @param _fundAddress Merchant's fund address, where amount will be transferred.\n     */\n    constructor(address _merchantAccount, string _merchantId, address _fundAddress) public isEOA(_fundAddress) {\n        require(_merchantAccount != 0x0);\n        require(bytes(_merchantId).length > 0);\n\n        merchantAccount = _merchantAccount;\n        merchantIdHash = keccak256(abi.encodePacked(_merchantId));\n\n        merchantFundAddress = _fundAddress;\n    }\n\n    /**\n     *  Accept payment from MonethaGateway\n     */\n    function () external payable {\n    }\n\n    /**\n     *  @return profile info by string key\n     */\n    function profile(string key) external constant returns (string) {\n        return profileMap[key];\n    }\n\n    /**\n     *  @return payment setting by string key\n     */\n    function paymentSettings(string key) external constant returns (string) {\n        return paymentSettingsMap[key];\n    }\n\n    /**\n     *  @return composite reputation value by string key\n     */\n    function compositeReputation(string key) external constant returns (uint32) {\n        return compositeReputationMap[key];\n    }\n\n    /**\n     *  Set profile info by string key\n     */\n    function setProfile(\n        string profileKey,\n        string profileValue,\n        string repKey,\n        uint32 repValue\n    )\n        external onlyOwner\n    {\n        profileMap[profileKey] = profileValue;\n\n        if (bytes(repKey).length != 0) {\n            compositeReputationMap[repKey] = repValue;\n        }\n    }\n\n    /**\n     *  Set payment setting by string key\n     */\n    function setPaymentSettings(string key, string value) external onlyOwner {\n        paymentSettingsMap[key] = value;\n    }\n\n    /**\n     *  Set composite reputation value by string key\n     */\n    function setCompositeReputation(string key, uint32 value) external onlyMonetha {\n        compositeReputationMap[key] = value;\n    }\n\n    /**\n     *  Allows withdrawal of funds to beneficiary address\n     */\n    function doWithdrawal(address beneficiary, uint amount) private {\n        require(beneficiary != 0x0);\n        beneficiary.transfer(amount);\n    }\n\n    /**\n     *  Allows merchant to withdraw funds to beneficiary address\n     */\n    function withdrawTo(address beneficiary, uint amount) public onlyMerchant whenNotPaused {\n        doWithdrawal(beneficiary, amount);\n    }\n\n    /**\n     *  Allows merchant to withdraw funds to it's own account\n     */\n    function withdraw(uint amount) external onlyMerchant {\n        withdrawTo(msg.sender, amount);\n    }\n\n    /**\n     *  Allows merchant or Monetha to initiate exchange of funds by withdrawing funds to deposit address of the exchange\n     */\n    function withdrawToExchange(address depositAccount, uint amount) external onlyMerchantOrMonetha whenNotPaused {\n        doWithdrawal(depositAccount, amount);\n    }\n\n    /**\n     *  Allows merchant or Monetha to initiate exchange of funds by withdrawing all funds to deposit address of the exchange\n     */\n    function withdrawAllToExchange(address depositAccount, uint min_amount) external onlyMerchantOrMonetha whenNotPaused {\n        require (address(this).balance >= min_amount);\n        doWithdrawal(depositAccount, address(this).balance);\n    }\n\n    /**\n     *  Allows merchant or Monetha to initiate exchange of tokens by withdrawing all tokens to deposit address of the exchange\n     */\n    function withdrawAllTokensToExchange(address _tokenAddress, address _depositAccount, uint _minAmount) external onlyMerchantOrMonetha whenNotPaused {\n        require(_tokenAddress != address(0));\n        \n        uint balance = GenericERC20(_tokenAddress).balanceOf(address(this));\n        \n        require(balance >= _minAmount);\n        \n        GenericERC20(_tokenAddress).transfer(_depositAccount, balance);\n    }\n\n    /**\n     *  Allows merchant to change it's account address\n     */\n    function changeMerchantAccount(address newAccount) external onlyMerchant whenNotPaused {\n        merchantAccount = newAccount;\n    }\n\n    /**\n     *  Allows merchant to change it's fund address.\n     */\n    function changeFundAddress(address newFundAddress) external onlyMerchant isEOA(newFundAddress) {\n        merchantFundAddress = newFundAddress;\n    }\n}",
  "bytecode": "60806040526000805460a060020a60ff021916905534801561002057600080fd5b50604051611384380380611384833981016040908152815160208301519183015160008054600160a060020a031916331790559092919091019080803b80156100ca57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601160248201527f736f7272792068756d616e73206f6e6c79000000000000000000000000000000604482015290519081900360640190fd5b600160a060020a03851615156100df57600080fd5b83516000106100ed57600080fd5b60038054600160a060020a031916600160a060020a0387161790556040518451859160209081019182918401908083835b6020831061013d5780518252601f19909201916020918201910161011e565b6001836020036101000a0380198251168184511680821785525050505050509050019150506040516020818303038152906040526040518082805190602001908083835b602083106101a05780518252601f199092019160209182019101610181565b5181516000196020949094036101000a939093019283169219169190911790526040519201829003909120600555505060048054600160a060020a03909516600160a060020a031990951694909417909355505050505061117e806102066000396000f3006080604052600436106101695763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663061b3245811461016b5780630cf1d0501461018f578063205c2878146101b35780632aa0da47146101d75780632e1a7d4d1461026c57806331d413251461028457806336f7ab5e146102b9578063370fed6e146102ce5780633f4ba83a1461030f5780635c975abb146103245780636339782514610339578063715018a61461035a5780637dd917341461036f57806383197ef0146103a85780638456cb59146103bd5780638da5cb5b146103d2578063957f050b14610403578063969596d614610418578063b967a52e1461042d578063c0462ec314610486578063c07e3391146104b0578063e25a51b6146104d6578063e3577e7114610501578063e8c0485f1461052d578063f0daba011461054d578063f2cba6a614610574578063f2fde38b1461059f578063f9271fd3146105c0575b005b34801561017757600080fd5b50610169600160a060020a03600435166024356105e1565b34801561019b57600080fd5b50610169600160a060020a0360043516602435610639565b3480156101bf57600080fd5b50610169600160a060020a036004351660243561069c565b3480156101e357600080fd5b506101f760048035602481019101356106b3565b6040805160208082528351818301528351919283929083019185019080838360005b83811015610231578181015183820152602001610219565b50505050905090810190601f16801561025e5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561027857600080fd5b50610169600435610768565b34801561029057600080fd5b506102a5600160a060020a036004351661078c565b604080519115158252519081900360200190f35b3480156102c557600080fd5b506101f76107a1565b3480156102da57600080fd5b50610169602460048035828101929082013591813580830192908201359160443591820191013563ffffffff6064351661082e565b34801561031b57600080fd5b506101696108cb565b34801561033057600080fd5b506102a5610941565b34801561034557600080fd5b50610169600160a060020a0360043516610951565b34801561036657600080fd5b506101696109ae565b34801561037b57600080fd5b5061038f6004803560248101910135610a1a565b6040805163ffffffff9092168252519081900360200190f35b3480156103b457600080fd5b50610169610a50565b3480156103c957600080fd5b50610169610a81565b3480156103de57600080fd5b506103e7610afc565b60408051600160a060020a039092168252519081900360200190f35b34801561040f57600080fd5b506103e7610b0b565b34801561042457600080fd5b506103e7610b1a565b34801561043957600080fd5b506040805160206004803580820135601f8101849004840285018401909552848452610169943694929360249392840191908190840183828082843750949750610b299650505050505050565b34801561049257600080fd5b50610169600160a060020a0360043581169060243516604435610b53565b3480156104bc57600080fd5b50610169600160a060020a03600435166024351515610ceb565b3480156104e257600080fd5b50610169602460048035828101929101359063ffffffff903516610d66565b34801561050d57600080fd5b506101696024600480358281019290820135918135918201910135610dca565b34801561053957600080fd5b506101f76004803560248101910135610e1c565b34801561055957600080fd5b50610562610e99565b60408051918252519081900360200190f35b34801561058057600080fd5b50610589610e9f565b6040805160ff9092168252519081900360200190f35b3480156105ab57600080fd5b50610169600160a060020a0360043516610ea4565b3480156105cc57600080fd5b50610169600160a060020a0360043516610ec4565b600354600160a060020a031633148061060957503360009081526002602052604090205460ff165b151561061457600080fd5b60005460a060020a900460ff161561062b57600080fd5b6106358282610f7c565b5050565b600354600160a060020a031633148061066157503360009081526002602052604090205460ff165b151561066c57600080fd5b60005460a060020a900460ff161561068357600080fd5b303181111561069157600080fd5b610635823031610f7c565b600354600160a060020a0316331461061457600080fd5b606060078383604051808383808284379190910194855250506040805160209481900385018120805460026001821615610100026000190190911604601f8101879004870283018701909352828252909490935090915083018282801561075b5780601f106107305761010080835404028352916020019161075b565b820191906000526020600020905b81548152906001019060200180831161073e57829003601f168201915b5050505050905092915050565b600354600160a060020a0316331461077f57600080fd5b610789338261069c565b50565b60026020526000908152604090205460ff1681565b60018054604080516020600284861615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156108265780601f106107fb57610100808354040283529160200191610826565b820191906000526020600020905b81548152906001019060200180831161080957829003601f168201915b505050505081565b600054600160a060020a0316331461084557600080fd5b8484600689896040518083838082843782019150509250505090815260200160405180910390209190610879929190611049565b5081156108c257806008848460405180838380828437909101948552505060405192839003602001909220805463ffffffff9490941663ffffffff199094169390931790925550505b50505050505050565b600054600160a060020a031633146108e257600080fd5b60005460a060020a900460ff1615156108fa57600080fd5b6000805474ff0000000000000000000000000000000000000000191681556040517f7805862f689e2f13df9f062ff482ad3ad112aca9e0847911ed832e158c525b339190a1565b60005460a060020a900460ff1681565b600354600160a060020a0316331461096857600080fd5b60005460a060020a900460ff161561097f57600080fd5b6003805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600054600160a060020a031633146109c557600080fd5b60008054604051600160a060020a03909116917ff8df31144d9c2f0f6b59d69b8b98abd5459d07f2742c4df920b25aae33c6482091a26000805473ffffffffffffffffffffffffffffffffffffffff19169055565b600060088383604051808383808284379091019485525050604051928390036020019092205463ffffffff169250505092915050565b600054600160a060020a03163314610a6757600080fd5b303115610a7357600080fd5b600054600160a060020a0316ff5b600054600160a060020a03163314610a9857600080fd5b60005460a060020a900460ff1615610aaf57600080fd5b6000805474ff0000000000000000000000000000000000000000191660a060020a1781556040517f6985a02210a168e66602d3235cb6db0e70f92b3ba4d376a33c0f3d9434bff6259190a1565b600054600160a060020a031681565b600354600160a060020a031681565b600454600160a060020a031681565b600054600160a060020a03163314610b4057600080fd5b80516106359060019060208401906110c7565b600354600090600160a060020a0316331480610b7e57503360009081526002602052604090205460ff165b1515610b8957600080fd5b60005460a060020a900460ff1615610ba057600080fd5b600160a060020a0384161515610bb557600080fd5b604080517f70a082310000000000000000000000000000000000000000000000000000000081523060048201529051600160a060020a038616916370a082319160248083019260209291908290030181600087803b158015610c1657600080fd5b505af1158015610c2a573d6000803e3d6000fd5b505050506040513d6020811015610c4057600080fd5b5051905081811015610c5157600080fd5b83600160a060020a031663a9059cbb84836040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018083600160a060020a0316600160a060020a0316815260200182815260200192505050600060405180830381600087803b158015610ccd57600080fd5b505af1158015610ce1573d6000803e3d6000fd5b5050505050505050565b600054600160a060020a03163314610d0257600080fd5b600160a060020a038216600081815260026020908152604091829020805460ff191685151590811790915582519384529083015280517fa551de8741dbb2092ce6bc142fd0ff3af5dfbf87d0aa594619fccddb0141e6929281900390910190a15050565b3360009081526002602052604090205460ff161515610d8457600080fd5b806008848460405180838380828437909101948552505060405192839003602001909220805463ffffffff9490941663ffffffff19909416939093179092555050505050565b600054600160a060020a03163314610de157600080fd5b8181600786866040518083838082843782019150509250505090815260200160405180910390209190610e15929190611049565b5050505050565b606060068383604051808383808284379190910194855250506040805160209481900385018120805460026001821615610100026000190190911604601f8101879004870283018701909352828252909490935090915083018282801561075b5780601f106107305761010080835404028352916020019161075b565b60055481565b600481565b600054600160a060020a03163314610ebb57600080fd5b61078981610fcc565b600354600160a060020a03163314610edb57600080fd5b80803b8015610f4b57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601160248201527f736f7272792068756d616e73206f6e6c79000000000000000000000000000000604482015290519081900360640190fd5b50506004805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600160a060020a0382161515610f9157600080fd5b604051600160a060020a0383169082156108fc029083906000818181858888f19350505050158015610fc7573d6000803e3d6000fd5b505050565b600160a060020a0381161515610fe157600080fd5b60008054604051600160a060020a03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061108a5782800160ff198235161785556110b7565b828001600101855582156110b7579182015b828111156110b757823582559160200191906001019061109c565b506110c3929150611135565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061110857805160ff19168380011785556110b7565b828001600101855582156110b7579182015b828111156110b757825182559160200191906001019061111a565b61114f91905b808211156110c3576000815560010161113b565b905600a165627a7a72305820fcd0552feacca9c336924a52d9c6c48a522877def1fd8726f5ff152574fd12de0029000000000000000000000000f7eaa71a8f55c4f7b661a2af7af922845a781a7e0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000053132373030000000000000000000000000000000000000000000000000000000",
  "constructorArguments": "000000000000000000000000f7eaa71a8f55c4f7b661a2af7af922845a781a7e0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000053132373030000000000000000000000000000000000000000000000000000000"
}