{
  "address": "0x876617584678d5b9a6ef93eba92b408367d9457c",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "DetherCore",
  "compilerVersion": "v0.4.23+commit.124ca40d",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2018-08-07\n*/\n\ncontract Certifier {\n\tevent Confirmed(address indexed who);\n\tevent Revoked(address indexed who);\n\tfunction certified(address _who) view public returns (bool);\n}\n\n/// @title Contract that supports the receival of ERC223 tokens.\ncontract ERC223ReceivingContract {\n\n    /// @dev Standard ERC223 function that will handle incoming token transfers.\n    /// @param _from  Token sender address.\n    /// @param _value Amount of tokens.\n    /// @param _data  Transaction metadata.\n    function tokenFallback(address _from, uint _value, bytes _data) public;\n\n}\n\n\ncontract SafeMath {\n\n  /**\n  * @dev Multiplies two numbers, throws on overflow.\n  */\n  function mul(uint256 a, uint256 b) internal pure returns (uint256) {\n    if (a == 0) {\n      return 0;\n    }\n    uint256 c = a * b;\n    assert(c / a == b);\n    return c;\n  }\n\n  /**\n  * @dev Integer division of two numbers, truncating the quotient.\n  */\n  function div(uint256 a, uint256 b) internal pure returns (uint256) {\n    // assert(b > 0); // Solidity automatically throws when dividing by 0\n    uint256 c = a / b;\n    // assert(a == b * c + a % b); // There is no case in which this doesn't hold\n    return c;\n  }\n\n  /**\n  * @dev Substracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend).\n  */\n  function sub(uint256 a, uint256 b) internal pure returns (uint256) {\n    assert(b <= a);\n    return a - b;\n  }\n\n  /**\n  * @dev Adds two numbers, throws on overflow.\n  */\n  function add(uint256 a, uint256 b) internal pure returns (uint256) {\n    uint256 c = a + b;\n    assert(c >= a);\n    return c;\n  }\n}\n\ncontract ERC20Basic {\n  function totalSupply() public view returns (uint256);\n  function balanceOf(address who) public view returns (uint256);\n  function transfer(address to, uint256 value) public returns (bool);\n  event Transfer(address indexed from, address indexed to, uint256 value);\n}\n\n\ncontract ERC223Basic is ERC20Basic {\n\n    /**\n      * @dev Transfer the specified amount of tokens to the specified address.\n      *      Now with a new parameter _data.\n      *\n      * @param _to    Receiver address.\n      * @param _value Amount of tokens that will be transferred.\n      * @param _data  Transaction metadata.\n      */\n    function transfer(address _to, uint _value, bytes _data) public returns (bool);\n\n    /**\n      * @dev triggered when transfer is successfully called.\n      *\n      * @param _from  Sender address.\n      * @param _to    Receiver address.\n      * @param _value Amount of tokens that will be transferred.\n      * @param _data  Transaction metadata.\n      */\n    event Transfer(address indexed _from, address indexed _to, uint256 indexed _value, bytes _data);\n}\n\ncontract DetherAccessControl {\n    // This facet controls access control for Dether. There are four roles managed here:\n    //\n    //     - The CEO: The CEO can reassign other roles and change the addresses of our dependent smart\n    //         contracts. It is also the only role that can unpause the smart contract.\n    //\n    //     - The CMO: The CMO is in charge to open or close activity in zone\n    //\n    // It should be noted that these roles are distinct without overlap in their access abilities, the\n    // abilities listed for each role above are exhaustive. In particular, while the CEO can assign any\n    // address to any role, the CEO address itself doesn't have the ability to act in those roles. This\n    // restriction is intentional so that we aren't tempted to use the CEO address frequently out of\n    // convenience. The less we use an address, the less likely it is that we somehow compromise the\n    // account.\n\n    /// @dev Emited when contract is upgraded\n    event ContractUpgrade(address newContract);\n\n    // The addresses of the accounts (or contracts) that can execute actions within each roles.\n    address public ceoAddress;\n    address public cmoAddress;\n    address public csoAddress; // CHIEF SHOP OFFICER\n    address public cfoAddress; // CHIEF FINANCIAL OFFICER\n\t  mapping (address => bool) public shopModerators;   // centralised moderator, would become decentralised\n    mapping (address => bool) public tellerModerators;   // centralised moderator, would become decentralised\n\n    // @dev Keeps track whether the contract is paused. When that is true, most actions are blocked\n    bool public paused = false;\n\n    /// @dev Access modifier for CEO-only functionality\n    modifier onlyCEO() {\n        require(msg.sender == ceoAddress);\n        _;\n    }\n\n    /// @dev Access modifier for CMO-only functionality\n    modifier onlyCMO() {\n        require(msg.sender == cmoAddress);\n        _;\n    }\n\n    modifier onlyCSO() {\n        require(msg.sender == csoAddress);\n        _;\n    }\n\n    modifier onlyCFO() {\n        require(msg.sender == cfoAddress);\n        _;\n    }\n\n    modifier isShopModerator(address _user) {\n      require(shopModerators[_user]);\n      _;\n    }\n    modifier isTellerModerator(address _user) {\n      require(tellerModerators[_user]);\n      _;\n    }\n\n    /// @dev Assigns a new address to act as the CEO. Only available to the current CEO.\n    /// @param _newCEO The address of the new CEO\n    function setCEO(address _newCEO) external onlyCEO {\n        require(_newCEO != address(0));\n        ceoAddress = _newCEO;\n    }\n\n    /// @dev Assigns a new address to act as the CMO. Only available to the current CEO.\n    /// @param _newCMO The address of the new CMO\n    function setCMO(address _newCMO) external onlyCEO {\n        require(_newCMO != address(0));\n        cmoAddress = _newCMO;\n    }\n\n    function setCSO(address _newCSO) external onlyCEO {\n        require(_newCSO != address(0));\n        csoAddress = _newCSO;\n    }\n\n    function setCFO(address _newCFO) external onlyCEO {\n        require(_newCFO != address(0));\n        cfoAddress = _newCFO;\n    }\n\n    function setShopModerator(address _moderator) external onlyCEO {\n      require(_moderator != address(0));\n      shopModerators[_moderator] = true;\n    }\n\n    function removeShopModerator(address _moderator) external onlyCEO {\n      shopModerators[_moderator] = false;\n    }\n\n    function setTellerModerator(address _moderator) external onlyCEO {\n      require(_moderator != address(0));\n      tellerModerators[_moderator] = true;\n    }\n\n    function removeTellerModerator(address _moderator) external onlyCEO {\n      tellerModerators[_moderator] = false;\n    }\n    /*** Pausable functionality adapted from OpenZeppelin ***/\n\n    /// @dev Modifier to allow actions only when the contract IS NOT paused\n    modifier whenNotPaused() {\n        require(!paused);\n        _;\n    }\n\n    /// @dev Modifier to allow actions only when the contract IS paused\n    modifier whenPaused {\n        require(paused);\n        _;\n    }\n\n    /// @dev Called by any \"C-level\" role to pause the contract. Used only when\n    ///  a bug or exploit is detected and we need to limit damage.\n    function pause() external onlyCEO whenNotPaused {\n        paused = true;\n    }\n\n    /// @dev Unpauses the smart contract. Can only be called by the CEO, since\n    ///  one reason we may pause the contract is when CMO account are\n    ///  compromised.\n    /// @notice This is public rather than external so it can be called by\n    ///  derived contracts.\n    function unpause() public onlyCEO whenPaused {\n        // can't unpause if contract was upgraded\n        paused = false;\n    }\n}\n\n\ncontract DetherSetup is DetherAccessControl  {\n\n  bool public run1 = false;\n  bool public run2 = false;\n  // -Need to be whitelisted to be able to register in the contract as a shop or\n  // teller, there is two level of identification.\n  // -This identification method are now centralised and processed by dether, but\n  // will be decentralised soon\n  Certifier public smsCertifier;\n  Certifier public kycCertifier;\n  // Zone need to be open by the CMO before accepting registration\n  // The bytes2 parameter wait for a country ID (ex: FR (0x4652 in hex) for france cf:README)\n  mapping(bytes2 => bool) public openedCountryShop;\n  mapping(bytes2 => bool) public openedCountryTeller;\n  // For registering in a zone you need to stake DTH\n  // The price can differ by country\n  // Uts now a fixed price by the CMO but the price will adjusted automatically\n  // regarding different factor in the futur smart contract\n  mapping(bytes2 => uint) public licenceShop;\n  mapping(bytes2 => uint) public licenceTeller;\n\n  modifier tier1(address _user) {\n    require(smsCertifier.certified(_user));\n    _;\n  }\n  modifier tier2(address _user) {\n    require(kycCertifier.certified(_user));\n    _;\n  }\n  modifier isZoneShopOpen(bytes2 _country) {\n    require(openedCountryShop[_country]);\n    _;\n  }\n  modifier isZoneTellerOpen(bytes2 _country) {\n    require(openedCountryTeller[_country]);\n    _;\n  }\n\n  function isTier1(address _user) public view returns(bool) {\n    return smsCertifier.certified(_user);\n  }\n  function isTier2(address _user) public view returns(bool) {\n    return kycCertifier.certified(_user);\n  }\n\n  /**\n   * INIT\n   */\n  function setSmsCertifier (address _smsCertifier) external onlyCEO {\n    require(!run1);\n    smsCertifier = Certifier(_smsCertifier);\n    run1 = true;\n  }\n  /**\n   * CORE FUNCTION\n   */\n  function setKycCertifier (address _kycCertifier) external onlyCEO {\n    require(!run2);\n    kycCertifier = Certifier(_kycCertifier);\n    run2 = true;\n  }\n  function setLicenceShopPrice(bytes2 country, uint price) external onlyCMO {\n    licenceShop[country] = price;\n  }\n  function setLicenceTellerPrice(bytes2 country, uint price) external onlyCMO {\n    licenceTeller[country] = price;\n  }\n  function openZoneShop(bytes2 _country) external onlyCMO {\n    openedCountryShop[_country] = true;\n  }\n  function closeZoneShop(bytes2 _country) external onlyCMO {\n    openedCountryShop[_country] = false;\n  }\n  function openZoneTeller(bytes2 _country) external onlyCMO {\n    openedCountryTeller[_country] = true;\n  }\n  function closeZoneTeller(bytes2 _country) external onlyCMO {\n    openedCountryTeller[_country] = false;\n  }\n}\n\nlibrary BytesLib {\n    function concat(bytes memory _preBytes, bytes memory _postBytes) internal pure returns (bytes) {\n        bytes memory tempBytes;\n\n        assembly {\n            // Get a location of some free memory and store it in tempBytes as\n            // Solidity does for memory variables.\n            tempBytes := mload(0x40)\n\n            // Store the length of the first bytes array at the beginning of\n            // the memory for tempBytes.\n            let length := mload(_preBytes)\n            mstore(tempBytes, length)\n\n            // Maintain a memory counter for the current write location in the\n            // temp bytes array by adding the 32 bytes for the array length to\n            // the starting location.\n            let mc := add(tempBytes, 0x20)\n            // Stop copying when the memory counter reaches the length of the\n            // first bytes array.\n            let end := add(mc, length)\n\n            for {\n                // Initialize a copy counter to the start of the _preBytes data,\n                // 32 bytes into its memory.\n                let cc := add(_preBytes, 0x20)\n            } lt(mc, end) {\n                // Increase both counters by 32 bytes each iteration.\n                mc := add(mc, 0x20)\n                cc := add(cc, 0x20)\n            } {\n                // Write the _preBytes data into the tempBytes memory 32 bytes\n                // at a time.\n                mstore(mc, mload(cc))\n            }\n\n            // Add the length of _postBytes to the current length of tempBytes\n            // and store it as the new length in the first 32 bytes of the\n            // tempBytes memory.\n            length := mload(_postBytes)\n            mstore(tempBytes, add(length, mload(tempBytes)))\n\n            // Move the memory counter back from a multiple of 0x20 to the\n            // actual end of the _preBytes data.\n            mc := end\n            // Stop copying when the memory counter reaches the new combined\n            // length of the arrays.\n            end := add(mc, length)\n\n            for {\n                let cc := add(_postBytes, 0x20)\n            } lt(mc, end) {\n                mc := add(mc, 0x20)\n                cc := add(cc, 0x20)\n            } {\n                mstore(mc, mload(cc))\n            }\n\n            // Update the free-memory pointer by padding our last write location\n            // to 32 bytes: add 31 bytes to the end of tempBytes to move to the\n            // next 32 byte block, then round down to the nearest multiple of\n            // 32. If the sum of the length of the two arrays is zero then add\n            // one before rounding down to leave a blank 32 bytes (the length block with 0).\n            mstore(0x40, and(\n              add(add(end, iszero(add(length, mload(_preBytes)))), 31),\n              not(31) // Round down to the nearest 32 bytes.\n            ))\n        }\n\n        return tempBytes;\n    }\n\n    function concatStorage(bytes storage _preBytes, bytes memory _postBytes) internal {\n        assembly {\n            // Read the first 32 bytes of _preBytes storage, which is the length\n            // of the array. (We don't need to use the offset into the slot\n            // because arrays use the entire slot.)\n            let fslot := sload(_preBytes_slot)\n            // Arrays of 31 bytes or less have an even value in their slot,\n            // while longer arrays have an odd value. The actual length is\n            // the slot divided by two for odd values, and the lowest order\n            // byte divided by two for even values.\n            // If the slot is even, bitwise and the slot with 255 and divide by\n            // two to get the length. If the slot is odd, bitwise and the slot\n            // with -1 and divide by two.\n            let slength := div(and(fslot, sub(mul(0x100, iszero(and(fslot, 1))), 1)), 2)\n            let mlength := mload(_postBytes)\n            let newlength := add(slength, mlength)\n            // slength can contain both the length and contents of the array\n            // if length < 32 bytes so let's prepare for that\n            // v. http://solidity.readthedocs.io/en/latest/miscellaneous.html#layout-of-state-variables-in-storage\n            switch add(lt(slength, 32), lt(newlength, 32))\n            case 2 {\n                // Since the new array still fits in the slot, we just need to\n                // update the contents of the slot.\n                // uint256(bytes_storage) = uint256(bytes_storage) + uint256(bytes_memory) + new_length\n                sstore(\n                    _preBytes_slot,\n                    // all the modifications to the slot are inside this\n                    // next block\n                    add(\n                        // we can just add to the slot contents because the\n                        // bytes we want to change are the LSBs\n                        fslot,\n                        add(\n                            mul(\n                                div(\n                                    // load the bytes from memory\n                                    mload(add(_postBytes, 0x20)),\n                                    // zero all bytes to the right\n                                    exp(0x100, sub(32, mlength))\n                                ),\n                                // and now shift left the number of bytes to\n                                // leave space for the length in the slot\n                                exp(0x100, sub(32, newlength))\n                            ),\n                            // increase length by the double of the memory\n                            // bytes length\n                            mul(mlength, 2)\n                        )\n                    )\n                )\n            }\n            case 1 {\n                // The stored value fits in the slot, but the combined value\n                // will exceed it.\n                // get the keccak hash to get the contents of the array\n                mstore(0x0, _preBytes_slot)\n                let sc := add(keccak256(0x0, 0x20), div(slength, 32))\n\n                // save new length\n                sstore(_preBytes_slot, add(mul(newlength, 2), 1))\n\n                // The contents of the _postBytes array start 32 bytes into\n                // the structure. Our first read should obtain the `submod`\n                // bytes that can fit into the unused space in the last word\n                // of the stored array. To get this, we read 32 bytes starting\n                // from `submod`, so the data we read overlaps with the array\n                // contents by `submod` bytes. Masking the lowest-order\n                // `submod` bytes allows us to add that value directly to the\n                // stored value.\n\n                let submod := sub(32, slength)\n                let mc := add(_postBytes, submod)\n                let end := add(_postBytes, mlength)\n                let mask := sub(exp(0x100, submod), 1)\n\n                sstore(\n                    sc,\n                    add(\n                        and(\n                            fslot,\n                            0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00\n                        ),\n                        and(mload(mc), mask)\n                    )\n                )\n\n                for {\n                    mc := add(mc, 0x20)\n                    sc := add(sc, 1)\n                } lt(mc, end) {\n                    sc := add(sc, 1)\n                    mc := add(mc, 0x20)\n                } {\n                    sstore(sc, mload(mc))\n                }\n\n                mask := exp(0x100, sub(mc, end))\n\n                sstore(sc, mul(div(mload(mc), mask), mask))\n            }\n            default {\n                // get the keccak hash to get the contents of the array\n                mstore(0x0, _preBytes_slot)\n                // Start copying to the last used word of the stored array.\n                let sc := add(keccak256(0x0, 0x20), div(slength, 32))\n\n                // save new length\n                sstore(_preBytes_slot, add(mul(newlength, 2), 1))\n\n                // Copy over the first `submod` bytes of the new data as in\n                // case 1 above.\n                let slengthmod := mod(slength, 32)\n                let mlengthmod := mod(mlength, 32)\n                let submod := sub(32, slengthmod)\n                let mc := add(_postBytes, submod)\n                let end := add(_postBytes, mlength)\n                let mask := sub(exp(0x100, submod), 1)\n\n                sstore(sc, add(sload(sc), and(mload(mc), mask)))\n\n                for {\n                    sc := add(sc, 1)\n                    mc := add(mc, 0x20)\n                } lt(mc, end) {\n                    sc := add(sc, 1)\n                    mc := add(mc, 0x20)\n                } {\n                    sstore(sc, mload(mc))\n                }\n\n                mask := exp(0x100, sub(mc, end))\n\n                sstore(sc, mul(div(mload(mc), mask), mask))\n            }\n        }\n    }\n\n    function slice(bytes _bytes, uint _start, uint _length) internal  pure returns (bytes) {\n        require(_bytes.length >= (_start + _length));\n\n        bytes memory tempBytes;\n\n        assembly {\n            switch iszero(_length)\n            case 0 {\n                // Get a location of some free memory and store it in tempBytes as\n                // Solidity does for memory variables.\n                tempBytes := mload(0x40)\n\n                // The first word of the slice result is potentially a partial\n                // word read from the original array. To read it, we calculate\n                // the length of that partial word and start copying that many\n                // bytes into the array. The first word we copy will start with\n                // data we don't care about, but the last `lengthmod` bytes will\n                // land at the beginning of the contents of the new array. When\n                // we're done copying, we overwrite the full first word with\n                // the actual length of the slice.\n                let lengthmod := and(_length, 31)\n\n                // The multiplication in the next line is necessary\n                // because when slicing multiples of 32 bytes (lengthmod == 0)\n                // the following copy loop was copying the origin's length\n                // and then ending prematurely not copying everything it should.\n                let mc := add(add(tempBytes, lengthmod), mul(0x20, iszero(lengthmod)))\n                let end := add(mc, _length)\n\n                for {\n                    // The multiplication in the next line has the same exact purpose\n                    // as the one above.\n                    let cc := add(add(add(_bytes, lengthmod), mul(0x20, iszero(lengthmod))), _start)\n                } lt(mc, end) {\n                    mc := add(mc, 0x20)\n                    cc := add(cc, 0x20)\n                } {\n                    mstore(mc, mload(cc))\n                }\n\n                mstore(tempBytes, _length)\n\n                //update free-memory pointer\n                //allocating the array padded to 32 bytes like the compiler does now\n                mstore(0x40, and(add(mc, 31), not(31)))\n            }\n            //if we want a zero-length slice let's just return a zero-length array\n            default {\n                tempBytes := mload(0x40)\n\n                mstore(0x40, add(tempBytes, 0x20))\n            }\n        }\n\n        return tempBytes;\n    }\n\n    function toAddress(bytes _bytes, uint _start) internal  pure returns (address) {\n        require(_bytes.length >= (_start + 20));\n        address tempAddress;\n\n        assembly {\n            tempAddress := div(mload(add(add(_bytes, 0x20), _start)), 0x1000000000000000000000000)\n        }\n\n        return tempAddress;\n    }\n\n    function toUint(bytes _bytes, uint _start) internal  pure returns (uint256) {\n        require(_bytes.length >= (_start + 32));\n        uint256 tempUint;\n\n        assembly {\n            tempUint := mload(add(add(_bytes, 0x20), _start))\n        }\n\n        return tempUint;\n    }\n\n    function toBytes32(bytes _bytes, uint _start) internal  pure returns (bytes32) {\n        require(_bytes.length >= (_start + 32));\n        bytes32 tempBytes32;\n\n        assembly {\n            tempBytes32 := mload(add(add(_bytes, 0x20), _start))\n        }\n\n        return tempBytes32;\n    }\n\n    function toBytes16(bytes _bytes, uint _start) internal  pure returns (bytes16) {\n        require(_bytes.length >= (_start + 16));\n        bytes16 tempBytes16;\n\n        assembly {\n            tempBytes16 := mload(add(add(_bytes, 0x20), _start))\n        }\n\n        return tempBytes16;\n    }\n\n    function toBytes2(bytes _bytes, uint _start) internal  pure returns (bytes2) {\n        require(_bytes.length >= (_start + 2));\n        bytes2 tempBytes2;\n\n        assembly {\n            tempBytes2 := mload(add(add(_bytes, 0x20), _start))\n        }\n\n        return tempBytes2;\n    }\n\n    function toBytes4(bytes _bytes, uint _start) internal  pure returns (bytes4) {\n        require(_bytes.length >= (_start + 4));\n        bytes4 tempBytes4;\n\n        assembly {\n            tempBytes4 := mload(add(add(_bytes, 0x20), _start))\n        }\n        return tempBytes4;\n    }\n\n    function toBytes1(bytes _bytes, uint _start) internal  pure returns (bytes1) {\n        require(_bytes.length >= (_start + 1));\n        bytes1 tempBytes1;\n\n        assembly {\n            tempBytes1 := mload(add(add(_bytes, 0x20), _start))\n        }\n\n        return tempBytes1;\n    }\n\n    function equal(bytes memory _preBytes, bytes memory _postBytes) internal pure returns (bool) {\n        bool success = true;\n\n        assembly {\n            let length := mload(_preBytes)\n\n            // if lengths don't match the arrays are not equal\n            switch eq(length, mload(_postBytes))\n            case 1 {\n                // cb is a circuit breaker in the for loop since there's\n                //  no said feature for inline assembly loops\n                // cb = 1 - don't breaker\n                // cb = 0 - break\n                let cb := 1\n\n                let mc := add(_preBytes, 0x20)\n                let end := add(mc, length)\n\n                for {\n                    let cc := add(_postBytes, 0x20)\n                // the next line is the loop condition:\n                // while(uint(mc < end) + cb == 2)\n                } eq(add(lt(mc, end), cb), 2) {\n                    mc := add(mc, 0x20)\n                    cc := add(cc, 0x20)\n                } {\n                    // if any of these checks fails then arrays are not equal\n                    if iszero(eq(mload(mc), mload(cc))) {\n                        // unsuccess:\n                        success := 0\n                        cb := 0\n                    }\n                }\n            }\n            default {\n                // unsuccess:\n                success := 0\n            }\n        }\n\n        return success;\n    }\n\n    function equalStorage(bytes storage _preBytes, bytes memory _postBytes) internal view returns (bool) {\n        bool success = true;\n\n        assembly {\n            // we know _preBytes_offset is 0\n            let fslot := sload(_preBytes_slot)\n            // Decode the length of the stored array like in concatStorage().\n            let slength := div(and(fslot, sub(mul(0x100, iszero(and(fslot, 1))), 1)), 2)\n            let mlength := mload(_postBytes)\n\n            // if lengths don't match the arrays are not equal\n            switch eq(slength, mlength)\n            case 1 {\n                // slength can contain both the length and contents of the array\n                // if length < 32 bytes so let's prepare for that\n                // v. http://solidity.readthedocs.io/en/latest/miscellaneous.html#layout-of-state-variables-in-storage\n                if iszero(iszero(slength)) {\n                    switch lt(slength, 32)\n                    case 1 {\n                        // blank the last byte which is the length\n                        fslot := mul(div(fslot, 0x100), 0x100)\n\n                        if iszero(eq(fslot, mload(add(_postBytes, 0x20)))) {\n                            // unsuccess:\n                            success := 0\n                        }\n                    }\n                    default {\n                        // cb is a circuit breaker in the for loop since there's\n                        //  no said feature for inline assembly loops\n                        // cb = 1 - don't breaker\n                        // cb = 0 - break\n                        let cb := 1\n\n                        // get the keccak hash to get the contents of the array\n                        mstore(0x0, _preBytes_slot)\n                        let sc := keccak256(0x0, 0x20)\n\n                        let mc := add(_postBytes, 0x20)\n                        let end := add(mc, mlength)\n\n                        // the next line is the loop condition:\n                        // while(uint(mc < end) + cb == 2)\n                        for {} eq(add(lt(mc, end), cb), 2) {\n                            sc := add(sc, 1)\n                            mc := add(mc, 0x20)\n                        } {\n                            if iszero(eq(sload(sc), mload(mc))) {\n                                // unsuccess:\n                                success := 0\n                                cb := 0\n                            }\n                        }\n                    }\n                }\n            }\n            default {\n                // unsuccess:\n                success := 0\n            }\n        }\n\n        return success;\n    }\n}\ncontract ExchangeRateOracle {\n  function getWeiPriceOneUsd() external view returns(uint256);\n}\n\n// only interface to save gas\ncontract DetherBank {\n  function withdrawDthTeller(address _receiver) external;\n  function withdrawDthShop(address _receiver) external;\n  function withdrawDthShopAdmin(address _from, address _receiver) external;\n  function addTokenShop(address _from, uint _value) external;\n  function addTokenTeller(address _from, uint _value) external;\n  function addEthTeller(address _from, uint _value) external payable returns (bool);\n  function withdrawEth(address _from, address _to, uint _amount) external;\n  function refundEth(address _from) external;\n  function getDthTeller(address _user) public view returns (uint);\n  function getDthShop(address _user) public view returns (uint);\n  function getEthBalTeller(address _user) public view returns (uint);\n  function getWeiSoldToday(address _user) public view returns (uint256 weiSoldToday);\n  function transferOwnership(address newOwner) public;\n}\n\ncontract DetherCore is DetherSetup, ERC223ReceivingContract, SafeMath {\n  using BytesLib for bytes;\n\n  /**\n  * Event\n  */\n  // when a Teller is registered\n  event RegisterTeller(address indexed tellerAddress);\n  // when a teller add funds for trade\n  event AddFunds(address indexed tellerAddress, uint amount);\n  // when a teller is deleted\n  event DeleteTeller(address indexed tellerAddress);\n  // when teller update\n  event UpdateTeller(address indexed tellerAddress);\n  // when a teller send to a buyer\n  event Sent(address indexed _from, address indexed _to, uint amount);\n  // when a shop register\n  event RegisterShop(address shopAddress);\n  // when a shop delete\n  event DeleteShop(address shopAddress);\n  // when a moderator delete a shop\n  event DeleteShopModerator(address indexed moderator, address shopAddress);\n  // when a moderator delete a teller\n  event DeleteTellerModerator(address indexed moderator, address tellerAddress);\n\n  /**\n   * Modifier\n   */\n  // if teller has staked enough dth to\n  modifier tellerHasStaked(uint amount) {\n    require(bank.getDthTeller(msg.sender) >= amount);\n    _;\n  }\n  // if shop has staked enough dth to\n  modifier shopHasStaked(uint amount) {\n    require(bank.getDthShop(msg.sender) >= amount);\n    _;\n  }\n\n  /*\n   * External contract\n   */\n  // DTH contract\n  ERC223Basic public dth;\n  // bank contract where are stored ETH and DTH\n  DetherBank public bank;\n\n  ExchangeRateOracle public priceOracle;\n\n  // teller struct\n  struct Teller {\n    int32 lat;            // Latitude\n    int32 lng;            // Longitude\n    bytes2 countryId;     // countryID (in hexa), ISO ALPHA 2 https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2\n    bytes16 postalCode;   // postalCode if present, in Hexa https://en.wikipedia.org/wiki/List_of_postal_codes\n\n    int8 currencyId;      // 1 - 100 , cf README\n    bytes16 messenger;    // telegrame nickname\n    int8 avatarId;        // 1 - 100 , regarding the front-end app you use\n    int16 rates;          // margin of tellers , -999 - +9999 , corresponding to -99,9% x 10  , 999,9% x 10\n    bool buyer;           // appear as a buyer as well on the map\n    int16 buyRates;         // margin of tellers of\n\n    uint zoneIndex;       // index of the zone mapping\n    uint generalIndex;    // index of general mapping\n    bool online;          // switch online/offline, if the tellers want to be inactive without deleting his point\n  }\n\n  mapping(address => mapping(address => uint)) internal pairSellsLoyaltyPerc;\n  //      from               to         percentage of loyalty points from gets\n\n  /*\n   * Reputation field V0.1\n   * Reputation is based on volume sell, volume buy, and number of transaction\n   */\n  mapping(address => uint) volumeBuy;\n  mapping(address => uint) volumeSell;\n  mapping(address => uint) nbTrade;\n  mapping(address => uint256) loyaltyPoints;\n\n  // general mapping of teller\n  mapping(address => Teller) teller;\n  // mappoing of teller by COUNTRYCODE => POSTALCODE\n  mapping(bytes2 => mapping(bytes16 => address[])) tellerInZone;\n  // teller array currently registered\n  address[] public tellerIndex; // unordered list of teller register on it\n  bool isStarted = false;\n  // shop struct\n  struct Shop {\n    int32 lat;            // latitude\n    int32 lng;            // longitude\n    bytes2 countryId;     // countryID (in hexa char), ISO ALPHA 2 https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2\n    bytes16 postalCode;   // postalCode if present (in hexa char), in Hexa https://en.wikipedia.org/wiki/List_of_postal_codes\n    bytes16 cat;          // Category of the shop (in hex char), will be used later for search engine and auction by zone\n    bytes16 name;         // name of the shop (in hex char)\n    bytes32 description;  // description of the shop\n    bytes16 opening;      // opening hours, cf README for the format\n\n    uint zoneIndex;       // index of the zone mapping\n    uint generalIndex;    // index of general mapping\n    bool detherShop;      // bool if shop is registered by dether as business partnership (still required DTH)\n  }\n\n  // general mapping of shop\n  mapping(address => Shop) shop;\n  // mapping of teller by COUNTRYCODE => POSTALCODE\n  mapping(bytes2 => mapping(bytes16 => address[])) shopInZone;\n  // shop array currently registered\n  address[] public shopIndex; // unordered list of shop register on it\n\n  /*\n   * Instanciation\n   */\n  function DetherCore() {\n   ceoAddress = msg.sender;\n  }\n  function initContract (address _dth, address _bank) external onlyCEO {\n    require(!isStarted);\n    dth = ERC223Basic(_dth);\n    bank = DetherBank(_bank);\n    isStarted = true;\n  }\n\n  function setPriceOracle (address _priceOracle) external onlyCFO {\n    priceOracle = ExchangeRateOracle(_priceOracle);\n  }\n\n  /**\n   * Core fonction\n   */\n\n  /**\n   * @dev Standard ERC223 function that will handle incoming token transfers.\n   * This is the main function to register SHOP or TELLER, its calling when you\n   * send token to the DTH contract and by passing data as bytes on the third\n   * parameter.\n   * Its not supposed to be use on its own but will only handle incoming DTH\n   * transaction.\n   * The _data will wait for\n   * [1st byte] 1 (0x31) for shop OR 2 (0x32) for teller\n   * FOR SHOP AND TELLER:\n   * 2sd to 5th bytes lat\n   * 6th to 9th bytes lng\n   * ...\n   * Modifier tier1: Check if address is whitelisted with the sms verification\n   */\n  function tokenFallback(address _from, uint _value, bytes _data) whenNotPaused tier1(_from ) {\n    // require than the token fallback is triggered from the dth token contract\n    require(msg.sender == address(dth));\n    // check first byte to know if its shop or teller registration\n    // 1 / 0x31 = shop // 2 / 0x32 = teller\n    bytes1 _func = _data.toBytes1(0);\n    int32 posLat = _data.toBytes1(1) == bytes1(0x01) ? int32(_data.toBytes4(2)) * -1 : int32(_data.toBytes4(2));\n    int32 posLng = _data.toBytes1(6) == bytes1(0x01) ? int32(_data.toBytes4(7)) * -1 : int32(_data.toBytes4(7));\n    if (_func == bytes1(0x31)) { // shop registration // GAS USED 311000\n      // require staked greater than licence price\n      require(_value >= licenceShop[_data.toBytes2(11)]);\n      // require its not already shop\n      require(!isShop(_from));\n      // require zone is open\n      require(openedCountryShop[_data.toBytes2(11)]);\n\n      shop[_from].lat = posLat;\n      shop[_from].lng = posLng;\n      shop[_from].countryId = _data.toBytes2(11);\n      shop[_from].postalCode = _data.toBytes16(13);\n      shop[_from].cat = _data.toBytes16(29);\n      shop[_from].name = _data.toBytes16(45);\n      shop[_from].description = _data.toBytes32(61);\n      shop[_from].opening = _data.toBytes16(93);\n      shop[_from].generalIndex = shopIndex.push(_from) - 1;\n      shop[_from].zoneIndex = shopInZone[_data.toBytes2(11)][_data.toBytes16(13)].push(_from) - 1;\n      emit RegisterShop(_from);\n      bank.addTokenShop(_from,_value);\n      dth.transfer(address(bank), _value);\n    } else if (_func == bytes1(0x32)) { // teller registration -- GAS USED 310099\n      // require staked greater than licence price\n      require(_value >= licenceTeller[_data.toBytes2(11)]);\n      // require is not already a teller\n      require(!isTeller(_from));\n      // require zone is open\n      require(openedCountryTeller[_data.toBytes2(11)]);\n\n      teller[_from].lat = posLat;\n      teller[_from].lng = posLng;\n      teller[_from].countryId = _data.toBytes2(11);\n      teller[_from].postalCode = _data.toBytes16(13);\n      teller[_from].avatarId = int8(_data.toBytes1(29));\n      teller[_from].currencyId = int8(_data.toBytes1(30));\n      teller[_from].messenger = _data.toBytes16(31);\n      teller[_from].rates = int16(_data.toBytes2(47));\n      teller[_from].buyer = _data.toBytes1(49) == bytes1(0x01) ? true : false;\n      teller[_from].buyRates = int16(_data.toBytes2(50));\n      teller[_from].generalIndex = tellerIndex.push(_from) - 1;\n      teller[_from].zoneIndex = tellerInZone[_data.toBytes2(11)][_data.toBytes16(13)].push(_from) - 1;\n      teller[_from].online = true;\n      emit RegisterTeller(_from);\n      bank.addTokenTeller(_from, _value);\n      dth.transfer(address(bank), _value);\n    } else if (_func == bytes1(0x33)) {  // shop bulk registration\n      // We need to have the possibility to register in bulk some shop\n      // For big retailer company willing to be listed on dether, we need to have a way to add\n      // all their shop from one address\n      // This functionnality will become available for anyone willing to list multiple shop\n      // in the futures contract\n\n      // Only the CSO should be able to register shop in bulk\n      require(_from == csoAddress);\n      // Each shop still need his own staking\n      require(_value >= licenceShop[_data.toBytes2(11)]);\n      // require the addresses not already registered\n      require(!isShop(address(_data.toAddress(109))));\n      // require zone is open\n      require(openedCountryShop[_data.toBytes2(11)]);\n      address newShopAddress = _data.toAddress(109);\n      shop[newShopAddress].lat = posLat;\n      shop[newShopAddress].lng = posLng;\n      shop[newShopAddress].countryId = _data.toBytes2(11);\n      shop[newShopAddress].postalCode = _data.toBytes16(13);\n      shop[newShopAddress].cat = _data.toBytes16(29);\n      shop[newShopAddress].name = _data.toBytes16(45);\n      shop[newShopAddress].description = _data.toBytes32(61);\n      shop[newShopAddress].opening = _data.toBytes16(93);\n      shop[newShopAddress].generalIndex = shopIndex.push(newShopAddress) - 1;\n      shop[newShopAddress].zoneIndex = shopInZone[_data.toBytes2(11)][_data.toBytes16(13)].push(newShopAddress) - 1;\n      shop[newShopAddress].detherShop = true;\n      emit RegisterShop(newShopAddress);\n      bank.addTokenShop(newShopAddress, _value);\n      dth.transfer(address(bank), _value);\n    }\n  }\n\n  /**\n   * a teller can update his profile\n   * If a teller want to change his location, he would need to delete and recreate\n   * a new point\n   */\n  function updateTeller(\n    int8 currencyId,\n    bytes16 messenger,\n    int8 avatarId,\n    int16 rates,\n    bool online\n   ) public payable {\n    require(isTeller(msg.sender));\n    if (currencyId != teller[msg.sender].currencyId)\n    teller[msg.sender].currencyId = currencyId;\n    if (teller[msg.sender].messenger != messenger)\n     teller[msg.sender].messenger = messenger;\n    if (teller[msg.sender].avatarId != avatarId)\n     teller[msg.sender].avatarId = avatarId;\n    if (teller[msg.sender].rates != rates)\n     teller[msg.sender].rates = rates;\n    if (teller[msg.sender].online != online)\n      teller[msg.sender].online = online;\n    if (msg.value > 0) {\n      bank.addEthTeller.value(msg.value)(msg.sender, msg.value);\n    }\n    emit UpdateTeller(msg.sender);\n  }\n\n  // mapping for limiting the sell amount\n  //      tier             countryId usdDailyLimit\n  mapping(uint => mapping (bytes2 => uint)) limitTier;\n\n  function setSellDailyLimit(uint _tier, bytes2 _countryId, uint256 _limitUsd) public onlyCFO {\n    limitTier[_tier][_countryId] = _limitUsd;\n  }\n  function getSellDailyLimit(uint _tier, bytes2 _countryId) public view returns(uint256 limitUsd) {\n    limitUsd = limitTier[_tier][_countryId];\n  }\n\n  modifier doesNotExceedDailySellLimit(address _teller, uint256 _weiSellAmount) {\n    // limits are set per country\n    bytes2 countryId = teller[_teller].countryId;\n\n    // user is always tier1, and could be tier2\n    uint256 usdDailyLimit = getSellDailyLimit(isTier2(_teller) ? 2 : 1, countryId);\n\n    // weiPriceOneUsd is set by the oracle (which runs every day at midnight)\n    uint256 weiDailyLimit = SafeMath.mul(priceOracle.getWeiPriceOneUsd(), usdDailyLimit);\n\n    // with each sell we update wei sold today for that user inside the Bank contract\n    uint256 weiSoldToday = bank.getWeiSoldToday(_teller);\n\n    uint256 newWeiSoldToday = SafeMath.add(weiSoldToday, _weiSellAmount);\n\n    // we may not exceed the daily wei limit with this sell\n    require(newWeiSoldToday <= weiDailyLimit);\n    _;\n  }\n\n  function getPairSellLoyaltyPerc(address _from, address _to) public view returns(uint256) {\n    return pairSellsLoyaltyPerc[_from][_to];\n  }\n\n  function getLoyaltyPoints(address who) public view returns (uint256) {\n    return loyaltyPoints[who];\n  }\n\n  /**\n   * SellEth\n   * average gas cost: 123173\n   * @param _to -> the address for the receiver\n   * @param _amount -> the amount to send\n   */\n  function sellEth(address _to, uint _amount)\n    whenNotPaused\n    doesNotExceedDailySellLimit(msg.sender, _amount)\n    external\n  {\n    require(isTeller(msg.sender));\n    require(_to != msg.sender);\n    // send eth to the receiver from the bank contract\n    // this will also update eth amount sold 'today' by msg.sender\n    bank.withdrawEth(msg.sender, _to, _amount);\n\n    // increase reput for the buyer and the seller Only if the buyer is also whitelisted,\n    // It's a way to incentive user to trade on the system\n    if (smsCertifier.certified(_to)) {\n      uint currentSellerLoyaltyPointsPerc = pairSellsLoyaltyPerc[msg.sender][_to];\n      if (currentSellerLoyaltyPointsPerc == 0) {\n        // this is the first sell between seller and buyer, set to 100%\n        pairSellsLoyaltyPerc[msg.sender][_to] = 10000;\n        currentSellerLoyaltyPointsPerc = 10000;\n      }\n\n      // add percentage of loyaltyPoints of this sell to seller's loyaltyPoints\n      loyaltyPoints[msg.sender] = SafeMath.add(loyaltyPoints[msg.sender], SafeMath.mul(_amount, currentSellerLoyaltyPointsPerc) / 10000);\n\n      // update the loyaltyPoints percentage of the seller, there will be a 21% decrease with every sell to the same buyer (100 - 21 = 79)\n      pairSellsLoyaltyPerc[msg.sender][_to] = SafeMath.mul(currentSellerLoyaltyPointsPerc, 79) / 100;\n\n      volumeBuy[_to] = SafeMath.add(volumeBuy[_to], _amount);\n      volumeSell[msg.sender] = SafeMath.add(volumeSell[msg.sender], _amount);\n      nbTrade[msg.sender] += 1;\n    }\n    emit Sent(msg.sender, _to, _amount);\n  }\n\n  /**\n   * switchStatus\n   * Turn status teller on/off\n   */\n  function switchStatus(bool _status) external {\n    if (teller[msg.sender].online != _status)\n     teller[msg.sender].online = _status;\n  }\n\n  /**\n   * addFunds\n   * teller can add more funds on his sellpoint\n   */\n  function addFunds() external payable {\n    require(isTeller(msg.sender));\n    require(bank.addEthTeller.value(msg.value)(msg.sender, msg.value));\n    emit AddFunds(msg.sender, msg.value);\n  }\n\n  // gas used 67841\n  // a teller can delete a sellpoint\n  function deleteTeller() external {\n    require(isTeller(msg.sender));\n    uint rowToDelete1 = teller[msg.sender].zoneIndex;\n    address keyToMove1 = tellerInZone[teller[msg.sender].countryId][teller[msg.sender].postalCode][tellerInZone[teller[msg.sender].countryId][teller[msg.sender].postalCode].length - 1];\n    tellerInZone[teller[msg.sender].countryId][teller[msg.sender].postalCode][rowToDelete1] = keyToMove1;\n    teller[keyToMove1].zoneIndex = rowToDelete1;\n    tellerInZone[teller[msg.sender].countryId][teller[msg.sender].postalCode].length--;\n\n    uint rowToDelete2 = teller[msg.sender].generalIndex;\n    address keyToMove2 = tellerIndex[tellerIndex.length - 1];\n    tellerIndex[rowToDelete2] = keyToMove2;\n    teller[keyToMove2].generalIndex = rowToDelete2;\n    tellerIndex.length--;\n    delete teller[msg.sender];\n    bank.withdrawDthTeller(msg.sender);\n    bank.refundEth(msg.sender);\n    emit DeleteTeller(msg.sender);\n  }\n\n  // gas used 67841\n  // A moderator can delete a sellpoint\n  function deleteTellerMods(address _toDelete) isTellerModerator(msg.sender) external {\n    require(isTeller(_toDelete));\n    uint rowToDelete1 = teller[_toDelete].zoneIndex;\n    address keyToMove1 = tellerInZone[teller[_toDelete].countryId][teller[_toDelete].postalCode][tellerInZone[teller[_toDelete].countryId][teller[_toDelete].postalCode].length - 1];\n    tellerInZone[teller[_toDelete].countryId][teller[_toDelete].postalCode][rowToDelete1] = keyToMove1;\n    teller[keyToMove1].zoneIndex = rowToDelete1;\n    tellerInZone[teller[_toDelete].countryId][teller[_toDelete].postalCode].length--;\n\n    uint rowToDelete2 = teller[_toDelete].generalIndex;\n    address keyToMove2 = tellerIndex[tellerIndex.length - 1];\n    tellerIndex[rowToDelete2] = keyToMove2;\n    teller[keyToMove2].generalIndex = rowToDelete2;\n    tellerIndex.length--;\n    delete teller[_toDelete];\n    bank.withdrawDthTeller(_toDelete);\n    bank.refundEth(_toDelete);\n    emit DeleteTellerModerator(msg.sender, _toDelete);\n  }\n\n  // gas used 67841\n  // A shop owner can delete his point.\n  function deleteShop() external {\n    require(isShop(msg.sender));\n    uint rowToDelete1 = shop[msg.sender].zoneIndex;\n    address keyToMove1 = shopInZone[shop[msg.sender].countryId][shop[msg.sender].postalCode][shopInZone[shop[msg.sender].countryId][shop[msg.sender].postalCode].length - 1];\n    shopInZone[shop[msg.sender].countryId][shop[msg.sender].postalCode][rowToDelete1] = keyToMove1;\n    shop[keyToMove1].zoneIndex = rowToDelete1;\n    shopInZone[shop[msg.sender].countryId][shop[msg.sender].postalCode].length--;\n\n    uint rowToDelete2 = shop[msg.sender].generalIndex;\n    address keyToMove2 = shopIndex[shopIndex.length - 1];\n    shopIndex[rowToDelete2] = keyToMove2;\n    shop[keyToMove2].generalIndex = rowToDelete2;\n    shopIndex.length--;\n    delete shop[msg.sender];\n    bank.withdrawDthShop(msg.sender);\n    emit DeleteShop(msg.sender);\n  }\n\n  // gas used 67841\n  // Moderator can delete a shop point\n  function deleteShopMods(address _toDelete) isShopModerator(msg.sender) external {\n    uint rowToDelete1 = shop[_toDelete].zoneIndex;\n    address keyToMove1 = shopInZone[shop[_toDelete].countryId][shop[_toDelete].postalCode][shopInZone[shop[_toDelete].countryId][shop[_toDelete].postalCode].length - 1];\n    shopInZone[shop[_toDelete].countryId][shop[_toDelete].postalCode][rowToDelete1] = keyToMove1;\n    shop[keyToMove1].zoneIndex = rowToDelete1;\n    shopInZone[shop[_toDelete].countryId][shop[_toDelete].postalCode].length--;\n\n    uint rowToDelete2 = shop[_toDelete].generalIndex;\n    address keyToMove2 = shopIndex[shopIndex.length - 1];\n    shopIndex[rowToDelete2] = keyToMove2;\n    shop[keyToMove2].generalIndex = rowToDelete2;\n    shopIndex.length--;\n    if (!shop[_toDelete].detherShop)\n      bank.withdrawDthShop(_toDelete);\n    else\n      bank.withdrawDthShopAdmin(_toDelete, csoAddress);\n    delete shop[_toDelete];\n    emit DeleteShopModerator(msg.sender, _toDelete);\n  }\n\n  /**\n   *  GETTER\n   */\n\n  // get teller\n  // return teller info\n  function getTeller(address _teller) public view returns (\n    int32 lat,\n    int32 lng,\n    bytes2 countryId,\n    bytes16 postalCode,\n    int8 currencyId,\n    bytes16 messenger,\n    int8 avatarId,\n    int16 rates,\n    uint balance,\n    bool online,\n    bool buyer,\n    int16 buyRates\n    ) {\n    Teller storage theTeller = teller[_teller];\n    lat = theTeller.lat;\n    lng = theTeller.lng;\n    countryId = theTeller.countryId;\n    postalCode = theTeller.postalCode;\n    currencyId = theTeller.currencyId;\n    messenger = theTeller.messenger;\n    avatarId = theTeller.avatarId;\n    rates = theTeller.rates;\n    online = theTeller.online;\n    buyer = theTeller.buyer;\n    buyRates = theTeller.buyRates;\n    balance = bank.getEthBalTeller(_teller);\n  }\n\n  /*\n   * Shop ----------------------------------\n   * return Shop value\n   */\n  function getShop(address _shop) public view returns (\n   int32 lat,\n   int32 lng,\n   bytes2 countryId,\n   bytes16 postalCode,\n   bytes16 cat,\n   bytes16 name,\n   bytes32 description,\n   bytes16 opening\n   ) {\n    Shop storage theShop = shop[_shop];\n    lat = theShop.lat;\n    lng = theShop.lng;\n    countryId = theShop.countryId;\n    postalCode = theShop.postalCode;\n    cat = theShop.cat;\n    name = theShop.name;\n    description = theShop.description;\n    opening = theShop.opening;\n   }\n\n   // get reput\n   // return reputation data from teller\n  function getReput(address _teller) public view returns (\n   uint buyVolume,\n   uint sellVolume,\n   uint numTrade,\n   uint256 loyaltyPoints_\n   ) {\n     buyVolume = volumeBuy[_teller];\n     sellVolume = volumeSell[_teller];\n     numTrade = nbTrade[_teller];\n     loyaltyPoints_ = loyaltyPoints[_teller];\n  }\n  // return balance of teller put in escrow\n  function getTellerBalance(address _teller) public view returns (uint) {\n    return bank.getEthBalTeller(_teller);\n  }\n\n  // return an array of address of all zone present on a zone\n  // zone is a mapping COUNTRY => POSTALCODE\n  function getZoneShop(bytes2 _country, bytes16 _postalcode) public view returns (address[]) {\n     return shopInZone[_country][_postalcode];\n  }\n\n  // return array of address of all shop\n  function getAllShops() public view returns (address[]) {\n   return shopIndex;\n  }\n\n  function isShop(address _shop) public view returns (bool ){\n   return (shop[_shop].countryId != bytes2(0x0));\n  }\n\n  // return an array of address of all teller present on a zone\n  // zone is a mapping COUNTRY => POSTALCODE\n  function getZoneTeller(bytes2 _country, bytes16 _postalcode) public view returns (address[]) {\n     return tellerInZone[_country][_postalcode];\n  }\n\n  // return array of address of all teller\n  function getAllTellers() public view returns (address[]) {\n   return tellerIndex;\n  }\n\n  // return if teller or not\n  function isTeller(address _teller) public view returns (bool ){\n    return (teller[_teller].countryId != bytes2(0x0));\n  }\n\n  /*\n   * misc\n   */\n   // return info about how much DTH the shop has staked\n  function getStakedShop(address _shop) public view returns (uint) {\n    return bank.getDthShop(_shop);\n  }\n  // return info about how much DTH the teller has staked\n  function getStakedTeller(address _teller) public view returns (uint) {\n    return bank.getDthTeller(_teller);\n  }\n  // give ownership to the bank contract\n  function transferBankOwnership(address _newbankowner) external onlyCEO whenPaused {\n    bank.transferOwnership(_newbankowner);\n  }\n}",
  "abi": "[{\"constant\":true,\"inputs\":[],\"name\":\"dth\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"cfoAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ceoAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"kycCertifier\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"bytes2\"}],\"name\":\"licenceShop\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_shop\",\"type\":\"address\"}],\"name\":\"getShop\",\"outputs\":[{\"name\":\"lat\",\"type\":\"int32\"},{\"name\":\"lng\",\"type\":\"int32\"},{\"name\":\"countryId\",\"type\":\"bytes2\"},{\"name\":\"postalCode\",\"type\":\"bytes16\"},{\"name\":\"cat\",\"type\":\"bytes16\"},{\"name\":\"name\",\"type\":\"bytes16\"},{\"name\":\"description\",\"type\":\"bytes32\"},{\"name\":\"opening\",\"type\":\"bytes16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_teller\",\"type\":\"address\"}],\"name\":\"getStakedTeller\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_shop\",\"type\":\"address\"}],\"name\":\"isShop\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_country\",\"type\":\"bytes2\"}],\"name\":\"openZoneTeller\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newCMO\",\"type\":\"address\"}],\"name\":\"setCMO\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newCSO\",\"type\":\"address\"}],\"name\":\"setCSO\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"csoAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_teller\",\"type\":\"address\"}],\"name\":\"getReput\",\"outputs\":[{\"name\":\"buyVolume\",\"type\":\"uint256\"},{\"name\":\"sellVolume\",\"type\":\"uint256\"},{\"name\":\"numTrade\",\"type\":\"uint256\"},{\"name\":\"loyaltyPoints_\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_dth\",\"type\":\"address\"},{\"name\":\"_bank\",\"type\":\"address\"}],\"name\":\"initContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"priceOracle\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newCEO\",\"type\":\"address\"}],\"name\":\"setCEO\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"isTier2\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"smsCertifier\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_status\",\"type\":\"bool\"}],\"name\":\"switchStatus\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"unpause\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"currencyId\",\"type\":\"int8\"},{\"name\":\"messenger\",\"type\":\"bytes16\"},{\"name\":\"avatarId\",\"type\":\"int8\"},{\"name\":\"rates\",\"type\":\"int16\"},{\"name\":\"online\",\"type\":\"bool\"}],\"name\":\"updateTeller\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"deleteShop\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tier\",\"type\":\"uint256\"},{\"name\":\"_countryId\",\"type\":\"bytes2\"},{\"name\":\"_limitUsd\",\"type\":\"uint256\"}],\"name\":\"setSellDailyLimit\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_shop\",\"type\":\"address\"}],\"name\":\"getStakedShop\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newCFO\",\"type\":\"address\"}],\"name\":\"setCFO\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getAllTellers\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_moderator\",\"type\":\"address\"}],\"name\":\"removeShopModerator\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_priceOracle\",\"type\":\"address\"}],\"name\":\"setPriceOracle\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_teller\",\"type\":\"address\"}],\"name\":\"getTellerBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"paused\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_country\",\"type\":\"bytes2\"}],\"name\":\"openZoneShop\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"shopModerators\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newbankowner\",\"type\":\"address\"}],\"name\":\"transferBankOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"bytes2\"}],\"name\":\"openedCountryShop\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bank\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"isTier1\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_moderator\",\"type\":\"address\"}],\"name\":\"setShopModerator\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"pause\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tier\",\"type\":\"uint256\"},{\"name\":\"_countryId\",\"type\":\"bytes2\"}],\"name\":\"getSellDailyLimit\",\"outputs\":[{\"name\":\"limitUsd\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"shopIndex\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"deleteTeller\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"cmoAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"tellerIndex\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"country\",\"type\":\"bytes2\"},{\"name\":\"price\",\"type\":\"uint256\"}],\"name\":\"setLicenceShopPrice\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_country\",\"type\":\"bytes2\"}],\"name\":\"closeZoneTeller\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"addFunds\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_moderator\",\"type\":\"address\"}],\"name\":\"removeTellerModerator\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_toDelete\",\"type\":\"address\"}],\"name\":\"deleteShopMods\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_country\",\"type\":\"bytes2\"},{\"name\":\"_postalcode\",\"type\":\"bytes16\"}],\"name\":\"getZoneShop\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_country\",\"type\":\"bytes2\"}],\"name\":\"closeZoneShop\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_value\",\"type\":\"uint256\"},{\"name\":\"_data\",\"type\":\"bytes\"}],\"name\":\"tokenFallback\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"tellerModerators\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"bytes2\"}],\"name\":\"openedCountryTeller\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"who\",\"type\":\"address\"}],\"name\":\"getLoyaltyPoints\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_moderator\",\"type\":\"address\"}],\"name\":\"setTellerModerator\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"run2\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getAllShops\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"sellEth\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_kycCertifier\",\"type\":\"address\"}],\"name\":\"setKycCertifier\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_toDelete\",\"type\":\"address\"}],\"name\":\"deleteTellerMods\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"country\",\"type\":\"bytes2\"},{\"name\":\"price\",\"type\":\"uint256\"}],\"name\":\"setLicenceTellerPrice\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"bytes2\"}],\"name\":\"licenceTeller\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_teller\",\"type\":\"address\"}],\"name\":\"getTeller\",\"outputs\":[{\"name\":\"lat\",\"type\":\"int32\"},{\"name\":\"lng\",\"type\":\"int32\"},{\"name\":\"countryId\",\"type\":\"bytes2\"},{\"name\":\"postalCode\",\"type\":\"bytes16\"},{\"name\":\"currencyId\",\"type\":\"int8\"},{\"name\":\"messenger\",\"type\":\"bytes16\"},{\"name\":\"avatarId\",\"type\":\"int8\"},{\"name\":\"rates\",\"type\":\"int16\"},{\"name\":\"balance\",\"type\":\"uint256\"},{\"name\":\"online\",\"type\":\"bool\"},{\"name\":\"buyer\",\"type\":\"bool\"},{\"name\":\"buyRates\",\"type\":\"int16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"run1\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_country\",\"type\":\"bytes2\"},{\"name\":\"_postalcode\",\"type\":\"bytes16\"}],\"name\":\"getZoneTeller\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_teller\",\"type\":\"address\"}],\"name\":\"isTeller\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_smsCertifier\",\"type\":\"address\"}],\"name\":\"setSmsCertifier\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"}],\"name\":\"getPairSellLoyaltyPerc\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"tellerAddress\",\"type\":\"address\"}],\"name\":\"RegisterTeller\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"tellerAddress\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"AddFunds\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"tellerAddress\",\"type\":\"address\"}],\"name\":\"DeleteTeller\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"tellerAddress\",\"type\":\"address\"}],\"name\":\"UpdateTeller\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"Sent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"shopAddress\",\"type\":\"address\"}],\"name\":\"RegisterShop\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"shopAddress\",\"type\":\"address\"}],\"name\":\"DeleteShop\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"moderator\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"shopAddress\",\"type\":\"address\"}],\"name\":\"DeleteShopModerator\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"moderator\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"tellerAddress\",\"type\":\"address\"}],\"name\":\"DeleteTellerModerator\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"newContract\",\"type\":\"address\"}],\"name\":\"ContractUpgrade\",\"type\":\"event\"}]",
  "bytecode": "60806040526006805462ffffff191690556017805460ff1916905534801561002657600080fd5b5060008054600160a060020a033316600160a060020a0319909116179055614937806100536000396000f3006080604052600436106103085763ffffffff60e060020a60003504166301e57a37811461030d5780630519ce791461033e5780630a0f8168146103535780630d46f91a146103685780630d926f7a1461037d5780630e479dc7146103b157806319f1cded146104325780631d0e8a4d146104535780631d32f106146104885780632072863b146104ac5780632105c049146104cd5780632272b0af146104ee5780632314a5c81461050357806325ba0f511461054a5780632630c12f1461057157806327d7874c146105865780632e3a4def146105a757806330a55316146105c85780633b23a5ca146105dd5780633f4ba83a146105f75780633fa198041461060c57806343579fe81461063b5780634a9f0110146106505780634b0ad8fa146106785780634e0a3379146106995780634f4cd650146106ba578063529e65e11461071f578063530e784f1461074057806359b17b43146107615780635c975abb1461078257806366d5eb9b1461079757806367bb15ad146107b9578063681e3356146107da578063744955a9146107fb57806376cdb03b1461081d57806378843a9514610832578063809ffb20146108535780638456cb59146108745780638620084214610889578063878127c8146108ae5780638bd1b610146108c65780638c267b97146108db57806395d43eea146108f05780639a8061e8146109085780639ae120dd1461092d578063a26759cb1461094f578063aa5a11c514610957578063b0547d8c14610978578063b5c4147f14610999578063ba2a98f2146109c8578063c0ee0b8a146109ea578063c640ee3d14610a53578063ca34333b14610a74578063d04c911514610a96578063d0a4a81b14610ab7578063d4f639ea14610ad8578063d5c9b23914610aed578063dd955c4414610b02578063e019ac2914610b26578063f002467714610b47578063f2d15c4814610b68578063f3943ca914610b8d578063f554567f14610baf578063f983c0fa14610c65578063fa1d9cf814610c7a578063fac8a80014610ca9578063fcf3438c14610cca578063fdff31ed14610ceb575b600080fd5b34801561031957600080fd5b50610322610d12565b60408051600160a060020a039092168252519081900360200190f35b34801561034a57600080fd5b50610322610d21565b34801561035f57600080fd5b50610322610d30565b34801561037457600080fd5b50610322610d3f565b34801561038957600080fd5b5061039f600160f060020a031960043516610d4e565b60408051918252519081900360200190f35b3480156103bd57600080fd5b506103d2600160a060020a0360043516610d60565b604080516003998a0b8a0b815297890b90980b6020880152600160f060020a0319909516868801526001608060020a031993841660608701529183166080860152821660a085015260c08401521660e08201529051908190036101000190f35b34801561043e57600080fd5b5061039f600160a060020a0360043516610dc9565b34801561045f57600080fd5b50610474600160a060020a0360043516610e66565b604080519115158252519081900360200190f35b34801561049457600080fd5b506104aa600160f060020a031960043516610e9d565b005b3480156104b857600080fd5b506104aa600160a060020a0360043516610edd565b3480156104d957600080fd5b506104aa600160a060020a0360043516610f2f565b3480156104fa57600080fd5b50610322610f81565b34801561050f57600080fd5b50610524600160a060020a0360043516610f90565b604080519485526020850193909352838301919091526060830152519081900360800190f35b34801561055657600080fd5b506104aa600160a060020a0360043581169060243516610fcc565b34801561057d57600080fd5b50610322611032565b34801561059257600080fd5b506104aa600160a060020a0360043516611041565b3480156105b357600080fd5b50610474600160a060020a0360043516611093565b3480156105d457600080fd5b506103226110e8565b3480156105e957600080fd5b506104aa60043515156110fe565b34801561060357600080fd5b506104aa611152565b6104aa600435600090810b906001608060020a03196024351690604435900b60643560010b608435151561118a565b34801561064757600080fd5b506104aa6114c4565b34801561065c57600080fd5b506104aa600435600160f060020a03196024351660443561183a565b34801561068457600080fd5b5061039f600160a060020a036004351661187c565b3480156106a557600080fd5b506104aa600160a060020a03600435166118e7565b3480156106c657600080fd5b506106cf611939565b60408051602080825283518183015283519192839290830191858101910280838360005b8381101561070b5781810151838201526020016106f3565b505050509050019250505060405180910390f35b34801561072b57600080fd5b506104aa600160a060020a036004351661199c565b34801561074c57600080fd5b506104aa600160a060020a03600435166119d8565b34801561076d57600080fd5b5061039f600160a060020a0360043516611a15565b34801561078e57600080fd5b50610474611a80565b3480156107a357600080fd5b506104aa600160f060020a031960043516611a89565b3480156107c557600080fd5b50610474600160a060020a0360043516611ac9565b3480156107e657600080fd5b506104aa600160a060020a0360043516611ade565b34801561080757600080fd5b50610474600160f060020a031960043516611b8c565b34801561082957600080fd5b50610322611ba1565b34801561083e57600080fd5b50610474600160a060020a0360043516611bb0565b34801561085f57600080fd5b506104aa600160a060020a0360043516611c0b565b34801561088057600080fd5b506104aa611c5f565b34801561089557600080fd5b5061039f600435600160f060020a031960243516611c99565b3480156108ba57600080fd5b50610322600435611cc1565b3480156108d257600080fd5b506104aa611ce9565b3480156108e757600080fd5b506103226120d6565b3480156108fc57600080fd5b506103226004356120e5565b34801561091457600080fd5b506104aa600160f060020a0319600435166024356120f3565b34801561093957600080fd5b506104aa600160f060020a03196004351661212b565b6104aa612168565b34801561096357600080fd5b506104aa600160a060020a0360043516612264565b34801561098457600080fd5b506104aa600160a060020a03600435166122a0565b3480156109a557600080fd5b506106cf600160f060020a0319600435166001608060020a0319602435166126ec565b3480156109d457600080fd5b506104aa600160f060020a031960043516612776565b3480156109f657600080fd5b50604080516020600460443581810135601f81018490048402850184019095528484526104aa948235600160a060020a03169460248035953695946064949201919081908401838280828437509497506127b39650505050505050565b348015610a5f57600080fd5b50610474600160a060020a0360043516613a3c565b348015610a8057600080fd5b50610474600160f060020a031960043516613a51565b348015610aa257600080fd5b5061039f600160a060020a0360043516613a66565b348015610ac357600080fd5b506104aa600160a060020a0360043516613a81565b348015610ae457600080fd5b50610474613ad5565b348015610af957600080fd5b506106cf613ae4565b348015610b0e57600080fd5b506104aa600160a060020a0360043516602435613b44565b348015610b3257600080fd5b506104aa600160a060020a036004351661402d565b348015610b5357600080fd5b506104aa600160a060020a0360043516614092565b348015610b7457600080fd5b506104aa600160f060020a0319600435166024356144b9565b348015610b9957600080fd5b5061039f600160f060020a0319600435166144f1565b348015610bbb57600080fd5b50610bd0600160a060020a0360043516614503565b6040805160039d8e0b8e0b81529b8d0b909c0b60208c0152600160f060020a03199099168a8c01526001608060020a031997881660608b0152600096870b870b60808b01529490961660a089015291840b90930b60c0870152600192830b830b60e087015261010086015291151561012085015290151561014084015290810b900b6101608201529051908190036101800190f35b348015610c7157600080fd5b50610474614669565b348015610c8657600080fd5b506106cf600160f060020a0319600435166001608060020a031960243516614677565b348015610cb557600080fd5b50610474600160a060020a03600435166146ff565b348015610cd657600080fd5b506104aa600160a060020a0360043516614736565b348015610cf757600080fd5b5061039f600160a060020a03600435811690602435166147a8565b600c54600160a060020a031681565b600354600160a060020a031681565b600054600160a060020a031681565b600754600160a060020a031681565b600a6020526000908152604090205481565b600160a060020a0316600090815260186020526040902080546001820154600283015460039384015483850b95640100000000850490950b9460f060020a604060020a86040294608060020a605060020a90910481029480820294908290048202939092910290565b600d54604080517f78d0a415000000000000000000000000000000000000000000000000000000008152600160a060020a038481166004830152915160009392909216916378d0a4159160248082019260209290919082900301818787803b158015610e3457600080fd5b505af1158015610e48573d6000803e3d6000fd5b505050506040513d6020811015610e5e57600080fd5b505192915050565b600160a060020a038116600090815260186020526040902054604060020a900460f060020a02600160f060020a0319161515919050565b60015433600160a060020a03908116911614610eb857600080fd5b600160f060020a0319166000908152600960205260409020805460ff19166001179055565b60005433600160a060020a03908116911614610ef857600080fd5b600160a060020a0381161515610f0d57600080fd5b60018054600160a060020a031916600160a060020a0392909216919091179055565b60005433600160a060020a03908116911614610f4a57600080fd5b600160a060020a0381161515610f5f57600080fd5b60028054600160a060020a031916600160a060020a0392909216919091179055565b600254600160a060020a031681565b600160a060020a031660009081526010602090815260408083205460118352818420546012845282852054601390945291909320549293909290565b60005433600160a060020a03908116911614610fe757600080fd5b60175460ff1615610ff757600080fd5b600c8054600160a060020a03938416600160a060020a031991821617909155600d80549290931691161790556017805460ff19166001179055565b600e54600160a060020a031681565b60005433600160a060020a0390811691161461105c57600080fd5b600160a060020a038116151561107157600080fd5b60008054600160a060020a031916600160a060020a0392909216919091179055565b6007546040805160e160020a63660ea601028152600160a060020a0384811660048301529151600093929092169163cc1d4c029160248082019260209290919082900301818787803b158015610e3457600080fd5b60065463010000009004600160a060020a031681565b600160a060020a03331660009081526014602052604090206004015460ff1615158115151461114f5733600160a060020a03166000908152601460205260409020600401805460ff19168215151790555b50565b60005433600160a060020a0390811691161461116d57600080fd5b60065460ff16151561117e57600080fd5b6006805460ff19169055565b611193336146ff565b151561119e57600080fd5b33600160a060020a031660009081526014602052604081205460d060020a9004810b810b9086900b1461121957600160a060020a033316600090815260146020526040812080549187900b60ff1660d060020a027aff0000000000000000000000000000000000000000000000000000199092169190911790555b600160a060020a033316600090815260146020526040902060010154608060020a026001608060020a0319908116908516146112815733600160a060020a0316600090815260146020526040902060010180546001608060020a031916608060020a86041790555b600160a060020a033316600090815260146020526040812060010154608060020a9004810b810b9084900b146112f857600160a060020a033316600090815260146020526040812060010180549185900b60ff16608060020a0270ff00000000000000000000000000000000199092169190911790555b600160a060020a0333166000908152601460205260409020600190810154710100000000000000000000000000000000009004810b810b9083900b1461139257600160a060020a0333166000908152601460205260409020600190810180549184900b61ffff16710100000000000000000000000000000000000272ffff0000000000000000000000000000000000199092169190911790555b600160a060020a03331660009081526014602052604090206004015460ff161515811515146113e35733600160a060020a03166000908152601460205260409020600401805460ff19168215151790555b600034111561148957600d54604080517fe4651465000000000000000000000000000000000000000000000000000000008152600160a060020a0333811660048301523460248301819052925193169263e4651465929160448082019260209290919082900301818588803b15801561145b57600080fd5b505af115801561146f573d6000803e3d6000fd5b50505050506040513d602081101561148657600080fd5b50505b604051600160a060020a033316907fe3df84c3ca6a90f0e6485beae08e7bd034695356bec32910a3d62559ff33fbc890600090a25050505050565b6000806000806114d333610e66565b15156114de57600080fd5b33600160a060020a0316600090815260186020908152604080832060048101549054604060020a810460f060020a02600160f060020a031916855260198452828520605060020a909104608060020a026001608060020a0319168552909252909120805491955090600019810190811061155457fe5b600091825260208083209190910154600160a060020a03338116845260188352604080852054604060020a810460f060020a02600160f060020a031916865260198552818620605060020a909104608060020a026001608060020a0319168652909352919092208054919092169450849190869081106115d057fe5b60009182526020808320919091018054600160a060020a031916600160a060020a03948516179055858316825260188152604080832060040188905533909316825282822054604060020a810460f060020a02600160f060020a031916835260198252838320605060020a909104608060020a026001608060020a03191683529052208054906116649060001983016148c4565b50600160a060020a033316600090815260186020526040902060050154601a805491935090600019810190811061169757fe5b600091825260209091200154601a8054600160a060020a0390921692508291849081106116c057fe5b60009182526020808320919091018054600160a060020a031916600160a060020a039485161790559183168152601890915260409020600501829055601a80549061170f9060001983016148c4565b50600160a060020a03338116600081815260186020526040808220805479ffffffffffffffffffffffffffffffffffffffffffffffffffff1916815560018101839055600281018390556003810180546001608060020a03191690556004808201849055600582018490556006909101805460ff19169055600d5482517f3716f65d0000000000000000000000000000000000000000000000000000000081529182019490945290519290931692633716f65d926024808301939282900301818387803b1580156117df57600080fd5b505af11580156117f3573d6000803e3d6000fd5b505060408051600160a060020a033316815290517fe607eb1578eec3de556aa2d57f7ff9365c1706069a8959e794883eba60b043e39350908190036020019150a150505050565b60035433600160a060020a0390811691161461185557600080fd5b6000928352601b60209081526040808520600160f060020a03199094168552929052912055565b600d54604080517fa96b3ab8000000000000000000000000000000000000000000000000000000008152600160a060020a0384811660048301529151600093929092169163a96b3ab89160248082019260209290919082900301818787803b158015610e3457600080fd5b60005433600160a060020a0390811691161461190257600080fd5b600160a060020a038116151561191757600080fd5b60038054600160a060020a031916600160a060020a0392909216919091179055565b6060601680548060200260200160405190810160405280929190818152602001828054801561199157602002820191906000526020600020905b8154600160a060020a03168152600190910190602001808311611973575b505050505090505b90565b60005433600160a060020a039081169116146119b757600080fd5b600160a060020a03166000908152600460205260409020805460ff19169055565b60035433600160a060020a039081169116146119f357600080fd5b600e8054600160a060020a031916600160a060020a0392909216919091179055565b600d54604080517f8d837f38000000000000000000000000000000000000000000000000000000008152600160a060020a03848116600483015291516000939290921691638d837f389160248082019260209290919082900301818787803b158015610e3457600080fd5b60065460ff1681565b60015433600160a060020a03908116911614611aa457600080fd5b600160f060020a0319166000908152600860205260409020805460ff19166001179055565b60046020526000908152604090205460ff1681565b60005433600160a060020a03908116911614611af957600080fd5b60065460ff161515611b0a57600080fd5b600d54604080517ff2fde38b000000000000000000000000000000000000000000000000000000008152600160a060020a0384811660048301529151919092169163f2fde38b91602480830192600092919082900301818387803b158015611b7157600080fd5b505af1158015611b85573d6000803e3d6000fd5b5050505050565b60086020526000908152604090205460ff1681565b600d54600160a060020a031681565b6006546040805160e160020a63660ea601028152600160a060020a0384811660048301529151600093630100000090049092169163cc1d4c029160248082019260209290919082900301818787803b158015610e3457600080fd5b60005433600160a060020a03908116911614611c2657600080fd5b600160a060020a0381161515611c3b57600080fd5b600160a060020a03166000908152600460205260409020805460ff19166001179055565b60005433600160a060020a03908116911614611c7a57600080fd5b60065460ff1615611c8a57600080fd5b6006805460ff19166001179055565b6000918252601b60209081526040808420600160f060020a0319909316845291905290205490565b601a805482908110611ccf57fe5b600091825260209091200154600160a060020a0316905081565b600080600080611cf8336146ff565b1515611d0357600080fd5b33600160a060020a0316600090815260146020908152604080832060028101549054604060020a810460f060020a02600160f060020a031916855260158452828520605060020a909104608060020a026001608060020a03191685529092529091208054919550906000198101908110611d7957fe5b600091825260208083209190910154600160a060020a03338116845260148352604080852054604060020a810460f060020a02600160f060020a031916865260158552818620605060020a909104608060020a026001608060020a031916865290935291909220805491909216945084919086908110611df557fe5b60009182526020808320919091018054600160a060020a031916600160a060020a03948516179055858316825260148152604080832060020188905533909316825282822054604060020a810460f060020a02600160f060020a031916835260158252838320605060020a909104608060020a026001608060020a0319168352905220805490611e899060001983016148c4565b50600160a060020a03331660009081526014602052604090206003015460168054919350906000198101908110611ebc57fe5b60009182526020909120015460168054600160a060020a039092169250829184908110611ee557fe5b60009182526020808320919091018054600160a060020a031916600160a060020a0394851617905591831681526014909152604090206003018290556016805490611f349060001983016148c4565b50600160a060020a0333811660008181526014602052604080822080547affffffffffffffffffffffffffffffffffffffffffffffffffffff1916815560018101805475ffffffffffffffffffffffffffffffffffffffffffff1916905560028101839055600381018390556004908101805460ff19169055600d5482517fb71738f1000000000000000000000000000000000000000000000000000000008152918201949094529051929093169263b71738f1926024808301939282900301818387803b15801561200557600080fd5b505af1158015612019573d6000803e3d6000fd5b5050600d54604080517fd83edd70000000000000000000000000000000000000000000000000000000008152600160a060020a033381166004830152915191909216935063d83edd709250602480830192600092919082900301818387803b15801561208457600080fd5b505af1158015612098573d6000803e3d6000fd5b5050604051600160a060020a03331692507fb1e40dcb43d26b3a6cb20da12c333af5a0de0bcd6264eddca5fbacf3e31d4f949150600090a250505050565b600154600160a060020a031681565b6016805482908110611ccf57fe5b60015433600160a060020a0390811691161461210e57600080fd5b600160f060020a03199091166000908152600a6020526040902055565b60015433600160a060020a0390811691161461214657600080fd5b600160f060020a0319166000908152600960205260409020805460ff19169055565b612171336146ff565b151561217c57600080fd5b600d54604080517fe4651465000000000000000000000000000000000000000000000000000000008152600160a060020a0333811660048301523460248301819052925193169263e4651465929160448082019260209290919082900301818588803b1580156121eb57600080fd5b505af11580156121ff573d6000803e3d6000fd5b50505050506040513d602081101561221657600080fd5b5051151561222357600080fd5b604080513481529051600160a060020a033316917ff424eeb50f7d240513b6dc4a39048768557d8465bdc7d2dd363ecc538006c2be919081900360200190a2565b60005433600160a060020a0390811691161461227f57600080fd5b600160a060020a03166000908152600560205260409020805460ff19169055565b33600160a060020a038116600090815260046020526040812054909182918291829160ff1615156122d057600080fd5b600160a060020a038616600090815260186020908152604080832060048101549054604060020a810460f060020a02600160f060020a031916855260198452828520605060020a909104608060020a026001608060020a0319168552909252909120805491965090600019810190811061234657fe5b600091825260208083209190910154600160a060020a03898116845260188352604080852054604060020a810460f060020a02600160f060020a031916865260198552818620605060020a909104608060020a026001608060020a0319168652909352919092208054919092169550859190879081106123c257fe5b60009182526020808320919091018054600160a060020a031916600160a060020a039485161790558683168252601881526040808320600401899055928916825282822054604060020a810460f060020a02600160f060020a031916835260198252838320605060020a909104608060020a026001608060020a03191683529052208054906124559060001983016148c4565b50600160a060020a038616600090815260186020526040902060050154601a805491945090600019810190811061248857fe5b600091825260209091200154601a8054600160a060020a0390921693508391859081106124b157fe5b60009182526020808320919091018054600160a060020a031916600160a060020a039485161790559184168152601890915260409020600501839055601a8054906125009060001983016148c4565b50600160a060020a03861660009081526018602052604090206006015460ff1615156125aa57600d54604080517f3716f65d000000000000000000000000000000000000000000000000000000008152600160a060020a03898116600483015291519190921691633716f65d91602480830192600092919082900301818387803b15801561258d57600080fd5b505af11580156125a1573d6000803e3d6000fd5b50505050612635565b600d54600254604080517f7139b595000000000000000000000000000000000000000000000000000000008152600160a060020a038a81166004830152928316602482015290519190921691637139b59591604480830192600092919082900301818387803b15801561261c57600080fd5b505af1158015612630573d6000803e3d6000fd5b505050505b600160a060020a038087166000818152601860209081526040808320805479ffffffffffffffffffffffffffffffffffffffffffffffffffff1916815560018101849055600281018490556003810180546001608060020a03191690556004810184905560058101939093556006909201805460ff191690558151928352905133909316927f34fe9e989d541054eb508f79a2e9b0bc3aa3d7ff2f2ded4f1f6b2819aaec86a39281900390910190a2505050505050565b600160f060020a0319821660009081526019602090815260408083206001608060020a03198516845282529182902080548351818402810184019094528084526060939283018282801561276957602002820191906000526020600020905b8154600160a060020a0316815260019091019060200180831161274b575b5050505050905092915050565b60015433600160a060020a0390811691161461279157600080fd5b600160f060020a0319166000908152600860205260409020805460ff19169055565b60065460009081908190819060ff16156127cc57600080fd5b6006546040805160e160020a63660ea601028152600160a060020a038a8116600483015291518a93630100000090049092169163cc1d4c02916024808201926020929091908290030181600087803b15801561282757600080fd5b505af115801561283b573d6000803e3d6000fd5b505050506040513d602081101561285157600080fd5b5051151561285e57600080fd5b600c5433600160a060020a0390811691161461287957600080fd5b61288a86600063ffffffff6147d316565b945060f860020a6128a287600163ffffffff6147d316565b600160f860020a031916146128ce576128c286600263ffffffff6147fb16565b60e060020a90046128eb565b6128df86600263ffffffff6147fb16565b60e060020a9004600019025b935060f860020a61290387600663ffffffff6147d316565b600160f860020a0319161461292f5761292386600763ffffffff6147fb16565b60e060020a900461294c565b61294086600763ffffffff6147fb16565b60e060020a9004600019025b9250600160f860020a031985167f31000000000000000000000000000000000000000000000000000000000000001415612eac57600a600061299588600b63ffffffff61481116565b600160f060020a03191681526020810191909152604001600020548710156129bc57600080fd5b6129c588610e66565b156129cf57600080fd5b600860006129e488600b63ffffffff61481116565b600160f060020a031916815260208101919091526040016000205460ff161515612a0d57600080fd5b600160a060020a0388166000908152601860205260409020805463ffffffff1916600386810b63ffffffff9081169290921767ffffffff0000000019166401000000009187900b83169190910217909155612a6d908790600b9061481116565b600160a060020a0389166000908152601860205260409020805460f060020a909204604060020a0269ffff000000000000000019909216919091179055612abb86600d63ffffffff61482716565b600160a060020a03891660009081526018602052604090208054608060020a909204605060020a0279ffffffffffffffffffffffffffffffff0000000000000000000019909216919091179055612b1986601d63ffffffff61482716565b600160a060020a038916600090815260186020526040902060010180546001608060020a031916608060020a909204919091179055612b5986602d614827565b600160a060020a038916600090815260186020526040902060010180546fffffffffffffffffffffffffffffffff16608060020a92839004909202919091179055612ba586603d61483d565b600160a060020a038916600090815260186020526040902060020155612bd286605d63ffffffff61482716565b600160a060020a03891660008181526018602052604081206003810180546001608060020a031916608060020a90950494909417909355601a805460018181019092557f057c384a7d1c54f3a1b2e5e67b2617b8224fdfd1ea7234eea573a6ff665ff63e81018054600160a060020a031916909417909355600590930191909155601990612c6189600b614811565b600160f060020a03191681526020810191909152604001600090812090612c8f89600d63ffffffff61482716565b6fffffffffffffffffffffffffffffffff19166fffffffffffffffffffffffffffffffff191681526020019081526020016000208990806001815401808255809150509060018203906000526020600020016000909192909190916101000a815481600160a060020a030219169083600160a060020a0316021790555003601860008a600160a060020a0316600160a060020a03168152602001908152602001600020600401819055507ff45ad76a8c4c14053708bfd052607c5e35446beb04fbdff6f2f3c9dde8e83b37886040518082600160a060020a0316600160a060020a0316815260200191505060405180910390a1600d54604080517fd4d84da5000000000000000000000000000000000000000000000000000000008152600160a060020a038b81166004830152602482018b90529151919092169163d4d84da591604480830192600092919082900301818387803b158015612df057600080fd5b505af1158015612e04573d6000803e3d6000fd5b5050600c54600d54604080517fa9059cbb000000000000000000000000000000000000000000000000000000008152600160a060020a039283166004820152602481018d9052905191909216935063a9059cbb925060448083019260209291908290030181600087803b158015612e7a57600080fd5b505af1158015612e8e573d6000803e3d6000fd5b505050506040513d6020811015612ea457600080fd5b50613a329050565b600160f860020a031985167f320000000000000000000000000000000000000000000000000000000000000014156134ec57600b6000612ef2888363ffffffff61481116565b600160f060020a0319168152602081019190915260400160002054871015612f1957600080fd5b612f22886146ff565b15612f2c57600080fd5b60096000612f4188600b63ffffffff61481116565b600160f060020a031916815260208101919091526040016000205460ff161515612f6a57600080fd5b600160a060020a0388166000908152601460205260409020805463ffffffff1916600386810b63ffffffff9081169290921767ffffffff0000000019166401000000009187900b83169190910217909155612fca908790600b9061481116565b600160a060020a0389166000908152601460205260409020805460f060020a909204604060020a0269ffff00000000000000001990921691909117905561301886600d63ffffffff61482716565b600160a060020a03891660009081526014602052604090208054608060020a909204605060020a0279ffffffffffffffffffffffffffffffff000000000000000000001990921691909117905561307686601d63ffffffff6147d316565b600160a060020a0389166000908152601460205260408120600101805460f860020a90930490910b60ff16608060020a0270ff00000000000000000000000000000000199092169190911790556130d486601e63ffffffff6147d316565b600160a060020a0389166000908152601460205260408120805460f860020a90930490910b60ff1660d060020a027aff00000000000000000000000000000000000000000000000000001990921691909117905561313986601f63ffffffff61482716565b600160a060020a038916600090815260146020526040902060010180546001608060020a031916608060020a90920491909117905561317986602f614811565b600160a060020a03891660009081526014602052604090206001908101805460f060020a90930490910b61ffff16710100000000000000000000000000000000000272ffff00000000000000000000000000000000001990921691909117905560f860020a6131ef87603163ffffffff6147d316565b600160f860020a03191614613205576000613208565b60015b600160a060020a038916600090815260146020526040902060010180549115157301000000000000000000000000000000000000000273ff000000000000000000000000000000000000001990921691909117905561326e86603263ffffffff61481116565b600160a060020a03891660008181526014602052604081206001808201805460f060020a909604820b61ffff16740100000000000000000000000000000000000000000275ffff00000000000000000000000000000000000000001990961695909517909455601680548086019091557fd833147d7dc355ba459fc788f669e58cfaf9dc25ddcd0702e87d69c7b512428981018054600160a060020a031916851790559282526003019190915560159061332f89600b63ffffffff61481116565b600160f060020a0319168152602081019190915260400160009081209061335d89600d63ffffffff61482716565b6fffffffffffffffffffffffffffffffff19166fffffffffffffffffffffffffffffffff191681526020019081526020016000208990806001815401808255809150509060018203906000526020600020016000909192909190916101000a815481600160a060020a030219169083600160a060020a0316021790555003601460008a600160a060020a0316600160a060020a03168152602001908152602001600020600201819055506001601460008a600160a060020a0316600160a060020a0316815260200190815260200160002060040160006101000a81548160ff02191690831515021790555087600160a060020a03167fdc94eebf39359cb097be68bd4890a58fce65c66d2d284d4349f666013dc8a43d60405160405180910390a2600d54604080517f18a6d58b000000000000000000000000000000000000000000000000000000008152600160a060020a038b81166004830152602482018b9052915191909216916318a6d58b91604480830192600092919082900301818387803b158015612df057600080fd5b600160f860020a031985167f33000000000000000000000000000000000000000000000000000000000000001415613a3257600254600160a060020a0389811691161461353857600080fd5b600a600061354d88600b63ffffffff61481116565b600160f060020a031916815260208101919091526040016000205487101561357457600080fd5b61358d61358887606d63ffffffff61485316565b610e66565b1561359757600080fd5b600860006135ac88600b63ffffffff61481116565b600160f060020a031916815260208101919091526040016000205460ff1615156135d557600080fd5b6135e686606d63ffffffff61485316565b600160a060020a0381166000908152601860205260409020805463ffffffff1916600387810b63ffffffff9081169290921767ffffffff0000000019166401000000009188900b83169190910217909155909250613649908790600b9061481116565b600160a060020a0383166000908152601860205260409020805460f060020a909204604060020a0269ffff00000000000000001990921691909117905561369786600d63ffffffff61482716565b600160a060020a03831660009081526018602052604090208054608060020a909204605060020a0279ffffffffffffffffffffffffffffffff00000000000000000000199092169190911790556136f586601d63ffffffff61482716565b600160a060020a038316600090815260186020526040902060010180546001608060020a031916608060020a90920491909117905561373586602d614827565b600160a060020a038316600090815260186020526040902060010180546fffffffffffffffffffffffffffffffff16608060020a9283900490920291909117905561378186603d61483d565b600160a060020a0383166000908152601860205260409020600201556137ae86605d63ffffffff61482716565b600160a060020a03831660008181526018602052604081206003810180546001608060020a031916608060020a90950494909417909355601a805460018181019092557f057c384a7d1c54f3a1b2e5e67b2617b8224fdfd1ea7234eea573a6ff665ff63e81018054600160a060020a03191690941790935560059093019190915560199061383d89600b614811565b600160f060020a0319168152602081019190915260400160009081209061386b89600d63ffffffff61482716565b6001608060020a03191681526020808201929092526040908101600090812080546001808201835591835284832081018054600160a060020a031916600160a060020a038a169081179091558084526018865292849020959003810160048601556006909401805460ff19169094179093558051928352517ff45ad76a8c4c14053708bfd052607c5e35446beb04fbdff6f2f3c9dde8e83b379281900390910190a1600d54604080517fd4d84da5000000000000000000000000000000000000000000000000000000008152600160a060020a038581166004830152602482018b90529151919092169163d4d84da591604480830192600092919082900301818387803b15801561397b57600080fd5b505af115801561398f573d6000803e3d6000fd5b5050600c54600d54604080517fa9059cbb000000000000000000000000000000000000000000000000000000008152600160a060020a039283166004820152602481018d9052905191909216935063a9059cbb925060448083019260209291908290030181600087803b158015613a0557600080fd5b505af1158015613a19573d6000803e3d6000fd5b505050506040513d6020811015613a2f57600080fd5b50505b5050505050505050565b60056020526000908152604090205460ff1681565b60096020526000908152604090205460ff1681565b600160a060020a031660009081526013602052604090205490565b60005433600160a060020a03908116911614613a9c57600080fd5b600160a060020a0381161515613ab157600080fd5b600160a060020a03166000908152600560205260409020805460ff19166001179055565b60065462010000900460ff1681565b6060601a80548060200260200160405190810160405280929190818152602001828054801561199157602002820191906000526020600020908154600160a060020a03168152600190910190602001808311611973575050505050905090565b60065460009060ff1615613b5757600080fd5b33600160a060020a0381166000908152601460205260408120548491604060020a90910460f060020a0290808080613ba8613b9188611093565b613b9c576001613b9f565b60025b60ff1686611c99565b9350613c32600e60009054906101000a9004600160a060020a0316600160a060020a03166350ccf36b6040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015613c0057600080fd5b505af1158015613c14573d6000803e3d6000fd5b505050506040513d6020811015613c2a57600080fd5b505185614883565b600d54604080517fad71766e000000000000000000000000000000000000000000000000000000008152600160a060020a038b81166004830152915193965091169163ad71766e916024808201926020929091908290030181600087803b158015613c9c57600080fd5b505af1158015613cb0573d6000803e3d6000fd5b505050506040513d6020811015613cc657600080fd5b50519150613cd482876148b5565b905082811115613ce357600080fd5b613cec336146ff565b1515613cf757600080fd5b33600160a060020a03168a600160a060020a031614151515613d1857600080fd5b600d54604080517ff5923a6e000000000000000000000000000000000000000000000000000000008152600160a060020a0333811660048301528d81166024830152604482018d90529151919092169163f5923a6e91606480830192600092919082900301818387803b158015613d8e57600080fd5b505af1158015613da2573d6000803e3d6000fd5b50506006546040805160e160020a63660ea601028152600160a060020a038f8116600483015291516301000000909304909116935063cc1d4c0292506024808201926020929091908290030181600087803b158015613e0057600080fd5b505af1158015613e14573d6000803e3d6000fd5b505050506040513d6020811015613e2a57600080fd5b505115613fd657600160a060020a033381166000908152600f60209081526040808320938e16835292905220549750871515613e8f57600160a060020a033381166000908152600f60209081526040808320938e168352929052206127109081905597505b600160a060020a033316600090815260136020526040902054613ec890612710613eb98c8c614883565b811515613ec257fe5b046148b5565b600160a060020a0333166000908152601360205260409020556064613eee89604f614883565b811515613ef757fe5b04600f600033600160a060020a0316600160a060020a0316815260200190815260200160002060008c600160a060020a0316600160a060020a0316815260200190815260200160002081905550613f73601060008c600160a060020a0316600160a060020a03168152602001908152602001600020548a6148b5565b600160a060020a03808c1660009081526010602090815260408083209490945533909216815260119091522054613faa908a6148b5565b600160a060020a0333166000908152601160209081526040808320939093556012905220805460010190555b89600160a060020a031633600160a060020a03167f3990db2d31862302a685e8086b5755072a6e2b5b780af1ee81ece35ee3cd33458b6040518082815260200191505060405180910390a350505050505050505050565b60005433600160a060020a0390811691161461404857600080fd5b60065462010000900460ff161561405e57600080fd5b60078054600160a060020a03909216600160a060020a03199092169190911790556006805462ff0000191662010000179055565b33600160a060020a038116600090815260056020526040812054909182918291829160ff1615156140c257600080fd5b6140cb866146ff565b15156140d657600080fd5b600160a060020a038616600090815260146020908152604080832060028101549054604060020a810460f060020a02600160f060020a031916855260158452828520605060020a909104608060020a026001608060020a0319168552909252909120805491965090600019810190811061414c57fe5b600091825260208083209190910154600160a060020a03898116845260148352604080852054604060020a810460f060020a02600160f060020a031916865260158552818620605060020a909104608060020a026001608060020a0319168652909352919092208054919092169550859190879081106141c857fe5b60009182526020808320919091018054600160a060020a031916600160a060020a039485161790558683168252601481526040808320600201899055928916825282822054604060020a810460f060020a02600160f060020a031916835260158252838320605060020a909104608060020a026001608060020a031916835290522080549061425b9060001983016148c4565b50600160a060020a0386166000908152601460205260409020600301546016805491945090600019810190811061428e57fe5b60009182526020909120015460168054600160a060020a0390921693508391859081106142b757fe5b60009182526020808320919091018054600160a060020a031916600160a060020a03948516179055918416815260149091526040902060030183905560168054906143069060001983016148c4565b50600160a060020a0380871660008181526014602052604080822080547affffffffffffffffffffffffffffffffffffffffffffffffffffff1916815560018101805475ffffffffffffffffffffffffffffffffffffffffffff1916905560028101839055600381018390556004908101805460ff19169055600d5482517fb71738f1000000000000000000000000000000000000000000000000000000008152918201949094529051929093169263b71738f1926024808301939282900301818387803b1580156143d757600080fd5b505af11580156143eb573d6000803e3d6000fd5b5050600d54604080517fd83edd70000000000000000000000000000000000000000000000000000000008152600160a060020a038b81166004830152915191909216935063d83edd709250602480830192600092919082900301818387803b15801561445657600080fd5b505af115801561446a573d6000803e3d6000fd5b505060408051600160a060020a038a811682529151339290921693507fcf9fc954c975d15bad8f5fa3c1cd94f55105a98b1ecf33021ebb059122277f8f925081900360200190a2505050505050565b60015433600160a060020a039081169116146144d457600080fd5b600160f060020a03199091166000908152600b6020526040902055565b600b6020526000908152604090205481565b600160a060020a0380821660008181526014602090815260408083208054600180830154600480850154600d5487517f8d837f380000000000000000000000000000000000000000000000000000000081529283019a909a529551600385810b9b640100000000870490910b9a60f060020a604060020a8804029a608060020a605060020a890481029b60d060020a909904820b9a8782029a918804830b997101000000000000000000000000000000000089048a0b99939860ff928316987301000000000000000000000000000000000000008204909316977401000000000000000000000000000000000000000090910490940b95929490921692638d837f389260248084019391929182900301818b87803b15801561462457600080fd5b505af1158015614638573d6000803e3d6000fd5b505050506040513d602081101561464e57600080fd5b50519c9e9b9d50999b989a9799509597949693959193909250565b600654610100900460ff1681565b600160f060020a0319821660009081526015602090815260408083206001608060020a03198516845282529182902080548351818402810184019094528084526060939283018282801561276957602002820191906000526020600020908154600160a060020a0316815260019091019060200180831161274b575050505050905092915050565b600160a060020a038116600090815260146020526040902054604060020a900460f060020a02600160f060020a0319161515919050565b60005433600160a060020a0390811691161461475157600080fd5b600654610100900460ff161561476657600080fd5b6006805461ff0019600160a060020a0390931663010000000276ffffffffffffffffffffffffffffffffffffffff000000199091161791909116610100179055565b600160a060020a039182166000908152600f6020908152604080832093909416825291909152205490565b600080826001018451101515156147e957600080fd5b505081810160200151805b5092915050565b600080826004018451101515156147e957600080fd5b600080826002018451101515156147e957600080fd5b600080826010018451101515156147e957600080fd5b600080826020018451101515156147e957600080fd5b6000808260140184511015151561486957600080fd5b505001602001516c01000000000000000000000000900490565b60008083151561489657600091506147f4565b508282028284828115156148a657fe5b04146148ae57fe5b9392505050565b6000828201838110156148ae57fe5b8154818355818111156148e8576000838152602090206148e89181019083016148ed565b505050565b61199991905b8082111561490757600081556001016148f3565b50905600a165627a7a7230582049fe5fd23612987a02ea7d08604a3e6537f671262c58a558b189af2519abff930029"
}