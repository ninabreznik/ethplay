{
  "address": "0xcc9a66acf8574141b0e025202dd57649765a4be7",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "CSCPreSaleManager",
  "compilerVersion": "v0.4.21+commit.dfe3193c",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2018-04-18\n*/\n\npragma solidity ^0.4.19;\n\n/* Adapted from strings.sol created by Nick Johnson <[email protected]>\n * Ref: https://github.com/Arachnid/solidity-stringutils/blob/2f6ca9accb48ae14c66f1437ec50ed19a0616f78/strings.sol\n * @title String & slice utility library for Solidity contracts.\n * @author Nick Johnson <[email protected]>\n */\nlibrary strings {\n    \n    struct slice {\n        uint _len;\n        uint _ptr;\n    }\n\n    /*\n     * @dev Returns a slice containing the entire string.\n     * @param self The string to make a slice from.\n     * @return A newly allocated slice containing the entire string.\n     */\n    function toSlice(string self) internal pure returns (slice) {\n        uint ptr;\n        assembly {\n            ptr := add(self, 0x20)\n        }\n        return slice(bytes(self).length, ptr);\n    }\n\n    function memcpy(uint dest, uint src, uint len) private pure {\n        // Copy word-length chunks while possible\n        for(; len >= 32; len -= 32) {\n            assembly {\n                mstore(dest, mload(src))\n            }\n            dest += 32;\n            src += 32;\n        }\n\n        // Copy remaining bytes\n        uint mask = 256 ** (32 - len) - 1;\n        assembly {\n            let srcpart := and(mload(src), not(mask))\n            let destpart := and(mload(dest), mask)\n            mstore(dest, or(destpart, srcpart))\n        }\n    }\n\n    \n    function concat(slice self, slice other) internal returns (string) {\n        var ret = new string(self._len + other._len);\n        uint retptr;\n        assembly { retptr := add(ret, 32) }\n        memcpy(retptr, self._ptr, self._len);\n        memcpy(retptr + self._len, other._ptr, other._len);\n        return ret;\n    }\n\n    /*\n     * @dev Counts the number of nonoverlapping occurrences of `needle` in `self`.\n     * @param self The slice to search.\n     * @param needle The text to search for in `self`.\n     * @return The number of occurrences of `needle` found in `self`.\n     */\n    function count(slice self, slice needle) internal returns (uint cnt) {\n        uint ptr = findPtr(self._len, self._ptr, needle._len, needle._ptr) + needle._len;\n        while (ptr <= self._ptr + self._len) {\n            cnt++;\n            ptr = findPtr(self._len - (ptr - self._ptr), ptr, needle._len, needle._ptr) + needle._len;\n        }\n    }\n\n    // Returns the memory address of the first byte of the first occurrence of\n    // `needle` in `self`, or the first byte after `self` if not found.\n    function findPtr(uint selflen, uint selfptr, uint needlelen, uint needleptr) private returns (uint) {\n        uint ptr;\n        uint idx;\n\n        if (needlelen <= selflen) {\n            if (needlelen <= 32) {\n                // Optimized assembly for 68 gas per byte on short strings\n                assembly {\n                    let mask := not(sub(exp(2, mul(8, sub(32, needlelen))), 1))\n                    let needledata := and(mload(needleptr), mask)\n                    let end := add(selfptr, sub(selflen, needlelen))\n                    ptr := selfptr\n                    loop:\n                    jumpi(exit, eq(and(mload(ptr), mask), needledata))\n                    ptr := add(ptr, 1)\n                    jumpi(loop, lt(sub(ptr, 1), end))\n                    ptr := add(selfptr, selflen)\n                    exit:\n                }\n                return ptr;\n            } else {\n                // For long needles, use hashing\n                bytes32 hash;\n                assembly { hash := sha3(needleptr, needlelen) }\n                ptr = selfptr;\n                for (idx = 0; idx <= selflen - needlelen; idx++) {\n                    bytes32 testHash;\n                    assembly { testHash := sha3(ptr, needlelen) }\n                    if (hash == testHash)\n                        return ptr;\n                    ptr += 1;\n                }\n            }\n        }\n        return selfptr + selflen;\n    }\n\n    /*\n     * @dev Splits the slice, setting `self` to everything after the first\n     *      occurrence of `needle`, and `token` to everything before it. If\n     *      `needle` does not occur in `self`, `self` is set to the empty slice,\n     *      and `token` is set to the entirety of `self`.\n     * @param self The slice to split.\n     * @param needle The text to search for in `self`.\n     * @param token An output parameter to which the first token is written.\n     * @return `token`.\n     */\n    function split(slice self, slice needle, slice token) internal returns (slice) {\n        uint ptr = findPtr(self._len, self._ptr, needle._len, needle._ptr);\n        token._ptr = self._ptr;\n        token._len = ptr - self._ptr;\n        if (ptr == self._ptr + self._len) {\n            // Not found\n            self._len = 0;\n        } else {\n            self._len -= token._len + needle._len;\n            self._ptr = ptr + needle._len;\n        }\n        return token;\n    }\n\n     /*\n     * @dev Splits the slice, setting `self` to everything after the first\n     *      occurrence of `needle`, and returning everything before it. If\n     *      `needle` does not occur in `self`, `self` is set to the empty slice,\n     *      and the entirety of `self` is returned.\n     * @param self The slice to split.\n     * @param needle The text to search for in `self`.\n     * @return The part of `self` up to the first occurrence of `delim`.\n     */\n    function split(slice self, slice needle) internal returns (slice token) {\n        split(self, needle, token);\n    }\n\n    /*\n     * @dev Copies a slice to a new string.\n     * @param self The slice to copy.\n     * @return A newly allocated string containing the slice's text.\n     */\n    function toString(slice self) internal pure returns (string) {\n        var ret = new string(self._len);\n        uint retptr;\n        assembly { retptr := add(ret, 32) }\n\n        memcpy(retptr, self._ptr, self._len);\n        return ret;\n    }\n\n}\n\n/* Helper String Functions for Game Manager Contract\n * @title String Healpers\n * @author Fazri Zubair & Farhan Khwaja (Lucid Sight, Inc.)\n */\ncontract StringHelpers {\n    using strings for *;\n    \n    function stringToBytes32(string memory source) internal returns (bytes32 result) {\n        bytes memory tempEmptyStringTest = bytes(source);\n        if (tempEmptyStringTest.length == 0) {\n            return 0x0;\n        }\n    \n        assembly {\n            result := mload(add(source, 32))\n        }\n    }\n\n    function bytes32ToString(bytes32 x) constant internal returns (string) {\n        bytes memory bytesString = new bytes(32);\n        uint charCount = 0;\n        for (uint j = 0; j < 32; j++) {\n            byte char = byte(bytes32(uint(x) * 2 ** (8 * j)));\n            if (char != 0) {\n                bytesString[charCount] = char;\n                charCount++;\n            }\n        }\n        bytes memory bytesStringTrimmed = new bytes(charCount);\n        for (j = 0; j < charCount; j++) {\n            bytesStringTrimmed[j] = bytesString[j];\n        }\n        return string(bytesStringTrimmed);\n    }\n}\n\n/// @title Interface for contracts conforming to ERC-721: Non-Fungible Tokens\n/// @author Dieter Shirley <[email protected]> (https://github.com/dete)\ncontract ERC721 {\n  // Required methods\n  function balanceOf(address _owner) public view returns (uint256 balance);\n  function ownerOf(uint256 _tokenId) public view returns (address owner);\n  function approve(address _to, uint256 _tokenId) public;\n  function transfer(address _to, uint256 _tokenId) public;\n  function transferFrom(address _from, address _to, uint256 _tokenId) public;\n  function implementsERC721() public pure returns (bool);\n  function takeOwnership(uint256 _tokenId) public;\n  function totalSupply() public view returns (uint256 total);\n\n  event Transfer(address indexed from, address indexed to, uint256 tokenId);\n  event Approval(address indexed owner, address indexed approved, uint256 tokenId);\n\n  // Optional\n  // function name() public view returns (string name);\n  // function symbol() public view returns (string symbol);\n  // function tokenOfOwnerByIndex(address _owner, uint256 _index) external view returns (uint256 tokenId);\n  // function tokenMetadata(uint256 _tokenId) public view returns (string infoUrl);\n\n  // ERC-165 Compatibility (https://github.com/ethereum/EIPs/issues/165)\n  function supportsInterface(bytes4 _interfaceID) external view returns (bool);\n}\n\n/* Controls state and access rights for contract functions\n * @title Operational Control\n * @author Fazri Zubair & Farhan Khwaja (Lucid Sight, Inc.)\n * Inspired and adapted from contract created by OpenZeppelin\n * Ref: https://github.com/OpenZeppelin/zeppelin-solidity/\n */\ncontract OperationalControl {\n    // Facilitates access & control for the game.\n    // Roles:\n    //  -The Managers (Primary/Secondary): Has universal control of all elements (No ability to withdraw)\n    //  -The Banker: The Bank can withdraw funds and adjust fees / prices.\n\n    /// @dev Emited when contract is upgraded\n    event ContractUpgrade(address newContract);\n\n    // The addresses of the accounts (or contracts) that can execute actions within each roles.\n    address public managerPrimary;\n    address public managerSecondary;\n    address public bankManager;\n\n    // @dev Keeps track whether the contract is paused. When that is true, most actions are blocked\n    bool public paused = false;\n\n    // @dev Keeps track whether the contract erroredOut. When that is true, most actions are blocked & refund can be claimed\n    bool public error = false;\n\n    /// @dev Operation modifiers for limiting access\n    modifier onlyManager() {\n        require(msg.sender == managerPrimary || msg.sender == managerSecondary);\n        _;\n    }\n\n    modifier onlyBanker() {\n        require(msg.sender == bankManager);\n        _;\n    }\n\n    modifier anyOperator() {\n        require(\n            msg.sender == managerPrimary ||\n            msg.sender == managerSecondary ||\n            msg.sender == bankManager\n        );\n        _;\n    }\n\n    /// @dev Assigns a new address to act as the Primary Manager.\n    function setPrimaryManager(address _newGM) external onlyManager {\n        require(_newGM != address(0));\n\n        managerPrimary = _newGM;\n    }\n\n    /// @dev Assigns a new address to act as the Secondary Manager.\n    function setSecondaryManager(address _newGM) external onlyManager {\n        require(_newGM != address(0));\n\n        managerSecondary = _newGM;\n    }\n\n    /// @dev Assigns a new address to act as the Banker.\n    function setBanker(address _newBK) external onlyManager {\n        require(_newBK != address(0));\n\n        bankManager = _newBK;\n    }\n\n    /*** Pausable functionality adapted from OpenZeppelin ***/\n\n    /// @dev Modifier to allow actions only when the contract IS NOT paused\n    modifier whenNotPaused() {\n        require(!paused);\n        _;\n    }\n\n    /// @dev Modifier to allow actions only when the contract IS paused\n    modifier whenPaused {\n        require(paused);\n        _;\n    }\n\n    /// @dev Modifier to allow actions only when the contract has Error\n    modifier whenError {\n        require(error);\n        _;\n    }\n\n    /// @dev Called by any Operator role to pause the contract.\n    /// Used only if a bug or exploit is discovered (Here to limit losses / damage)\n    function pause() external onlyManager whenNotPaused {\n        paused = true;\n    }\n\n    /// @dev Unpauses the smart contract. Can only be called by the Game Master\n    /// @notice This is public rather than external so it can be called by derived contracts. \n    function unpause() public onlyManager whenPaused {\n        // can't unpause if contract was upgraded\n        paused = false;\n    }\n\n    /// @dev Unpauses the smart contract. Can only be called by the Game Master\n    /// @notice This is public rather than external so it can be called by derived contracts. \n    function hasError() public onlyManager whenPaused {\n        error = true;\n    }\n\n    /// @dev Unpauses the smart contract. Can only be called by the Game Master\n    /// @notice This is public rather than external so it can be called by derived contracts. \n    function noError() public onlyManager whenPaused {\n        error = false;\n    }\n}\n\ncontract CSCPreSaleItemBase is ERC721, OperationalControl, StringHelpers {\n\n    /*** EVENTS ***/\n    /// @dev The Created event is fired whenever a new collectible comes into existence.\n    event CollectibleCreated(address owner, uint256 globalId, uint256 collectibleType, uint256 collectibleClass, uint256 sequenceId, bytes32 collectibleName);\n    \n    /*** CONSTANTS ***/\n    \n    /// @notice Name and symbol of the non fungible token, as defined in ERC721.\n    string public constant NAME = \"CSCPreSaleFactory\";\n    string public constant SYMBOL = \"CSCPF\";\n    bytes4 constant InterfaceSignature_ERC165 = bytes4(keccak256('supportsInterface(bytes4)'));\n    bytes4 constant InterfaceSignature_ERC721 =\n        bytes4(keccak256('name()')) ^\n        bytes4(keccak256('symbol()')) ^\n        bytes4(keccak256('totalSupply()')) ^\n        bytes4(keccak256('balanceOf(address)')) ^\n        bytes4(keccak256('ownerOf(uint256)')) ^\n        bytes4(keccak256('approve(address,uint256)')) ^\n        bytes4(keccak256('transfer(address,uint256)')) ^\n        bytes4(keccak256('transferFrom(address,address,uint256)')) ^\n        bytes4(keccak256('tokensOfOwner(address)')) ^\n        bytes4(keccak256('tokenMetadata(uint256,string)'));\n    \n    /// @dev CSC Pre Sale Struct, having details of the collectible\n    struct CSCPreSaleItem {\n    \n        /// @dev sequence ID i..e Local Index\n        uint256 sequenceId;\n        \n        /// @dev name of the collectible stored in bytes\n        bytes32 collectibleName;\n        \n        /// @dev Collectible Type\n        uint256 collectibleType;\n        \n        /// @dev Collectible Class\n        uint256 collectibleClass;\n        \n        /// @dev owner address\n        address owner;\n        \n        /// @dev redeemed flag (to help whether it got redeemed or not)\n        bool isRedeemed;\n    }\n    \n    /// @dev array of CSCPreSaleItem type holding information on the Collectibles Created\n    CSCPreSaleItem[] allPreSaleItems;\n    \n    /// @dev Max Count for preSaleItem type -> preSaleItem class -> max. limit\n    mapping(uint256 => mapping(uint256 => uint256)) public preSaleItemTypeToClassToMaxLimit;\n    \n    /// @dev Map from preSaleItem type -> preSaleItem class -> max. limit set (bool)\n    mapping(uint256 => mapping(uint256 => bool)) public preSaleItemTypeToClassToMaxLimitSet;\n\n    /// @dev Map from preSaleItem type -> preSaleItem class -> Name (string / bytes32)\n    mapping(uint256 => mapping(uint256 => bytes32)) public preSaleItemTypeToClassToName;\n    \n    // @dev mapping which holds all the possible addresses which are allowed to interact with the contract\n    mapping (address => bool) approvedAddressList;\n    \n    // @dev mapping holds the preSaleItem -> owner details\n    mapping (uint256 => address) public preSaleItemIndexToOwner;\n    \n    // @dev A mapping from owner address to count of tokens that address owns.\n    //  Used internally inside balanceOf() to resolve ownership count.\n    mapping (address => uint256) private ownershipTokenCount;\n    \n    /// @dev A mapping from preSaleItem to an address that has been approved to call\n    ///  transferFrom(). Each Collectible can only have one approved address for transfer\n    ///  at any time. A zero value means no approval is outstanding.\n    mapping (uint256 => address) public preSaleItemIndexToApproved;\n    \n    /// @dev A mapping of preSaleItem Type to Type Sequence Number to Collectible\n    mapping (uint256 => mapping (uint256 => mapping ( uint256 => uint256 ) ) ) public preSaleItemTypeToSequenceIdToCollectible;\n    \n    /// @dev A mapping from Pre Sale Item Type IDs to the Sequqence Number .\n    mapping (uint256 => mapping ( uint256 => uint256 ) ) public preSaleItemTypeToCollectibleCount;\n\n    /// @dev Token Starting Index taking into account the old presaleContract total assets that can be generated\n    uint256 public STARTING_ASSET_BASE = 3000;\n    \n    /// @notice Introspection interface as per ERC-165 (https://github.com/ethereum/EIPs/issues/165).\n    ///  Returns true for any standardized interfaces implemented by this contract. We implement\n    ///  ERC-165 (obviously!) and ERC-721.\n    function supportsInterface(bytes4 _interfaceID) external view returns (bool)\n    {\n        // DEBUG ONLY\n        //require((InterfaceSignature_ERC165 == 0x01ffc9a7) && (InterfaceSignature_ERC721 == 0x9a20483d));\n        return ((_interfaceID == InterfaceSignature_ERC165) || (_interfaceID == InterfaceSignature_ERC721));\n    }\n    \n    function setMaxLimit(string _collectibleName, uint256 _collectibleType, uint256 _collectibleClass, uint256 _maxLimit) external onlyManager whenNotPaused {\n        require(_maxLimit > 0);\n        require(_collectibleType >= 0 && _collectibleClass >= 0);\n        require(stringToBytes32(_collectibleName) != stringToBytes32(\"\"));\n\n        require(!preSaleItemTypeToClassToMaxLimitSet[_collectibleType][_collectibleClass]);\n        preSaleItemTypeToClassToMaxLimit[_collectibleType][_collectibleClass] = _maxLimit;\n        preSaleItemTypeToClassToMaxLimitSet[_collectibleType][_collectibleClass] = true;\n        preSaleItemTypeToClassToName[_collectibleType][_collectibleClass] = stringToBytes32(_collectibleName);\n    }\n    \n    /// @dev Method to fetch collectible details\n    function getCollectibleDetails(uint256 _tokenId) external view returns(uint256 assetId, uint256 sequenceId, uint256 collectibleType, uint256 collectibleClass, string collectibleName, bool isRedeemed, address owner) {\n\n        require (_tokenId > STARTING_ASSET_BASE);\n        uint256 generatedCollectibleId = _tokenId - STARTING_ASSET_BASE;\n        \n        CSCPreSaleItem memory _Obj = allPreSaleItems[generatedCollectibleId];\n        assetId = _tokenId;\n        sequenceId = _Obj.sequenceId;\n        collectibleType = _Obj.collectibleType;\n        collectibleClass = _Obj.collectibleClass;\n        collectibleName = bytes32ToString(_Obj.collectibleName);\n        owner = _Obj.owner;\n        isRedeemed = _Obj.isRedeemed;\n    }\n    \n    /*** PUBLIC FUNCTIONS ***/\n    /// @notice Grant another address the right to transfer token via takeOwnership() and transferFrom().\n    /// @param _to The address to be granted transfer approval. Pass address(0) to\n    ///  clear all approvals.\n    /// @param _tokenId The ID of the Token that can be transferred if this call succeeds.\n    /// @dev Required for ERC-721 compliance.\n    function approve(address _to, uint256 _tokenId) public {\n        // Caller must own token.\n        require (_tokenId > STARTING_ASSET_BASE);\n        \n        require(_owns(msg.sender, _tokenId));\n        preSaleItemIndexToApproved[_tokenId] = _to;\n        \n        Approval(msg.sender, _to, _tokenId);\n    }\n    \n    /// For querying balance of a particular account\n    /// @param _owner The address for balance query\n    /// @dev Required for ERC-721 compliance.\n    function balanceOf(address _owner) public view returns (uint256 balance) {\n        return ownershipTokenCount[_owner];\n    }\n    \n    function implementsERC721() public pure returns (bool) {\n        return true;\n    }\n    \n    /// For querying owner of token\n    /// @param _tokenId The tokenID for owner inquiry\n    /// @dev Required for ERC-721 compliance.\n    function ownerOf(uint256 _tokenId) public view returns (address owner) {\n        require (_tokenId > STARTING_ASSET_BASE);\n\n        owner = preSaleItemIndexToOwner[_tokenId];\n        require(owner != address(0));\n    }\n    \n    /// @dev Required for ERC-721 compliance.\n    function symbol() public pure returns (string) {\n        return SYMBOL;\n    }\n    \n    /// @notice Allow pre-approved user to take ownership of a token\n    /// @param _tokenId The ID of the Token that can be transferred if this call succeeds.\n    /// @dev Required for ERC-721 compliance.\n    function takeOwnership(uint256 _tokenId) public {\n        require (_tokenId > STARTING_ASSET_BASE);\n\n        address newOwner = msg.sender;\n        address oldOwner = preSaleItemIndexToOwner[_tokenId];\n        \n        // Safety check to prevent against an unexpected 0x0 default.\n        require(_addressNotNull(newOwner));\n        \n        // Making sure transfer is approved\n        require(_approved(newOwner, _tokenId));\n        \n        _transfer(oldOwner, newOwner, _tokenId);\n    }\n    \n    /// @param _owner The owner whose collectibles tokens we are interested in.\n    /// @dev This method MUST NEVER be called by smart contract code. First, it's fairly\n    ///  expensive (it walks the entire CSCPreSaleItem array looking for collectibles belonging to owner),\n    ///  but it also returns a dynamic array, which is only supported for web3 calls, and\n    ///  not contract-to-contract calls.\n    function tokensOfOwner(address _owner) external view returns(uint256[] ownerTokens) {\n        uint256 tokenCount = balanceOf(_owner);\n        \n        if (tokenCount == 0) {\n            // Return an empty array\n            return new uint256[](0);\n        } else {\n            uint256[] memory result = new uint256[](tokenCount);\n            uint256 totalCount = totalSupply() + 1 + STARTING_ASSET_BASE;\n            uint256 resultIndex = 0;\n        \n            // We count on the fact that all LS PreSaleItems have IDs starting at 0 and increasing\n            // sequentially up to the total count.\n            uint256 _tokenId;\n        \n            for (_tokenId = STARTING_ASSET_BASE; _tokenId < totalCount; _tokenId++) {\n                if (preSaleItemIndexToOwner[_tokenId] == _owner) {\n                    result[resultIndex] = _tokenId;\n                    resultIndex++;\n                }\n            }\n        \n            return result;\n        }\n    }\n    \n    /// For querying totalSupply of token\n    /// @dev Required for ERC-721 compliance.\n    function totalSupply() public view returns (uint256 total) {\n        return allPreSaleItems.length - 1; //Removed 0 index\n    }\n    \n    /// Owner initates the transfer of the token to another account\n    /// @param _to The address for the token to be transferred to.\n    /// @param _tokenId The ID of the Token that can be transferred if this call succeeds.\n    /// @dev Required for ERC-721 compliance.\n    function transfer(address _to, uint256 _tokenId) public {\n\n        require (_tokenId > STARTING_ASSET_BASE);\n        \n        require(_addressNotNull(_to));\n        require(_owns(msg.sender, _tokenId));\n        \n        _transfer(msg.sender, _to, _tokenId);\n    }\n    \n    /// Third-party initiates transfer of token from address _from to address _to\n    /// @param _from The address for the token to be transferred from.\n    /// @param _to The address for the token to be transferred to.\n    /// @param _tokenId The ID of the Token that can be transferred if this call succeeds.\n    /// @dev Required for ERC-721 compliance.\n    function transferFrom(address _from, address _to, uint256 _tokenId) public {\n        require (_tokenId > STARTING_ASSET_BASE);\n\n        require(_owns(_from, _tokenId));\n        require(_approved(_to, _tokenId));\n        require(_addressNotNull(_to));\n        \n        _transfer(_from, _to, _tokenId);\n    }\n    \n    /*** PRIVATE FUNCTIONS ***/\n    /// @dev  Safety check on _to address to prevent against an unexpected 0x0 default.\n    function _addressNotNull(address _to) internal pure returns (bool) {\n        return _to != address(0);\n    }\n    \n    /// @dev  For checking approval of transfer for address _to\n    function _approved(address _to, uint256 _tokenId) internal view returns (bool) {\n        return preSaleItemIndexToApproved[_tokenId] == _to;\n    }\n    \n    /// @dev For creating CSC Collectible\n    function _createCollectible(bytes32 _collectibleName, uint256 _collectibleType, uint256 _collectibleClass) internal returns(uint256) {\n        uint256 _sequenceId = uint256(preSaleItemTypeToCollectibleCount[_collectibleType][_collectibleClass]) + 1;\n        \n        // These requires are not strictly necessary, our calling code should make\n        // sure that these conditions are never broken.\n        require(_sequenceId == uint256(uint32(_sequenceId)));\n        \n        CSCPreSaleItem memory _collectibleObj = CSCPreSaleItem(\n          _sequenceId,\n          _collectibleName,\n          _collectibleType,\n          _collectibleClass,\n          address(0),\n          false\n        );\n        \n        uint256 generatedCollectibleId = allPreSaleItems.push(_collectibleObj) - 1;\n        uint256 collectibleIndex = generatedCollectibleId + STARTING_ASSET_BASE;\n        \n        preSaleItemTypeToSequenceIdToCollectible[_collectibleType][_collectibleClass][_sequenceId] = collectibleIndex;\n        preSaleItemTypeToCollectibleCount[_collectibleType][_collectibleClass] = _sequenceId;\n        \n        // emit Created event\n        // CollectibleCreated(address owner, uint256 globalId, uint256 collectibleType, uint256 collectibleClass, uint256 sequenceId, bytes32 collectibleName);\n        CollectibleCreated(address(this), collectibleIndex, _collectibleType, _collectibleClass, _sequenceId, _collectibleObj.collectibleName);\n        \n        // This will assign ownership, and also emit the Transfer event as\n        // per ERC721 draft\n        _transfer(address(0), address(this), collectibleIndex);\n        \n        return collectibleIndex;\n    }\n    \n    /// @dev Check for token ownership\n    function _owns(address claimant, uint256 _tokenId) internal view returns (bool) {\n        return claimant == preSaleItemIndexToOwner[_tokenId];\n    }\n    \n    /// @dev Assigns ownership of a specific preSaleItem to an address.\n    function _transfer(address _from, address _to, uint256 _tokenId) internal {\n        uint256 generatedCollectibleId = _tokenId - STARTING_ASSET_BASE;\n\n        // Updating the owner details of the collectible\n        CSCPreSaleItem memory _Obj = allPreSaleItems[generatedCollectibleId];\n        _Obj.owner = _to;\n        allPreSaleItems[generatedCollectibleId] = _Obj;\n        \n        // Since the number of preSaleItem is capped to 2^32 we can't overflow this\n        ownershipTokenCount[_to]++;\n        \n        //transfer ownership\n        preSaleItemIndexToOwner[_tokenId] = _to;\n        \n        // When creating new collectibles _from is 0x0, but we can't account that address.\n        if (_from != address(0)) {\n          ownershipTokenCount[_from]--;\n          // clear any previously approved ownership exchange\n          delete preSaleItemIndexToApproved[_tokenId];\n        }\n        \n        // Emit the transfer event.\n        Transfer(_from, _to, _tokenId);\n    }\n    \n    /// @dev Checks if a given address currently has transferApproval for a particular CSCPreSaleItem.\n    /// 0 is a valid value as it will be the starter\n    function _approvedFor(address _claimant, uint256 _tokenId) internal view returns (bool) {\n        require(_tokenId > STARTING_ASSET_BASE);\n\n        return preSaleItemIndexToApproved[_tokenId] == _claimant;\n    }\n}\n\n/* Lucid Sight, Inc. ERC-721 Collectibles Manager. \n * @title LSPreSaleManager - Lucid Sight, Inc. Non-Fungible Token\n * @author Fazri Zubair & Farhan Khwaja (Lucid Sight, Inc.)\n */\ncontract CSCPreSaleManager is CSCPreSaleItemBase {\n\n    event RefundClaimed(address owner, uint256 refundValue);\n\n    /// @dev defines if preSaleItem type -> preSaleItem class -> Vending Machine to set limit (bool)\n    mapping(uint256 => mapping(uint256 => bool)) public preSaleItemTypeToClassToCanBeVendingMachine;\n\n    /// @dev defines if preSaleItem type -> preSaleItem class -> Vending Machine Fee\n    mapping(uint256 => mapping(uint256 => uint256)) public preSaleItemTypeToClassToVendingFee;\n\n    /// @dev Mapping created store the amount of value a wallet address used to buy assets\n    mapping(address => uint256) public addressToValue;\n    \n    bool CSCPreSaleInit = false;\n    /// @dev Constructor creates a reference to the NFT (ERC721) ownership contract\n    function CSCPreSaleManager() public {\n        require(msg.sender != address(0));\n        paused = true;\n        error = false;\n        managerPrimary = msg.sender;\n    }\n\n    /// @dev allows the contract to accept ETH\n    function() external payable {\n    }\n    \n    /// @dev Function to add approved address to the \n    /// approved address list\n    function addToApprovedAddress (address _newAddr) onlyManager whenNotPaused {\n        require(_newAddr != address(0));\n        require(!approvedAddressList[_newAddr]);\n        approvedAddressList[_newAddr] = true;\n    }\n    \n    /// @dev Function to remove an approved address from the \n    /// approved address list\n    function removeFromApprovedAddress (address _newAddr) onlyManager whenNotPaused {\n        require(_newAddr != address(0));\n        require(approvedAddressList[_newAddr]);\n        approvedAddressList[_newAddr] = false;\n    }\n\n    /// @dev Function toggle vending for collectible\n    function toggleVending (uint256 _collectibleType, uint256 _collectibleClass) external onlyManager {\n        if(preSaleItemTypeToClassToCanBeVendingMachine[_collectibleType][_collectibleClass] == false) {\n            preSaleItemTypeToClassToCanBeVendingMachine[_collectibleType][_collectibleClass] = true;\n        } else {\n            preSaleItemTypeToClassToCanBeVendingMachine[_collectibleType][_collectibleClass] = false;\n        }\n    }\n\n    /// @dev Function toggle vending for collectible\n    function setVendingFee (uint256 _collectibleType, uint256 _collectibleClass, uint fee) external onlyManager {\n        preSaleItemTypeToClassToVendingFee[_collectibleType][_collectibleClass] = fee;\n    }\n    \n    /// @dev This helps in creating a collectible and then \n    /// transfer it _toAddress\n    function createCollectible(uint256 _collectibleType, uint256 _collectibleClass, address _toAddress) onlyManager external whenNotPaused {\n        require(msg.sender != address(0));\n        require(msg.sender != address(this));\n        \n        require(_toAddress != address(0));\n        require(_toAddress != address(this));\n        \n        require(preSaleItemTypeToClassToMaxLimitSet[_collectibleType][_collectibleClass]);\n        require(preSaleItemTypeToCollectibleCount[_collectibleType][_collectibleClass] < preSaleItemTypeToClassToMaxLimit[_collectibleType][_collectibleClass]);\n        \n        uint256 _tokenId = _createCollectible(preSaleItemTypeToClassToName[_collectibleType][_collectibleClass], _collectibleType, _collectibleClass);\n        \n        _transfer(address(this), _toAddress, _tokenId);\n    }\n\n\n    /// @dev This helps in creating a collectible and then \n    /// transfer it _toAddress\n    function vendingCreateCollectible(uint256 _collectibleType, uint256 _collectibleClass, address _toAddress) payable external whenNotPaused {\n        \n        //Only if Vending is Allowed for this Asset\n        require(preSaleItemTypeToClassToCanBeVendingMachine[_collectibleType][_collectibleClass]);\n\n        require(msg.value >= preSaleItemTypeToClassToVendingFee[_collectibleType][_collectibleClass]);\n\n        require(msg.sender != address(0));\n        require(msg.sender != address(this));\n        \n        require(_toAddress != address(0));\n        require(_toAddress != address(this));\n        \n        require(preSaleItemTypeToClassToMaxLimitSet[_collectibleType][_collectibleClass]);\n        require(preSaleItemTypeToCollectibleCount[_collectibleType][_collectibleClass] < preSaleItemTypeToClassToMaxLimit[_collectibleType][_collectibleClass]);\n        \n        uint256 _tokenId = _createCollectible(preSaleItemTypeToClassToName[_collectibleType][_collectibleClass], _collectibleType, _collectibleClass);\n        uint256 excessBid = msg.value - preSaleItemTypeToClassToVendingFee[_collectibleType][_collectibleClass];\n        \n        if(excessBid > 0) {\n            msg.sender.transfer(excessBid);\n        }\n\n        addressToValue[msg.sender] += preSaleItemTypeToClassToVendingFee[_collectibleType][_collectibleClass];\n        \n        _transfer(address(this), _toAddress, _tokenId);\n    }\n\n    \n    \n    /// @dev Override unpause so it requires all external contract addresses\n    ///  to be set before contract can be unpaused. Also, we can't have\n    ///  newContractAddress set either, because then the contract was upgraded.\n    /// @notice This is public rather than external so we can call super.unpause\n    ///  without using an expensive CALL.\n    function unpause() public onlyManager whenPaused {\n        // Actually unpause the contract.\n        super.unpause();\n    }\n\n    /// @dev Override unpause so it requires all external contract addresses\n    ///  to be set before contract can be unpaused. Also, we can't have\n    ///  newContractAddress set either, because then the contract was upgraded.\n    /// @notice This is public rather than external so we can call super.unpause\n    ///  without using an expensive CALL.\n    function hasError() public onlyManager whenPaused {\n        // Actually error out the contract.\n        super.hasError();\n    }\n    \n    /// @dev Function does the init step and thus allow\n    /// to create a Dummy 0th colelctible\n    function preSaleInit() onlyManager {\n        require(!CSCPreSaleInit);\n        require(allPreSaleItems.length == 0);\n        \n        CSCPreSaleInit = true;\n        \n        //Fill in index 0 to null requests\n        CSCPreSaleItem memory _Obj = CSCPreSaleItem(0, stringToBytes32(\"DummyAsset\"), 0, 0, address(this), true);\n        allPreSaleItems.push(_Obj);\n    }\n\n    /// @dev Remove all Ether from the contract, which is the owner's cuts\n    ///  as well as any Ether sent directly to the contract address.\n    ///  Always transfers to the NFT (ERC721) contract, but can be called either by\n    ///  the owner or the NFT (ERC721) contract.\n    function withdrawBalance() onlyBanker {\n        // We are using this boolean method to make sure that even if one fails it will still work\n        bankManager.transfer(this.balance);\n    }\n\n    // @dev a function to claim refund if and only if theres an error in the contract\n    function claimRefund(address _ownerAddress) whenError {\n        uint256 refundValue = addressToValue[_ownerAddress];\n\n        require (refundValue > 0);\n        \n        addressToValue[_ownerAddress] = 0;\n\n        _ownerAddress.transfer(refundValue);\n        RefundClaimed(_ownerAddress, refundValue);\n    }\n    \n\n    /// @dev Function used to set the flag isRedeemed to true\n    /// can be called by addresses in the approvedAddressList\n    function isRedeemed(uint256 _tokenId) {\n        require(approvedAddressList[msg.sender]);\n        require(_tokenId > STARTING_ASSET_BASE);\n        uint256 generatedCollectibleId = _tokenId - STARTING_ASSET_BASE;\n        \n        CSCPreSaleItem memory _Obj = allPreSaleItems[generatedCollectibleId];\n        _Obj.isRedeemed = true;\n        \n        allPreSaleItems[generatedCollectibleId] = _Obj;\n    }\n}",
  "abi": "[{\"constant\":true,\"inputs\":[{\"name\":\"_interfaceID\",\"type\":\"bytes4\"}],\"name\":\"supportsInterface\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"implementsERC721\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"pure\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"name\":\"total\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_collectibleType\",\"type\":\"uint256\"},{\"name\":\"_collectibleClass\",\"type\":\"uint256\"},{\"name\":\"_toAddress\",\"type\":\"address\"}],\"name\":\"createCollectible\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"preSaleItemTypeToClassToVendingFee\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_collectibleType\",\"type\":\"uint256\"},{\"name\":\"_collectibleClass\",\"type\":\"uint256\"},{\"name\":\"_toAddress\",\"type\":\"address\"}],\"name\":\"vendingCreateCollectible\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"preSaleItemTypeToClassToMaxLimitSet\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"preSaleItemTypeToClassToMaxLimit\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newAddr\",\"type\":\"address\"}],\"name\":\"removeFromApprovedAddress\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"isRedeemed\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"preSaleItemTypeToClassToName\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"unpause\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"preSaleItemTypeToSequenceIdToCollectible\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_collectibleType\",\"type\":\"uint256\"},{\"name\":\"_collectibleClass\",\"type\":\"uint256\"}],\"name\":\"toggleVending\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"STARTING_ASSET_BASE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"paused\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"withdrawBalance\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"ownerOf\",\"outputs\":[{\"name\":\"owner\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"getCollectibleDetails\",\"outputs\":[{\"name\":\"assetId\",\"type\":\"uint256\"},{\"name\":\"sequenceId\",\"type\":\"uint256\"},{\"name\":\"collectibleType\",\"type\":\"uint256\"},{\"name\":\"collectibleClass\",\"type\":\"uint256\"},{\"name\":\"collectibleName\",\"type\":\"string\"},{\"name\":\"isRedeemed\",\"type\":\"bool\"},{\"name\":\"owner\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"balance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_collectibleName\",\"type\":\"string\"},{\"name\":\"_collectibleType\",\"type\":\"uint256\"},{\"name\":\"_collectibleClass\",\"type\":\"uint256\"},{\"name\":\"_maxLimit\",\"type\":\"uint256\"}],\"name\":\"setMaxLimit\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newGM\",\"type\":\"address\"}],\"name\":\"setSecondaryManager\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"pause\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"tokensOfOwner\",\"outputs\":[{\"name\":\"ownerTokens\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"preSaleItemIndexToOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"noError\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"pure\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"NAME\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"preSaleItemIndexToApproved\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"preSaleInit\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"hasError\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"takeOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"managerPrimary\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newAddr\",\"type\":\"address\"}],\"name\":\"addToApprovedAddress\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_collectibleType\",\"type\":\"uint256\"},{\"name\":\"_collectibleClass\",\"type\":\"uint256\"},{\"name\":\"fee\",\"type\":\"uint256\"}],\"name\":\"setVendingFee\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"addressToValue\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_ownerAddress\",\"type\":\"address\"}],\"name\":\"claimRefund\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newGM\",\"type\":\"address\"}],\"name\":\"setPrimaryManager\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"error\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"preSaleItemTypeToClassToCanBeVendingMachine\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bankManager\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"managerSecondary\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newBK\",\"type\":\"address\"}],\"name\":\"setBanker\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"SYMBOL\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"preSaleItemTypeToCollectibleCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"refundValue\",\"type\":\"uint256\"}],\"name\":\"RefundClaimed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"globalId\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"collectibleType\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"collectibleClass\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"sequenceId\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"collectibleName\",\"type\":\"bytes32\"}],\"name\":\"CollectibleCreated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"newContract\",\"type\":\"address\"}],\"name\":\"ContractUpgrade\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"tokenId\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"approved\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"tokenId\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"}]",
  "bytecode": "60606040526002805460a060020a61ffff0219169055610bb8600d556011805460ff19169055341561003057600080fd5b33600160a060020a0316151561004557600080fd5b6002805460a860020a60ff021960a060020a60ff0219909116740100000000000000000000000000000000000000001716905560008054600160a060020a033316600160a060020a03199091161790556126e5806100a46000396000f3006060604052600436106102455763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166301ffc9a78114610247578063095ea7b3146102935780631051db34146102b557806318160ddd146102c85780631f1e6c4e146102ed57806323b872dd14610312578063285acfb01461033a5780632bac0b3b146103535780632e1921751461036d5780632f3380d91461038657806330a7351c1461039f57806332d33cd0146103be5780633499bbf3146103d45780633f4ba83a146103ed57806341255ea7146104005780634a7143781461041c578063524a8131146104355780635c975abb146104485780635fd8c7101461045b5780636352211e1461046e57806370994b31146104a057806370a08231146105655780638084ee5814610584578063825bdb74146105ac5780638456cb59146105cb5780638462151c146105de578063884bd204146106505780638a53f2301461066657806395d89b4114610679578063a3f4df7e14610703578063a4d5ed1314610716578063a7c198411461072c578063a9059cbb1461073f578063ad5e46cb14610761578063b2e6ceeb14610774578063b777cad71461078a578063b86dab461461079d578063bc37d7b8146107bc578063bff2e095146107d8578063bffa55d5146107f7578063c0619c7014610816578063c79f8b6214610835578063e78d622514610848578063e9e2990e14610861578063ee70f39214610874578063f1ff732b14610887578063f76f8d78146108a6578063f973ece9146108b9575b005b341561025257600080fd5b61027f7fffffffff00000000000000000000000000000000000000000000000000000000600435166108d2565b604051901515815260200160405180910390f35b341561029e57600080fd5b610245600160a060020a0360043516602435610b59565b34156102c057600080fd5b61027f610be6565b34156102d357600080fd5b6102db610bec565b60405190815260200160405180910390f35b34156102f857600080fd5b610245600435602435600160a060020a0360443516610bf6565b341561031d57600080fd5b610245600160a060020a0360043581169060243516604435610d48565b341561034557600080fd5b6102db600435602435610da4565b610245600435602435600160a060020a0360443516610dc1565b341561037857600080fd5b61027f600435602435610fbf565b341561039157600080fd5b6102db600435602435610fdf565b34156103aa57600080fd5b610245600160a060020a0360043516610ffc565b34156103c957600080fd5b6102456004356110a6565b34156103df57600080fd5b6102db6004356024356111ee565b34156103f857600080fd5b61024561120b565b341561040b57600080fd5b6102db600435602435604435611263565b341561042757600080fd5b610245600435602435611286565b341561044057600080fd5b6102db61132e565b341561045357600080fd5b61027f611334565b341561046657600080fd5b610245611344565b341561047957600080fd5b610484600435611398565b604051600160a060020a03909116815260200160405180910390f35b34156104ab57600080fd5b6104b66004356113ce565b60405187815260208101879052604081018690526060810185905282151560a0820152600160a060020a03821660c082015260e06080820181815290820185818151815260200191508051906020019080838360005b8381101561052457808201518382015260200161050c565b50505050905090810190601f1680156105515780820380516001836020036101000a031916815260200191505b509850505050505050505060405180910390f35b341561057057600080fd5b6102db600160a060020a03600435166114b0565b341561058f57600080fd5b6102456024600480358281019291013590356044356064356114cb565b34156105b757600080fd5b610245600160a060020a0360043516611655565b34156105d657600080fd5b6102456116c2565b34156105e957600080fd5b6105fd600160a060020a0360043516611727565b60405160208082528190810183818151815260200191508051906020019060200280838360005b8381101561063c578082015183820152602001610624565b505050509050019250505060405180910390f35b341561065b57600080fd5b610484600435611811565b341561067157600080fd5b61024561182c565b341561068457600080fd5b61068c61189b565b60405160208082528190810183818151815260200191508051906020019080838360005b838110156106c85780820151838201526020016106b0565b50505050905090810190601f1680156106f55780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561070e57600080fd5b61068c6118dc565b341561072157600080fd5b610484600435611913565b341561073757600080fd5b61024561192e565b341561074a57600080fd5b610245600160a060020a0360043516602435611aa8565b341561076c57600080fd5b610245611aea565b341561077f57600080fd5b610245600435611b40565b341561079557600080fd5b610484611ba3565b34156107a857600080fd5b610245600160a060020a0360043516611bb2565b34156107c757600080fd5b610245600435602435604435611c5e565b34156107e357600080fd5b6102db600160a060020a0360043516611cb0565b341561080257600080fd5b610245600160a060020a0360043516611cc2565b341561082157600080fd5b610245600160a060020a0360043516611da1565b341561084057600080fd5b61027f611e0e565b341561085357600080fd5b61027f600435602435611e30565b341561086c57600080fd5b610484611e50565b341561087f57600080fd5b610484611e5f565b341561089257600080fd5b610245600160a060020a0360043516611e6e565b34156108b157600080fd5b61068c611edb565b34156108c457600080fd5b6102db600435602435611f12565b60006040517f737570706f727473496e7465726661636528627974657334290000000000000081526019016040518091039020600160e060020a03191682600160e060020a0319161480610b5157506040517f746f6b656e4d657461646174612875696e743235362c737472696e67290000008152601d0160405180910390206040517f746f6b656e734f664f776e657228616464726573732900000000000000000000815260160160405180910390206040517f7472616e7366657246726f6d28616464726573732c616464726573732c75696e81527f7432353629000000000000000000000000000000000000000000000000000000602082015260250160405180910390206040517f7472616e7366657228616464726573732c75696e743235362900000000000000815260190160405180910390206040517f617070726f766528616464726573732c75696e74323536290000000000000000815260180160405180910390206040517f6f776e65724f662875696e743235362900000000000000000000000000000000815260100160405180910390206040517f62616c616e63654f662861646472657373290000000000000000000000000000815260120160405180910390206040517f746f74616c537570706c792829000000000000000000000000000000000000008152600d0160405180910390206040517f73796d626f6c2829000000000000000000000000000000000000000000000000815260080160405180910390206040517f6e616d652829000000000000000000000000000000000000000000000000000081526006016040518091039020181818181818181818600160e060020a03191682600160e060020a031916145b90505b919050565b600d548111610b6757600080fd5b610b713382611f2f565b1515610b7c57600080fd5b6000818152600a6020526040908190208054600160a060020a031916600160a060020a038581169182179092559133909116907f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259084905190815260200160405180910390a35050565b60015b90565b6003546000190190565b6000805433600160a060020a0390811691161480610c22575060015433600160a060020a039081169116145b1515610c2d57600080fd5b60025460a060020a900460ff1615610c4457600080fd5b33600160a060020a03161515610c5957600080fd5b30600160a060020a031633600160a060020a031614151515610c7a57600080fd5b600160a060020a0382161515610c8f57600080fd5b30600160a060020a031682600160a060020a031614151515610cb057600080fd5b600084815260056020908152604080832086845290915290205460ff161515610cd857600080fd5b6000848152600460209081526040808320868452825280832054878452600c83528184208785529092529091205410610d1057600080fd5b6000848152600660209081526040808320868452909152902054610d35908585611f4f565b9050610d42308383612126565b50505050565b600d548111610d5657600080fd5b610d608382611f2f565b1515610d6b57600080fd5b610d75828261230c565b1515610d8057600080fd5b610d898261232c565b1515610d9457600080fd5b610d9f838383612126565b505050565b600f60209081526000928352604080842090915290825290205481565b600254600090819060a060020a900460ff1615610ddd57600080fd5b6000858152600e6020908152604080832087845290915290205460ff161515610e0557600080fd5b6000858152600f60209081526040808320878452909152902054341015610e2b57600080fd5b33600160a060020a03161515610e4057600080fd5b30600160a060020a031633600160a060020a031614151515610e6157600080fd5b600160a060020a0383161515610e7657600080fd5b30600160a060020a031683600160a060020a031614151515610e9757600080fd5b600085815260056020908152604080832087845290915290205460ff161515610ebf57600080fd5b6000858152600460209081526040808320878452825280832054888452600c83528184208885529092529091205410610ef757600080fd5b6000858152600660209081526040808320878452909152902054610f1c908686611f4f565b6000868152600f6020908152604080832088845290915281205491935034919091039150811115610f7857600160a060020a03331681156108fc0282604051600060405180830381858888f193505050501515610f7857600080fd5b6000858152600f60209081526040808320878452825280832054600160a060020a0333168452601090925290912080549091019055610fb8308484612126565b5050505050565b600560209081526000928352604080842090915290825290205460ff1681565b600460209081526000928352604080842090915290825290205481565b60005433600160a060020a0390811691161480611027575060015433600160a060020a039081169116145b151561103257600080fd5b60025460a060020a900460ff161561104957600080fd5b600160a060020a038116151561105e57600080fd5b600160a060020a03811660009081526007602052604090205460ff16151561108557600080fd5b600160a060020a03166000908152600760205260409020805460ff19169055565b60006110b06125fc565b600160a060020a03331660009081526007602052604090205460ff1615156110d757600080fd5b600d5483116110e557600080fd5b600d54830391506003828154811015156110fb57fe5b906000526020600020906005020160c060405190810160409081528254825260018084015460208401526002840154918301919091526003808401546060840152600490930154600160a060020a0316608083015260a082015281549092508291908490811061116757fe5b9060005260206000209060050201600082015181556020820151600182015560408201518160020155606082015181600301556080820151600482018054600160a060020a031916600160a060020a039290921691909117905560a08201516004909101805491151560a060020a0260a060020a60ff021990921691909117905550505050565b600660209081526000928352604080842090915290825290205481565b60005433600160a060020a0390811691161480611236575060015433600160a060020a039081169116145b151561124157600080fd5b60025460a060020a900460ff16151561125957600080fd5b61126161233a565b565b600b60209081526000938452604080852082529284528284209052825290205481565b60005433600160a060020a03908116911614806112b1575060015433600160a060020a039081169116145b15156112bc57600080fd5b6000828152600e6020908152604080832084845290915290205460ff161515611308576000828152600e602090815260408083208484529091529020805460ff1916600117905561132a565b6000828152600e602090815260408083208484529091529020805460ff191690555b5050565b600d5481565b60025460a060020a900460ff1681565b60025433600160a060020a0390811691161461135f57600080fd5b600254600160a060020a039081169030163180156108fc0290604051600060405180830381858888f19350505050151561126157600080fd5b600d5460009082116113a957600080fd5b50600081815260086020526040902054600160a060020a0316801515610b5457600080fd5b6000806000806113dc612631565b60008060006113e96125fc565b600d548a116113f757600080fd5b600d548a03915060038281548110151561140d57fe5b906000526020600020906005020160c06040519081016040908152825482526001830154602083015260028301549082015260038201546060820152600490910154600160a060020a038116608083015260a060020a900460ff16151560a08201528a99509050805197508060400151965080606001519550611493816020015161239a565b9450806080015192508060a0015193505050919395979092949650565b600160a060020a031660009081526009602052604090205490565b60005433600160a060020a03908116911614806114f6575060015433600160a060020a039081169116145b151561150157600080fd5b60025460a060020a900460ff161561151857600080fd5b6000811161152557600080fd5b60008310158015611537575060008210155b151561154257600080fd5b61155960206040519081016040526000815261254a565b6115908686806020601f8201819004810201604051908101604052818152929190602084018383808284375061254a945050505050565b141561159b57600080fd5b600083815260056020908152604080832085845290915290205460ff16156115c257600080fd5b6000838152600460209081526040808320858452825280832084905585835260058252808320858452825291829020805460ff1916600117905561163491879187918291601f83018190048102019051908101604052818152929190602084018383808284375061254a945050505050565b60009384526006602090815260408086209486529390529190922055505050565b60005433600160a060020a0390811691161480611680575060015433600160a060020a039081169116145b151561168b57600080fd5b600160a060020a03811615156116a057600080fd5b60018054600160a060020a031916600160a060020a0392909216919091179055565b60005433600160a060020a03908116911614806116ed575060015433600160a060020a039081169116145b15156116f857600080fd5b60025460a060020a900460ff161561170f57600080fd5b6002805460a060020a60ff02191660a060020a179055565b61172f612631565b6000611739612631565b6000806000611747876114b0565b945084151561177757600060405180591061175f5750595b90808252806020026020018201604052509550611807565b846040518059106117855750595b90808252806020026020018201604052509350600d546117a3610bec565b60010101925060009150600d5490505b8281101561180357600081815260086020526040902054600160a060020a03888116911614156117fb57808483815181106117ea57fe5b602090810290910101526001909101905b6001016117b3565b8395505b5050505050919050565b600860205260009081526040902054600160a060020a031681565b60005433600160a060020a0390811691161480611857575060015433600160a060020a039081169116145b151561186257600080fd5b60025460a060020a900460ff16151561187a57600080fd5b6002805475ff00000000000000000000000000000000000000000019169055565b6118a3612631565b60408051908101604052600581527f43534350460000000000000000000000000000000000000000000000000000006020820152905090565b60408051908101604052601181527f43534350726553616c65466163746f7279000000000000000000000000000000602082015281565b600a60205260009081526040902054600160a060020a031681565b6119366125fc565b60005433600160a060020a0390811691161480611961575060015433600160a060020a039081169116145b151561196c57600080fd5b60115460ff161561197c57600080fd5b6003541561198957600080fd5b6011805460ff1916600117905560c060405190810160405280600081526020016119e560408051908101604052600a81527f44756d6d79417373657400000000000000000000000000000000000000000000602082015261254a565b81526000602082018190526040820152600160a060020a0330166060820152600160809091018190526003805492935091908101611a238382612643565b60009283526020909220839160050201815181556020820151600182015560408201518160020155606082015181600301556080820151600482018054600160a060020a031916600160a060020a039290921691909117905560a08201516004909101805491151560a060020a0260a060020a60ff0219909216919091179055505050565b600d548111611ab657600080fd5b611abf8261232c565b1515611aca57600080fd5b611ad43382611f2f565b1515611adf57600080fd5b61132a338383612126565b60005433600160a060020a0390811691161480611b15575060015433600160a060020a039081169116145b1515611b2057600080fd5b60025460a060020a900460ff161515611b3857600080fd5b611261612575565b600080600d5483111515611b5357600080fd5b50506000818152600860205260409020543390600160a060020a0316611b788261232c565b1515611b8357600080fd5b611b8d828461230c565b1515611b9857600080fd5b610d9f818385612126565b600054600160a060020a031681565b60005433600160a060020a0390811691161480611bdd575060015433600160a060020a039081169116145b1515611be857600080fd5b60025460a060020a900460ff1615611bff57600080fd5b600160a060020a0381161515611c1457600080fd5b600160a060020a03811660009081526007602052604090205460ff1615611c3a57600080fd5b600160a060020a03166000908152600760205260409020805460ff19166001179055565b60005433600160a060020a0390811691161480611c89575060015433600160a060020a039081169116145b1515611c9457600080fd5b6000928352600f60209081526040808520938552929052912055565b60106020526000908152604090205481565b6002546000907501000000000000000000000000000000000000000000900460ff161515611cef57600080fd5b50600160a060020a038116600090815260106020526040812054908111611d1557600080fd5b600160a060020a0382166000818152601060205260408082209190915582156108fc0290839051600060405180830381858888f193505050501515611d5957600080fd5b7f358fe4192934d3bf28ae181feda1f4bd08ca67f5e2fad55582cce5eb67304ae98282604051600160a060020a03909216825260208201526040908101905180910390a15050565b60005433600160a060020a0390811691161480611dcc575060015433600160a060020a039081169116145b1515611dd757600080fd5b600160a060020a0381161515611dec57600080fd5b60008054600160a060020a031916600160a060020a0392909216919091179055565b6002547501000000000000000000000000000000000000000000900460ff1681565b600e60209081526000928352604080842090915290825290205460ff1681565b600254600160a060020a031681565b600154600160a060020a031681565b60005433600160a060020a0390811691161480611e99575060015433600160a060020a039081169116145b1515611ea457600080fd5b600160a060020a0381161515611eb957600080fd5b60028054600160a060020a031916600160a060020a0392909216919091179055565b60408051908101604052600581527f4353435046000000000000000000000000000000000000000000000000000000602082015281565b600c60209081526000928352604080842090915290825290205481565b600090815260086020526040902054600160a060020a0390811691161490565b600080611f5a6125fc565b6000858152600c6020908152604080832087845290915281205460010192508063ffffffff84168414611f8c57600080fd5b60c06040519081016040908152858252602082018a905281018890526060810187905260006080820181905260a082015260038054919450600191808301611fd48382612643565b60009283526020909220869160050201815181556020820151600182015560408201518160020155606082015181600301556080820151600482018054600160a060020a031916600160a060020a039290921691909117905560a08201516004909101805491151560a060020a0260a060020a60ff021990921691909117905550600d5460008a8152600b602090815260408083208c845282528083208a8452825280832095909403928301948590558b8252600c81528382208b8352815292902087905593509091507f21b6aa36302fbeb5de063ccfac1338053e8cb8939202417afc214d741f22bb6190309083908a908a908990890151604051600160a060020a03909616865260208601949094526040808601939093526060850191909152608084015260a083019190915260c0909101905180910390a161211b60003083612126565b979650505050505050565b60006121306125fc565b600d548303915060038281548110151561214657fe5b906000526020600020906005020160c060405190810160409081528254825260018301546020830152600283015490820152600380830154606083015260049092015460a060020a900460ff16151560a0820152600160a060020a03861660808201528154909250829190849081106121bb57fe5b9060005260206000209060050201600082015181556020820151600182015560408201518160020155606082015181600301556080820151600482018054600160a060020a031916600160a060020a039290921691909117905560a08201516004909101805491151560a060020a0260a060020a60ff021990921691909117905550600160a060020a03808516600081815260096020908152604080832080546001019055878352600890915290208054600160a060020a03191690911790558516156122be57600160a060020a03851660009081526009602090815260408083208054600019019055858352600a90915290208054600160a060020a03191690555b83600160a060020a031685600160a060020a03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef8560405190815260200160405180910390a35050505050565b6000908152600a6020526040902054600160a060020a0391821691161490565b600160a060020a0316151590565b60005433600160a060020a0390811691161480612365575060015433600160a060020a039081169116145b151561237057600080fd5b60025460a060020a900460ff16151561238857600080fd5b6002805460a060020a60ff0219169055565b6123a2612631565b6123aa612631565b60008060006123b7612631565b60206040518059106123c65750595b818152601f19601f83011681016020016040529050945060009350600092505b6020831015612471576008830260020a870291507fff00000000000000000000000000000000000000000000000000000000000000821615612466578185858151811061242f57fe5b9060200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053506001909301925b6001909201916123e6565b8360405180591061247f5750595b818152601f19601f830116810160200160405290509050600092505b83831015612540578483815181106124af57fe5b01602001517f010000000000000000000000000000000000000000000000000000000000000090047f01000000000000000000000000000000000000000000000000000000000000000281848151811061250557fe5b9060200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535060019092019161249b565b9695505050505050565b6000612554612631565b508180511515612567576000915061256f565b602083015191505b50919050565b60005433600160a060020a03908116911614806125a0575060015433600160a060020a039081169116145b15156125ab57600080fd5b60025460a060020a900460ff1615156125c357600080fd5b6002805475ff00000000000000000000000000000000000000000019167501000000000000000000000000000000000000000000179055565b60c06040519081016040908152600080835260208301819052908201819052606082018190526080820181905260a082015290565b60206040519081016040526000815290565b815481835581811511610d9f57600083815260209020610d9f91610be99160059182028101918502015b808211156126b55760008082556001820181905560028201819055600382015560048101805474ffffffffffffffffffffffffffffffffffffffffff1916905560050161266d565b50905600a165627a7a72305820b2b9dd3bf5ecc3d49a61c5cef8fc7f3e01428a82af13e7c297d4116e962a67b10029"
}