{
  "address": "0xffb17cf95479532727660e21b8c509ec5bde651e",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "TokenLiquidityMarket",
  "compilerVersion": "v0.4.21+commit.dfe3193c",
  "optimization": false,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2018-08-06\n*/\n\npragma solidity ^0.4.21;\n\nlibrary SafeMath {\n  function sub(uint256 a, uint256 b) internal pure returns (uint256) {\n    assert(b <= a);\n    return a - b;\n  }\n  function add(uint256 a, uint256 b) internal pure returns (uint256 c) {\n    c = a + b;\n    assert(c >= a);\n    return c;\n  }\n  function mul(uint256 a, uint256 b) internal pure returns (uint256 c) {\n    if (a == 0) {\n      return 0;\n    }\n    c = a * b;\n    assert(c / a == b);\n    return c;\n  }\n  function div(uint256 a, uint256 b) internal pure returns (uint256) {\n    return a / b;\n  }\n}\n\ncontract Token {\n  function balanceOf(address _owner) public returns (uint256); \n  function transfer(address to, uint256 tokens) public returns (bool);\n  function transferFrom(address from, address to, uint256 tokens) public returns(bool);\n}\n\ncontract TokenLiquidityMarket { \n    \n  using SafeMath for uint256;  \n\n  address public platform;\n  address public admin;\n  address public traded_token;\n  \n  uint256 public eth_seed_amount;\n  uint256 public traded_token_seed_amount;\n  uint256 public commission_ratio;\n  uint256 public eth_balance;\n  uint256 public traded_token_balance;\n\n  bool public eth_is_seeded;\n  bool public traded_token_is_seeded;\n  bool public trading_deactivated;\n  bool public admin_commission_activated;\n\n  modifier only_admin() {\n      require(msg.sender == admin);\n      _;\n  }\n  \n  modifier trading_activated() {\n      require(trading_deactivated == false);\n      _;\n  }\n  \n  function TokenLiquidityMarket(address _traded_token,uint256 _eth_seed_amount, uint256 _traded_token_seed_amount, uint256 _commission_ratio) public {\n    admin = tx.origin;\n    platform = msg.sender; \n    traded_token = _traded_token;\n    eth_seed_amount = _eth_seed_amount;\n    traded_token_seed_amount = _traded_token_seed_amount;\n    commission_ratio = _commission_ratio;\n  }\n\n  function change_admin(address _newAdmin) public only_admin() {\n    admin = _newAdmin;\n  }\n  \n  function withdraw_arbitrary_token(address _token, uint256 _amount) public only_admin() {\n      require(_token != traded_token);\n      require(Token(_token).transfer(admin, _amount));\n  }\n\n  function withdraw_excess_tokens() public only_admin() {\n    uint256 queried_traded_token_balance_ = Token(traded_token).balanceOf(this);\n    require(queried_traded_token_balance_ >= traded_token_balance);\n    uint256 excess_ = queried_traded_token_balance_.sub(traded_token_balance);\n    require(Token(traded_token).transfer(admin, excess_));\n  }\n\n  function transfer_tokens_through_proxy_to_contract(address _from, address _to, uint256 _amount) private {\n    traded_token_balance = traded_token_balance.add(_amount);\n    require(Token(traded_token).transferFrom(_from,_to,_amount));\n  }  \n\n  function transfer_tokens_from_contract(address _to, uint256 _amount) private {\n    traded_token_balance = traded_token_balance.sub(_amount);\n    require(Token(traded_token).transfer(_to,_amount));\n  }\n\n  function transfer_eth_to_contract() private {\n    eth_balance = eth_balance.add(msg.value);\n  }\n  \n  function transfer_eth_from_contract(address _to, uint256 _amount) private {\n    eth_balance = eth_balance.sub(_amount);\n    _to.transfer(_amount);\n  }\n  \n  function deposit_token(uint256 _amount) private { \n    transfer_tokens_through_proxy_to_contract(msg.sender, this, _amount);\n  }  \n\n  function deposit_eth() private { \n    transfer_eth_to_contract();\n  }  \n  \n  function withdraw_token(uint256 _amount) public only_admin() {\n    transfer_tokens_from_contract(admin, _amount);\n  }\n  \n  function withdraw_eth(uint256 _amount) public only_admin() {\n    transfer_eth_from_contract(admin, _amount);\n  }\n\n  function set_traded_token_as_seeded() private {\n    traded_token_is_seeded = true;\n  }\n\n  function set_eth_as_seeded() private {\n    eth_is_seeded = true;\n  }\n\n  function seed_traded_token() public only_admin() {\n    require(!traded_token_is_seeded);\n    set_traded_token_as_seeded();\n    deposit_token(traded_token_seed_amount); \n  }\n  \n  function seed_eth() public payable only_admin() {\n    require(!eth_is_seeded);\n    require(msg.value == eth_seed_amount);\n    set_eth_as_seeded();\n    deposit_eth(); \n  }\n\n  function seed_additional_token(uint256 _amount) public only_admin() {\n    require(market_is_open());\n    deposit_token(_amount);\n  }\n\n  function seed_additional_eth() public payable only_admin() {\n    require(market_is_open());\n    deposit_eth();\n  }\n\n  function market_is_open() private view returns(bool) {\n    return (eth_is_seeded && traded_token_is_seeded);\n  }\n\n  function deactivate_trading() public only_admin() {\n    require(!trading_deactivated);\n    trading_deactivated = true;\n  }\n  \n  function reactivate_trading() public only_admin() {\n    require(trading_deactivated);\n    trading_deactivated = false;\n  }\n\n  function get_amount_sell(uint256 _amount) public view returns(uint256) {\n    uint256 traded_token_balance_plus_amount_ = traded_token_balance.add(_amount);\n    return (eth_balance.mul(_amount)).div(traded_token_balance_plus_amount_);\n  }\n\n  function get_amount_buy(uint256 _amount) public view returns(uint256) {\n    uint256 eth_balance_plus_amount_ = eth_balance.add(_amount);\n    return ((traded_token_balance).mul(_amount)).div(eth_balance_plus_amount_);\n  }\n  \n  function get_amount_minus_commission(uint256 _amount) private view returns(uint256) {\n    return (_amount.mul(uint256(1 ether).sub(commission_ratio))).div(1 ether);  \n\n  }\n\n  function activate_admin_commission() public only_admin() {\n    require(!admin_commission_activated);\n    admin_commission_activated = true;\n  }\n\n  function deactivate_admin_comission() public only_admin() {\n    require(admin_commission_activated);\n    admin_commission_activated = false;\n  }\n\n  function change_admin_commission(uint256 _new_commission_ratio) public only_admin() {\n     require(_new_commission_ratio != commission_ratio);\n     commission_ratio = _new_commission_ratio;\n  }\n\n\n  function complete_sell_exchange(uint256 _amount_give) private {\n    uint256 amount_get_ = get_amount_sell(_amount_give);\n    uint256 amount_get_minus_commission_ = get_amount_minus_commission(amount_get_);\n    uint256 platform_commission_ = (amount_get_.sub(amount_get_minus_commission_)).div(5);\n    uint256 admin_commission_ = ((amount_get_.sub(amount_get_minus_commission_)).mul(4)).div(5);\n    transfer_tokens_through_proxy_to_contract(msg.sender,this,_amount_give);\n    transfer_eth_from_contract(msg.sender,amount_get_minus_commission_);  \n    transfer_eth_from_contract(platform, platform_commission_);     \n    if(admin_commission_activated) {\n      transfer_eth_from_contract(admin, admin_commission_);     \n    }\n  }\n  \n  function complete_buy_exchange() private {\n    uint256 amount_get_ = get_amount_buy(msg.value);\n    uint256 amount_get_minus_commission_ = get_amount_minus_commission(amount_get_);\n    uint256 platform_commission_ = (amount_get_.sub(amount_get_minus_commission_)).div(5);\n    uint256 admin_commission_ = ((amount_get_.sub(amount_get_minus_commission_)).mul(4)).div(5);\n    transfer_eth_to_contract();\n    transfer_tokens_from_contract(msg.sender, amount_get_minus_commission_);\n    transfer_tokens_from_contract(platform, platform_commission_);\n    if(admin_commission_activated) {\n      transfer_tokens_from_contract(admin, admin_commission_);\n    }\n  }\n  \n  function sell_tokens(uint256 _amount_give) public trading_activated() {\n    require(market_is_open());\n    complete_sell_exchange(_amount_give);\n  }\n  \n  function buy_tokens() private trading_activated() {\n    require(market_is_open());\n    complete_buy_exchange();\n  }\n\n  function() public payable {\n    buy_tokens();\n  }\n\n}",
  "bytecode": "6060604052341561000f57600080fd5b604051608080611a348339810160405280805190602001909190805190602001909190805190602001909190805190602001909190505032600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555083600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555082600381905550816004819055508060058190555050505050611904806101306000396000f300606060405260043610610175576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680630608a48a1461017f57806310c452ef14610194578063158686b5146101a9578063164fa4ef146101e2578063306c72901461020557806330a95e671461022e5780633bbb44ca146102515780633f5ab2fe1461027e57806349f9e95e146102885780634bde38c8146102ca5780635bea641a1461031f5780636a0cd52e146103425780636f18d3f51461036f57806379557e4f1461039c5780637b5825d5146103c55780637e63dd86146103fc57806382803c221461041f578063877ddd771461044257806388c8da991461046b5780638d5cc10214610480578063a45230ec146104d5578063ab004a971461050c578063ac9c80af14610535578063c0f575291461053f578063d3fd311e14610568578063e35501be14610595578063ec7c2ef7146105aa578063f851a440146105bf578063f9b35ca314610614575b61017d610629565b005b341561018a57600080fd5b610192610668565b005b341561019f57600080fd5b6101a76106fc565b005b34156101b457600080fd5b6101e0600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610791565b005b34156101ed57600080fd5b6102036004808035906020019091905050610831565b005b341561021057600080fd5b6102186108bc565b6040518082815260200191505060405180910390f35b341561023957600080fd5b61024f60048080359060200190919050506108c2565b005b341561025c57600080fd5b61026461094d565b604051808215151515815260200191505060405180910390f35b610286610960565b005b341561029357600080fd5b6102c8600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919080359060200190919050506109fa565b005b34156102d557600080fd5b6102dd610b9d565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561032a57600080fd5b6103406004808035906020019091905050610bc2565b005b341561034d57600080fd5b610355610c39565b604051808215151515815260200191505060405180910390f35b341561037a57600080fd5b610382610c4c565b604051808215151515815260200191505060405180910390f35b34156103a757600080fd5b6103af610c5f565b6040518082815260200191505060405180910390f35b34156103d057600080fd5b6103e66004808035906020019091905050610c65565b6040518082815260200191505060405180910390f35b341561040757600080fd5b61041d6004808035906020019091905050610cae565b005b341561042a57600080fd5b6104406004808035906020019091905050610d29565b005b341561044d57600080fd5b610455610d6a565b6040518082815260200191505060405180910390f35b341561047657600080fd5b61047e610d70565b005b341561048b57600080fd5b610493610e04565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156104e057600080fd5b6104f66004808035906020019091905050610e2a565b6040518082815260200191505060405180910390f35b341561051757600080fd5b61051f610e73565b6040518082815260200191505060405180910390f35b61053d610e79565b005b341561054a57600080fd5b610552610ef2565b6040518082815260200191505060405180910390f35b341561057357600080fd5b61057b610ef8565b604051808215151515815260200191505060405180910390f35b34156105a057600080fd5b6105a8610f0b565b005b34156105b557600080fd5b6105bd610fa0565b005b34156105ca57600080fd5b6105d2611208565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561061f57600080fd5b61062761122e565b005b60001515600860029054906101000a900460ff16151514151561064b57600080fd5b6106536112bb565b151561065e57600080fd5b6106666112ea565b565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156106c457600080fd5b600860029054906101000a900460ff1615156106df57600080fd5b6000600860026101000a81548160ff021916908315150217905550565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561075857600080fd5b600860029054906101000a900460ff1615151561077457600080fd5b6001600860026101000a81548160ff021916908315150217905550565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156107ed57600080fd5b80600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561088d57600080fd5b6108b9600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16826113ee565b50565b60065481565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561091e57600080fd5b61094a600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16826114f3565b50565b600860009054906101000a900460ff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156109bc57600080fd5b600860009054906101000a900460ff161515156109d857600080fd5b600354341415156109e857600080fd5b6109f0611552565b6109f861156f565b565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610a5657600080fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614151515610ab357600080fd5b8173ffffffffffffffffffffffffffffffffffffffff1663a9059cbb600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16836040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b1515610b7757600080fd5b5af11515610b8457600080fd5b505050604051805190501515610b9957600080fd5b5050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610c1e57600080fd5b6005548114151515610c2f57600080fd5b8060058190555050565b600860039054906101000a900460ff1681565b600860019054906101000a900460ff1681565b60075481565b600080610c7d8360065461157990919063ffffffff16565b9050610ca681610c988560075461159590919063ffffffff16565b6115cd90919063ffffffff16565b915050919050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610d0a57600080fd5b610d126112bb565b1515610d1d57600080fd5b610d26816115e3565b50565b60001515600860029054906101000a900460ff161515141515610d4b57600080fd5b610d536112bb565b1515610d5e57600080fd5b610d67816115f1565b50565b60055481565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610dcc57600080fd5b600860039054906101000a900460ff161515610de757600080fd5b6000600860036101000a81548160ff021916908315150217905550565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600080610e428360075461157990919063ffffffff16565b9050610e6b81610e5d8560065461159590919063ffffffff16565b6115cd90919063ffffffff16565b915050919050565b60045481565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610ed557600080fd5b610edd6112bb565b1515610ee857600080fd5b610ef061156f565b565b60035481565b600860029054906101000a900460ff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610f6757600080fd5b600860039054906101000a900460ff16151515610f8357600080fd5b6001600860036101000a81548160ff021916908315150217905550565b600080600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610fff57600080fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15156110bb57600080fd5b5af115156110c857600080fd5b50505060405180519050915060075482101515156110e557600080fd5b6110fa600754836116f990919063ffffffff16565b9050600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16836040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b15156111e257600080fd5b5af115156111ef57600080fd5b50505060405180519050151561120457600080fd5b5050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561128a57600080fd5b600860019054906101000a900460ff161515156112a657600080fd5b6112ae611712565b6112b96004546115e3565b565b6000600860009054906101000a900460ff1680156112e55750600860019054906101000a900460ff165b905090565b6000806000806112f934610c65565b93506113048461172f565b925061132c600561131e85876116f990919063ffffffff16565b6115cd90919063ffffffff16565b91506113676005611359600461134b87896116f990919063ffffffff16565b61159590919063ffffffff16565b6115cd90919063ffffffff16565b9050611371611781565b61137b33846113ee565b6113a66000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff16836113ee565b600860039054906101000a900460ff16156113e8576113e7600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16826113ee565b5b50505050565b611403816007546116f990919063ffffffff16565b600781905550600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb83836040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b15156114cd57600080fd5b5af115156114da57600080fd5b5050506040518051905015156114ef57600080fd5b5050565b611508816006546116f990919063ffffffff16565b6006819055508173ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050151561154e57600080fd5b5050565b6001600860006101000a81548160ff021916908315150217905550565b611577611781565b565b6000818301905082811015151561158c57fe5b80905092915050565b6000808314156115a857600090506115c7565b81830290508183828115156115b957fe5b041415156115c357fe5b8090505b92915050565b600081838115156115da57fe5b04905092915050565b6115ee33308361179e565b50565b60008060008061160085610e2a565b935061160b8461172f565b9250611633600561162585876116f990919063ffffffff16565b6115cd90919063ffffffff16565b915061166e6005611660600461165287896116f990919063ffffffff16565b61159590919063ffffffff16565b6115cd90919063ffffffff16565b905061167b33308761179e565b61168533846114f3565b6116b06000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff16836114f3565b600860039054906101000a900460ff16156116f2576116f1600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16826114f3565b5b5050505050565b600082821115151561170757fe5b818303905092915050565b6001600860016101000a81548160ff021916908315150217905550565b600061177a670de0b6b3a764000061176c61175d600554670de0b6b3a76400006116f990919063ffffffff16565b8561159590919063ffffffff16565b6115cd90919063ffffffff16565b9050919050565b6117963460065461157990919063ffffffff16565b600681905550565b6117b38160075461157990919063ffffffff16565b600781905550600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd8484846040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050602060405180830381600087803b15156118b157600080fd5b5af115156118be57600080fd5b5050506040518051905015156118d357600080fd5b5050505600a165627a7a7230582041763d2d86a097a9613d3550f48a1874eff4cbcb0aeb86d49a0f370fce5dcffa0029000000000000000000000000c997d07b0bc607b6d1bcb6fb9d4a5579c466c3e5000000000000000000000000000000000000000000000000011c37937e08000000000000000000000000000000000000000000000000000000000000000007d000000000000000000000000000000000000000000000000000b1a2bc2ec50000",
  "constructorArguments": "000000000000000000000000c997d07b0bc607b6d1bcb6fb9d4a5579c466c3e5000000000000000000000000000000000000000000000000011c37937e08000000000000000000000000000000000000000000000000000000000000000007d000000000000000000000000000000000000000000000000000b1a2bc2ec50000"
}