{
  "address": "0x4272db2eb82068e898588c3d6e4b5d55c3848793",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "Rates",
  "compilerVersion": "v0.4.24+commit.e67f0147",
  "optimization": false,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2018-11-14\n*/\n\n// File: contracts/generic/Restricted.sol\n\n/*\n    Generic contract to authorise calls to certain functions only from a given address.\n    The address authorised must be a contract (multisig or not, depending on the permission), except for local test\n\n    deployment works as:\n           1. contract deployer account deploys contracts\n           2. constructor grants \"PermissionGranter\" permission to deployer account\n           3. deployer account executes initial setup (no multiSig)\n           4. deployer account grants PermissionGranter permission for the MultiSig contract\n                (e.g. StabilityBoardProxy or PreTokenProxy)\n           5. deployer account revokes its own PermissionGranter permission\n*/\n\npragma solidity 0.4.24;\n\n\ncontract Restricted {\n\n    // NB: using bytes32 rather than the string type because it's cheaper gas-wise:\n    mapping (address => mapping (bytes32 => bool)) public permissions;\n\n    event PermissionGranted(address indexed agent, bytes32 grantedPermission);\n    event PermissionRevoked(address indexed agent, bytes32 revokedPermission);\n\n    modifier restrict(bytes32 requiredPermission) {\n        require(permissions[msg.sender][requiredPermission], \"msg.sender must have permission\");\n        _;\n    }\n\n    constructor(address permissionGranterContract) public {\n        require(permissionGranterContract != address(0), \"permissionGranterContract must be set\");\n        permissions[permissionGranterContract][\"PermissionGranter\"] = true;\n        emit PermissionGranted(permissionGranterContract, \"PermissionGranter\");\n    }\n\n    function grantPermission(address agent, bytes32 requiredPermission) public {\n        require(permissions[msg.sender][\"PermissionGranter\"],\n            \"msg.sender must have PermissionGranter permission\");\n        permissions[agent][requiredPermission] = true;\n        emit PermissionGranted(agent, requiredPermission);\n    }\n\n    function grantMultiplePermissions(address agent, bytes32[] requiredPermissions) public {\n        require(permissions[msg.sender][\"PermissionGranter\"],\n            \"msg.sender must have PermissionGranter permission\");\n        uint256 length = requiredPermissions.length;\n        for (uint256 i = 0; i < length; i++) {\n            grantPermission(agent, requiredPermissions[i]);\n        }\n    }\n\n    function revokePermission(address agent, bytes32 requiredPermission) public {\n        require(permissions[msg.sender][\"PermissionGranter\"],\n            \"msg.sender must have PermissionGranter permission\");\n        permissions[agent][requiredPermission] = false;\n        emit PermissionRevoked(agent, requiredPermission);\n    }\n\n    function revokeMultiplePermissions(address agent, bytes32[] requiredPermissions) public {\n        uint256 length = requiredPermissions.length;\n        for (uint256 i = 0; i < length; i++) {\n            revokePermission(agent, requiredPermissions[i]);\n        }\n    }\n\n}\n\n// File: contracts/generic/SafeMath.sol\n\n/**\n* @title SafeMath\n* @dev Math operations with safety checks that throw on error\n\n    TODO: check against ds-math: https://blog.dapphub.com/ds-math/\n    TODO: move roundedDiv to a sep lib? (eg. Math.sol)\n    TODO: more unit tests!\n*/\npragma solidity 0.4.24;\n\n\nlibrary SafeMath {\n    function mul(uint256 a, uint256 b) internal pure returns (uint256) {\n        uint256 c = a * b;\n        require(a == 0 || c / a == b, \"mul overflow\");\n        return c;\n    }\n\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\n        require(b > 0, \"div by 0\"); // Solidity automatically throws for div by 0 but require to emit reason\n        uint256 c = a / b;\n        // require(a == b * c + a % b); // There is no case in which this doesn't hold\n        return c;\n    }\n\n    function sub(uint256 a, uint256 b) internal pure returns (uint256) {\n        require(b <= a, \"sub underflow\");\n        return a - b;\n    }\n\n    function add(uint256 a, uint256 b) internal pure returns (uint256) {\n        uint256 c = a + b;\n        require(c >= a, \"add overflow\");\n        return c;\n    }\n\n    // Division, round to nearest integer, round half up\n    function roundedDiv(uint256 a, uint256 b) internal pure returns (uint256) {\n        require(b > 0, \"div by 0\"); // Solidity automatically throws for div by 0 but require to emit reason\n        uint256 halfB = (b % 2 == 0) ? (b / 2) : (b / 2 + 1);\n        return (a % b >= halfB) ? (a / b + 1) : (a / b);\n    }\n\n    // Division, always rounds up\n    function ceilDiv(uint256 a, uint256 b) internal pure returns (uint256) {\n        require(b > 0, \"div by 0\"); // Solidity automatically throws for div by 0 but require to emit reason\n        return (a % b != 0) ? (a / b + 1) : (a / b);\n    }\n\n    function min(uint256 a, uint256 b) internal pure returns (uint256) {\n        return a < b ? a : b;\n    }\n\n    function max(uint256 a, uint256 b) internal pure returns (uint256) {\n        return a < b ? b : a;\n    }    \n}\n\n// File: contracts/Rates.sol\n\n/*\n Generic symbol / WEI rates contract.\n only callable by trusted price oracles.\n Being regularly called by a price oracle\n    TODO: trustless/decentrilezed price Oracle\n    TODO: shall we use blockNumber instead of now for lastUpdated?\n    TODO: consider if we need storing rates with variable decimals instead of fixed 4\n    TODO: could we emit 1 RateChanged event from setMultipleRates (symbols and newrates arrays)?\n*/\npragma solidity 0.4.24;\n\n\n\n\ncontract Rates is Restricted {\n    using SafeMath for uint256;\n\n    struct RateInfo {\n        uint rate; // how much 1 WEI worth 1 unit , i.e. symbol/ETH rate\n                    // 0 rate means no rate info available\n        uint lastUpdated;\n    }\n\n    // mapping currency symbol => rate. all rates are stored with 2 decimals. i.e. EUR/ETH = 989.12 then rate = 98912\n    mapping(bytes32 => RateInfo) public rates;\n\n    event RateChanged(bytes32 symbol, uint newRate);\n\n    constructor(address permissionGranterContract) public Restricted(permissionGranterContract) {} // solhint-disable-line no-empty-blocks\n\n    function setRate(bytes32 symbol, uint newRate) external restrict(\"RatesFeeder\") {\n        rates[symbol] = RateInfo(newRate, now);\n        emit RateChanged(symbol, newRate);\n    }\n\n    function setMultipleRates(bytes32[] symbols, uint[] newRates) external restrict(\"RatesFeeder\") {\n        require(symbols.length == newRates.length, \"symobls and newRates lengths must be equal\");\n        for (uint256 i = 0; i < symbols.length; i++) {\n            rates[symbols[i]] = RateInfo(newRates[i], now);\n            emit RateChanged(symbols[i], newRates[i]);\n        }\n    }\n\n    function convertFromWei(bytes32 bSymbol, uint weiValue) external view returns(uint value) {\n        require(rates[bSymbol].rate > 0, \"rates[bSymbol] must be > 0\");\n        return weiValue.mul(rates[bSymbol].rate).roundedDiv(1000000000000000000);\n    }\n\n    function convertToWei(bytes32 bSymbol, uint value) external view returns(uint weiValue) {\n        // next line would revert with div by zero but require to emit reason\n        require(rates[bSymbol].rate > 0, \"rates[bSymbol] must be > 0\");\n        /* TODO: can we make this not loosing max scale? */\n        return value.mul(1000000000000000000).roundedDiv(rates[bSymbol].rate);\n    }\n\n}",
  "abi": "[{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"permissions\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"bSymbol\",\"type\":\"bytes32\"},{\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"convertToWei\",\"outputs\":[{\"name\":\"weiValue\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"agent\",\"type\":\"address\"},{\"name\":\"requiredPermission\",\"type\":\"bytes32\"}],\"name\":\"revokePermission\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"symbol\",\"type\":\"bytes32\"},{\"name\":\"newRate\",\"type\":\"uint256\"}],\"name\":\"setRate\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"agent\",\"type\":\"address\"},{\"name\":\"requiredPermissions\",\"type\":\"bytes32[]\"}],\"name\":\"revokeMultiplePermissions\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"bSymbol\",\"type\":\"bytes32\"},{\"name\":\"weiValue\",\"type\":\"uint256\"}],\"name\":\"convertFromWei\",\"outputs\":[{\"name\":\"value\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"agent\",\"type\":\"address\"},{\"name\":\"requiredPermissions\",\"type\":\"bytes32[]\"}],\"name\":\"grantMultiplePermissions\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"rates\",\"outputs\":[{\"name\":\"rate\",\"type\":\"uint256\"},{\"name\":\"lastUpdated\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"symbols\",\"type\":\"bytes32[]\"},{\"name\":\"newRates\",\"type\":\"uint256[]\"}],\"name\":\"setMultipleRates\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"agent\",\"type\":\"address\"},{\"name\":\"requiredPermission\",\"type\":\"bytes32\"}],\"name\":\"grantPermission\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"permissionGranterContract\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"symbol\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"newRate\",\"type\":\"uint256\"}],\"name\":\"RateChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"agent\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"grantedPermission\",\"type\":\"bytes32\"}],\"name\":\"PermissionGranted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"agent\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"revokedPermission\",\"type\":\"bytes32\"}],\"name\":\"PermissionRevoked\",\"type\":\"event\"}]",
  "bytecode": "608060405234801561001057600080fd5b506040516020806113d18339810180604052810190808051906020019092919050505080600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16141515156100ff576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260258152602001807f7065726d697373696f6e4772616e746572436f6e7472616374206d757374206281526020017f652073657400000000000000000000000000000000000000000000000000000081525060400191505060405180910390fd5b60016000808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060007f5065726d697373696f6e4772616e74657200000000000000000000000000000060001916815260200190815260200160002060006101000a81548160ff0219169083151502179055508073ffffffffffffffffffffffffffffffffffffffff167fc65937e3dbcb9fb30f646815dd67a3dbd09ba17718cbcb54efbe3635f8e0a6fe60405180807f5065726d697373696f6e4772616e746572000000000000000000000000000000815250602001905060405180910390a250506111c78061020a6000396000f3006080604052600436106100a4576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680635b225526146100a95780635c481d8b146101125780635fe0701314610161578063680819eb146101b25780637ea46993146101ed57806382f5e31b146102735780639ac3317b146102c2578063dc72620514610348578063dd17eaec14610394578063f38a8262146103e7575b600080fd5b3480156100b557600080fd5b506100f8600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035600019169060200190929190505050610438565b604051808215151515815260200191505060405180910390f35b34801561011e57600080fd5b5061014b600480360381019080803560001916906020019092919080359060200190929190505050610467565b6040518082815260200191505060405180910390f35b34801561016d57600080fd5b506101b0600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035600019169060200190929190505050610551565b005b3480156101be57600080fd5b506101eb600480360381019080803560001916906020019092919080359060200190929190505050610736565b005b3480156101f957600080fd5b50610271600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001908201803590602001908080602002602001604051908101604052809392919081815260200183836020028082843782019150505050505091929192905050506108c3565b005b34801561027f57600080fd5b506102ac60048036038101908080356000191690602001909291908035906020019092919050505061090b565b6040518082815260200191505060405180910390f35b3480156102ce57600080fd5b50610346600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001908201803590602001908080602002602001604051908101604052809392919081815260200183836020028082843782019150505050505091929192905050506109f5565b005b34801561035457600080fd5b506103776004803603810190808035600019169060200190929190505050610b58565b604051808381526020018281526020019250505060405180910390f35b3480156103a057600080fd5b506103e5600480360381019080803590602001908201803590602001919091929391929390803590602001908201803590602001919091929391929390505050610b7c565b005b3480156103f357600080fd5b50610436600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035600019169060200190929190505050610e26565b005b60006020528160005260406000206020528060005260406000206000915091509054906101000a900460ff1681565b600080600160008560001916600019168152602001908152602001600020600001541115156104fe576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601a8152602001807f72617465735b6253796d626f6c5d206d757374206265203e203000000000000081525060200191505060405180910390fd5b6105496001600085600019166000191681526020019081526020016000206000015461053b670de0b6b3a76400008561100b90919063ffffffff16565b6110aa90919063ffffffff16565b905092915050565b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060007f5065726d697373696f6e4772616e74657200000000000000000000000000000060001916815260200190815260200160002060009054906101000a900460ff16151561066c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260318152602001807f6d73672e73656e646572206d7573742068617665205065726d697373696f6e4781526020017f72616e746572207065726d697373696f6e00000000000000000000000000000081525060400191505060405180910390fd5b60008060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000836000191660001916815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff167f789770131846de4d1f28418f0f957cdf4fcabe5eccf70067083e20ecece69a348260405180826000191660001916815260200191505060405180910390a25050565b7f52617465734665656465720000000000000000000000000000000000000000006000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000826000191660001916815260200190815260200160002060009054906101000a900460ff161515610830576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601f8152602001807f6d73672e73656e646572206d7573742068617665207065726d697373696f6e0081525060200191505060405180910390fd5b60408051908101604052808381526020014281525060016000856000191660001916815260200190815260200160002060008201518160000155602082015181600101559050507f9de72aa82d2cf62928e15749581b4bb9120a74b0de039e0908d84c73a28c82d783836040518083600019166000191681526020018281526020019250505060405180910390a1505050565b60008082519150600090505b81811015610905576108f88484838151811015156108e957fe5b90602001906020020151610551565b80806001019150506108cf565b50505050565b600080600160008560001916600019168152602001908152602001600020600001541115156109a2576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601a8152602001807f72617465735b6253796d626f6c5d206d757374206265203e203000000000000081525060200191505060405180910390fd5b6109ed670de0b6b3a76400006109df600160008760001916600019168152602001908152602001600020600001548561100b90919063ffffffff16565b6110aa90919063ffffffff16565b905092915050565b6000806000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060007f5065726d697373696f6e4772616e74657200000000000000000000000000000060001916815260200190815260200160002060009054906101000a900460ff161515610b13576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260318152602001807f6d73672e73656e646572206d7573742068617665205065726d697373696f6e4781526020017f72616e746572207065726d697373696f6e00000000000000000000000000000081525060400191505060405180910390fd5b82519150600090505b81811015610b5257610b45848483815181101515610b3657fe5b90602001906020020151610e26565b8080600101915050610b1c565b50505050565b60016020528060005260406000206000915090508060000154908060010154905082565b60007f52617465734665656465720000000000000000000000000000000000000000006000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000826000191660001916815260200190815260200160002060009054906101000a900460ff161515610c78576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601f8152602001807f6d73672e73656e646572206d7573742068617665207065726d697373696f6e0081525060200191505060405180910390fd5b8383905086869050141515610d1b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252602a8152602001807f73796d6f626c7320616e64206e65775261746573206c656e67746873206d757381526020017f7420626520657175616c0000000000000000000000000000000000000000000081525060400191505060405180910390fd5b600091505b85859050821015610e1e5760408051908101604052808585858181101515610d4457fe5b90506020020135815260200142815250600160008888868181101515610d6657fe5b90506020020135600019166000191660001916815260200190815260200160002060008201518160000155602082015181600101559050507f9de72aa82d2cf62928e15749581b4bb9120a74b0de039e0908d84c73a28c82d78686848181101515610dcd57fe5b90506020020135600019168585858181101515610de657fe5b905060200201356040518083600019166000191681526020018281526020019250505060405180910390a18180600101925050610d20565b505050505050565b6000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060007f5065726d697373696f6e4772616e74657200000000000000000000000000000060001916815260200190815260200160002060009054906101000a900460ff161515610f41576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260318152602001807f6d73672e73656e646572206d7573742068617665205065726d697373696f6e4781526020017f72616e746572207065726d697373696f6e00000000000000000000000000000081525060400191505060405180910390fd5b60016000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000836000191660001916815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff167fc65937e3dbcb9fb30f646815dd67a3dbd09ba17718cbcb54efbe3635f8e0a6fe8260405180826000191660001916815260200191505060405180910390a25050565b6000808284029050600084148061102c575082848281151561102957fe5b04145b15156110a0576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600c8152602001807f6d756c206f766572666c6f77000000000000000000000000000000000000000081525060200191505060405180910390fd5b8091505092915050565b600080600083111515611125576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260088152602001807f646976206279203000000000000000000000000000000000000000000000000081525060200191505060405180910390fd5b600060028481151561113357fe5b061461114e57600160028481151561114757fe5b040161115c565b60028381151561115a57fe5b045b905080838581151561116a57fe5b06101561118257828481151561117c57fe5b04611192565b6001838581151561118f57fe5b04015b915050929150505600a165627a7a7230582009b2aac94fb2df5c8e348e468e6e54b4bfa7d16dd7e85574bac8ac7d0676db560029000000000000000000000000de36a8773531406dcbeffdfd3c7b89fced7a9f84",
  "constructorArguments": "000000000000000000000000de36a8773531406dcbeffdfd3c7b89fced7a9f84"
}