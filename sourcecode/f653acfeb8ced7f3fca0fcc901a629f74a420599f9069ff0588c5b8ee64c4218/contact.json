{
  "address": "0x453939ddbb64a8ce1da8b0648281ca281dfaa2ef",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "SpinWin",
  "compilerVersion": "v0.4.24+commit.e67f0147",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2019-05-07\n*/\n\npragma solidity ^0.4.24;\n\n/**\n * @title SpinWinInterface\n */\ninterface SpinWinInterface {\n\tfunction refundPendingBets() external returns (bool);\n}\n\n\n/**\n * @title AdvertisingInterface\n */\ninterface AdvertisingInterface {\n\tfunction incrementBetCounter() external returns (bool);\n}\n\n\ncontract SpinWinLibraryInterface {\n\tfunction calculateWinningReward(uint256 betValue, uint256 playerNumber, uint256 houseEdge) external pure returns (uint256);\n\tfunction calculateTokenReward(address settingAddress, uint256 betValue, uint256 playerNumber, uint256 houseEdge) external constant returns (uint256);\n\tfunction generateRandomNumber(address settingAddress, uint256 betBlockNumber, uint256 extraData, uint256 divisor) external constant returns (uint256);\n\tfunction calculateClearBetBlocksReward(address settingAddress, address lotteryAddress) external constant returns (uint256);\n\tfunction calculateLotteryContribution(address settingAddress, address lotteryAddress, uint256 betValue) external constant returns (uint256);\n\tfunction calculateExchangeTokenValue(address settingAddress, uint256 tokenAmount) external constant returns (uint256, uint256, uint256, uint256);\n}\n\n\n/**\n * @title LotteryInterface\n */\ninterface LotteryInterface {\n\tfunction claimReward(address playerAddress, uint256 tokenAmount) external returns (bool);\n\tfunction calculateLotteryContributionPercentage() external constant returns (uint256);\n\tfunction getNumLottery() external constant returns (uint256);\n\tfunction isActive() external constant returns (bool);\n\tfunction getCurrentTicketMultiplierHonor() external constant returns (uint256);\n\tfunction getCurrentLotteryTargetBalance() external constant returns (uint256, uint256);\n}\n\n\n/**\n * @title SettingInterface\n */\ninterface SettingInterface {\n\tfunction uintSettings(bytes32 name) external constant returns (uint256);\n\tfunction boolSettings(bytes32 name) external constant returns (bool);\n\tfunction isActive() external constant returns (bool);\n\tfunction canBet(uint256 rewardValue, uint256 betValue, uint256 playerNumber, uint256 houseEdge) external constant returns (bool);\n\tfunction isExchangeAllowed(address playerAddress, uint256 tokenAmount) external constant returns (bool);\n\n\t/******************************************/\n\t/*          SPINWIN ONLY METHODS          */\n\t/******************************************/\n\tfunction spinwinSetUintSetting(bytes32 name, uint256 value) external;\n\tfunction spinwinIncrementUintSetting(bytes32 name) external;\n\tfunction spinwinSetBoolSetting(bytes32 name, bool value) external;\n\tfunction spinwinAddFunds(uint256 amount) external;\n\tfunction spinwinUpdateTokenToWeiExchangeRate() external;\n\tfunction spinwinRollDice(uint256 betValue) external;\n\tfunction spinwinUpdateWinMetric(uint256 playerProfit) external;\n\tfunction spinwinUpdateLoseMetric(uint256 betValue, uint256 tokenRewardValue) external;\n\tfunction spinwinUpdateLotteryContributionMetric(uint256 lotteryContribution) external;\n\tfunction spinwinUpdateExchangeMetric(uint256 exchangeAmount) external;\n\n\t/******************************************/\n\t/*      SPINLOTTERY ONLY METHODS          */\n\t/******************************************/\n\tfunction spinlotterySetUintSetting(bytes32 name, uint256 value) external;\n\tfunction spinlotteryIncrementUintSetting(bytes32 name) external;\n\tfunction spinlotterySetBoolSetting(bytes32 name, bool value) external;\n\tfunction spinlotteryUpdateTokenToWeiExchangeRate() external;\n\tfunction spinlotterySetMinBankroll(uint256 _minBankroll) external returns (bool);\n}\n\n\n/**\n * @title TokenInterface\n */\ninterface TokenInterface {\n\tfunction getTotalSupply() external constant returns (uint256);\n\tfunction getBalanceOf(address account) external constant returns (uint256);\n\tfunction transfer(address _to, uint256 _value) external returns (bool);\n\tfunction transferFrom(address _from, address _to, uint256 _value) external returns (bool);\n\tfunction approve(address _spender, uint256 _value) external returns (bool success);\n\tfunction approveAndCall(address _spender, uint256 _value, bytes _extraData) external returns (bool success);\n\tfunction burn(uint256 _value) external returns (bool success);\n\tfunction burnFrom(address _from, uint256 _value) external returns (bool success);\n\tfunction mintTransfer(address _to, uint _value) external returns (bool);\n\tfunction burnAt(address _at, uint _value) external returns (bool);\n}\n\n\n\n\n// https://github.com/OpenZeppelin/zeppelin-solidity/blob/master/contracts/math/SafeMath.sol\n\n/**\n * @title SafeMath\n * @dev Math operations with safety checks that throw on error\n */\nlibrary SafeMath {\n\tfunction mul(uint256 a, uint256 b) internal pure returns (uint256) {\n\t\tif (a == 0) {\n\t\t\treturn 0;\n\t\t}\n\t\tuint256 c = a * b;\n\t\tassert(c / a == b);\n\t\treturn c;\n\t}\n\n\tfunction div(uint256 a, uint256 b) internal pure returns (uint256) {\n\t\t// assert(b > 0); // Solidity automatically throws when dividing by 0\n\t\tuint256 c = a / b;\n\t\t// assert(a == b * c + a % b); // There is no case in which this doesn't hold\n\t\treturn c;\n\t}\n\n\tfunction sub(uint256 a, uint256 b) internal pure returns (uint256) {\n\t\tassert(b <= a);\n\t\treturn a - b;\n\t}\n\n\tfunction add(uint256 a, uint256 b) internal pure returns (uint256) {\n\t\tuint256 c = a + b;\n\t\tassert(c >= a);\n\t\treturn c;\n\t}\n}\n\n\n\ninterface tokenRecipient { function receiveApproval(address _from, uint256 _value, address _token, bytes _extraData) external; }\n\ncontract TokenERC20 {\n\t// Public variables of the token\n\tstring public name;\n\tstring public symbol;\n\tuint8 public decimals = 18;\n\t// 18 decimals is the strongly suggested default, avoid changing it\n\tuint256 public totalSupply;\n\n\t// This creates an array with all balances\n\tmapping (address => uint256) public balanceOf;\n\tmapping (address => mapping (address => uint256)) public allowance;\n\n\t// This generates a public event on the blockchain that will notify clients\n\tevent Transfer(address indexed from, address indexed to, uint256 value);\n\n\t// This generates a public event on the blockchain that will notify clients\n\tevent Approval(address indexed _owner, address indexed _spender, uint256 _value);\n\n\t// This notifies clients about the amount burnt\n\tevent Burn(address indexed from, uint256 value);\n\n\t/**\n\t * Constructor function\n\t *\n\t * Initializes contract with initial supply tokens to the creator of the contract\n\t */\n\tconstructor(\n\t\tuint256 initialSupply,\n\t\tstring tokenName,\n\t\tstring tokenSymbol\n\t) public {\n\t\ttotalSupply = initialSupply * 10 ** uint256(decimals);  // Update total supply with the decimal amount\n\t\tbalanceOf[msg.sender] = totalSupply;                // Give the creator all initial tokens\n\t\tname = tokenName;                                   // Set the name for display purposes\n\t\tsymbol = tokenSymbol;                               // Set the symbol for display purposes\n\t}\n\n\t/**\n\t * Internal transfer, only can be called by this contract\n\t */\n\tfunction _transfer(address _from, address _to, uint _value) internal {\n\t\t// Prevent transfer to 0x0 address. Use burn() instead\n\t\trequire(_to != 0x0);\n\t\t// Check if the sender has enough\n\t\trequire(balanceOf[_from] >= _value);\n\t\t// Check for overflows\n\t\trequire(balanceOf[_to] + _value > balanceOf[_to]);\n\t\t// Save this for an assertion in the future\n\t\tuint previousBalances = balanceOf[_from] + balanceOf[_to];\n\t\t// Subtract from the sender\n\t\tbalanceOf[_from] -= _value;\n\t\t// Add the same to the recipient\n\t\tbalanceOf[_to] += _value;\n\t\temit Transfer(_from, _to, _value);\n\t\t// Asserts are used to use static analysis to find bugs in your code. They should never fail\n\t\tassert(balanceOf[_from] + balanceOf[_to] == previousBalances);\n\t}\n\n\t/**\n\t * Transfer tokens\n\t *\n\t * Send `_value` tokens to `_to` from your account\n\t *\n\t * @param _to The address of the recipient\n\t * @param _value the amount to send\n\t */\n\tfunction transfer(address _to, uint256 _value) public returns (bool success) {\n\t\t_transfer(msg.sender, _to, _value);\n\t\treturn true;\n\t}\n\n\t/**\n\t * Transfer tokens from other address\n\t *\n\t * Send `_value` tokens to `_to` in behalf of `_from`\n\t *\n\t * @param _from The address of the sender\n\t * @param _to The address of the recipient\n\t * @param _value the amount to send\n\t */\n\tfunction transferFrom(address _from, address _to, uint256 _value) public returns (bool success) {\n\t\trequire(_value <= allowance[_from][msg.sender]);     // Check allowance\n\t\tallowance[_from][msg.sender] -= _value;\n\t\t_transfer(_from, _to, _value);\n\t\treturn true;\n\t}\n\n\t/**\n\t * Set allowance for other address\n\t *\n\t * Allows `_spender` to spend no more than `_value` tokens in your behalf\n\t *\n\t * @param _spender The address authorized to spend\n\t * @param _value the max amount they can spend\n\t */\n\tfunction approve(address _spender, uint256 _value) public returns (bool success) {\n\t\tallowance[msg.sender][_spender] = _value;\n\t\temit Approval(msg.sender, _spender, _value);\n\t\treturn true;\n\t}\n\n\t/**\n\t * Set allowance for other address and notify\n\t *\n\t * Allows `_spender` to spend no more than `_value` tokens in your behalf, and then ping the contract about it\n\t *\n\t * @param _spender The address authorized to spend\n\t * @param _value the max amount they can spend\n\t * @param _extraData some extra information to send to the approved contract\n\t */\n\tfunction approveAndCall(address _spender, uint256 _value, bytes _extraData)\n\t\tpublic\n\t\treturns (bool success) {\n\t\ttokenRecipient spender = tokenRecipient(_spender);\n\t\tif (approve(_spender, _value)) {\n\t\t\tspender.receiveApproval(msg.sender, _value, this, _extraData);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\t/**\n\t * Destroy tokens\n\t *\n\t * Remove `_value` tokens from the system irreversibly\n\t *\n\t * @param _value the amount of money to burn\n\t */\n\tfunction burn(uint256 _value) public returns (bool success) {\n\t\trequire(balanceOf[msg.sender] >= _value);   // Check if the sender has enough\n\t\tbalanceOf[msg.sender] -= _value;            // Subtract from the sender\n\t\ttotalSupply -= _value;                      // Updates totalSupply\n\t\temit Burn(msg.sender, _value);\n\t\treturn true;\n\t}\n\n\t/**\n\t * Destroy tokens from other account\n\t *\n\t * Remove `_value` tokens from the system irreversibly on behalf of `_from`.\n\t *\n\t * @param _from the address of the sender\n\t * @param _value the amount of money to burn\n\t */\n\tfunction burnFrom(address _from, uint256 _value) public returns (bool success) {\n\t\trequire(balanceOf[_from] >= _value);                // Check if the targeted balance is enough\n\t\trequire(_value <= allowance[_from][msg.sender]);    // Check allowance\n\t\tbalanceOf[_from] -= _value;                         // Subtract from the targeted balance\n\t\tallowance[_from][msg.sender] -= _value;             // Subtract from the sender's allowance\n\t\ttotalSupply -= _value;                              // Update totalSupply\n\t\temit Burn(_from, _value);\n\t\treturn true;\n\t}\n}\n\ncontract developed {\n\taddress public developer;\n\n\t/**\n\t * Constructor\n\t */\n\tconstructor() public {\n\t\tdeveloper = msg.sender;\n\t}\n\n\t/**\n\t * @dev Checks only developer address is calling\n\t */\n\tmodifier onlyDeveloper {\n\t\trequire(msg.sender == developer);\n\t\t_;\n\t}\n\n\t/**\n\t * @dev Allows developer to switch developer address\n\t * @param _developer The new developer address to be set\n\t */\n\tfunction changeDeveloper(address _developer) public onlyDeveloper {\n\t\tdeveloper = _developer;\n\t}\n\n\t/**\n\t * @dev Allows developer to withdraw ERC20 Token\n\t */\n\tfunction withdrawToken(address tokenContractAddress) public onlyDeveloper {\n\t\tTokenERC20 _token = TokenERC20(tokenContractAddress);\n\t\tif (_token.balanceOf(this) > 0) {\n\t\t\t_token.transfer(developer, _token.balanceOf(this));\n\t\t}\n\t}\n}\n\n\n\n\n\n\n\n\n/**\n * @title SpinWin\n */\ncontract SpinWin is developed, SpinWinInterface {\n\tusing SafeMath for uint256;\n\n\taddress public tokenAddress;\n\taddress public settingAddress;\n\taddress public lotteryAddress;\n\n\tTokenInterface internal _spintoken;\n\tSettingInterface internal _setting;\n\tLotteryInterface internal _lottery;\n\tSpinWinLibraryInterface internal _lib;\n\tAdvertisingInterface internal _advertising;\n\n\t/**\n\t * @dev Player variables\n\t */\n\tstruct Bet {\n\t\taddress playerAddress;\n\t\tbytes32 betId;\n\t\tuint256 betValue;\n\t\tuint256 diceResult;\n\t\tuint256 playerNumber;\n\t\tuint256 houseEdge;\n\t\tuint256 rewardValue;\n\t\tuint256 tokenRewardValue;\n\t\tuint256 blockNumber;\n\t\tbool processed;\n\t}\n\tstruct TokenExchange {\n\t\taddress playerAddress;\n\t\tbytes32 exchangeId;\n\t\tbool processed;\n\t}\n\n\tmapping (uint256 => Bet) internal bets;\n\tmapping (bytes32 => uint256) internal betIdLookup;\n\tmapping (address => uint256) public playerPendingWithdrawals;\n\tmapping (address => uint256) public playerPendingTokenWithdrawals;\n\tmapping (address => address) public referees;\n\tmapping (bytes32 => TokenExchange) public tokenExchanges;\n\tmapping (address => uint256) public lotteryBlocksAmount;\n\n\tuint256 constant public TWO_DECIMALS = 100;\n\tuint256 constant public PERCENTAGE_DIVISOR = 10 ** 6;   // 1000000 = 100%\n\tuint256 constant public CURRENCY_DIVISOR = 10**18;\n\n\tuint256 public totalPendingBets;\n\n\t/**\n\t * @dev Log when bet is placed\n\t */\n\tevent LogBet(bytes32 indexed betId, address indexed playerAddress, uint256 playerNumber, uint256 betValue, uint256 houseEdge, uint256 rewardValue, uint256 tokenRewardValue);\n\n\t/**\n\t * @dev Log when bet is cleared\n\t *\n\t * Status:\n\t * -2 = lose + failed mint and transfer\n\t * -1 = lose + failed send\n\t * 0 = lose\n\t * 1 = win\n\t * 2 = win + failed send\n\t * 3 = refund\n\t * 4 = refund + failed send\n\t * 5 = owner cancel + refund\n\t * 6 = owner cancel + refund + failed send\n\t */\n\tevent LogResult(bytes32 indexed betId, address indexed playerAddress, uint256 playerNumber, uint256 diceResult, uint256 betValue, uint256 houseEdge, uint256 rewardValue, uint256 tokenRewardValue, int256 status);\n\n\t/**\n\t * @dev Log when spinwin contributes some ETH to the lottery contract address\n\t */\n\tevent LogLotteryContribution(bytes32 indexed betId, address indexed playerAddress, uint256 weiValue);\n\n\t/**\n\t * @dev Log when spinwin rewards the referee of a bet or the person clears bet\n\t * rewardType\n\t * 1 = referral\n\t * 2 = clearBet\n\t */\n\tevent LogRewardLotteryBlocks(address indexed receiver, bytes32 indexed betId, uint256 lottoBlocksAmount, uint256 rewardType, uint256 status);\n\n\t/**\n\t * @dev Log when player clears bets\n\t */\n\tevent LogClearBets(address indexed playerAddress);\n\n\t/**\n\t * @dev Log when player claims the lottery blocks reward\n\t *\n\t * Status:\n\t * 0 = failed\n\t * 1 = success\n\t */\n\tevent LogClaimLotteryBlocks(address indexed playerAddress, uint256 numLottery, uint256 claimAmount, uint256 claimStatus);\n\n\t/**\n\t * @dev Log when player exchanges token to Wei\n\t *\n\t * Status:\n\t * 0 = failed send\n\t * 1 = success\n\t * 2 = failed destroy token\n\t */\n\tevent LogTokenExchange(bytes32 indexed exchangeId, address indexed playerAddress, uint256 tokenValue, uint256 tokenToWeiExchangeRate, uint256 weiValue, uint256 receivedWeiValue, uint256 remainderTokenValue, uint256 status);\n\n\t/**\n\t * @dev Log when player withdraws balance from failed transfer\n\t *\n\t * Status:\n\t * 0 = failed\n\t * 1 = success\n\t */\n\tevent LogPlayerWithdrawBalance(address indexed playerAddress, uint256 withdrawAmount, uint256 status);\n\n\t/**\n\t * @dev Log when player withdraw token balance from failed token transfer\n\t *\n\t * Status:\n\t * 0 = failed\n\t * 1 = success\n\t */\n\tevent LogPlayerWithdrawTokenBalance(address indexed playerAddress, uint256 withdrawAmount, uint256 status);\n\n\t/**\n\t * @dev Log when a bet ID is not found during clear bet\n\t */\n\tevent LogBetNotFound(bytes32 indexed betId);\n\n\t/**\n\t * @dev Log when developer cancel existing active bet\n\t */\n\tevent LogDeveloperCancelBet(bytes32 indexed betId, address indexed playerAddress);\n\n\t/**\n\t * Constructor\n\t * @param _tokenAddress SpinToken contract address\n\t * @param _settingAddress GameSetting contract address\n\t * @param _libraryAddress SpinWinLibrary contract address\n\t */\n\tconstructor(address _tokenAddress, address _settingAddress, address _libraryAddress) public {\n\t\ttokenAddress = _tokenAddress;\n\t\tsettingAddress = _settingAddress;\n\t\t_spintoken = TokenInterface(_tokenAddress);\n\t\t_setting = SettingInterface(_settingAddress);\n\t\t_lib = SpinWinLibraryInterface(_libraryAddress);\n\t}\n\n\t/**\n\t * @dev Checks if contract is active\n\t */\n\tmodifier isActive {\n\t\trequire(_setting.isActive() == true);\n\t\t_;\n\t}\n\n\t/**\n\t * @dev Checks whether a bet is allowed, and player profit, bet value, house edge and player number are within range\n\t */\n\tmodifier canBet(uint256 _betValue, uint256 _playerNumber, uint256 _houseEdge) {\n\t\trequire(_setting.canBet(_lib.calculateWinningReward(_betValue, _playerNumber, _houseEdge), _betValue, _playerNumber, _houseEdge) == true);\n\t\t_;\n\t}\n\n\t/**\n\t * @dev Checks if bet exist\n\t */\n\tmodifier betExist(bytes32 betId, address playerAddress) {\n\t\trequire(betIdLookup[betId] > 0 && bets[betIdLookup[betId]].betId == betId && bets[betIdLookup[betId]].playerAddress == playerAddress);\n\t\t_;\n\t}\n\n\t/**\n\t * @dev Checks if token exchange is allowed\n\t */\n\tmodifier isExchangeAllowed(address playerAddress, uint256 tokenAmount) {\n\t\trequire(_setting.isExchangeAllowed(playerAddress, tokenAmount) == true);\n\t\t_;\n\t}\n\n\t/******************************************/\n\t/*       DEVELOPER ONLY METHODS           */\n\t/******************************************/\n\t/**\n\t * @dev Allows developer to set lottery contract address\n\t * @param _lotteryAddress The new lottery contract address to be set\n\t */\n\tfunction devSetLotteryAddress(address _lotteryAddress) public onlyDeveloper {\n\t\trequire (_lotteryAddress != address(0));\n\t\tlotteryAddress = _lotteryAddress;\n\t\t_lottery = LotteryInterface(_lotteryAddress);\n\t}\n\n\t/**\n\t * @dev Allows developer to set advertising contract address\n\t * @param _advertisingAddress The new advertising contract address to be set\n\t */\n\tfunction devSetAdvertisingAddress(address _advertisingAddress) public onlyDeveloper {\n\t\trequire (_advertisingAddress != address(0));\n\t\t_advertising = AdvertisingInterface(_advertisingAddress);\n\t}\n\n\t/**\n\t * @dev Allows developer to get bet internal ID based on public betId\n\t * @param betId The public betId\n\t * @return The bet internal ID\n\t */\n\tfunction devGetBetInternalId(bytes32 betId) public onlyDeveloper constant returns (uint256) {\n\t\treturn (betIdLookup[betId]);\n\t}\n\n\t/**\n\t * @dev Allows developer to get bet info based on `betInternalId`\n\t * @param betInternalId The bet internal ID to be queried\n\t * @return The bet information\n\t */\n\tfunction devGetBet(uint256 betInternalId) public\n\t\tonlyDeveloper\n\t\tconstant returns (address, uint256, uint256, uint256, uint256, uint256, uint256, uint256, bool) {\n\t\tBet memory _bet = bets[betInternalId];\n\t\treturn (_bet.playerAddress, _bet.betValue, _bet.diceResult, _bet.playerNumber, _bet.houseEdge, _bet.rewardValue, _bet.tokenRewardValue, _bet.blockNumber, _bet.processed);\n\t}\n\n\t/**\n\t * @dev Allows developer to manually refund existing active bet.\n\t * @param betId The ID of the bet to be cancelled\n\t * @return Return true if success\n\t */\n\tfunction devRefundBet(bytes32 betId) public onlyDeveloper returns (bool) {\n\t\trequire (betIdLookup[betId] > 0);\n\n\t\tBet storage _bet = bets[betIdLookup[betId]];\n\n\t\trequire(_bet.processed == false);\n\n\t\t_bet.processed = true;\n\t\tuint256 betValue = _bet.betValue;\n\t\t_bet.betValue = 0;\n\t\t_bet.rewardValue = 0;\n\t\t_bet.tokenRewardValue = 0;\n\n\t\t_refundPlayer(betIdLookup[betId], betValue);\n\t\treturn true;\n\t}\n\n\t/**\n\t * @dev Add funds to the contract\n\t */\n\tfunction () public payable isActive {\n\t\t_setting.spinwinAddFunds(msg.value);\n\t}\n\n\t/******************************************/\n\t/*           SETTING METHODS              */\n\t/******************************************/\n\t/**\n\t * @dev Triggered during escape hatch. Go through each pending bets\n\t * and move the bet value to playerPendingWithdrawals so that player\n\t * can withdraw later\n\t */\n\tfunction refundPendingBets() public returns (bool) {\n\t\trequire (msg.sender == settingAddress);\n\t\tuint256 totalBets = _setting.uintSettings('totalBets');\n\t\tif (totalBets > 0) {\n\t\t\tfor (uint256 i = 1; i <= totalBets; i++) {\n\t\t\t\tBet storage _bet = bets[i];\n\t\t\t\tif (_bet.processed == false) {\n\t\t\t\t\tuint256 _betValue = _bet.betValue;\n\t\t\t\t\t_bet.processed = true;\n\t\t\t\t\t_bet.betValue = 0;\n\t\t\t\t\tplayerPendingWithdrawals[_bet.playerAddress] = playerPendingWithdrawals[_bet.playerAddress].add(_betValue);\n\t\t\t\t\temit LogResult(_bet.betId, _bet.playerAddress, _bet.playerNumber, 0, _betValue, _bet.houseEdge, 0, 0, 4);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t/******************************************/\n\t/*            PUBLIC METHODS              */\n\t/******************************************/\n\t/**\n\t * @dev Player places a bet. If it has a `referrerAddress`, we want to give reward to the referrer accordingly.\n\t * @dev If there is a bet that needs to be cleared, we will do it here too.\n\t * @param playerNumber The number that the player chose\n\t * @param houseEdge The house edge percentage that the player chose\n\t * @param clearBetId The bet ID to be cleared\n\t * @param referreeAddress The referree address if exist\n\t * @return Return true if success\n\t */\n\tfunction rollDice(uint256 playerNumber, uint256 houseEdge, bytes32 clearBetId, address referreeAddress) public\n\t\tpayable\n\t\tcanBet(msg.value, playerNumber, houseEdge)\n\t\treturns (bool) {\n\t\tuint256 betInternalId = _storeBet(msg.value, msg.sender, playerNumber, houseEdge);\n\n\t\t// Check if we need to clear a pending bet\n\t\tif (clearBetId != '') {\n\t\t\t_clearSingleBet(msg.sender, clearBetId, _setting.uintSettings('blockSecurityCount'));\n\t\t}\n\n\t\t// Check if we need to reward the referree\n\t\t_rewardReferree(referreeAddress, betInternalId);\n\n\t\t_advertising.incrementBetCounter();\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @dev Player can clear multiple bets\n\t * @param betIds The bet ids to be cleared\n\t */\n\tfunction clearBets(bytes32[] betIds) public isActive {\n\t\trequire (betIds.length > 0 && betIds.length <= _setting.uintSettings('maxNumClearBets'));\n\t\tbool canClear = false;\n\t\tuint256 blockSecurityCount = _setting.uintSettings('blockSecurityCount');\n\t\tfor (uint256 i = 0; i < betIds.length; i++) {\n\t\t\tBet memory _bet = bets[betIdLookup[betIds[i]]];\n\t\t\tif (_bet.processed == false && _setting.uintSettings('contractBalance') >= _bet.rewardValue && (block.number.sub(_bet.blockNumber)) >= blockSecurityCount) {\n\t\t\t\tcanClear = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\trequire(canClear == true);\n\n\t\t// Loop through each bets and clear it if possible\n\t\tfor (i = 0; i < betIds.length; i++) {\n\t\t\t_clearSingleBet(msg.sender, betIds[i], blockSecurityCount);\n\t\t}\n\t\temit LogClearBets(msg.sender);\n\t}\n\n\t/**\n\t * @dev Allow player to claim lottery blocks reward\n\t * and spend it on lottery blocks\n\t */\n\tfunction claimLotteryBlocks() public isActive {\n\t\trequire (_lottery.isActive() == true);\n\t\trequire (lotteryBlocksAmount[msg.sender] > 0);\n\t\tuint256 claimAmount = lotteryBlocksAmount[msg.sender];\n\t\tlotteryBlocksAmount[msg.sender] = 0;\n\t\tuint256 claimStatus = 1;\n\t\tif (!_lottery.claimReward(msg.sender, claimAmount)) {\n\t\t\tclaimStatus = 0;\n\t\t\tlotteryBlocksAmount[msg.sender] = claimAmount;\n\t\t}\n\t\temit LogClaimLotteryBlocks(msg.sender, _lottery.getNumLottery(), claimAmount, claimStatus);\n\t}\n\n\t/**\n\t * @dev Player exchanges token for Wei\n\t * @param tokenAmount The amount of token to be exchanged\n\t * @return Return true if success\n\t */\n\tfunction exchangeToken(uint256 tokenAmount) public\n\t\tisExchangeAllowed(msg.sender, tokenAmount) {\n\t\t(uint256 weiValue, uint256 sendWei, uint256 tokenRemainder, uint256 burnToken) = _lib.calculateExchangeTokenValue(settingAddress, tokenAmount);\n\n\t\t_setting.spinwinIncrementUintSetting('totalTokenExchanges');\n\n\t\t// Generate exchangeId\n\t\tbytes32 _exchangeId = keccak256(abi.encodePacked(this, msg.sender, _setting.uintSettings('totalTokenExchanges')));\n\t\tTokenExchange storage _tokenExchange = tokenExchanges[_exchangeId];\n\n\t\t// Make sure we don't process the exchange bet twice\n\t\trequire (_tokenExchange.processed == false);\n\n\t\t// Update exchange metric\n\t\t_setting.spinwinUpdateExchangeMetric(sendWei);\n\n\t\t/*\n\t\t * Store the info about this exchange\n\t\t */\n\t\t_tokenExchange.playerAddress = msg.sender;\n\t\t_tokenExchange.exchangeId = _exchangeId;\n\t\t_tokenExchange.processed = true;\n\n\t\t/*\n\t\t * Burn token at this address\n\t\t */\n\t\tif (!_spintoken.burnAt(_tokenExchange.playerAddress, burnToken)) {\n\t\t\tuint256 exchangeStatus = 2; // status = failed destroy token\n\n\t\t} else {\n\t\t\tif (!_tokenExchange.playerAddress.send(sendWei)) {\n\t\t\t\texchangeStatus = 0; // status = failed send\n\n\t\t\t\t// If send failed, let player withdraw via playerWithdrawPendingTransactions\n\t\t\t\tplayerPendingWithdrawals[_tokenExchange.playerAddress] = playerPendingWithdrawals[_tokenExchange.playerAddress].add(sendWei);\n\t\t\t} else {\n\t\t\t\texchangeStatus = 1; // status = success\n\t\t\t}\n\t\t}\n\t\t// Update the token to wei exchange rate\n\t\t_setting.spinwinUpdateTokenToWeiExchangeRate();\n\n\t\temit LogTokenExchange(_tokenExchange.exchangeId, _tokenExchange.playerAddress, tokenAmount, _setting.uintSettings('tokenToWeiExchangeRateHonor'), weiValue, sendWei, tokenRemainder, exchangeStatus);\n\t}\n\n\t/**\n\t * @dev Calculate winning ETH when player wins\n\t * @param betValue The amount of ETH for this bet\n\t * @param playerNumber The number that player chose\n\t * @param houseEdge The house edge for this bet\n\t * @return The amount of ETH to be sent to player if he/she wins\n\t */\n\tfunction calculateWinningReward(uint256 betValue, uint256 playerNumber, uint256 houseEdge) public view returns (uint256) {\n\t\treturn _lib.calculateWinningReward(betValue, playerNumber, houseEdge);\n\t}\n\n\t/**\n\t * @dev Calculates token reward amount when player loses\n\t * @param betValue The amount of ETH for this bet\n\t * @param playerNumber The number that player chose\n\t * @param houseEdge The house edge for this bet\n\t * @return The amount of token to be sent to player if he/she loses\n\t */\n\tfunction calculateTokenReward(uint256 betValue, uint256 playerNumber, uint256 houseEdge) public constant returns (uint256) {\n\t\treturn _lib.calculateTokenReward(settingAddress, betValue, playerNumber, houseEdge);\n\t}\n\n\t/**\n\t * @dev Player withdraws balance in case of a failed refund or failed win send\n\t */\n\tfunction playerWithdrawPendingTransactions() public {\n\t\trequire(playerPendingWithdrawals[msg.sender] > 0);\n\t\tuint256 withdrawAmount = playerPendingWithdrawals[msg.sender];\n\t\tplayerPendingWithdrawals[msg.sender] = 0;\n\n\t\t// External call to untrusted contract\n\t\tuint256 status = 1; // status = success\n\t\tif (!msg.sender.send(withdrawAmount)) {\n\t\t\tstatus = 0; // status = failed\n\n\t\t\t/*\n\t\t\t * If send failed, revert playerPendingWithdrawals[msg.sender] = 0\n\t\t\t * so that player can try to withdraw again later\n\t\t\t */\n\t\t\tplayerPendingWithdrawals[msg.sender] = withdrawAmount;\n\t\t}\n\t\temit LogPlayerWithdrawBalance(msg.sender, withdrawAmount, status);\n\t}\n\n\t/**\n\t * @dev Players withdraws SPIN token balance in case of a failed token transfer\n\t */\n\tfunction playerWithdrawPendingTokenTransactions() public {\n\t\trequire(playerPendingTokenWithdrawals[msg.sender] > 0);\n\t\tuint256 withdrawAmount = playerPendingTokenWithdrawals[msg.sender];\n\t\tplayerPendingTokenWithdrawals[msg.sender] = 0;\n\n\t\t// Mint and transfer token to msg.sender\n\t\tuint256 status = 1; // status = success\n\t\tif (!_spintoken.mintTransfer(msg.sender, withdrawAmount)) {\n\t\t\tstatus = 0; // status = failed\n\t\t\t/*\n\t\t\t * If transfer failed, revert playerPendingTokenWithdrawals[msg.sender] = 0\n\t\t\t * so that player can try to withdraw again later\n\t\t\t */\n\t\t\tplayerPendingTokenWithdrawals[msg.sender] = withdrawAmount;\n\t\t}\n\t\temit LogPlayerWithdrawTokenBalance(msg.sender, withdrawAmount, status);\n\t}\n\n\t/**\n\t * @dev Player gets bet information based on betId\n\t * @return The bet information\n\t */\n\tfunction playerGetBet(bytes32 betId) public\n\t\tconstant returns (uint256, uint256, uint256, uint256, uint256, uint256, bool) {\n\t\trequire(betIdLookup[betId] > 0 && bets[betIdLookup[betId]].betId == betId);\n\t\tBet memory _bet = bets[betIdLookup[betId]];\n\t\treturn (_bet.betValue, _bet.diceResult, _bet.playerNumber, _bet.houseEdge, _bet.rewardValue, _bet.tokenRewardValue, _bet.processed);\n\t}\n\n\t/**\n\t * @dev Player gets pending bet IDs\n\t * @return The pending bet IDs\n\t */\n\tfunction playerGetPendingBetIds() public constant returns (bytes32[]) {\n\t\tbytes32[] memory pendingBetIds = new bytes32[](totalPendingBets);\n\t\tif (totalPendingBets > 0) {\n\t\t\tuint256 counter = 0;\n\t\t\tfor (uint256 i = 1; i <= _setting.uintSettings('totalBets'); i++) {\n\t\t\t\tBet memory _bet = bets[i];\n\t\t\t\tif (_bet.processed == false) {\n\t\t\t\t\tpendingBetIds[counter] = _bet.betId;\n\t\t\t\t\tcounter++;\n\t\t\t\t}\n\t\t\t\tif (counter == totalPendingBets) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn pendingBetIds;\n\t}\n\n\t/**\n\t * @dev Player gets pending bet information based on betId\n\t * @return The bet information\n\t */\n\tfunction playerGetPendingBet(bytes32 betId) public\n\t\tconstant returns (address, uint256, uint256, uint256, uint256) {\n\t\trequire(betIdLookup[betId] > 0 && bets[betIdLookup[betId]].betId == betId);\n\t\tBet memory _bet = bets[betIdLookup[betId]];\n\t\treturn (_bet.playerAddress, _bet.playerNumber, _bet.betValue, _bet.houseEdge, _bet.blockNumber);\n\t}\n\n\t/**\n\t * @dev Calculates lottery block rewards when player clears a bet\n\t * @return The amount of lottery blocks to be rewarded when player clears bet\n\t */\n\tfunction calculateClearBetBlocksReward() public constant returns (uint256) {\n\t\treturn _lib.calculateClearBetBlocksReward(settingAddress, lotteryAddress);\n\t}\n\n\n\t/******************************************/\n\t/*           INTERNAL METHODS             */\n\t/******************************************/\n\n\t/**\n\t * @dev Stores bet information.\n\t * @param betValue The value of the bet\n\t * @param playerAddress The player address\n\t * @param playerNumber The number that player chose\n\t * @param houseEdge The house edge for this bet\n\t * @return The internal  bet ID of this bet\n\t */\n\tfunction _storeBet (uint256 betValue, address playerAddress, uint256 playerNumber, uint256 houseEdge) internal returns (uint256) {\n\t\t// Update the setting metric\n\t\t_setting.spinwinRollDice(betValue);\n\n\t\tuint256 betInternalId = _setting.uintSettings('totalBets');\n\n\t\t// Generate betId\n\t\tbytes32 betId = keccak256(abi.encodePacked(this, playerAddress, betInternalId));\n\n\t\tBet storage _bet = bets[betInternalId];\n\n\t\t// Make sure we don't process the same bet twice\n\t\trequire (_bet.processed == false);\n\n\t\t// Store the info about this bet\n\t\tbetIdLookup[betId] = betInternalId;\n\t\t_bet.playerAddress = playerAddress;\n\t\t_bet.betId = betId;\n\t\t_bet.betValue = betValue;\n\t\t_bet.playerNumber = playerNumber;\n\t\t_bet.houseEdge = houseEdge;\n\n\t\t// Safely calculate winning reward\n\t\t_bet.rewardValue = calculateWinningReward(betValue, playerNumber, houseEdge);\n\n\t\t// Safely calculate token payout\n\t\t_bet.tokenRewardValue = calculateTokenReward(betValue, playerNumber, houseEdge);\n\t\t_bet.blockNumber = block.number;\n\n\t\t// Update the pendingBets counter\n\t\ttotalPendingBets++;\n\n\t\temit LogBet(_bet.betId, _bet.playerAddress, _bet.playerNumber, _bet.betValue, _bet.houseEdge, _bet.rewardValue, _bet.tokenRewardValue);\n\t\treturn betInternalId;\n\t}\n\n\t/**\n\t * @dev Internal function to clear single bet\n\t * @param playerAddress The player who clears this bet\n\t * @param betId The bet ID to be cleared\n\t * @param blockSecurityCount The block security count to be checked\n\t * @return true if success, false otherwise\n\t */\n\tfunction _clearSingleBet(address playerAddress, bytes32 betId, uint256 blockSecurityCount) internal returns (bool) {\n\t\tif (betIdLookup[betId] > 0) {\n\t\t\tBet memory _bet = bets[betIdLookup[betId]];\n\n\t\t\t/* Check if we can clear this bet\n\t\t\t * - Make sure we don't process the same bet twice\n\t\t\t * - Check if contract can payout on win\n\t\t\t * - block number difference >= blockSecurityCount\n\t\t\t */\n\t\t\tif (_bet.processed == false && _setting.uintSettings('contractBalance') >= _bet.rewardValue && (block.number.sub(_bet.blockNumber)) >= blockSecurityCount) {\n\t\t\t\t_processBet(playerAddress, betIdLookup[betId], true);\n\t\t\t} else {\n\t\t\t\temit LogRewardLotteryBlocks(playerAddress, _bet.betId, 0, 2, 0);\n\t\t\t}\n\t\t\treturn true;\n\t\t} else {\n\t\t\temit LogBetNotFound(betId);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * @dev Internal function to process existing bet.\n\t * If no dice result, then we initiate a refund.\n\t * If player wins (dice result < player number), we send player winning ETH.\n\t * If player loses (dice result >= player number), we send player some SPIN token.\n\t * If player loses and bankroll goal is reached, spinwin will contribute some ETH to lottery contract address.\n\t *\n\t * @param triggerAddress The player who clears this bet\n\t * @param betInternalId The bet internal ID to be processed\n\t * @param isClearMultiple Whether or not this is part of clear multiple bets transaction\n\t * @return Return true if success\n\t */\n\tfunction _processBet(address triggerAddress, uint256 betInternalId, bool isClearMultiple) internal returns (bool) {\n\t\tBet storage _bet =  bets[betInternalId];\n\t\tuint256 _betValue = _bet.betValue;\n\t\tuint256 _rewardValue = _bet.rewardValue;\n\t\tuint256 _tokenRewardValue = _bet.tokenRewardValue;\n\n\t\t// Prevent re-entrancy\n\t\t_bet.processed = true;\n\t\t_bet.betValue = 0;\n\t\t_bet.rewardValue = 0;\n\t\t_bet.tokenRewardValue = 0;\n\n\t\t// Generate the result\n\t\t_bet.diceResult = _lib.generateRandomNumber(settingAddress, _bet.blockNumber, _setting.uintSettings('totalBets').add(_setting.uintSettings('totalWeiWagered')), 100);\n\n\t\tif (_bet.diceResult == 0) {\n\t\t\t/*\n\t\t\t * Invalid random number. Refund the player\n\t\t\t */\n\t\t\t_refundPlayer(betInternalId, _betValue);\n\t\t} else if (_bet.diceResult < _bet.playerNumber) {\n\t\t\t/*\n\t\t\t * Player wins. Send the player the winning eth amount\n\t\t\t */\n\t\t\t_payWinner(betInternalId, _betValue, _rewardValue);\n\t\t} else {\n\t\t\t/*\n\t\t\t * Player loses. Send the player 1 wei and the spintoken amount\n\t\t\t */\n\t\t\t_payLoser(betInternalId, _betValue, _tokenRewardValue);\n\t\t}\n\t\t// Update the pendingBets counter\n\t\ttotalPendingBets--;\n\n\t\t// Update the token to wei exchange rate\n\t\t_setting.spinwinUpdateTokenToWeiExchangeRate();\n\n\t\t// Calculate the lottery blocks reward for this transaction\n\t\tuint256 lotteryBlocksReward = calculateClearBetBlocksReward();\n\n\t\t// If this is a single clear (from placing bet), we want to multiply this with clearSingleBetMultiplier\n\t\tif (isClearMultiple == false) {\n\t\t\tuint256 multiplier = _setting.uintSettings('clearSingleBetMultiplier');\n\t\t} else {\n\t\t\tmultiplier = _setting.uintSettings('clearMultipleBetsMultiplier');\n\t\t}\n\t\tlotteryBlocksReward = (lotteryBlocksReward.mul(multiplier)).div(TWO_DECIMALS);\n\n\t\tlotteryBlocksAmount[triggerAddress] = lotteryBlocksAmount[triggerAddress].add(lotteryBlocksReward);\n\t\temit LogRewardLotteryBlocks(triggerAddress, _bet.betId, lotteryBlocksReward, 2, 1);\n\t\treturn true;\n\t}\n\n\t/**\n\t * @dev Refund the player when we are unable to determine the dice result\n\t * @param betInternalId The bet internal ID\n\t * @param refundAmount The amount to be refunded\n\t */\n\tfunction _refundPlayer(uint256 betInternalId, uint256 refundAmount) internal {\n\t\tBet memory _bet =  bets[betInternalId];\n\t\t/*\n\t\t * Send refund - external call to an untrusted contract\n\t\t * If send fails, map refund value to playerPendingWithdrawals[address]\n\t\t * for withdrawal later via playerWithdrawPendingTransactions\n\t\t */\n\t\tint256 betStatus = 3; // status = refund\n\t\tif (!_bet.playerAddress.send(refundAmount)) {\n\t\t\tbetStatus = 4; // status = refund + failed send\n\n\t\t\t// If send failed, let player withdraw via playerWithdrawPendingTransactions\n\t\t\tplayerPendingWithdrawals[_bet.playerAddress] = playerPendingWithdrawals[_bet.playerAddress].add(refundAmount);\n\t\t}\n\t\temit LogResult(_bet.betId, _bet.playerAddress, _bet.playerNumber, _bet.diceResult, refundAmount, _bet.houseEdge, 0, 0, betStatus);\n\t}\n\n\t/**\n\t * @dev Pays the player the winning eth amount\n\t * @param betInternalId The bet internal ID\n\t * @param betValue The original wager\n\t * @param playerProfit The player profit\n\t */\n\tfunction _payWinner(uint256 betInternalId, uint256 betValue, uint256 playerProfit) internal {\n\t\tBet memory _bet =  bets[betInternalId];\n\t\t// Update setting's contract balance and total wei won\n\t\t_setting.spinwinUpdateWinMetric(playerProfit);\n\n\t\t// Safely calculate payout via profit plus original wager\n\t\tplayerProfit = playerProfit.add(betValue);\n\n\t\t/*\n\t\t * Send win - external call to an untrusted contract\n\t\t * If send fails, map reward value to playerPendingWithdrawals[address]\n\t\t * for withdrawal later via playerWithdrawPendingTransactions\n\t\t */\n\t\tint256 betStatus = 1; // status = win\n\t\tif (!_bet.playerAddress.send(playerProfit)) {\n\t\t\tbetStatus = 2; // status = win + failed send\n\n\t\t\t// If send failed, let player withdraw via playerWithdrawPendingTransactions\n\t\t\tplayerPendingWithdrawals[_bet.playerAddress] = playerPendingWithdrawals[_bet.playerAddress].add(playerProfit);\n\t\t}\n\t\temit LogResult(_bet.betId, _bet.playerAddress, _bet.playerNumber, _bet.diceResult, betValue, _bet.houseEdge, playerProfit, 0, betStatus);\n\t}\n\n\t/**\n\t * @dev Pays the player 1 wei and the spintoken amount\n\t * @param betInternalId The bet internal ID\n\t * @param betValue The original wager\n\t * @param tokenRewardValue The token reward for this bet\n\t */\n\tfunction _payLoser(uint256 betInternalId, uint256 betValue, uint256 tokenRewardValue) internal {\n\t\tBet memory _bet =  bets[betInternalId];\n\t\t/*\n\t\t * Update the game setting metric when player loses\n\t\t */\n\t\t_setting.spinwinUpdateLoseMetric(betValue, tokenRewardValue);\n\n\t\tint256 betStatus; // status = lose\n\n\t\t/*\n\t\t * Send 1 Wei to losing bet - external call to an untrusted contract\n\t\t */\n\t\tif (!_bet.playerAddress.send(1)) {\n\t\t\tbetStatus = -1; // status = lose + failed send\n\n\t\t\t// If send failed, let player withdraw via playerWithdrawPendingTransactions\n\t\t\tplayerPendingWithdrawals[_bet.playerAddress] = playerPendingWithdrawals[_bet.playerAddress].add(1);\n\t\t}\n\n\t\t/*\n\t\t * Mint and transfer token reward to this player\n\t\t */\n\t\tif (tokenRewardValue > 0) {\n\t\t\tif (!_spintoken.mintTransfer(_bet.playerAddress, tokenRewardValue)) {\n\t\t\t\tbetStatus = -2; // status = lose + failed mint and transfer\n\n\t\t\t\t// If transfer token failed, let player withdraw via playerWithdrawPendingTokenTransactions\n\t\t\t\tplayerPendingTokenWithdrawals[_bet.playerAddress] = playerPendingTokenWithdrawals[_bet.playerAddress].add(tokenRewardValue);\n\t\t\t}\n\t\t}\n\t\temit LogResult(_bet.betId, _bet.playerAddress, _bet.playerNumber, _bet.diceResult, betValue, _bet.houseEdge, 1, tokenRewardValue, betStatus);\n\t\t_sendLotteryContribution(betInternalId, betValue);\n\t}\n\n\t/**\n\t * @dev Contribute the house win to lottery address\n\t * @param betInternalId The bet internal ID\n\t * @param betValue The original wager\n\t * @return Return true if success\n\t */\n\tfunction _sendLotteryContribution(uint256 betInternalId, uint256 betValue) internal returns (bool) {\n\t\t/*\n\t\t * If contractBalance >= minBankroll, contribute the a percentage of the winning to lottery\n\t\t */\n\t\tuint256 contractBalance = _setting.uintSettings('contractBalance');\n\t\tif (contractBalance >= _setting.uintSettings('minBankroll')) {\n\t\t\tBet memory _bet =  bets[betInternalId];\n\t\t\tuint256 lotteryContribution = _lib.calculateLotteryContribution(settingAddress, lotteryAddress, betValue);\n\n\t\t\tif (lotteryContribution > 0 && contractBalance >= lotteryContribution) {\n\t\t\t\t// Safely adjust contractBalance\n\t\t\t\t_setting.spinwinUpdateLotteryContributionMetric(lotteryContribution);\n\n\t\t\t\temit LogLotteryContribution(_bet.betId, _bet.playerAddress, lotteryContribution);\n\n\t\t\t\t// Contribute to the lottery\n\t\t\t\tif (!lotteryAddress.call.gas(_setting.uintSettings('gasForLottery')).value(lotteryContribution)()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * @dev Reward the referree if necessary.\n\t * @param referreeAddress The address of the referree\n\t * @param betInternalId The internal bet ID\n\t */\n\tfunction _rewardReferree(address referreeAddress, uint256 betInternalId) internal {\n\t\tBet memory _bet = bets[betInternalId];\n\n\t\t// If the player already has a referee, use that address\n\t\tif (referees[_bet.playerAddress] != address(0)) {\n\t\t\treferreeAddress = referees[_bet.playerAddress];\n\t\t}\n\t\tif (referreeAddress != address(0) && referreeAddress != _bet.playerAddress) {\n\t\t\treferees[_bet.playerAddress] = referreeAddress;\n\t\t\tuint256 _tokenForLotto = _bet.tokenRewardValue.mul(_setting.uintSettings('referralPercent')).div(PERCENTAGE_DIVISOR);\n\t\t\tlotteryBlocksAmount[referreeAddress] = lotteryBlocksAmount[referreeAddress].add(_tokenForLotto);\n\t\t\temit LogRewardLotteryBlocks(referreeAddress, _bet.betId, _tokenForLotto, 1, 1);\n\t\t}\n\t}\n}",
  "bytecode": "608060405234801561001057600080fd5b5060405160608061400083398101604090815281516020830151919092015160008054600160a060020a0319908116331790915560018054600160a060020a03958616908316811790915560028054948616948316851790556004805483169091179055600580548216909317909255600780549390911692909116919091179055613f5f806100a16000396000f3006080604052600436106101875763ffffffff60e060020a6000350416630480135f8114610293578063085d6d95146102aa5780631e4c189c146102db5780631f90d1851461033057806320235de21461036357806321061bbd146103b557806321abc498146103de578063253925511461042b578063256aefda1461044957806331119b4d1461046a578063378f44781461048b5780633beedf6d146104a9578063409de563146104be5780635359840d146104df5780635e4a8e23146104f7578063605e20581461050c57806364a60b471461057157806370159a0e1461059257806389476069146105fd5780638f78c3111461061e57806394b44f771461063657806394e5bb691461064e5780639d76ea5814610663578063a5f4af3314610678578063b065b6f41461068d578063b14ad5b8146106a2578063b2e777aa146106b7578063b6763f19146106d4578063c97a2896146106f5578063ca4b208b14610737578063caf297651461074c578063dbf93f9814610761578063e8a7efc414610776575b600560009054906101000a9004600160a060020a0316600160a060020a03166322f3e2d46040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156101da57600080fd5b505af11580156101ee573d6000803e3d6000fd5b505050506040513d602081101561020457600080fd5b5051151560011461021457600080fd5b600554604080517f2560e8fb0000000000000000000000000000000000000000000000000000000081523460048201529051600160a060020a0390921691632560e8fb9160248082019260009290919082900301818387803b15801561027957600080fd5b505af115801561028d573d6000803e3d6000fd5b50505050005b34801561029f57600080fd5b506102a8610797565b005b3480156102b657600080fd5b506102bf6108c1565b60408051600160a060020a039092168252519081900360200190f35b3480156102e757600080fd5b50604080516020600480358082013583810280860185019096528085526102a8953695939460249493850192918291850190849080828437509497506108d09650505050505050565b34801561033c57600080fd5b50610351600160a060020a0360043516610cf7565b60408051918252519081900360200190f35b34801561036f57600080fd5b5061037b600435610d09565b604080519788526020880196909652868601949094526060860192909252608085015260a0840152151560c0830152519081900360e00190f35b3480156103c157600080fd5b506103ca610e1a565b604080519115158252519081900360200190f35b3480156103ea57600080fd5b506103f6600435610fdf565b60408051600160a060020a03909616865260208601949094528484019290925260608401526080830152519081900360a00190f35b34801561043757600080fd5b506103516004356024356044356110e5565b34801561045557600080fd5b50610351600160a060020a036004351661119c565b34801561047657600080fd5b506102a8600160a060020a03600435166111ae565b34801561049757600080fd5b506103516004356024356044356111f4565b3480156104b557600080fd5b506102bf611268565b3480156104ca57600080fd5b506102a8600160a060020a0360043516611277565b3480156104eb57600080fd5b506103516004356112d2565b34801561050357600080fd5b506103516112fd565b34801561051857600080fd5b506105216113a6565b60408051602080825283518183015283519192839290830191858101910280838360005b8381101561055d578181015183820152602001610545565b505050509050019250505060405180910390f35b34801561057d57600080fd5b506102bf600160a060020a0360043516611560565b34801561059e57600080fd5b506105aa60043561157b565b60408051600160a060020a03909a168a5260208a0198909852888801969096526060880194909452608087019290925260a086015260c085015260e0840152151561010083015251908190036101200190f35b34801561060957600080fd5b506102a8600160a060020a036004351661165d565b34801561062a57600080fd5b506102a860043561182b565b34801561064257600080fd5b506103ca600435611f24565b34801561065a57600080fd5b50610351611fd6565b34801561066f57600080fd5b506102bf611fdc565b34801561068457600080fd5b506102a8611feb565b34801561069957600080fd5b506102a8612097565b3480156106ae57600080fd5b50610351612368565b6103ca600435602435604435600160a060020a036064351661236d565b3480156106e057600080fd5b506102a8600160a060020a0360043516612604565b34801561070157600080fd5b5061070d600435612669565b60408051600160a060020a0390941684526020840192909252151582820152519081900360600190f35b34801561074357600080fd5b506102bf612697565b34801561075857600080fd5b506103516126a6565b34801561076d57600080fd5b506103516126ad565b34801561078257600080fd5b50610351600160a060020a03600435166126b9565b336000908152600c6020526040812054819081106107b457600080fd5b5050336000818152600c602090815260408083208054908490556004805483517fc349c93e000000000000000000000000000000000000000000000000000000008152918201969096526024810182905291519094600194600160a060020a039091169363c349c93e936044808201949293918390030190829087803b15801561083d57600080fd5b505af1158015610851573d6000803e3d6000fd5b505050506040513d602081101561086757600080fd5b505115156108835750336000908152600c602052604081208290555b6040805183815260208101839052815133927f0552532b8d5628d8c51edf8c1d6d10c72617f800a2e0c805e0b609f1dcc84b4b928290030190a25050565b600254600160a060020a031681565b60008060006108dd613e91565b600560009054906101000a9004600160a060020a0316600160a060020a03166322f3e2d46040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561093057600080fd5b505af1158015610944573d6000803e3d6000fd5b505050506040513d602081101561095a57600080fd5b5051151560011461096a57600080fd5b60008551118015610a1757506005546040805160e060020a6382d9bfd90281527f6d61784e756d436c65617242657473000000000000000000000000000000000060048201529051600160a060020a03909216916382d9bfd9916024808201926020929091908290030181600087803b1580156109e657600080fd5b505af11580156109fa573d6000803e3d6000fd5b505050506040513d6020811015610a1057600080fd5b5051855111155b1515610a2257600080fd5b6005546040805160e060020a6382d9bfd90281527f626c6f636b5365637572697479436f756e7400000000000000000000000000006004820152905160009650600160a060020a03909216916382d9bfd99160248082019260209290919082900301818a87803b158015610a9557600080fd5b505af1158015610aa9573d6000803e3d6000fd5b505050506040513d6020811015610abf57600080fd5b50519250600091505b8451821015610c7b5760096000600a60008886815181101515610ae757fe5b602090810290910181015182528181019290925260409081016000908120548452838301949094529182019092208151610140810183528154600160a060020a031681526001820154938101939093526002810154918301919091526003810154606083015260048101546080830152600581015460a0830152600681015460c0830152600781015460e083015260088101546101008301526009015460ff16158015610120830181905291925090610c3f575060c08101516005546040805160e060020a6382d9bfd90281527f636f6e747261637442616c616e6365000000000000000000000000000000000060048201529051600160a060020a03909216916382d9bfd9916024808201926020929091908290030181600087803b158015610c1057600080fd5b505af1158015610c24573d6000803e3d6000fd5b505050506040513d6020811015610c3a57600080fd5b505110155b8015610c62575082610c5f826101000151436126cb90919063ffffffff16565b10155b15610c705760019350610c7b565b600190910190610ac8565b600184151514610c8a57600080fd5b600091505b8451821015610cc657610cba338684815181101515610caa57fe5b90602001906020020151856126dd565b50600190910190610c8f565b60405133907eee1bfaa583a6b50363166e24a466ec786118fa3535f3ae3d5bb03b05c289df90600090a25050505050565b600b6020526000908152604090205481565b6000806000806000806000610d1c613e91565b6000898152600a6020526040812054118015610d5557506000898152600a60209081526040808320548352600990915290206001015489145b1515610d6057600080fd5b50505060009586525050600a602090815260408086205486526009808352958190208151610140810183528154600160a060020a031681526001820154938101939093526002810154918301829052600381015460608401819052600482015460808501819052600583015460a08601819052600684015460c08701819052600785015460e08801819052600886015461010089015294909a015460ff161515610120909601869052939991989097509295509193509190565b6002546000908190819081908190600160a060020a03163314610e3c57600080fd5b6005546040805160e060020a6382d9bfd9028152600080516020613f1483398151915260048201529051600160a060020a03909216916382d9bfd9916024808201926020929091908290030181600087803b158015610e9a57600080fd5b505af1158015610eae573d6000803e3d6000fd5b505050506040513d6020811015610ec457600080fd5b505193506000841115610fd457600192505b838311610fd45760008381526009602081905260409091209081015490925060ff161515610fc9575060028101805460098301805460ff191660011790556000918290558254600160a060020a03168252600b602052604090912054610f42908263ffffffff61292316565b8254600160a060020a039081166000908152600b60209081526040808320949094558554600187015460048089015460058a0154885191825294810186905280880189905260608101949094526080840185905260a084019490945260c0830193909352935193909216929091600080516020613ef4833981519152919081900360e00190a35b600190920191610ed6565b600194505050505090565b6000806000806000610fef613e91565b6000878152600a602052604081205411801561102857506000878152600a60209081526040808320548352600990915290206001015487145b151561103357600080fd5b50505060009384525050600a602090815260408084205484526009808352938190208151610140810183528154600160a060020a0316808252600183015494820194909452600282015492810183905260038201546060820152600482015460808201819052600583015460a08301819052600684015460c0840152600784015460e084015260088401546101008401819052939097015460ff16151561012090920191909152929592949193509091565b600754600254604080517f23a565c5000000000000000000000000000000000000000000000000000000008152600160a060020a039283166004820152602481018790526044810186905260648101859052905160009392909216916323a565c59160848082019260209290919082900301818787803b15801561116857600080fd5b505af115801561117c573d6000803e3d6000fd5b505050506040513d602081101561119257600080fd5b5051949350505050565b600f6020526000908152604090205481565b600054600160a060020a031633146111c557600080fd5b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600754604080517f378f44780000000000000000000000000000000000000000000000000000000081526004810186905260248101859052604481018490529051600092600160a060020a03169163378f447891606480830192602092919082900301818787803b15801561116857600080fd5b600354600160a060020a031681565b600054600160a060020a0316331461128e57600080fd5b600160a060020a03811615156112a357600080fd5b6008805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60008054600160a060020a031633146112ea57600080fd5b506000908152600a602052604090205490565b600754600254600354604080517fde7864bb000000000000000000000000000000000000000000000000000000008152600160a060020a039384166004820152918316602483015251600093929092169163de7864bb9160448082019260209290919082900301818787803b15801561137557600080fd5b505af1158015611389573d6000803e3d6000fd5b505050506040513d602081101561139f57600080fd5b5051905090565b6060806000806113b4613e91565b6010546040519080825280602002602001820160405280156113e0578160200160208202803883390190505b509350600060105411156115575760009250600191505b6005546040805160e060020a6382d9bfd9028152600080516020613f1483398151915260048201529051600160a060020a03909216916382d9bfd9916024808201926020929091908290030181600087803b15801561145557600080fd5b505af1158015611469573d6000803e3d6000fd5b505050506040513d602081101561147f57600080fd5b5051821161155757506000818152600960208181526040928390208351610140810185528154600160a060020a031681526001820154928101929092526002810154938201939093526003830154606082015260048301546080820152600583015460a0820152600683015460c0820152600783015460e0820152600883015461010082015291015460ff161515610120820181905261153d578060200151848481518110151561152c57fe5b602090810290910101526001909201915b60105483141561154c57611557565b6001909101906113f7565b50919392505050565b600d60205260009081526040902054600160a060020a031681565b6000806000806000806000806000611591613e91565b600054600160a060020a031633146115a857600080fd5b5050506000978852505060096020818152604097889020885161014081018a528154600160a060020a031680825260018301549382019390935260028201549981018a9052600382015460608201819052600483015460808301819052600584015460a08401819052600685015460c08501819052600786015460e0860181905260088701546101008701819052969098015460ff161515610120909501859052959d929b5090995097509295509293509190565b60008054600160a060020a0316331461167557600080fd5b50604080517f70a0823100000000000000000000000000000000000000000000000000000000815230600482015290518291600091600160a060020a038416916370a0823191602480830192602092919082900301818787803b1580156116db57600080fd5b505af11580156116ef573d6000803e3d6000fd5b505050506040513d602081101561170557600080fd5b505111156118275760008054604080517f70a082310000000000000000000000000000000000000000000000000000000081523060048201529051600160a060020a038086169463a9059cbb949091169285926370a0823192602480840193602093929083900390910190829087803b15801561178157600080fd5b505af1158015611795573d6000803e3d6000fd5b505050506040513d60208110156117ab57600080fd5b50516040805160e060020a63ffffffff8616028152600160a060020a03909316600484015260248301919091525160448083019260209291908290030181600087803b1580156117fa57600080fd5b505af115801561180e573d6000803e3d6000fd5b505050506040513d602081101561182457600080fd5b50505b5050565b600554604080517fe1042804000000000000000000000000000000000000000000000000000000008152336004820181905260248201859052915160009384938493849384938493849390928b92600160a060020a03169163e104280491604480830192602092919082900301818987803b1580156118a957600080fd5b505af11580156118bd573d6000803e3d6000fd5b505050506040513d60208110156118d357600080fd5b505115156001146118e357600080fd5b600754600254604080517f45a3b9c1000000000000000000000000000000000000000000000000000000008152600160a060020a039283166004820152602481018e9052905191909216916345a3b9c19160448083019260809291908290030181600087803b15801561195557600080fd5b505af1158015611969573d6000803e3d6000fd5b505050506040513d608081101561197f57600080fd5b508051602082015160408084015160609094015160055482517f943426470000000000000000000000000000000000000000000000000000000081527f746f74616c546f6b656e45786368616e6765730000000000000000000000000060048201529251949e50929c50939a50929850600160a060020a031691639434264791602480830192600092919082900301818387803b158015611a1f57600080fd5b505af1158015611a33573d6000803e3d6000fd5b50506005546040805160e060020a6382d9bfd90281527f746f74616c546f6b656e45786368616e6765730000000000000000000000000060048201529051309450339350600160a060020a03909216916382d9bfd9916024808201926020929091908290030181600087803b158015611aab57600080fd5b505af1158015611abf573d6000803e3d6000fd5b505050506040513d6020811015611ad557600080fd5b5051604080516c01000000000000000000000000600160a060020a0395861681026020838101919091529490951690940260348501526048808501929092528051808503909201825260689093019283905280519092918291908401908083835b60208310611b555780518252601f199092019160209182019101611b36565b51815160209384036101000a600019018019909216911617905260408051929094018290039091206000818152600e909252929020600281015492995097505060ff16159150611ba6905057600080fd5b600554604080517f8d8a1f1e000000000000000000000000000000000000000000000000000000008152600481018b90529051600160a060020a0390921691638d8a1f1e9160248082019260009290919082900301818387803b158015611c0c57600080fd5b505af1158015611c20573d6000803e3d6000fd5b5050855473ffffffffffffffffffffffffffffffffffffffff19163317808755600180880189905560028801805460ff1916909117905560048054604080517f9803f216000000000000000000000000000000000000000000000000000000008152600160a060020a0394851693810193909352602483018c90525192169350639803f21692506044808201926020929091908290030181600087803b158015611cc957600080fd5b505af1158015611cdd573d6000803e3d6000fd5b505050506040513d6020811015611cf357600080fd5b50511515611d045760029250611d83565b8354604051600160a060020a039091169089156108fc02908a906000818181858888f193505050501515611d7e578354600160a060020a03166000908152600b6020526040812054909350611d5f908963ffffffff61292316565b8454600160a060020a03166000908152600b6020526040902055611d83565b600192505b600560009054906101000a9004600160a060020a0316600160a060020a031663327fdeb86040518163ffffffff1660e060020a028152600401600060405180830381600087803b158015611dd657600080fd5b505af1158015611dea573d6000803e3d6000fd5b505050508360000160009054906101000a9004600160a060020a0316600160a060020a03168460010154600019167f7a85f5414930606b334089b5715d0849610160cebfbcae7152c1e359cb287e238c600560009054906101000a9004600160a060020a0316600160a060020a03166382d9bfd96040518163ffffffff1660e060020a02815260040180807f746f6b656e546f57656945786368616e676552617465486f6e6f7200000000008152506020019050602060405180830381600087803b158015611eb857600080fd5b505af1158015611ecc573d6000803e3d6000fd5b505050506040513d6020811015611ee257600080fd5b50516040805192835260208301919091528181018e9052606082018d9052608082018c905260a08201889052519081900360c00190a350505050505050505050565b6000805481908190600160a060020a03163314611f4057600080fd5b6000848152600a602052604081205411611f5957600080fd5b6000848152600a602090815260408083205483526009918290529091209081015490925060ff1615611f8a57600080fd5b5060098101805460ff191660011790556002810180546000918290556006830182905560078301829055848252600a602052604090912054611fcc908261293d565b5060019392505050565b60105481565b600154600160a060020a031681565b336000908152600b60205260408120548190811061200857600080fd5b5050336000818152600b602052604080822080549083905590519092600192909184156108fc0291859190818181858888f1935050505015156120595750336000908152600b602052604081208290555b6040805183815260208101839052815133927fd4689e0f08c0a262a44fa32f4f6ddf1ed43cfe1e14fdebb1539ec6f3a831bb9c928290030190a25050565b600080600560009054906101000a9004600160a060020a0316600160a060020a03166322f3e2d46040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156120ed57600080fd5b505af1158015612101573d6000803e3d6000fd5b505050506040513d602081101561211757600080fd5b5051151560011461212757600080fd5b600660009054906101000a9004600160a060020a0316600160a060020a03166322f3e2d46040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561217a57600080fd5b505af115801561218e573d6000803e3d6000fd5b505050506040513d60208110156121a457600080fd5b505115156001146121b457600080fd5b336000908152600f6020526040812054116121ce57600080fd5b5050336000818152600f6020908152604080832080549084905560065482517f174e31c400000000000000000000000000000000000000000000000000000000815260048101969096526024860182905291519094600194600160a060020a039093169363174e31c49360448084019492938390030190829087803b15801561225657600080fd5b505af115801561226a573d6000803e3d6000fd5b505050506040513d602081101561228057600080fd5b5051151561229c5750336000908152600f602052604081208290555b33600160a060020a03167fb040751adc2b4663a203ce7f91ba3aacbbe4fa3dcacfcf73afba78bf322b48d2600660009054906101000a9004600160a060020a0316600160a060020a0316634699560c6040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561231a57600080fd5b505af115801561232e573d6000803e3d6000fd5b505050506040513d602081101561234457600080fd5b50516040805191825260208201869052818101859052519081900360600190a25050565b606481565b600554600754604080517f378f447800000000000000000000000000000000000000000000000000000000815234600482018190526024820189905260448201889052915160009485948a938a93600160a060020a0393841693634b60fc2a93169163378f447891606480830192602092919082900301818c87803b1580156123f557600080fd5b505af1158015612409573d6000803e3d6000fd5b505050506040513d602081101561241f57600080fd5b50516040805160e060020a63ffffffff851602815260048101929092526024820187905260448201869052606482018590525160848083019260209291908290030181600087803b15801561247357600080fd5b505af1158015612487573d6000803e3d6000fd5b505050506040513d602081101561249d57600080fd5b505115156001146124ad57600080fd5b6124b934338b8b612ab2565b9350861561256c576005546040805160e060020a6382d9bfd90281527f626c6f636b5365637572697479436f756e7400000000000000000000000000006004820152905161256a9233928b92600160a060020a03909216916382d9bfd9916024808201926020929091908290030181600087803b15801561253957600080fd5b505af115801561254d573d6000803e3d6000fd5b505050506040513d602081101561256357600080fd5b50516126dd565b505b6125768685612d9a565b600860009054906101000a9004600160a060020a0316600160a060020a0316639df613ea6040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156125c957600080fd5b505af11580156125dd573d6000803e3d6000fd5b505050506040513d60208110156125f357600080fd5b5060019a9950505050505050505050565b600054600160a060020a0316331461261b57600080fd5b600160a060020a038116151561263057600080fd5b60038054600160a060020a0390921673ffffffffffffffffffffffffffffffffffffffff19928316811790915560068054909216179055565b600e60205260009081526040902080546001820154600290920154600160a060020a03909116919060ff1683565b600054600160a060020a031681565b620f424081565b670de0b6b3a764000081565b600c6020526000908152604090205481565b6000828211156126d757fe5b50900390565b60006126e7613e91565b6000848152600a602052604081205411156128eb57506000838152600a602090815260408083205483526009808352928190208151610140810183528154600160a060020a031681526001820154938101939093526002810154918301919091526003810154606083015260048101546080830152600581015460a0830152600681015460c0830152600781015460e083015260088101546101008301529091015460ff161580156101208301819052612840575060c08101516005546040805160e060020a6382d9bfd90281527f636f6e747261637442616c616e6365000000000000000000000000000000000060048201529051600160a060020a03909216916382d9bfd9916024808201926020929091908290030181600087803b15801561281157600080fd5b505af1158015612825573d6000803e3d6000fd5b505050506040513d602081101561283b57600080fd5b505110155b8015612863575082612860826101000151436126cb90919063ffffffff16565b10155b1561288a576000848152600a6020526040902054612884908690600161301b565b506128e2565b60208082015160408051600080825260029482019490945280820193909352519091600160a060020a038816917fb836a3e1fd6693dfed063b0f3bb0c7ae1071decb0412e72d70480bb2b2ec49d99181900360600190a35b6001915061291b565b60405184907fe0a05d247c244a5ec656afb31d240208d32df06332108e132529fd9c537323a190600090a2600091505b509392505050565b60008282018381101561293257fe5b8091505b5092915050565b612945613e91565b5060008281526009602081815260408084208151610140810183528154600160a060020a0316808252600183015494820194909452600282015481840152600380830154606083015260048301546080830152600583015460a0830152600683015460c0830152600783015460e08301526008830154610100830152919094015460ff16151561012085015290519293909285156108fc0291869190818181858888f193505050501515612a3c57508051600160a060020a03166000908152600b6020526040902054600490612a21908463ffffffff61292316565b8251600160a060020a03166000908152600b60205260409020555b815160208084015160808086015160608088015160a0808a015160408051958652978501929092528387018b905291830152600092820183905281019190915260c081018590529151600160a060020a03909316929091600080516020613ef4833981519152919081900360e00190a350505050565b600554604080517f66ce9c72000000000000000000000000000000000000000000000000000000008152600481018790529051600092839283928392600160a060020a0316916366ce9c72916024808301928692919082900301818387803b158015612b1d57600080fd5b505af1158015612b31573d6000803e3d6000fd5b50506005546040805160e060020a6382d9bfd9028152600080516020613f1483398151915260048201529051600160a060020a0390921693506382d9bfd992506024808201926020929091908290030181600087803b158015612b9357600080fd5b505af1158015612ba7573d6000803e3d6000fd5b505050506040513d6020811015612bbd57600080fd5b5051604080516c01000000000000000000000000308102602083810191909152600160a060020a038c1690910260348301526048808301859052835180840390910181526068909201928390528151939650909282918401908083835b60208310612c395780518252601f199092019160209182019101612c1a565b51815160209384036101000a600019018019909216911617905260408051929094018290039091206000898152600992839052939093209081015492965094505060ff16159150612c8b905057600080fd5b6000828152600a60205260409020839055805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a03881617815560018101829055600281018890556004810186905560058101859055612ce98887876111f4565b6006820155612cf98887876110e5565b600782019081554360088301556010805460019081019091558254908301546004840154600285015460058601546006870154955460408051948552602085019390935283830191909152606083019590955260808201949094529251600160a060020a039092169290917f56b3f1a6cd856076d6f8adbf8170c43a0b0f532fc5696a2699a0e0cabc7041639181900360a00190a350909695505050505050565b612da2613e91565b5060008181526009602081815260408084208151610140810183528154600160a060020a039081168083526001840154838701526002840154838601526003840154606084015260048401546080840152600584015460a0840152600684015460c0840152600784015460e08401526008840154610100840152929095015460ff161515610120820152908552600d9092528320549092911615612e60578151600160a060020a039081166000908152600d60205260409020541693505b600160a060020a03841615801590612e8557508151600160a060020a03858116911614155b15611824578151600160a060020a039081166000908152600d60209081526040808320805473ffffffffffffffffffffffffffffffffffffffff1916898616179055600554815160e060020a6382d9bfd90281527f726566657272616c50657263656e74000000000000000000000000000000000060048201529151612f8295620f424095612f769593909116936382d9bfd993602480830194919391928390030190829087803b158015612f3957600080fd5b505af1158015612f4d573d6000803e3d6000fd5b505050506040513d6020811015612f6357600080fd5b505160e08601519063ffffffff61350016565b9063ffffffff61352b16565b600160a060020a0385166000908152600f6020526040902054909150612fae908263ffffffff61292316565b600160a060020a0385166000818152600f602090815260409182902093909355848301518151858152600194810185905280830194909452905190927fb836a3e1fd6693dfed063b0f3bb0c7ae1071decb0412e72d70480bb2b2ec49d9919081900360600190a350505050565b600082815260096020818152604080842060028082018054600684018054600780870180549a8801805460ff19166001179055948b9055918a9055928990555492546008850154600554875160e060020a6382d9bfd90281527f746f74616c5765695761676572656400000000000000000000000000000000006004820152975196999398949793968b968796600160a060020a0391821696631c1faa9b96831695946131ab949316926382d9bfd99260248084019391929182900301818c87803b1580156130e957600080fd5b505af11580156130fd573d6000803e3d6000fd5b505050506040513d602081101561311357600080fd5b50516005546040805160e060020a6382d9bfd9028152600080516020613f1483398151915260048201529051600160a060020a03909216916382d9bfd9916024808201926020929091908290030181600087803b15801561317357600080fd5b505af1158015613187573d6000803e3d6000fd5b505050506040513d602081101561319d57600080fd5b50519063ffffffff61292316565b6040805160e060020a63ffffffff8716028152600160a060020a039094166004850152602484019290925260448301526064828101525160848083019260209291908290030181600087803b15801561320357600080fd5b505af1158015613217573d6000803e3d6000fd5b505050506040513d602081101561322d57600080fd5b505160038701819055151561324b57613246898661293d565b613271565b85600401548660030154101561326657613246898686613542565b61327189868561375c565b60108054600019019055600554604080517f327fdeb80000000000000000000000000000000000000000000000000000000081529051600160a060020a039092169163327fdeb89160048082019260009290919082900301818387803b1580156132da57600080fd5b505af11580156132ee573d6000803e3d6000fd5b505050506132fa6112fd565b91508715156133a6576005546040805160e060020a6382d9bfd90281527f636c65617253696e676c654265744d756c7469706c696572000000000000000060048201529051600160a060020a03909216916382d9bfd9916024808201926020929091908290030181600087803b15801561337357600080fd5b505af1158015613387573d6000803e3d6000fd5b505050506040513d602081101561339d57600080fd5b50519050613445565b6005546040805160e060020a6382d9bfd90281527f636c6561724d756c7469706c65426574734d756c7469706c696572000000000060048201529051600160a060020a03909216916382d9bfd9916024808201926020929091908290030181600087803b15801561341657600080fd5b505af115801561342a573d6000803e3d6000fd5b505050506040513d602081101561344057600080fd5b505190505b61345a6064612f76848463ffffffff61350016565b600160a060020a038b166000908152600f6020526040902054909250613486908363ffffffff61292316565b600160a060020a038b166000818152600f6020908152604091829020939093556001808a0154825187815260029581019590955284830191909152905190927fb836a3e1fd6693dfed063b0f3bb0c7ae1071decb0412e72d70480bb2b2ec49d9919081900360600190a35060019998505050505050505050565b6000808315156135135760009150612936565b5082820282848281151561352357fe5b041461293257fe5b600080828481151561353957fe5b04949350505050565b61354a613e91565b5060008381526009602081815260408084208151610140810183528154600160a060020a03908116825260018301549482019490945260028201548184015260038201546060820152600480830154608083015260058084015460a0840152600684015460c0840152600784015460e08401526008840154610100840152929095015460ff161515610120820152905482517f2ef5c02e00000000000000000000000000000000000000000000000000000000815294850187905291519094939190921691632ef5c02e91602480820192869290919082900301818387803b15801561363557600080fd5b505af1158015613649573d6000803e3d6000fd5b50505050613660848461292390919063ffffffff16565b825160405191945060019250600160a060020a03169084156108fc029085906000818181858888f1935050505015156136dc57508051600160a060020a03166000908152600b60205260409020546002906136c1908463ffffffff61292316565b8251600160a060020a03166000908152600b60205260409020555b8160000151600160a060020a0316826020015160001916600080516020613ef483398151915284608001518560600151888760a00151896000896040518088815260200187815260200186815260200185815260200184815260200183815260200182815260200197505050505050505060405180910390a35050505050565b613764613e91565b5060008381526009602081815260408084208151610140810183528154600160a060020a03908116825260018301549482019490945260028201548184015260038201546060820152600480830154608083015260058084015460a0840152600684015460c0840152600784015460e08401526008840154610100840152929095015460ff161515610120820152905482517f47fb0b1800000000000000000000000000000000000000000000000000000000815294850188905260248501879052915190949391909216916347fb0b1891604480820192869290919082900301818387803b15801561385657600080fd5b505af115801561386a573d6000803e3d6000fd5b50508351604051600160a060020a0390911692506000915060019082818181858883f1935050505015156138e357508051600160a060020a03166000908152600b6020526040902054600019906138c890600163ffffffff61292316565b8251600160a060020a03166000908152600b60205260409020555b60008311156139d957600480548351604080517fc349c93e000000000000000000000000000000000000000000000000000000008152600160a060020a0392831694810194909452602484018790525191169163c349c93e9160448083019260209291908290030181600087803b15801561395d57600080fd5b505af1158015613971573d6000803e3d6000fd5b505050506040513d602081101561398757600080fd5b505115156139d957508051600160a060020a03166000908152600c6020526040902054600119906139be908463ffffffff61292316565b8251600160a060020a03166000908152600c60205260409020555b8160000151600160a060020a0316826020015160001916600080516020613ef483398151915284608001518560600151888760a0015160018a896040518088815260200187815260200186815260200185815260200184815260200183815260200182815260200197505050505050505060405180910390a3613a5c8585613a64565b505050505050565b600080613a6f613e91565b6005546040805160e060020a6382d9bfd90281527f636f6e747261637442616c616e6365000000000000000000000000000000000060048201529051600092600160a060020a0316916382d9bfd991602480830192602092919082900301818787803b158015613ade57600080fd5b505af1158015613af2573d6000803e3d6000fd5b505050506040513d6020811015613b0857600080fd5b50516005546040805160e060020a6382d9bfd90281527f6d696e42616e6b726f6c6c00000000000000000000000000000000000000000060048201529051929550600160a060020a03909116916382d9bfd9916024808201926020929091908290030181600087803b158015613b7d57600080fd5b505af1158015613b91573d6000803e3d6000fd5b505050506040513d6020811015613ba757600080fd5b50518310613e835760008681526009602081815260408084208151610140810183528154600160a060020a0390811682526001830154828601526002808401548386015260038085015460608501526004808601546080860152600586015460a0860152600686015460c086015260078087015460e08701526008870154610100870152959098015460ff16151561012085015293549054935485517ff1129768000000000000000000000000000000000000000000000000000000008152948316978501979097529581166024840152604483018c90529251909750939091169363f112976893606480840194939192918390030190829087803b158015613caf57600080fd5b505af1158015613cc3573d6000803e3d6000fd5b505050506040513d6020811015613cd957600080fd5b50519050600081118015613ced5750808310155b15613e8357600554604080517fe20be9fd000000000000000000000000000000000000000000000000000000008152600481018490529051600160a060020a039092169163e20be9fd9160248082019260009290919082900301818387803b158015613d5857600080fd5b505af1158015613d6c573d6000803e3d6000fd5b505050508160000151600160a060020a03168260200151600019167f7d87edb5f1d55fdeb650288045e17cd2957473ed0eab57f68bb5f752694af381836040518082815260200191505060405180910390a36003546005546040805160e060020a6382d9bfd90281527f676173466f724c6f74746572790000000000000000000000000000000000000060048201529051600160a060020a0393841693909216916382d9bfd9916024808201926020929091908290030181600087803b158015613e3557600080fd5b505af1158015613e49573d6000803e3d6000fd5b505050506040513d6020811015613e5f57600080fd5b505160405183906000818181858888f193505050501515613e835760009350613e88565b600193505b50505092915050565b610140604051908101604052806000600160a060020a03168152602001600080191681526020016000815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160001515815250905600d9227e659bdf4c2e74777ad3feac5d6a564cbd9272a0b8a11263e1e7c17c9388746f74616c426574730000000000000000000000000000000000000000000000a165627a7a72305820860620f36b26c0e5c6e555a5ea5f9d72b7387e05827e56bedcb52866d15baa2a0029000000000000000000000000b42f5366792ed7c08995451c1a93780b7554762b000000000000000000000000b654457bab03011531ef939cb31f76eb36e2ddf3000000000000000000000000ea1853f9162ba2b6594fc18d60c66bf4b6211e0d",
  "constructorArguments": "000000000000000000000000b42f5366792ed7c08995451c1a93780b7554762b000000000000000000000000b654457bab03011531ef939cb31f76eb36e2ddf3000000000000000000000000ea1853f9162ba2b6594fc18d60c66bf4b6211e0d"
}