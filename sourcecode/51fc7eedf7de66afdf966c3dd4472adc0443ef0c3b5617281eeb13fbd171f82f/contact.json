{
  "address": "0x0adadf6b6be1afad94d908b6bc4695dada64074c",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "DragonKing",
  "compilerVersion": "v0.4.25+commit.59dbf8f1",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2018-10-04\n*/\n\n/**\n  * Dragonking is a blockchain game in which players may purchase dragons and knights of different levels and values.\n  * Once every period of time the volcano erupts and wipes a few of them from the board. The value of the killed characters\n  * gets distributed amongst all of the survivors. The dragon king receive a bigger share than the others.\n  * In contrast to dragons, knights need to be teleported to the battlefield first with the use of teleport tokens.\n  * Additionally, they may attack a dragon once per period.\n  * Both character types can be protected from death up to three times.\n  * Take a look at dragonking.io for more detailed information.\n  * @author: Julia Altenried, Yuriy Kashnikov\n  * */\n\npragma solidity ^0.4.24;\n\n// DragonKing v2.0 2e59d4\n\n// File: zeppelin-solidity/contracts/ownership/Ownable.sol\n\n/**\n * @title Ownable\n * @dev The Ownable contract has an owner address, and provides basic authorization control\n * functions, this simplifies the implementation of \"user permissions\".\n */\ncontract Ownable {\n  address public owner;\n\n\n  event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\n\n\n  /**\n   * @dev The Ownable constructor sets the original `owner` of the contract to the sender\n   * account.\n   */\n  function Ownable() public {\n    owner = msg.sender;\n  }\n\n\n  /**\n   * @dev Throws if called by any account other than the owner.\n   */\n  modifier onlyOwner() {\n    require(msg.sender == owner);\n    _;\n  }\n\n\n  /**\n   * @dev Allows the current owner to transfer control of the contract to a newOwner.\n   * @param newOwner The address to transfer ownership to.\n   */\n  function transferOwnership(address newOwner) public onlyOwner {\n    require(newOwner != address(0));\n    OwnershipTransferred(owner, newOwner);\n    owner = newOwner;\n  }\n\n}\n\n// File: zeppelin-solidity/contracts/token/ERC20Basic.sol\n\n/**\n * @title ERC20Basic\n * @dev Simpler version of ERC20 interface\n * @dev see https://github.com/ethereum/EIPs/issues/179\n */\ncontract ERC20Basic {\n  uint256 public totalSupply;\n  function balanceOf(address who) public view returns (uint256);\n  function transfer(address to, uint256 value) public returns (bool);\n  event Transfer(address indexed from, address indexed to, uint256 value);\n}\n\n// File: zeppelin-solidity/contracts/token/ERC20.sol\n\n/**\n * @title ERC20 interface\n * @dev see https://github.com/ethereum/EIPs/issues/20\n */\ncontract ERC20 is ERC20Basic {\n  function allowance(address owner, address spender) public view returns (uint256);\n  function transferFrom(address from, address to, uint256 value) public returns (bool);\n  function approve(address spender, uint256 value) public returns (bool);\n  event Approval(address indexed owner, address indexed spender, uint256 value);\n}\n\n\n/**\n * @title Destructible\n * @dev Base contract that can be destroyed by owner. All funds in contract will be sent to the owner.\n */\ncontract Destructible is Ownable {\n\n  function Destructible() public payable { }\n\n  /**\n   * @dev Transfers the current balance to the owner and terminates the contract.\n   */\n  function destroy() onlyOwner public {\n    selfdestruct(owner);\n  }\n\n  function destroyAndSend(address _recipient) onlyOwner public {\n    selfdestruct(_recipient);\n  }\n}\n\ncontract DragonKingConfig is Ownable {\n\n\n  /** the Gift token contract **/\n  ERC20 public giftToken;\n  /** amount of gift tokens to send **/\n  uint256 public giftTokenAmount;\n  /** the cost of each character type */\n  uint128[] public costs;\n  /** the value of each character type (cost - fee), so it's not necessary to compute it each time*/\n  uint128[] public values;\n  /** the fee to be paid each time an character is bought in percent*/\n  uint8 fee;\n  /** The maximum of characters allowed in the game */\n  uint16 public maxCharacters;\n  /** the amount of time that should pass since last eruption **/\n  uint256 public eruptionThreshold;\n  /** the amount of time that should pass ince last castle loot distribution **/\n  uint256 public castleLootDistributionThreshold;\n  /** how many characters to kill in %, e.g. 20 will stand for 20%, should be < 100 **/\n  uint8 public percentageToKill;\n  /* Cooldown threshold */\n  uint256 public constant CooldownThreshold = 1 days;\n  /** fight factor, used to compute extra probability in fight **/\n  uint8 public fightFactor;\n\n  /** the price for teleportation*/\n  uint256 public teleportPrice;\n  /** the price for protection */\n  uint256 public protectionPrice;\n  /** the luck threshold */\n  uint256 public luckThreshold;\n\n  function hasEnoughTokensToPurchase(address buyer, uint8 characterType) external returns (bool canBuy);\n}\n\ncontract DragonKing is Destructible {\n\n  /**\n   * @dev Throws if called by contract not a user \n   */\n  modifier onlyUser() {\n    require(msg.sender == tx.origin, \n            \"contracts cannot execute this method\"\n           );\n    _;\n  }\n\n\n  struct Character {\n    uint8 characterType;\n    uint128 value;\n    address owner;\n    uint64 purchaseTimestamp;\n    uint8 fightCount;\n  }\n\n  DragonKingConfig public config;\n\n  /** the neverdie token contract used to purchase protection from eruptions and fights */\n  ERC20 neverdieToken;\n  /** the teleport token contract used to send knights to the game scene */\n  ERC20 teleportToken;\n  /** the luck token contract **/\n  ERC20 luckToken;\n  /** the SKL token contract **/\n  ERC20 sklToken;\n  /** the XP token contract **/\n  ERC20 xperToken;\n  \n\n  /** array holding ids of the curret characters **/\n  uint32[] public ids;\n  /** the id to be given to the next character **/\n  uint32 public nextId;\n  /** non-existant character **/\n  uint16 public constant INVALID_CHARACTER_INDEX = ~uint16(0);\n\n  /** the castle treasury **/\n  uint128 public castleTreasury;\n  /** the id of the oldest character **/\n  uint32 public oldest;\n  /** the character belonging to a given id **/\n  mapping(uint32 => Character) characters;\n  /** teleported knights **/\n  mapping(uint32 => bool) teleported;\n\n  /** constant used to signal that there is no King at the moment **/\n  uint32 constant public noKing = ~uint32(0);\n\n  /** total number of characters in the game **/\n  uint16 public numCharacters;\n  /** number of characters per type **/\n  mapping(uint8 => uint16) public numCharactersXType;\n\n  /** timestamp of the last eruption event **/\n  uint256 public lastEruptionTimestamp;\n  /** timestamp of the last castle loot distribution **/\n  uint256 public lastCastleLootDistributionTimestamp;\n\n  /** character type range constants **/\n  uint8 public constant DRAGON_MIN_TYPE = 0;\n  uint8 public constant DRAGON_MAX_TYPE = 5;\n\n  uint8 public constant KNIGHT_MIN_TYPE = 6;\n  uint8 public constant KNIGHT_MAX_TYPE = 11;\n\n  uint8 public constant BALLOON_MIN_TYPE = 12;\n  uint8 public constant BALLOON_MAX_TYPE = 14;\n\n  uint8 public constant WIZARD_MIN_TYPE = 15;\n  uint8 public constant WIZARD_MAX_TYPE = 20;\n\n  uint8 public constant ARCHER_MIN_TYPE = 21;\n  uint8 public constant ARCHER_MAX_TYPE = 26;\n\n  uint8 public constant NUMBER_OF_LEVELS = 6;\n\n  uint8 public constant INVALID_CHARACTER_TYPE = 27;\n\n    /** knight cooldown. contains the timestamp of the earliest possible moment to start a fight */\n  mapping(uint32 => uint) public cooldown;\n\n    /** tells the number of times a character is protected */\n  mapping(uint32 => uint8) public protection;\n\n  // EVENTS\n\n  /** is fired when new characters are purchased (who bought how many characters of which type?) */\n  event NewPurchase(address player, uint8 characterType, uint16 amount, uint32 startId);\n  /** is fired when a player leaves the game */\n  event NewExit(address player, uint256 totalBalance, uint32[] removedCharacters);\n  /** is fired when an eruption occurs */\n  event NewEruption(uint32[] hitCharacters, uint128 value, uint128 gasCost);\n  /** is fired when a single character is sold **/\n  event NewSell(uint32 characterId, address player, uint256 value);\n  /** is fired when a knight fights a dragon **/\n  event NewFight(uint32 winnerID, uint32 loserID, uint256 value, uint16 probability, uint16 dice);\n  /** is fired when a knight is teleported to the field **/\n  event NewTeleport(uint32 characterId);\n  /** is fired when a protection is purchased **/\n  event NewProtection(uint32 characterId, uint8 lifes);\n  /** is fired when a castle loot distribution occurs**/\n  event NewDistributionCastleLoot(uint128 castleLoot);\n\n  /* initializes the contract parameter */\n  constructor(address tptAddress, address ndcAddress, address sklAddress, address xperAddress, address luckAddress, address _configAddress) public {\n    nextId = 1;\n    teleportToken = ERC20(tptAddress);\n    neverdieToken = ERC20(ndcAddress);\n    sklToken = ERC20(sklAddress);\n    xperToken = ERC20(xperAddress);\n    luckToken = ERC20(luckAddress);\n    config = DragonKingConfig(_configAddress);\n  }\n\n  /** \n    * gifts one character\n    * @param receiver gift character owner\n    * @param characterType type of the character to create as a gift\n    */\n  function giftCharacter(address receiver, uint8 characterType) payable public onlyUser {\n    _addCharacters(receiver, characterType);\n    assert(config.giftToken().transfer(receiver, config.giftTokenAmount()));\n  }\n\n  /**\n   * buys as many characters as possible with the transfered value of the given type\n   * @param characterType the type of the character\n   */\n  function addCharacters(uint8 characterType) payable public onlyUser {\n    _addCharacters(msg.sender, characterType);\n  }\n\n  function _addCharacters(address receiver, uint8 characterType) internal {\n    uint16 amount = uint16(msg.value / config.costs(characterType));\n    require(\n      amount > 0,\n      \"insufficient amount of ether to purchase a given type of character\");\n    uint16 nchars = numCharacters;\n    require(\n      config.hasEnoughTokensToPurchase(receiver, characterType),\n      \"insufficinet amount of tokens to purchase a given type of character\"\n    );\n    if (characterType >= INVALID_CHARACTER_TYPE || msg.value < config.costs(characterType) || nchars + amount > config.maxCharacters()) revert();\n    uint32 nid = nextId;\n    //if type exists, enough ether was transferred and there are less than maxCharacters characters in the game\n    if (characterType <= DRAGON_MAX_TYPE) {\n      //dragons enter the game directly\n      if (oldest == 0 || oldest == noKing)\n        oldest = nid;\n      for (uint8 i = 0; i < amount; i++) {\n        addCharacter(nid + i, nchars + i);\n        characters[nid + i] = Character(characterType, config.values(characterType), receiver, uint64(now), 0);\n      }\n      numCharactersXType[characterType] += amount;\n      numCharacters += amount;\n    }\n    else {\n      // to enter game knights, mages, and archers should be teleported later\n      for (uint8 j = 0; j < amount; j++) {\n        characters[nid + j] = Character(characterType, config.values(characterType), receiver, uint64(now), 0);\n      }\n    }\n    nextId = nid + amount;\n    emit NewPurchase(receiver, characterType, amount, nid);\n  }\n\n\n\n  /**\n   * adds a single dragon of the given type to the ids array, which is used to iterate over all characters\n   * @param nId the id the character is about to receive\n   * @param nchars the number of characters currently in the game\n   */\n  function addCharacter(uint32 nId, uint16 nchars) internal {\n    if (nchars < ids.length)\n      ids[nchars] = nId;\n    else\n      ids.push(nId);\n  }\n\n  /**\n   * leave the game.\n   * pays out the sender's balance and removes him and his characters from the game\n   * */\n  function exit() public {\n    uint32[] memory removed = new uint32[](50);\n    uint8 count;\n    uint32 lastId;\n    uint playerBalance;\n    uint16 nchars = numCharacters;\n    for (uint16 i = 0; i < nchars; i++) {\n      if (characters[ids[i]].owner == msg.sender \n          && characters[ids[i]].purchaseTimestamp + 1 days < now\n          && (characters[ids[i]].characterType < BALLOON_MIN_TYPE || characters[ids[i]].characterType > BALLOON_MAX_TYPE)) {\n        //first delete all characters at the end of the array\n        while (nchars > 0 \n            && characters[ids[nchars - 1]].owner == msg.sender \n            && characters[ids[nchars - 1]].purchaseTimestamp + 1 days < now\n            && (characters[ids[i]].characterType < BALLOON_MIN_TYPE || characters[ids[i]].characterType > BALLOON_MAX_TYPE)) {\n          nchars--;\n          lastId = ids[nchars];\n          numCharactersXType[characters[lastId].characterType]--;\n          playerBalance += characters[lastId].value;\n          removed[count] = lastId;\n          count++;\n          if (lastId == oldest) oldest = 0;\n          delete characters[lastId];\n        }\n        //replace the players character by the last one\n        if (nchars > i + 1) {\n          playerBalance += characters[ids[i]].value;\n          removed[count] = ids[i];\n          count++;\n          nchars--;\n          replaceCharacter(i, nchars);\n        }\n      }\n    }\n    numCharacters = nchars;\n    emit NewExit(msg.sender, playerBalance, removed); //fire the event to notify the client\n    msg.sender.transfer(playerBalance);\n    if (oldest == 0)\n      findOldest();\n  }\n\n  /**\n   * Replaces the character with the given id with the last character in the array\n   * @param index the index of the character in the id array\n   * @param nchars the number of characters\n   * */\n  function replaceCharacter(uint16 index, uint16 nchars) internal {\n    uint32 characterId = ids[index];\n    numCharactersXType[characters[characterId].characterType]--;\n    if (characterId == oldest) oldest = 0;\n    delete characters[characterId];\n    ids[index] = ids[nchars];\n    delete ids[nchars];\n  }\n\n  /**\n   * The volcano eruption can be triggered by anybody but only if enough time has passed since the last eription.\n   * The volcano hits up to a certain percentage of characters, but at least one.\n   * The percantage is specified in 'percentageToKill'\n   * */\n\n  function triggerVolcanoEruption() public onlyUser {\n    require(now >= lastEruptionTimestamp + config.eruptionThreshold(),\n           \"not enough time passed since last eruption\");\n    require(numCharacters > 0,\n           \"there are no characters in the game\");\n    lastEruptionTimestamp = now;\n    uint128 pot;\n    uint128 value;\n    uint16 random;\n    uint32 nextHitId;\n    uint16 nchars = numCharacters;\n    uint32 howmany = nchars * config.percentageToKill() / 100;\n    uint128 neededGas = 80000 + 10000 * uint32(nchars);\n    if(howmany == 0) howmany = 1;//hit at least 1\n    uint32[] memory hitCharacters = new uint32[](howmany);\n    bool[] memory alreadyHit = new bool[](nextId);\n    uint16 i = 0;\n    uint16 j = 0;\n    while (i < howmany) {\n      j++;\n      random = uint16(generateRandomNumber(lastEruptionTimestamp + j) % nchars);\n      nextHitId = ids[random];\n      if (!alreadyHit[nextHitId]) {\n        alreadyHit[nextHitId] = true;\n        hitCharacters[i] = nextHitId;\n        value = hitCharacter(random, nchars, 0);\n        if (value > 0) {\n          nchars--;\n        }\n        pot += value;\n        i++;\n      }\n    }\n    uint128 gasCost = uint128(neededGas * tx.gasprice);\n    numCharacters = nchars;\n    if (pot > gasCost){\n      distribute(pot - gasCost); //distribute the pot minus the oraclize gas costs\n      emit NewEruption(hitCharacters, pot - gasCost, gasCost);\n    }\n    else\n      emit NewEruption(hitCharacters, 0, gasCost);\n  }\n\n  /**\n   * Knight can attack a dragon.\n   * Archer can attack only a balloon.\n   * Dragon can attack wizards and archers.\n   * Wizard can attack anyone, except balloon.\n   * Balloon cannot attack.\n   * The value of the loser is transfered to the winner.\n   * @param characterID the ID of the knight to perfrom the attack\n   * @param characterIndex the index of the knight in the ids-array. Just needed to save gas costs.\n   *            In case it's unknown or incorrect, the index is looked up in the array.\n   * */\n  function fight(uint32 characterID, uint16 characterIndex) public onlyUser {\n    if (characterID != ids[characterIndex])\n      characterIndex = getCharacterIndex(characterID);\n    Character storage character = characters[characterID];\n    require(cooldown[characterID] + config.CooldownThreshold() <= now,\n            \"not enough time passed since the last fight of this character\");\n    require(character.owner == msg.sender,\n            \"only owner can initiate a fight for this character\");\n\n    uint8 ctype = character.characterType;\n    require(ctype < BALLOON_MIN_TYPE || ctype > BALLOON_MAX_TYPE,\n            \"balloons cannot fight\");\n\n    uint16 adversaryIndex = getRandomAdversary(characterID, ctype);\n    assert(adversaryIndex != INVALID_CHARACTER_INDEX);\n    uint32 adversaryID = ids[adversaryIndex];\n\n    Character storage adversary = characters[adversaryID];\n    uint128 value;\n    uint16 base_probability;\n    uint16 dice = uint16(generateRandomNumber(characterID) % 100);\n    if (luckToken.balanceOf(msg.sender) >= config.luckThreshold()) {\n      base_probability = uint16(generateRandomNumber(dice) % 100);\n      if (base_probability < dice) {\n        dice = base_probability;\n      }\n      base_probability = 0;\n    }\n    uint256 characterPower = sklToken.balanceOf(character.owner) / 10**15 + xperToken.balanceOf(character.owner);\n    uint256 adversaryPower = sklToken.balanceOf(adversary.owner) / 10**15 + xperToken.balanceOf(adversary.owner);\n    \n    if (character.value == adversary.value) {\n        base_probability = 50;\n      if (characterPower > adversaryPower) {\n        base_probability += uint16(100 / config.fightFactor());\n      } else if (adversaryPower > characterPower) {\n        base_probability -= uint16(100 / config.fightFactor());\n      }\n    } else if (character.value > adversary.value) {\n      base_probability = 100;\n      if (adversaryPower > characterPower) {\n        base_probability -= uint16((100 * adversary.value) / character.value / config.fightFactor());\n      }\n    } else if (characterPower > adversaryPower) {\n        base_probability += uint16((100 * character.value) / adversary.value / config.fightFactor());\n    }\n\n    if (dice >= base_probability) {\n      // adversary won\n      if (adversary.characterType < BALLOON_MIN_TYPE || adversary.characterType > BALLOON_MAX_TYPE) {\n        value = hitCharacter(characterIndex, numCharacters, adversary.characterType);\n        if (value > 0) {\n          numCharacters--;\n        } else {\n          cooldown[characterID] = now;\n          if (characters[characterID].fightCount < 3) {\n            characters[characterID].fightCount++;\n          }\n        }\n        if (adversary.characterType >= ARCHER_MIN_TYPE && adversary.characterType <= ARCHER_MAX_TYPE) {\n          castleTreasury += value;\n        } else {\n          adversary.value += value;\n        }\n        emit NewFight(adversaryID, characterID, value, base_probability, dice);\n      } else {\n        emit NewFight(adversaryID, characterID, 0, base_probability, dice); // balloons do not hit back\n      }\n    } else {\n      // character won\n      cooldown[characterID] = now;\n      if (characters[characterID].fightCount < 3) {\n        characters[characterID].fightCount++;\n      }\n      value = hitCharacter(adversaryIndex, numCharacters, character.characterType);\n      if (value > 0) {\n        numCharacters--;\n      }\n      if (character.characterType >= ARCHER_MIN_TYPE && character.characterType <= ARCHER_MAX_TYPE) {\n        castleTreasury += value;\n      } else {\n        character.value += value;\n      }\n      if (oldest == 0) findOldest();\n      emit NewFight(characterID, adversaryID, value, base_probability, dice);\n    }\n  }\n\n  \n  /*\n  * @param characterType\n  * @param adversaryType\n  * @return whether adversaryType is a valid type of adversary for a given character\n  */\n  function isValidAdversary(uint8 characterType, uint8 adversaryType) pure returns (bool) {\n    if (characterType >= KNIGHT_MIN_TYPE && characterType <= KNIGHT_MAX_TYPE) { // knight\n      return (adversaryType <= DRAGON_MAX_TYPE);\n    } else if (characterType >= WIZARD_MIN_TYPE && characterType <= WIZARD_MAX_TYPE) { // wizard\n      return (adversaryType < BALLOON_MIN_TYPE || adversaryType > BALLOON_MAX_TYPE);\n    } else if (characterType >= DRAGON_MIN_TYPE && characterType <= DRAGON_MAX_TYPE) { // dragon\n      return (adversaryType >= WIZARD_MIN_TYPE);\n    } else if (characterType >= ARCHER_MIN_TYPE && characterType <= ARCHER_MAX_TYPE) { // archer\n      return ((adversaryType >= BALLOON_MIN_TYPE && adversaryType <= BALLOON_MAX_TYPE)\n             || (adversaryType >= KNIGHT_MIN_TYPE && adversaryType <= KNIGHT_MAX_TYPE));\n \n    }\n    return false;\n  }\n\n  /**\n   * pick a random adversary.\n   * @param nonce a nonce to make sure there's not always the same adversary chosen in a single block.\n   * @return the index of a random adversary character\n   * */\n  function getRandomAdversary(uint256 nonce, uint8 characterType) internal view returns(uint16) {\n    uint16 randomIndex = uint16(generateRandomNumber(nonce) % numCharacters);\n    // use 7, 11 or 13 as step size. scales for up to 1000 characters\n    uint16 stepSize = numCharacters % 7 == 0 ? (numCharacters % 11 == 0 ? 13 : 11) : 7;\n    uint16 i = randomIndex;\n    //if the picked character is a knight or belongs to the sender, look at the character + stepSizes ahead in the array (modulo the total number)\n    //will at some point return to the startingPoint if no character is suited\n    do {\n      if (isValidAdversary(characterType, characters[ids[i]].characterType) && characters[ids[i]].owner != msg.sender) {\n        return i;\n      }\n      i = (i + stepSize) % numCharacters;\n    } while (i != randomIndex);\n\n    return INVALID_CHARACTER_INDEX;\n  }\n\n\n  /**\n   * generate a random number.\n   * @param nonce a nonce to make sure there's not always the same number returned in a single block.\n   * @return the random number\n   * */\n  function generateRandomNumber(uint256 nonce) internal view returns(uint) {\n    return uint(keccak256(block.blockhash(block.number - 1), now, numCharacters, nonce));\n  }\n\n\t/**\n   * Hits the character of the given type at the given index.\n   * Wizards can knock off two protections. Other characters can do only one.\n   * @param index the index of the character\n   * @param nchars the number of characters\n   * @return the value gained from hitting the characters (zero is the character was protected)\n   * */\n  function hitCharacter(uint16 index, uint16 nchars, uint8 characterType) internal returns(uint128 characterValue) {\n    uint32 id = ids[index];\n    uint8 knockOffProtections = 1;\n    if (characterType >= WIZARD_MIN_TYPE && characterType <= WIZARD_MAX_TYPE) {\n      knockOffProtections = 2;\n    }\n    if (protection[id] >= knockOffProtections) {\n      protection[id] = protection[id] - knockOffProtections;\n      return 0;\n    }\n    characterValue = characters[ids[index]].value;\n    nchars--;\n    replaceCharacter(index, nchars);\n  }\n\n  /**\n   * finds the oldest character\n   * */\n  function findOldest() public {\n    uint32 newOldest = noKing;\n    for (uint16 i = 0; i < numCharacters; i++) {\n      if (ids[i] < newOldest && characters[ids[i]].characterType <= DRAGON_MAX_TYPE)\n        newOldest = ids[i];\n    }\n    oldest = newOldest;\n  }\n\n  /**\n  * distributes the given amount among the surviving characters\n  * @param totalAmount nthe amount to distribute\n  */\n  function distribute(uint128 totalAmount) internal {\n    uint128 amount;\n    if (oldest == 0)\n      findOldest();\n    if (oldest != noKing) {\n      //pay 10% to the oldest dragon\n      characters[oldest].value += totalAmount / 10;\n      amount  = totalAmount / 10 * 9;\n    } else {\n      amount  = totalAmount;\n    }\n    //distribute the rest according to their type\n    uint128 valueSum;\n    uint8 size = ARCHER_MAX_TYPE + 1;\n    uint128[] memory shares = new uint128[](size);\n    for (uint8 v = 0; v < size; v++) {\n      if ((v < BALLOON_MIN_TYPE || v > BALLOON_MAX_TYPE) && numCharactersXType[v] > 0) {\n           valueSum += config.values(v);\n      }\n    }\n    for (uint8 m = 0; m < size; m++) {\n      if ((v < BALLOON_MIN_TYPE || v > BALLOON_MAX_TYPE) && numCharactersXType[m] > 0) {\n        shares[m] = amount * config.values(m) / valueSum / numCharactersXType[m];\n      }\n    }\n    uint8 cType;\n    for (uint16 i = 0; i < numCharacters; i++) {\n      cType = characters[ids[i]].characterType;\n      if (cType < BALLOON_MIN_TYPE || cType > BALLOON_MAX_TYPE)\n        characters[ids[i]].value += shares[characters[ids[i]].characterType];\n    }\n  }\n\n  /**\n   * allows the owner to collect the accumulated fees\n   * sends the given amount to the owner's address if the amount does not exceed the\n   * fees (cannot touch the players' balances) minus 100 finney (ensure that oraclize fees can be paid)\n   * @param amount the amount to be collected\n   * */\n  function collectFees(uint128 amount) public onlyOwner {\n    uint collectedFees = getFees();\n    if (amount + 100 finney < collectedFees) {\n      owner.transfer(amount);\n    }\n  }\n\n  /**\n  * withdraw NDC and TPT tokens\n  */\n  function withdraw() public onlyOwner {\n    uint256 ndcBalance = neverdieToken.balanceOf(this);\n    assert(neverdieToken.transfer(owner, ndcBalance));\n    uint256 tptBalance = teleportToken.balanceOf(this);\n    assert(teleportToken.transfer(owner, tptBalance));\n  }\n\n  /**\n   * pays out the players.\n   * */\n  function payOut() public onlyOwner {\n    for (uint16 i = 0; i < numCharacters; i++) {\n      characters[ids[i]].owner.transfer(characters[ids[i]].value);\n      delete characters[ids[i]];\n    }\n    delete ids;\n    numCharacters = 0;\n  }\n\n  /**\n   * pays out the players and kills the game.\n   * */\n  function stop() public onlyOwner {\n    withdraw();\n    payOut();\n    destroy();\n  }\n\n  function generateLuckFactor(uint128 nonce) internal view returns(uint128) {\n    uint128 sum = 0;\n    uint128 inc = 1;\n    for (uint128 i = 49; i >= 5; i--) {\n      if (sum > nonce) {\n          return i+2;\n      }\n      sum += inc;\n      if (i != 40 && i != 8) {\n          inc += 1;\n      }\n    }\n    return 5;\n  }\n\n  /* @dev distributes castle loot among archers */\n  function distributeCastleLoot() external onlyUser {\n    require(now >= lastCastleLootDistributionTimestamp + config.castleLootDistributionThreshold(),\n            \"not enough time passed since the last castle loot distribution\");\n    lastCastleLootDistributionTimestamp = now;\n    uint128 luckFactor = generateLuckFactor(uint128(now % 1000));\n    if (luckFactor < 5) {\n      luckFactor = 5;\n    }\n    uint128 amount = castleTreasury * luckFactor / 100; \n    uint128 valueSum;\n    uint128[] memory shares = new uint128[](NUMBER_OF_LEVELS);\n    uint16 archersCount;\n    uint32[] memory archers = new uint32[](numCharacters);\n\n    uint8 cType;\n    for (uint8 i = 0; i < ids.length; i++) {\n      cType = characters[ids[i]].characterType; \n      if ((cType >= ARCHER_MIN_TYPE && cType <= ARCHER_MAX_TYPE) \n        && (characters[ids[i]].fightCount >= 3)\n        && (now - characters[ids[i]].purchaseTimestamp >= 7 days)) {\n        valueSum += config.values(cType);\n        archers[archersCount] = ids[i];\n        archersCount++;\n      }\n    }\n\n    if (valueSum > 0) {\n      for (uint8 j = 0; j < NUMBER_OF_LEVELS; j++) {\n          shares[j] = amount * config.values(ARCHER_MIN_TYPE + j) / valueSum;\n      }\n\n      for (uint16 k = 0; k < archersCount; k++) {\n        characters[archers[k]].value += shares[characters[archers[k]].characterType - ARCHER_MIN_TYPE];\n      }\n      castleTreasury -= amount;\n      emit NewDistributionCastleLoot(amount);\n    } else {\n      emit NewDistributionCastleLoot(0);\n    }\n  }\n\n  /**\n   * sell the character of the given id\n   * throws an exception in case of a knight not yet teleported to the game\n   * @param characterId the id of the character\n   * */\n  function sellCharacter(uint32 characterId) public onlyUser {\n    require(msg.sender == characters[characterId].owner,\n            \"only owners can sell their characters\");\n    require(characters[characterId].characterType < BALLOON_MIN_TYPE || characters[characterId].characterType > BALLOON_MAX_TYPE,\n            \"balloons are not sellable\");\n    require(characters[characterId].purchaseTimestamp + 1 days < now,\n            \"character can be sold only 1 day after the purchase\");\n    uint128 val = characters[characterId].value;\n    numCharacters--;\n    replaceCharacter(getCharacterIndex(characterId), numCharacters);\n    msg.sender.transfer(val);\n    if (oldest == 0)\n      findOldest();\n    emit NewSell(characterId, msg.sender, val);\n  }\n\n  /**\n   * receive approval to spend some tokens.\n   * used for teleport and protection.\n   * @param sender the sender address\n   * @param value the transferred value\n   * @param tokenContract the address of the token contract\n   * @param callData the data passed by the token contract\n   * */\n  function receiveApproval(address sender, uint256 value, address tokenContract, bytes callData) public {\n    uint32 id;\n    uint256 price;\n    if (msg.sender == address(teleportToken)) {\n      id = toUint32(callData);\n      price = config.teleportPrice();\n      if (characters[id].characterType >= BALLOON_MIN_TYPE && characters[id].characterType <= WIZARD_MAX_TYPE) {\n        price *= 2;\n      }\n      require(value >= price,\n              \"insufficinet amount of tokens to teleport this character\");\n      assert(teleportToken.transferFrom(sender, this, price));\n      teleportCharacter(id);\n    } else if (msg.sender == address(neverdieToken)) {\n      id = toUint32(callData);\n      // user can purchase extra lifes only right after character purchaes\n      // in other words, user value should be equal the initial value\n      uint8 cType = characters[id].characterType;\n      require(characters[id].value == config.values(cType),\n              \"protection could be bought only before the first fight and before the first volcano eruption\");\n\n      // calc how many lifes user can actually buy\n      // the formula is the following:\n\n      uint256 lifePrice;\n      uint8 max;\n      if(cType <= KNIGHT_MAX_TYPE ){\n        lifePrice = ((cType % NUMBER_OF_LEVELS) + 1) * config.protectionPrice();\n        max = 3;\n      } else if (cType >= BALLOON_MIN_TYPE && cType <= BALLOON_MAX_TYPE) {\n        lifePrice = (((cType+3) % NUMBER_OF_LEVELS) + 1) * config.protectionPrice() * 2;\n        max = 6;\n      } else if (cType >= WIZARD_MIN_TYPE && cType <= WIZARD_MAX_TYPE) {\n        lifePrice = (((cType+3) % NUMBER_OF_LEVELS) + 1) * config.protectionPrice() * 2;\n        max = 3;\n      } else if (cType >= ARCHER_MIN_TYPE && cType <= ARCHER_MAX_TYPE) {\n        lifePrice = (((cType+3) % NUMBER_OF_LEVELS) + 1) * config.protectionPrice();\n        max = 3;\n      }\n\n      price = 0;\n      uint8 i = protection[id];\n      for (i; i < max && value >= price + lifePrice * (i + 1); i++) {\n        price += lifePrice * (i + 1);\n      }\n      assert(neverdieToken.transferFrom(sender, this, price));\n      protectCharacter(id, i);\n    } else {\n      revert(\"Should be either from Neverdie or Teleport tokens\");\n    }\n  }\n\n  /**\n   * Knights, balloons, wizards, and archers are only entering the game completely, when they are teleported to the scene\n   * @param id the character id\n   * */\n  function teleportCharacter(uint32 id) internal {\n    // ensure we do not teleport twice\n    require(teleported[id] == false,\n           \"already teleported\");\n    teleported[id] = true;\n    Character storage character = characters[id];\n    require(character.characterType > DRAGON_MAX_TYPE,\n           \"dragons do not need to be teleported\"); //this also makes calls with non-existent ids fail\n    addCharacter(id, numCharacters);\n    numCharacters++;\n    numCharactersXType[character.characterType]++;\n    emit NewTeleport(id);\n  }\n\n  /**\n   * adds protection to a character\n   * @param id the character id\n   * @param lifes the number of protections\n   * */\n  function protectCharacter(uint32 id, uint8 lifes) internal {\n    protection[id] = lifes;\n    emit NewProtection(id, lifes);\n  }\n\n\n  /****************** GETTERS *************************/\n\n  /**\n   * returns the character of the given id\n   * @param characterId the character id\n   * @return the type, value and owner of the character\n   * */\n  function getCharacter(uint32 characterId) public view returns(uint8, uint128, address) {\n    return (characters[characterId].characterType, characters[characterId].value, characters[characterId].owner);\n  }\n\n  /**\n   * returns the index of a character of the given id\n   * @param characterId the character id\n   * @return the character id\n   * */\n  function getCharacterIndex(uint32 characterId) constant public returns(uint16) {\n    for (uint16 i = 0; i < ids.length; i++) {\n      if (ids[i] == characterId) {\n        return i;\n      }\n    }\n    revert();\n  }\n\n  /**\n   * returns 10 characters starting from a certain indey\n   * @param startIndex the index to start from\n   * @return 4 arrays containing the ids, types, values and owners of the characters\n   * */\n  function get10Characters(uint16 startIndex) constant public returns(uint32[10] characterIds, uint8[10] types, uint128[10] values, address[10] owners) {\n    uint32 endIndex = startIndex + 10 > numCharacters ? numCharacters : startIndex + 10;\n    uint8 j = 0;\n    uint32 id;\n    for (uint16 i = startIndex; i < endIndex; i++) {\n      id = ids[i];\n      characterIds[j] = id;\n      types[j] = characters[id].characterType;\n      values[j] = characters[id].value;\n      owners[j] = characters[id].owner;\n      j++;\n    }\n\n  }\n\n  /**\n   * returns the number of dragons in the game\n   * @return the number of dragons\n   * */\n  function getNumDragons() constant public returns(uint16 numDragons) {\n    for (uint8 i = DRAGON_MIN_TYPE; i <= DRAGON_MAX_TYPE; i++)\n      numDragons += numCharactersXType[i];\n  }\n\n  /**\n   * returns the number of wizards in the game\n   * @return the number of wizards\n   * */\n  function getNumWizards() constant public returns(uint16 numWizards) {\n    for (uint8 i = WIZARD_MIN_TYPE; i <= WIZARD_MAX_TYPE; i++)\n      numWizards += numCharactersXType[i];\n  }\n  /**\n   * returns the number of archers in the game\n   * @return the number of archers\n   * */\n  function getNumArchers() constant public returns(uint16 numArchers) {\n    for (uint8 i = ARCHER_MIN_TYPE; i <= ARCHER_MAX_TYPE; i++)\n      numArchers += numCharactersXType[i];\n  }\n\n  /**\n   * returns the number of knights in the game\n   * @return the number of knights\n   * */\n  function getNumKnights() constant public returns(uint16 numKnights) {\n    for (uint8 i = KNIGHT_MIN_TYPE; i <= KNIGHT_MAX_TYPE; i++)\n      numKnights += numCharactersXType[i];\n  }\n\n  /**\n   * @return the accumulated fees\n   * */\n  function getFees() constant public returns(uint) {\n    uint reserved = 0;\n    for (uint16 j = 0; j < numCharacters; j++)\n      reserved += characters[ids[j]].value;\n    return address(this).balance - reserved;\n  }\n\n  /************* SETTERS ****************/\n\n  /**\n   * sets DragonKingConfig\n   * */\n  function setConfig(address _value) public onlyOwner {\n    config = DragonKingConfig(_value);\n  }\n\n\n  /************* HELPERS ****************/\n\n  /**\n   * only works for bytes of length < 32\n   * @param b the byte input\n   * @return the uint\n   * */\n  function toUint32(bytes b) internal pure returns(uint32) {\n    bytes32 newB;\n    assembly {\n      newB: = mload(0xa0)\n    }\n    return uint32(newB);\n  }\n}",
  "bytecode": "608060405234801561001057600080fd5b5060405160c08062005bb683398101604090815281516020830151918301516060840151608085015160a0909501516000805433600160a060020a03199182161782556008805463ffffffff19166001908117909155600380548316600160a060020a0398891617905560028054831698881698909817909755600580548216958716959095179094556006805485169386169390931790925560048054841696851696909617909555835490911691909316179055615adf908190620000d790396000f3006080604052600436106102585763ffffffff60e060020a60003504166307da68f5811461025d5780630a3dfba7146102745780630fa6002e1461028e5780631d2a6dcf146102ac5780631e466eee146102d857806320e3dbd4146102ed57806326bdce711461030e57806328acb00214610339578063291ed7731461035a57806329b20bb61461038b57806330aaed53146103a65780633728bec2146103bb5780633c3c22b31461040c5780633ccfd60b1461043a5780634afe49c21461044f5780634f255b8014610464578063603709e31461048257806361b8ce8c1461055b578063726c86411461057057806372ad21c714610597578063773e1e84146105b557806379502c55146105da578063797e2aec1461060b57806383197ef014610619578063851ad4d61461062e5780638da5cb5b146106435780638f4ffcb1146106585780639271a988146106c85780639c73048b146106dd5780639ced242b146106f2578063a050d07d14610707578063a9689b4f146106c8578063ad389d5d1461071c578063ad70ae1a14610751578063b066ef3c14610766578063b0eee8db14610784578063b32dbcd814610799578063c10435cc146107ae578063c1255299146107c3578063c2052403146107d8578063d0f9bad1146107ed578063d39512b814610802578063db8d55f114610817578063dc9bb7db1461082c578063e9fad8ee14610841578063f10e2ec114610856578063f1be42f11461086b578063f2fde38b14610880578063f5074f41146108a1578063f690648d146108c2578063fac333ac146108d7578063fbe6529f146108ef575b600080fd5b34801561026957600080fd5b50610272610904565b005b610272600160a060020a036004351660ff60243516610935565b34801561029a57600080fd5b5061027263ffffffff60043516610b2e565b3480156102b857600080fd5b506102c1610e66565b6040805161ffff9092168252519081900360200190f35b3480156102e457600080fd5b50610272610e9e565b3480156102f957600080fd5b50610272600160a060020a0360043516611494565b34801561031a57600080fd5b506103236114da565b6040805160ff9092168252519081900360200190f35b34801561034557600080fd5b506102726001608060020a03600435166114df565b34801561036657600080fd5b5061036f611564565b604080516001608060020a039092168252519081900360200190f35b34801561039757600080fd5b506102c160ff6004351661157b565b3480156103b257600080fd5b50610323611591565b3480156103c757600080fd5b506103d963ffffffff60043516611596565b6040805160ff90941684526001608060020a039092166020840152600160a060020a031682820152519081900360600190f35b34801561041857600080fd5b506104216115d5565b6040805163ffffffff9092168252519081900360200190f35b34801561044657600080fd5b506102726115e8565b34801561045b57600080fd5b506102c1611818565b34801561047057600080fd5b506102c163ffffffff6004351661181e565b34801561048e57600080fd5b5061049e61ffff6004351661188a565b604051808561014080838360005b838110156104c45781810151838201526020016104ac565b5050505090500184600a60200280838360005b838110156104ef5781810151838201526020016104d7565b5050505090500183600a60200280838360005b8381101561051a578181015183820152602001610502565b5050505090500182600a60200280838360005b8381101561054557818101518382015260200161052d565b5050505090500194505050505060405180910390f35b34801561056757600080fd5b50610421611a31565b34801561057c57600080fd5b50610585611a3d565b60408051918252519081900360200190f35b3480156105a357600080fd5b5061032363ffffffff60043516611a43565b3480156105c157600080fd5b5061027263ffffffff6004351661ffff60243516611a58565b3480156105e657600080fd5b506105ef612895565b60408051600160a060020a039092168252519081900360200190f35b61027260ff600435166128a4565b34801561062557600080fd5b50610272612905565b34801561063a57600080fd5b506102c161292a565b34801561064f57600080fd5b506105ef61295d565b34801561066457600080fd5b50604080516020601f60643560048181013592830184900484028501840190955281845261027294600160a060020a0381358116956024803596604435909316953695608494920191819084018382808284375094975061296c9650505050505050565b3480156106d457600080fd5b50610323613176565b3480156106e957600080fd5b5061027261317b565b3480156106fe57600080fd5b50610323613845565b34801561071357600080fd5b506102c161384a565b34801561072857600080fd5b5061073d60ff6004358116906024351661387e565b604080519115158252519081900360200190f35b34801561075d57600080fd5b50610323613971565b34801561077257600080fd5b5061058563ffffffff60043516613976565b34801561079057600080fd5b50610323613988565b3480156107a557600080fd5b506102c161398d565b3480156107ba57600080fd5b506105856139c1565b3480156107cf57600080fd5b506103236139c7565b3480156107e457600080fd5b506102726139cc565b3480156107f957600080fd5b50610323613ba4565b34801561080e57600080fd5b50610323613ba9565b34801561082357600080fd5b50610585613bae565b34801561083857600080fd5b50610421611818565b34801561084d57600080fd5b50610272613c33565b34801561086257600080fd5b506103236142e1565b34801561087757600080fd5b506102c16142e6565b34801561088c57600080fd5b50610272600160a060020a03600435166142f0565b3480156108ad57600080fd5b50610272600160a060020a0360043516614384565b3480156108ce57600080fd5b506103236143a7565b3480156108e357600080fd5b506104216004356143ac565b3480156108fb57600080fd5b506102726143e4565b600054600160a060020a0316331461091b57600080fd5b6109236115e8565b61092b6139cc565b610933612905565b565b333214610989576040805160e560020a62461bcd02815260206004820152602480820152600080516020615a94833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b6109938282614517565b600160009054906101000a9004600160a060020a0316600160a060020a0316632091f9556040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156109e657600080fd5b505af11580156109fa573d6000803e3d6000fd5b505050506040513d6020811015610a1057600080fd5b5051600154604080517f5bdaa8e70000000000000000000000000000000000000000000000000000000081529051600160a060020a039384169363a9059cbb938793911691635bdaa8e7916004808201926020929091908290030181600087803b158015610a7d57600080fd5b505af1158015610a91573d6000803e3d6000fd5b505050506040513d6020811015610aa757600080fd5b50516040805160e060020a63ffffffff8616028152600160a060020a03909316600484015260248301919091525160448083019260209291908290030181600087803b158015610af657600080fd5b505af1158015610b0a573d6000803e3d6000fd5b505050506040513d6020811015610b2057600080fd5b50511515610b2a57fe5b5050565b6000333214610b84576040805160e560020a62461bcd02815260206004820152602480820152600080516020615a94833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b63ffffffff8216600090815260096020526040902060010154600160a060020a03163314610c22576040805160e560020a62461bcd02815260206004820152602560248201527f6f6e6c79206f776e6572732063616e2073656c6c20746865697220636861726160448201527f6374657273000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b63ffffffff8216600090815260096020526040902054600c60ff9091161080610c65575063ffffffff8216600090815260096020526040902054600e60ff909116115b1515610cbb576040805160e560020a62461bcd02815260206004820152601960248201527f62616c6c6f6f6e7320617265206e6f742073656c6c61626c6500000000000000604482015290519081900360640190fd5b63ffffffff82166000908152600960205260409020600101544260a060020a90910467ffffffffffffffff90811662015180011610610d6a576040805160e560020a62461bcd02815260206004820152603360248201527f6368617261637465722063616e20626520736f6c64206f6e6c7920312064617960448201527f2061667465722074686520707572636861736500000000000000000000000000606482015290519081900360840190fd5b5063ffffffff8116600090815260096020526040902054600b805461ffff19811661ffff9182166000190190911617905561010090046001608060020a0316610dc1610db58361181e565b600b5461ffff16614db5565b60405133906001608060020a03831680156108fc02916000818181858888f19350505050158015610df6573d6000803e3d6000fd5b5060085460a060020a900463ffffffff161515610e1557610e156143e4565b6040805163ffffffff841681523360208201526001608060020a0383168183015290517fe5cc68f68d9672681158062a835b6abc2ff3fba89f8db70f3a227d4ac35da3c39181900360600190a15050565b600060155b601a60ff821611610e9a5760ff81166000908152600c602052604090205461ffff169190910190600101610e6b565b5090565b6000808080808080606080828080333214610f00576040805160e560020a62461bcd02815260206004820152602480820152600080516020615a94833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b600160009054906101000a9004600160a060020a0316600160a060020a031663afb7e4956040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015610f5357600080fd5b505af1158015610f67573d6000803e3d6000fd5b505050506040513d6020811015610f7d57600080fd5b5051600d5401421015611000576040805160e560020a62461bcd02815260206004820152602a60248201527f6e6f7420656e6f7567682074696d65207061737365642073696e6365206c617360448201527f74206572757074696f6e00000000000000000000000000000000000000000000606482015290519081900360840190fd5b600b54600061ffff90911611611086576040805160e560020a62461bcd02815260206004820152602360248201527f746865726520617265206e6f206368617261637465727320696e20746865206760448201527f616d650000000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b42600d55600b54600154604080517f11a5a793000000000000000000000000000000000000000000000000000000008152905161ffff9093169a50606492600160a060020a03909216916311a5a793916004808201926020929091908290030181600087803b1580156110f857600080fd5b505af115801561110c573d6000803e3d6000fd5b505050506040513d602081101561112257600080fd5b505160ff16890261ffff1681151561113657fe5b0461ffff1696508761ffff1661271002620138800163ffffffff1695508663ffffffff166000141561116757600196505b8663ffffffff16604051908082528060200260200182016040528015611197578160200160208202803883390190505b506008546040805163ffffffff90921680835260208082028401019091529196509080156111cf578160200160208202803883390190505b50935060009250600091505b8663ffffffff168361ffff1610156112fb5781806001019250508761ffff1661120b8361ffff16600d5401614f6f565b81151561121457fe5b06995060078a61ffff1681548110151561122a57fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff169850838963ffffffff1681518110151561126657fe5b9060200190602002015115156112f6576001848a63ffffffff1681518110151561128c57fe5b91151560209283029091019091015284518990869061ffff86169081106112af57fe5b63ffffffff9092166020928302909101909101526112cf8a896000614fc8565b9a5060008b6001608060020a031611156112eb57600019909701965b9a8a019a6001909201915b6111db565b50600b805461ffff891661ffff199091161790556001608060020a038086163a0290818116908d1611156113e457611334818d036150f2565b7fa06ad7d0261a795ad8f33fdbef7cf65a0f9f9a825353b13358a96a750acd6b3d85828e03836040518080602001846001608060020a03166001608060020a03168152602001836001608060020a03166001608060020a03168152602001828103825285818151815260200191508051906020019060200280838360005b838110156113ca5781810151838201526020016113b2565b5050505090500194505050505060405180910390a1611486565b7fa06ad7d0261a795ad8f33fdbef7cf65a0f9f9a825353b13358a96a750acd6b3d856000836040518080602001846001608060020a03168152602001836001608060020a03166001608060020a03168152602001828103825285818151815260200191508051906020019060200280838360005b83811015611470578181015183820152602001611458565b5050505090500194505050505060405180910390a15b505050505050505050505050565b600054600160a060020a031633146114ab57600080fd5b6001805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600b81565b60008054600160a060020a031633146114f757600080fd5b6114ff613bae565b9050808267016345785d8a0000016001608060020a03161015610b2a5760008054604051600160a060020a03909116916001608060020a03851680156108fc02929091818181858888f1935050505015801561155f573d6000803e3d6000fd5b505050565b60085464010000000090046001608060020a031681565b600c6020526000908152604090205461ffff1681565b600c81565b63ffffffff166000908152600960205260409020805460019091015460ff8216926101009092046001608060020a031691600160a060020a0390911690565b60085460a060020a900463ffffffff1681565b600080548190600160a060020a0316331461160257600080fd5b6002546040805160e060020a6370a082310281523060048201529051600160a060020a03909216916370a08231916024808201926020929091908290030181600087803b15801561165257600080fd5b505af1158015611666573d6000803e3d6000fd5b505050506040513d602081101561167c57600080fd5b505160025460008054604080517fa9059cbb000000000000000000000000000000000000000000000000000000008152600160a060020a03928316600482015260248101869052905194965092169263a9059cbb926044808201936020939283900390910190829087803b1580156116f357600080fd5b505af1158015611707573d6000803e3d6000fd5b505050506040513d602081101561171d57600080fd5b5051151561172757fe5b6003546040805160e060020a6370a082310281523060048201529051600160a060020a03909216916370a08231916024808201926020929091908290030181600087803b15801561177757600080fd5b505af115801561178b573d6000803e3d6000fd5b505050506040513d60208110156117a157600080fd5b505160035460008054604080517fa9059cbb000000000000000000000000000000000000000000000000000000008152600160a060020a03928316600482015260248101869052905194955092169263a9059cbb926044808201936020939283900390910190829087803b158015610af657600080fd5b60001981565b6000805b60075461ffff82161015610258578263ffffffff1660078261ffff1681548110151561184a57fe5b6000918252602090912060088204015460079091166004026101000a900463ffffffff16141561187c57809150611884565b600101611822565b50919050565b611892615a36565b61189a615a36565b6118a2615a36565b6118aa615a36565b600b5460009081908190819061ffff908116600a8b01909116116118d15788600a016118d9565b600b5461ffff165b61ffff169350600092508890505b8363ffffffff168161ffff161015611a26576007805461ffff831690811061190b57fe5b6000918252602090912060088204015460079091166004026101000a900463ffffffff169150818860ff8516600a811061194157fe5b63ffffffff9283166020918202929092019190915290831660009081526009909152604090205460ff9081169088908516600a811061197c57fe5b60ff9283166020918202929092019190915263ffffffff841660009081526009909152604090205461010090046001608060020a03169087908516600a81106119c157fe5b6001608060020a039092166020928302919091015263ffffffff8316600090815260099091526040902060010154600160a060020a03168560ff8516600a8110611a0757fe5b600160a060020a039092166020929092020152600192830192016118e7565b505050509193509193565b60085463ffffffff1681565b600e5481565b60106020526000908152604090205460ff1681565b6000808080808080808080333214611ab7576040805160e560020a62461bcd02815260206004820152602480820152600080516020615a94833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b6007805461ffff8d16908110611ac957fe5b6000918252602090912060088204015460079091166004026101000a900463ffffffff908116908d1614611b0357611b008c61181e565b9a505b63ffffffff8c16600090815260096020908152604080832060015482517f4597dc8e0000000000000000000000000000000000000000000000000000000081529251919e504294600160a060020a0390911693634597dc8e936004808201949293918390030190829087803b158015611b7b57600080fd5b505af1158015611b8f573d6000803e3d6000fd5b505050506040513d6020811015611ba557600080fd5b505163ffffffff8e166000908152600f6020526040902054011115611c3a576040805160e560020a62461bcd02815260206004820152603d60248201527f6e6f7420656e6f7567682074696d65207061737365642073696e63652074686560448201527f206c617374206669676874206f66207468697320636861726163746572000000606482015290519081900360840190fd5b60018a0154600160a060020a03163314611cc4576040805160e560020a62461bcd02815260206004820152603260248201527f6f6e6c79206f776e65722063616e20696e69746961746520612066696768742060448201527f666f722074686973206368617261637465720000000000000000000000000000606482015290519081900360840190fd5b895460ff169850600c891080611cdd5750600e60ff8a16115b1515611d33576040805160e560020a62461bcd02815260206004820152601560248201527f62616c6c6f6f6e732063616e6e6f742066696768740000000000000000000000604482015290519081900360640190fd5b611d438c63ffffffff168a61556d565b975061ffff8089161415611d5357fe5b6007805461ffff8a16908110611d6557fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff908116808452600990925260409092209098509650606490611dac908e16614f6f565b811515611db557fe5b069250600160009054906101000a9004600160a060020a0316600160a060020a0316638f7561476040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015611e0b57600080fd5b505af1158015611e1f573d6000803e3d6000fd5b505050506040513d6020811015611e3557600080fd5b5051600480546040805160e060020a6370a08231028152339381019390935251600160a060020a03909116916370a082319160248083019260209291908290030181600087803b158015611e8857600080fd5b505af1158015611e9c573d6000803e3d6000fd5b505050506040513d6020811015611eb257600080fd5b505110611eed576064611ec88461ffff16614f6f565b811515611ed157fe5b0693508261ffff168461ffff161015611ee8578392505b600093505b60065460018b01546040805160e060020a6370a08231028152600160a060020a039283166004820152905191909216916370a082319160248083019260209291908290030181600087803b158015611f4457600080fd5b505af1158015611f58573d6000803e3d6000fd5b505050506040513d6020811015611f6e57600080fd5b505160055460018c01546040805160e060020a6370a08231028152600160a060020a039283166004820152905166038d7ea4c680009392909216916370a08231916024808201926020929091908290030181600087803b158015611fd157600080fd5b505af1158015611fe5573d6000803e3d6000fd5b505050506040513d6020811015611ffb57600080fd5b505181151561200657fe5b60065460018a01546040805160e060020a6370a08231028152600160a060020a03928316600482015290519490930494909401955092909216916370a082319160248083019260209291908290030181600087803b15801561206757600080fd5b505af115801561207b573d6000803e3d6000fd5b505050506040513d602081101561209157600080fd5b505160055460018801546040805160e060020a6370a08231028152600160a060020a039283166004820152905166038d7ea4c680009392909216916370a08231916024808201926020929091908290030181600087803b1580156120f457600080fd5b505af1158015612108573d6000803e3d6000fd5b505050506040513d602081101561211e57600080fd5b505181151561212957fe5b88548d5492909104929092019250610100918290046001608060020a039081169290910416141561229d5760329350808211156121fa57600160009054906101000a9004600160a060020a0316600160a060020a0316634ad6e6486040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156121b357600080fd5b505af11580156121c7573d6000803e3d6000fd5b505050506040513d60208110156121dd57600080fd5b505160ff1660648115156121ed57fe5b0460ff1684019350612298565b8181111561229857600160009054906101000a9004600160a060020a0316600160a060020a0316634ad6e6486040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561225557600080fd5b505af1158015612269573d6000803e3d6000fd5b505050506040513d602081101561227f57600080fd5b505160ff16606481151561228f57fe5b0460ff16840393505b612463565b85548a546001608060020a036101009283900481169290910416111561239457606493508181111561229857600160009054906101000a9004600160a060020a0316600160a060020a0316634ad6e6486040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561231c57600080fd5b505af1158015612330573d6000803e3d6000fd5b505050506040513d602081101561234657600080fd5b50518a54875460ff90921691610100918290046001608060020a039081169290910481166064021681151561237757fe5b046001608060020a031681151561238a57fe5b0484039350612463565b8082111561246357600160009054906101000a9004600160a060020a0316600160a060020a0316634ad6e6486040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156123ef57600080fd5b505af1158015612403573d6000803e3d6000fd5b505050506040513d602081101561241957600080fd5b505186548b5460ff90921691610100918290046001608060020a039081169290910481166064021681151561244a57fe5b046001608060020a031681151561245d57fe5b04840193505b61ffff808516908416106126b1578554600c60ff909116108061248c57508554600e60ff909116115b1561265257600b5486546124ab918d9161ffff9091169060ff16614fc8565b94506000856001608060020a031611156124de57600b805461ffff19811661ffff91821660001901909116179055612559565b63ffffffff8c166000908152600f602090815260408083204290556009909152902060010154600360e060020a90910460ff1610156125595763ffffffff8c1660009081526009602052604090206001908101805460ff60e060020a80830482169094011690920260e060020a60ff02199092169190911790555b8554601560ff9091161080159061257757508554601a60ff90911611155b156125ba57600880546001608060020a03640100000000808304821689019091160273ffffffffffffffffffffffffffffffff00000000199091161790556125ec565b85546001608060020a03610100808304821688019091160270ffffffffffffffffffffffffffffffff00199091161786555b6040805163ffffffff808a1682528e1660208201526001608060020a0387168183015261ffff80871660608301528516608082015290517f24758388bd6bf650dde3bbde100b1056920770025a9f1c5998b4587670d4f3859181900360a00190a16126ac565b6040805163ffffffff808a1682528e16602082015260008183015261ffff80871660608301528516608082015290517f24758388bd6bf650dde3bbde100b1056920770025a9f1c5998b4587670d4f3859181900360a00190a15b611486565b63ffffffff8c166000908152600f602090815260408083204290556009909152902060010154600360e060020a90910460ff16101561272c5763ffffffff8c1660009081526009602052604090206001908101805460ff60e060020a80830482169094011690920260e060020a60ff02199092169190911790555b600b548a54612746918a9161ffff9091169060ff16614fc8565b94506000856001608060020a0316111561277557600b805461ffff19811661ffff918216600019019091161790555b8954601560ff9091161080159061279357508954601a60ff90911611155b156127d657600880546001608060020a03640100000000808304821689019091160273ffffffffffffffffffffffffffffffff0000000019909116179055612808565b89546001608060020a03610100808304821688019091160270ffffffffffffffffffffffffffffffff0019909116178a555b60085460a060020a900463ffffffff161515612826576128266143e4565b6040805163ffffffff808f168252891660208201526001608060020a0387168183015261ffff80871660608301528516608082015290517f24758388bd6bf650dde3bbde100b1056920770025a9f1c5998b4587670d4f3859181900360a00190a1505050505050505050505050565b600154600160a060020a031681565b3332146128f8576040805160e560020a62461bcd02815260206004820152602480820152600080516020615a94833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b6129023382614517565b50565b600054600160a060020a0316331461291c57600080fd5b600054600160a060020a0316ff5b6000805b600560ff821611610e9a5760ff81166000908152600c602052604090205461ffff16919091019060010161292e565b600054600160a060020a031681565b60035460009081908190819081908190600160a060020a0316331415612ba057612995876156dd565b9550600160009054906101000a9004600160a060020a0316600160a060020a0316636121e5226040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156129ea57600080fd5b505af11580156129fe573d6000803e3d6000fd5b505050506040513d6020811015612a1457600080fd5b505163ffffffff8716600090815260096020526040902054909550600c60ff90911610801590612a5f575063ffffffff8616600090815260096020526040902054601460ff90911611155b15612a6b576002850294505b84891015612ae9576040805160e560020a62461bcd02815260206004820152603860248201527f696e737566666963696e657420616d6f756e74206f6620746f6b656e7320746f60448201527f2074656c65706f72742074686973206368617261637465720000000000000000606482015290519081900360840190fd5b600354604080517f23b872dd000000000000000000000000000000000000000000000000000000008152600160a060020a038d8116600483015230602483015260448201899052915191909216916323b872dd9160648083019260209291908290030181600087803b158015612b5e57600080fd5b505af1158015612b72573d6000803e3d6000fd5b505050506040513d6020811015612b8857600080fd5b50511515612b9257fe5b612b9b866156e4565b61316a565b600254600160a060020a03163314156130f457612bbc876156dd565b63ffffffff8116600090815260096020908152604080832054600154825160e060020a635e383d2102815260ff909216600483018190529251959b50919850600160a060020a0390911693635e383d2193602480840194938390030190829087803b158015612c2a57600080fd5b505af1158015612c3e573d6000803e3d6000fd5b505050506040513d6020811015612c5457600080fd5b505163ffffffff871660009081526009602052604090205461010090046001608060020a03908116911614612d1f576040805160e560020a62461bcd02815260206004820152605c60248201527f70726f74656374696f6e20636f756c6420626520626f75676874206f6e6c792060448201527f6265666f72652074686520666972737420666967687420616e64206265666f7260648201527f652074686520666972737420766f6c63616e6f206572757074696f6e00000000608482015290519081900360a40190fd5b600b60ff851611612dc257600160009054906101000a9004600160a060020a0316600160a060020a03166319f353bb6040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015612d7d57600080fd5b505af1158015612d91573d6000803e3d6000fd5b505050506040513d6020811015612da757600080fd5b5051600660ff86160660010160ff1602925060039150612fec565b600c60ff851610801590612dda5750600e60ff851611155b15612e7d57600160009054906101000a9004600160a060020a0316600160a060020a03166319f353bb6040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015612e3257600080fd5b505af1158015612e46573d6000803e3d6000fd5b505050506040513d6020811015612e5c57600080fd5b505160066003860160ff160660010160ff1602600202925060069150612fec565b600f60ff851610801590612e955750601460ff851611155b15612f3857600160009054906101000a9004600160a060020a0316600160a060020a03166319f353bb6040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015612eed57600080fd5b505af1158015612f01573d6000803e3d6000fd5b505050506040513d6020811015612f1757600080fd5b505160066003860160ff160660010160ff1602600202925060039150612fec565b601560ff851610801590612f505750601a60ff851611155b15612fec57600160009054906101000a9004600160a060020a0316600160a060020a03166319f353bb6040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015612fa857600080fd5b505af1158015612fbc573d6000803e3d6000fd5b505050506040513d6020811015612fd257600080fd5b505160066003860160ff160660010160ff16029250600391505b5063ffffffff851660009081526010602052604081205490945060ff165b8160ff168160ff1610801561302957508060010160ff16830285018910155b156130415760010160ff81168302949094019361300a565b600254604080517f23b872dd000000000000000000000000000000000000000000000000000000008152600160a060020a038d8116600483015230602483015260448201899052915191909216916323b872dd9160648083019260209291908290030181600087803b1580156130b657600080fd5b505af11580156130ca573d6000803e3d6000fd5b505050506040513d60208110156130e057600080fd5b505115156130ea57fe5b612b9b8682615896565b6040805160e560020a62461bcd02815260206004820152603160248201527f53686f756c64206265206569746865722066726f6d204e65766572646965206f60448201527f722054656c65706f727420746f6b656e73000000000000000000000000000000606482015290519081900360840190fd5b50505050505050505050565b600681565b6000808060608181818080803332146131db576040805160e560020a62461bcd02815260206004820152602480820152600080516020615a94833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b600160009054906101000a9004600160a060020a0316600160a060020a03166399bd59ee6040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561322e57600080fd5b505af1158015613242573d6000803e3d6000fd5b505050506040513d602081101561325857600080fd5b5051600e54014210156132db576040805160e560020a62461bcd02815260206004820152603e60248201527f6e6f7420656e6f7567682074696d65207061737365642073696e63652074686560448201527f206c61737420636173746c65206c6f6f7420646973747269627574696f6e0000606482015290519081900360840190fd5b42600e8190556132ef906103e890066158f8565b995060058a6001608060020a0316101561330857600599505b6008546064906001608060020a0364010000000090910481168c021660408051600680825260e08201909252929091049a506020820160c08038833901905050600b546040805161ffff909216808352602080820284010190915291985090801561337d578160200160208202803883390190505b509450600092505b60075460ff841610156135bc576009600060078560ff168154811015156133a857fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff169350601584108015906133f55750601a60ff851611155b8015613457575060036009600060078660ff1681548110151561341457fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190206001015460e060020a900460ff1610155b80156134c4575062093a806009600060078660ff1681548110151561347857fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190206001015460a060020a900467ffffffffffffffff16420310155b156135b1576001546040805160e060020a635e383d2102815260ff871660048201529051600160a060020a0390921691635e383d21916024808201926020929091908290030181600087803b15801561351c57600080fd5b505af1158015613530573d6000803e3d6000fd5b505050506040513d602081101561354657600080fd5b505160078054999091019860ff851690811061355e57fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff16858761ffff1681518110151561359657fe5b63ffffffff9092166020928302909101909101526001909501945b600190920191613385565b6000886001608060020a0316111561380557600091505b600660ff831610156136b1576001546040805160e060020a635e383d2102815260ff6015860116600482015290516001608060020a038b1692600160a060020a031691635e383d219160248083019260209291908290030181600087803b15801561363d57600080fd5b505af1158015613651573d6000803e3d6000fd5b505050506040513d602081101561366757600080fd5b50518a026001608060020a031681151561367d57fe5b04878360ff1681518110151561368f57fe5b6001608060020a039092166020928302909101909101526001909101906135d3565b5060005b8561ffff168161ffff16101561378f5786601560096000888561ffff168151811015156136de57fe5b602090810290910181015163ffffffff16825281019190915260400160002054825160ff918216929092031690811061371357fe5b9060200190602002015160096000878461ffff1681518110151561373357fe5b602090810290910181015163ffffffff16825281019190915260400160002080546001608060020a0361010080830482169094011690920270ffffffffffffffffffffffffffffffff00199092169190911790556001016136b5565b600880546001608060020a0364010000000080830482168d900382160273ffffffffffffffffffffffffffffffff00000000199092169190911790915560408051918b168252517f2359110bd6bbc405457edff9ea27ed0310d86730da626b57da3ba05cae1ce22d9181900360200190a161316a565b604080516000815290517f2359110bd6bbc405457edff9ea27ed0310d86730da626b57da3ba05cae1ce22d9181900360200190a150505050505050505050565b601481565b6000600f5b601460ff821611610e9a5760ff81166000908152600c602052604090205461ffff16919091019060010161384f565b6000600660ff8416108015906138985750600b60ff841611155b156138ab5750600560ff8216111561396b565b600f60ff8416108015906138c35750601460ff841611155b156138e457600c60ff831610806138dd5750600e60ff8316115b905061396b565b600060ff8416108015906138fc5750600560ff841611155b1561390f5750600f60ff8216101561396b565b601560ff8416108015906139275750601a60ff841611155b1561396757600c60ff8316108015906139445750600e60ff831611155b806138dd5750600660ff8316108015906138dd575050600b60ff8216111561396b565b5060005b92915050565b601581565b600f6020526000908152604090205481565b600f81565b600060065b600b60ff821611610e9a5760ff81166000908152600c602052604090205461ffff169190910190600101613992565b600d5481565b600581565b60008054600160a060020a031633146139e457600080fd5b5060005b600b5461ffff9081169082161015613b8a576009600060078361ffff16815481101515613a1157fe5b6000918252602080832060088304015460079283166004026101000a900463ffffffff16845283019390935260409091018120600101548254600160a060020a03909116926108fc9260099290919061ffff8716908110613a6e57fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff1663ffffffff1663ffffffff16815260200190815260200160002060000160019054906101000a90046001608060020a03166001608060020a03169081150290604051600060405180830381858888f19350505050158015613af9573d6000803e3d6000fd5b506009600060078361ffff16815481101515613b1157fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff1683528201929092526040019020805470ffffffffffffffffffffffffffffffffff19168155600190810180547cffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19169055016139e8565b613b9660076000615a56565b50600b805461ffff19169055565b601a81565b600e81565b600080805b600b5461ffff9081169082161015613c2a576009600060078361ffff16815481101515613bdc57fe5b60009182526020808320600883040154600790921660040261010090810a90920463ffffffff1684528301939093526040909101902054046001608060020a03169190910190600101613bb3565b50303103919050565b606060008060008060006032604051908082528060200260200182016040528015613c68578160200160208202803883390190505b50600b5490965061ffff169150600090505b8161ffff168161ffff1610156141f05733600160a060020a03166009600060078461ffff16815481101515613cab57fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff168352820192909252604001902060010154600160a060020a0316148015613d5b5750426009600060078461ffff16815481101515613d0a57fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190206001015460a060020a900467ffffffffffffffff908116620151800116105b8015613e0f5750600c60ff166009600060078461ffff16815481101515613d7e57fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff161080613e0f5750600e60ff166009600060078461ffff16815481101515613dd757fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff16115b156141e8575b60008261ffff16118015613e89575033600160a060020a03166009600060076001860361ffff16815481101515613e4857fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff168352820192909252604001902060010154600160a060020a0316145b8015613efc5750426009600060076001860361ffff16815481101515613eab57fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190206001015460a060020a900467ffffffffffffffff908116620151800116105b8015613fb05750600c60ff166009600060078461ffff16815481101515613f1f57fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff161080613fb05750600e60ff166009600060078461ffff16815481101515613f7857fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff16115b1561410257600780546000199093019261ffff8416908110613fce57fe5b60009182526020808320600883040154600790921660040261010090810a90920463ffffffff1680845260098083526040808620805460ff9081168852600c8652918720805461ffff19811661ffff9182166000190190911617905595839052925292548951939750919091046001608060020a0316949094019385918891881690811061405857fe5b63ffffffff9283166020918202909201015260085460019096019585821660a060020a90910490911614156140a9576008805477ffffffff0000000000000000000000000000000000000000191690555b63ffffffff84166000908152600960205260409020805470ffffffffffffffffffffffffffffffffff1916815560010180547cffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19169055613e15565b8060010161ffff168261ffff1611156141e8576009600060078361ffff1681548110151561412c57fe5b60009182526020808320600883040154600792831660040261010090810a90910463ffffffff16855290840194909452604090920190205481549290046001608060020a031694909401939061ffff831690811061418657fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff16868660ff168151811015156141bd57fe5b63ffffffff909216602092830290910190910152600190940193600019909101906141e88183614db5565b600101613c7a565b600b805461ffff191661ffff84161790556040805133808252602080830187905260609383018481528a519484019490945289517f1e6d26af567145cb0b46ea7135e21671f1e58e8d1f818dab12b0e10eb5ebb07b94929388938c93919290916080840191858201910280838360005b83811015614278578181015183820152602001614260565b5050505090500194505050505060405180910390a1604051339084156108fc029085906000818181858888f193505050501580156142ba573d6000803e3d6000fd5b5060085460a060020a900463ffffffff1615156142d9576142d96143e4565b505050505050565b600081565b600b5461ffff1681565b600054600160a060020a0316331461430757600080fd5b600160a060020a038116151561431c57600080fd5b60008054604051600160a060020a03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600054600160a060020a0316331461439b57600080fd5b80600160a060020a0316ff5b601b81565b60078054829081106143ba57fe5b9060005260206000209060089182820401919006600402915054906101000a900463ffffffff1681565b60001960005b600b5461ffff90811690821610156144df578163ffffffff1660078261ffff1681548110151561441657fe5b6000918252602090912060088204015460079091166004026101000a900463ffffffff161080156144975750600560ff166009600060078461ffff1681548110151561445e57fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff1611155b156144d7576007805461ffff83169081106144ae57fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff1691505b6001016143ea565b506008805463ffffffff90921660a060020a0277ffffffff000000000000000000000000000000000000000019909216919091179055565b6000806000806000600160009054906101000a9004600160a060020a0316600160a060020a03166349b3b29f876040518263ffffffff1660e060020a028152600401808260ff168152602001915050602060405180830381600087803b15801561458057600080fd5b505af1158015614594573d6000803e3d6000fd5b505050506040513d60208110156145aa57600080fd5b50516001608060020a0316348115156145bf57fe5b049450600061ffff86161161466a576040805160e560020a62461bcd02815260206004820152604260248201527f696e73756666696369656e7420616d6f756e74206f6620657468657220746f2060448201527f7075726368617365206120676976656e2074797065206f66206368617261637460648201527f6572000000000000000000000000000000000000000000000000000000000000608482015290519081900360a40190fd5b600b54600154604080517f49e77c8b000000000000000000000000000000000000000000000000000000008152600160a060020a038b8116600483015260ff8b166024830152915161ffff90941697509116916349e77c8b916044808201926020929091908290030181600087803b1580156146e557600080fd5b505af11580156146f9573d6000803e3d6000fd5b505050506040513d602081101561470f57600080fd5b505115156147b3576040805160e560020a62461bcd02815260206004820152604360248201527f696e737566666963696e657420616d6f756e74206f6620746f6b656e7320746f60448201527f207075726368617365206120676976656e2074797065206f662063686172616360648201527f7465720000000000000000000000000000000000000000000000000000000000608482015290519081900360a40190fd5b601b60ff87161015806148625750600154604080517f49b3b29f00000000000000000000000000000000000000000000000000000000815260ff891660048201529051600160a060020a03909216916349b3b29f916024808201926020929091908290030181600087803b15801561482a57600080fd5b505af115801561483e573d6000803e3d6000fd5b505050506040513d602081101561485457600080fd5b50516001608060020a031634105b806148f55750600160009054906101000a9004600160a060020a0316600160a060020a0316638882ddc96040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156148bb57600080fd5b505af11580156148cf573d6000803e3d6000fd5b505050506040513d60208110156148e557600080fd5b505161ffff908116858701909116115b156148ff57600080fd5b60085463ffffffff169250600560ff871611614b825760085460a060020a900463ffffffff161580614940575060085460a060020a900463ffffffff908116145b15614975576008805477ffffffff0000000000000000000000000000000000000000191660a060020a63ffffffff8616021790555b600091505b8461ffff168260ff161015614b3f5761499b60ff8316848101908601615980565b6040805160a08101825260ff8816808252600154835160e060020a635e383d21028152600481019290925292519192602080850193600160a060020a0390921692635e383d2192602480830193928290030181600087803b1580156149ff57600080fd5b505af1158015614a13573d6000803e3d6000fd5b505050506040513d6020811015614a2957600080fd5b50516001608060020a039081168252600160a060020a038a81166020808501919091524267ffffffffffffffff9081166040808701919091526000606096870181905260ff8a81168c0163ffffffff168252600985529082902088518154958a015160ff199096169083161770ffffffffffffffffffffffffffffffff0019166101009590971694909402959095178355860151600192830180549688015160809098015173ffffffffffffffffffffffffffffffffffffffff1990971691909416177bffffffffffffffff0000000000000000000000000000000000000000191660a060020a96909116959095029490941760e060020a60ff02191660e060020a93909216929092021790559091019061497a565b60ff86166000908152600c60205260409020805461ffff1980821661ffff9283168901831617909255600b80549283169282168801909116919091179055614d36565b5060005b8461ffff168160ff161015614d36576040805160a08101825260ff8816808252600154835160e060020a635e383d21028152600481019290925292519192602080850193600160a060020a0390921692635e383d2192602480830193928290030181600087803b158015614bf957600080fd5b505af1158015614c0d573d6000803e3d6000fd5b505050506040513d6020811015614c2357600080fd5b50516001608060020a039081168252600160a060020a038a81166020808501919091524267ffffffffffffffff9081166040808701919091526000606096870181905260ff8981168c0163ffffffff168252600985529082902088518154958a015160ff199096169083161770ffffffffffffffffffffffffffffffff0019166101009590971694909402959095178355860151600192830180549688015160809098015173ffffffffffffffffffffffffffffffffffffffff1990971691909416177bffffffffffffffff0000000000000000000000000000000000000000191660a060020a96909116959095029490941760e060020a60ff02191660e060020a939092169290920217905501614b86565b6008805463ffffffff191661ffff871685810163ffffffff9081169290921790925560408051600160a060020a038b16815260ff8a166020820152808201939093529085166060830152517ff7ad76543f114c7bb00ff2cd992ff749d502ed5c0c6f87901ad48f6871fceca1916080908290030190a150505050505050565b600060078361ffff16815481101515614dca57fe5b6000918252602080832060088084049091015460079093166004026101000a90920463ffffffff9081168085526009835260408086205460ff168652600c90935291909320805461ffff19811661ffff91821660001901909116179055905490925060a060020a900416811415614e5d576008805477ffffffff0000000000000000000000000000000000000000191690555b63ffffffff81166000908152600960205260409020805470ffffffffffffffffffffffffffffffffff1916815560010180547cffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191690556007805461ffff8416908110614ec357fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff1660078461ffff16815481101515614efc57fe5b90600052602060002090600891828204019190066004026101000a81548163ffffffff021916908363ffffffff16021790555060078261ffff16815481101515614f4257fe5b90600052602060002090600891828204019190066004026101000a81549063ffffffff0219169055505050565b600b546040805160001943014081524260208201527e0100000000000000000000000000000000000000000000000000000000000061ffff90931692909202828201526042820183905251908190036062019020919050565b600080600060078661ffff16815481101515614fe057fe5b6000918252602090912060088204015460079091166004026101000a900463ffffffff16915060019050600f60ff8516108015906150225750601460ff851611155b1561502b575060025b63ffffffff821660009081526010602052604090205460ff80831691161061507d5763ffffffff82166000908152601060205260408120805460ff8082168590031660ff1990911617905592506150e9565b6009600060078861ffff1681548110151561509457fe5b60009182526020808320600883040154600790921660040261010090810a90920463ffffffff16845283019390935260409091019020546000199690960195046001608060020a031692506150e98686614db5565b50509392505050565b60008060006060600080600080600860149054906101000a900463ffffffff1663ffffffff1660001415615128576151286143e4565b60085460a060020a900463ffffffff908116146151a55760085460a060020a900463ffffffff166000908152600960208190526040909120805470ffffffffffffffffffffffffffffffff00198116600a6001608060020a038e8116919091046101009384900482168101909116909202179091550297506151a9565b8897505b60408051601b8082526103808201909252909650866020820161036080388339019050509450600093505b8560ff168460ff1610156152ac57600c60ff851610806151f75750600e60ff8516115b8015615217575060ff84166000908152600c602052604081205461ffff16115b156152a1576001546040805160e060020a635e383d2102815260ff871660048201529051600160a060020a0390921691635e383d21916024808201926020929091908290030181600087803b15801561526f57600080fd5b505af1158015615283573d6000803e3d6000fd5b505050506040513d602081101561529957600080fd5b505196909601955b6001909301926151d4565b600092505b8560ff168360ff1610156153f557600c60ff851610806152d45750600e60ff8516115b80156152f4575060ff83166000908152600c602052604081205461ffff16115b156153ea5760ff83166000818152600c6020908152604080832054600154825160e060020a635e383d210281526004810196909652915161ffff909116946001608060020a038d1694600160a060020a0390931693635e383d219360248084019492938390030190829087803b15801561536d57600080fd5b505af1158015615381573d6000803e3d6000fd5b505050506040513d602081101561539757600080fd5b50518a026001608060020a03168115156153ad57fe5b046001608060020a03168115156153c057fe5b04858460ff168151811015156153d257fe5b6001608060020a039092166020928302909101909101525b6001909201916152b1565b5060005b600b5461ffff9081169082161015615562576009600060078361ffff1681548110151561542257fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff169150600c82108061546c5750600e60ff8316115b1561555a57846009600060078461ffff1681548110151561548957fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff168352820192909252604001902054815160ff9091169081106154cc57fe5b906020019060200201516009600060078461ffff168154811015156154ed57fe5b60009182526020808320600883040154600790921660040261010090810a90920463ffffffff16845283019390935260409091019020805470ffffffffffffffffffffffffffffffff00198116908390046001608060020a03908116949094019093169091029190911790555b6001016153f9565b505050505050505050565b600b5460009081908190819061ffff1661558687614f6f565b81151561558f57fe5b600b549190069350600761ffff9182160616156155ad5760076155cb565b600b805461ffff160661ffff166000146155c857600b6155cb565b600d5b60ff1691508290505b61562a856009600060078561ffff168154811015156155ef57fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff1661387e565b8015615694575033600160a060020a03166009600060078461ffff1681548110151561565257fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff168352820192909252604001902060010154600160a060020a031614155b156156a1578093506156d4565b600b5461ffff90811690828401168115156156b857fe5b06905061ffff808216908416146156ce576155d4565b60001993505b50505092915050565b5060a05190565b63ffffffff81166000908152600a602052604081205460ff1615615752576040805160e560020a62461bcd02815260206004820152601260248201527f616c72656164792074656c65706f727465640000000000000000000000000000604482015290519081900360640190fd5b5063ffffffff81166000908152600a60209081526040808320805460ff19166001179055600990915290208054600560ff9190911611615801576040805160e560020a62461bcd028152602060048201526024808201527f647261676f6e7320646f206e6f74206e65656420746f2062652074656c65706f60448201527f7274656400000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b600b5461581390839061ffff16615980565b600b805461ffff8082166001908101821661ffff1993841617909355835460ff166000908152600c6020908152604091829020805480851690960190931694909316939093179055815163ffffffff8516815291517f663f46f5a2fd740de613966ad0391fbc9d840f82898698e6d7f16ba0ed126b3b9281900390910190a15050565b63ffffffff8216600081815260106020908152604091829020805460ff191660ff861690811790915582519384529083015280517f088ba7785fd329abbf01eaa732bad30e14b205b9fc8ab9378f9f5295731135559281900390910190a15050565b600080600160315b60056001608060020a0382161061597357846001608060020a0316836001608060020a0316111561593657806002019350615978565b9181019160286001608060020a0382161480159061595e5750806001608060020a0316600814155b1561596a576001820191505b60001901615900565b600593505b505050919050565b60075461ffff821610156159da578160078261ffff168154811015156159a257fe5b90600052602060002090600891828204019190066004026101000a81548163ffffffff021916908363ffffffff160217905550610b2a565b506007805460018101825560008290527fa66cc928b5edb82af9bd49922954155ab7b0942694bea4ce44661d9a8736c68860088204018054919092166004026101000a63ffffffff818102199092169390911602919091179055565b61014060405190810160405280600a906020820280388339509192915050565b5080546000825560070160089004906000526020600020908101906129029190615a9091905b80821115610e9a5760008155600101615a7c565b905600636f6e7472616374732063616e6e6f7420657865637574652074686973206d65a165627a7a7230582024fb9ce62e67c061cddce8f77ef450819e570b90c6d1314d8a2445db919382d70029000000000000000000000000c596bd09d652827b0106292d3e378d5938df4b12000000000000000000000000a54ddc7b3cce7fc8b1e3fa0256d0db80d2c10970000000000000000000000000a7bd9d58d22d5e35ec4a08083141e0340ea2ca93000000000000000000000000d28525ad63f337c86843d720dae921228e44f0ac000000000000000000000000ca1c217a2200b60dbd52e33c7cb1758db2b30a0e0000000000000000000000002a06579f0ab0f55995884222d8766ab10e6ac4bd",
  "constructorArguments": "000000000000000000000000c596bd09d652827b0106292d3e378d5938df4b12000000000000000000000000a54ddc7b3cce7fc8b1e3fa0256d0db80d2c10970000000000000000000000000a7bd9d58d22d5e35ec4a08083141e0340ea2ca93000000000000000000000000d28525ad63f337c86843d720dae921228e44f0ac000000000000000000000000ca1c217a2200b60dbd52e33c7cb1758db2b30a0e0000000000000000000000002a06579f0ab0f55995884222d8766ab10e6ac4bd"
}