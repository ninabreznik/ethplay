{
  "address": "0x979e4a97d610b83348c5af04d836ce8b968bcc68",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "EtherPrime",
  "compilerVersion": "v0.5.4+commit.9549d8ff",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2019-03-31\n*/\n\n// Written by Jesse Busman ([emailÂ protected]) in january 2018 and june 2018 and december 2018 and january 2019 and february 2019\n// This is the back end of https://etherprime.jesbus.com/\n\npragma solidity 0.5.4;\n\n\n// ----------------------------------------------------------------------------\n// ERC Token Standard #20 Interface\n// https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md\n// ----------------------------------------------------------------------------\ninterface ERC20\n{\n    function totalSupply() external view returns (uint);\n    function balanceOf(address tokenOwner) external view returns (uint balance);\n    function allowance(address tokenOwner, address spender) external view returns (uint remaining);\n    function transfer(address to, uint tokens) external returns (bool success);\n    function approve(address spender, uint tokens) external returns (bool success);\n    function transferFrom(address from, address to, uint tokens) external returns (bool success);\n    \n    event Transfer(address indexed from, address indexed to, uint tokens);\n    event Approval(address indexed tokenOwner, address indexed spender, uint tokens);\n    \n    function name() external pure returns (string memory);\n    function symbol() external pure returns (string memory);\n    function decimals() external pure returns (uint8);\n}\n\n\ninterface ERC165\n{\n    /// @notice Query if a contract implements an interface\n    /// @param interfaceID The interface identifier, as specified in ERC-165\n    /// @dev Interface identification is specified in ERC-165. This function\n    ///  uses less than 30,000 gas.\n    /// @return `true` if the contract implements `interfaceID` and\n    ///  `interfaceID` is not 0xffffffff, `false` otherwise\n    function supportsInterface(bytes4 interfaceID) external pure returns (bool);\n}\n\n\n\n/// @title ERC-721 Non-Fungible Token Standard\n/// @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\n///  Note: the ERC-165 identifier for this interface is 0x80ac58cd\ninterface ERC721 /*is ERC165*/\n{\n    /// @dev This emits when ownership of any NFT changes by any mechanism.\n    ///  This event emits when NFTs are created (`from` == 0) and destroyed\n    ///  (`to` == 0). Exception: during contract creation, any number of NFTs\n    ///  may be created and assigned without emitting Transfer. At the time of\n    ///  any transfer, the approved address for that NFT (if any) is reset to none.\n    event Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId);\n    \n    /// @dev This emits when the approved address for an NFT is changed or\n    ///  reaffirmed. The zero address indicates there is no approved address.\n    ///  When a Transfer event emits, this also indicates that the approved\n    ///  address for that NFT (if any) is reset to none.\n    event Approval(address indexed _owner, address indexed _approved, uint256 indexed _tokenId);\n    \n    /// @dev This emits when an operator is enabled or disabled for an owner.\n    ///  The operator can manage all NFTs of the owner.\n    event ApprovalForAll(address indexed _owner, address indexed _operator, bool _approved);\n    \n    /// @notice Count all NFTs assigned to an owner\n    /// @dev NFTs assigned to the zero address are considered invalid, and this\n    ///  function throws for queries about the zero address.\n    /// @param _owner An address for whom to query the balance\n    /// @return The number of NFTs owned by `_owner`, possibly zero\n    function balanceOf(address _owner) external view returns (uint256);\n    \n    /// @notice Find the owner of an NFT\n    /// @dev NFTs assigned to zero address are considered invalid, and queries\n    ///  about them do throw.\n    /// @param _tokenId The identifier for an NFT\n    /// @return The address of the owner of the NFT\n    function ownerOf(uint256 _tokenId) external view returns (address);\n    \n    /// @notice Transfers the ownership of an NFT from one address to another address\n    /// @dev Throws unless `msg.sender` is the current owner, an authorized\n    ///  operator, or the approved address for this NFT. Throws if `_from` is\n    ///  not the current owner. Throws if `_to` is the zero address. Throws if\n    ///  `_tokenId` is not a valid NFT. When transfer is complete, this function\n    ///  checks if `_to` is a smart contract (code size > 0). If so, it calls\n    ///  `onERC721Received` on `_to` and throws if the return value is not\n    ///  `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`.\n    /// @param _from The current owner of the NFT\n    /// @param _to The new owner\n    /// @param _tokenId The NFT to transfer\n    /// @param data Additional data with no specified format, sent in call to `_to`\n    function safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes calldata data) external returns (bool);\n    \n    /// @notice Transfers the ownership of an NFT from one address to another address\n    /// @dev This works identically to the other function with an extra data parameter,\n    ///  except this function just sets data to \"\"\n    /// @param _from The current owner of the NFT\n    /// @param _to The new owner\n    /// @param _tokenId The NFT to transfer\n    function safeTransferFrom(address _from, address _to, uint256 _tokenId) external returns (bool);\n    \n    /// @notice Transfer ownership of an NFT -- THE CALLER IS RESPONSIBLE\n    ///  TO CONFIRM THAT `_to` IS CAPABLE OF RECEIVING NFTS OR ELSE\n    ///  THEY MAY BE PERMANENTLY LOST\n    /// @dev Throws unless `msg.sender` is the current owner, an authorized\n    ///  operator, or the approved address for this NFT. Throws if `_from` is\n    ///  not the current owner. Throws if `_to` is the zero address. Throws if\n    ///  `_tokenId` is not a valid NFT.\n    /// @param _from The current owner of the NFT\n    /// @param _to The new owner\n    /// @param _tokenId The NFT to transfer\n    function transferFrom(address _from, address _to, uint256 _tokenId) external returns (bool);\n    \n    /// @notice Set or reaffirm the approved address for an NFT\n    /// @dev The zero address indicates there is no approved address.\n    /// @dev Throws unless `msg.sender` is the current NFT owner, or an authorized\n    ///  operator of the current owner.\n    /// @param _approved The new approved NFT controller\n    /// @param _tokenId The NFT to approve\n    function approve(address _approved, uint256 _tokenId) external returns (bool);\n    \n    /// @notice Enable or disable approval for a third party (\"operator\") to manage\n    ///  all of `msg.sender`'s assets.\n    /// @dev Emits the ApprovalForAll event. The contract MUST allow\n    ///  multiple operators per owner.\n    /// @param _operator Address to add to the set of authorized operators.\n    /// @param _approved True if the operator is approved, false to revoke approval\n    function setApprovalForAll(address _operator, bool _approved) external returns (bool);\n    \n    /// @notice Get the approved address for a single NFT\n    /// @dev Throws if `_tokenId` is not a valid NFT\n    /// @param _tokenId The NFT to find the approved address for\n    /// @return The approved address for this NFT, or the zero address if there is none\n    function getApproved(uint256 _tokenId) external view returns (address);\n    \n    /// @notice Query if an address is an authorized operator for another address\n    /// @param _owner The address that owns the NFTs\n    /// @param _operator The address that acts on behalf of the owner\n    /// @return True if `_operator` is an approved operator for `_owner`, false otherwise\n    function isApprovedForAll(address _owner, address _operator) external view returns (bool);\n}\n\ninterface ERC721Enumerable\n{\n    function totalSupply() external view returns (uint256);\n    function tokenOfOwnerByIndex(address _owner, uint256 _index) external view returns (uint256 _tokenId);\n    function tokenByIndex(uint256 _index) external view returns (uint256);\n}\n\n\n/**\n * @title ERC-721 Non-Fungible Token Standard, optional metadata extension\n * @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\n */\ninterface ERC721Metadata\n{\n    function name() external pure returns (string memory _name);\n    function symbol() external pure returns (string memory _symbol);\n    function tokenURI(uint256 _tokenId) external view returns (string memory _uri);\n}\n\n\ninterface ERC721TokenReceiver\n{\n    /// @notice Handle the receipt of an NFT\n    /// @dev The ERC721 smart contract calls this function on the\n    /// recipient after a `transfer`. This function MAY throw to revert and reject the transfer. Return\n    /// of other than the magic value MUST result in the transaction being reverted.\n    /// @notice The contract address is always the message sender.\n    /// @param _operator The address which called `safeTransferFrom` function\n    /// @param _from The address which previously owned the token\n    /// @param _tokenId The NFT identifier which is being transferred\n    /// @param _data Additional data with no specified format\n    /// @return `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`\n    /// unless throwing\n    function onERC721Received(address _operator, address _from, uint256 _tokenId, bytes calldata _data) external returns(bytes4);\n}\n\n\n\n\ninterface ERC223\n{\n    function balanceOf(address who) external view returns (uint256);\n    \n    function name() external pure returns (string memory _name);\n    function symbol() external pure returns (string memory _symbol);\n    function decimals() external pure returns (uint8 _decimals);\n    function totalSupply() external view returns (uint256 _supply);\n    \n    function transfer(address to, uint value) external returns (bool ok);\n    function transfer(address to, uint value, bytes calldata data) external returns (bool ok);\n\n    event Transfer(address indexed from, address indexed to, uint value, bytes indexed data);\n}\n\n\n\ninterface ERC223Receiver\n{\n    function tokenFallback(address _from, uint256 _value, bytes calldata _data) external;\n}\n\n\n\ninterface ERC777TokensRecipient\n{\n    function tokensReceived(\n        address operator,\n        address from,\n        address to,\n        uint256 amount,\n        bytes calldata data,\n        bytes calldata operatorData\n    ) external;\n}\n\n\ninterface ERC777TokensSender\n{\n    function tokensToSend(\n        address operator,\n        address from,\n        address to,\n        uint256 amount,\n        bytes calldata data,\n        bytes calldata operatorData\n    ) external;\n}\n\n\n\n\ncontract EtherPrime is ERC20, ERC721, ERC721Enumerable, ERC721Metadata, ERC165, ERC223\n{\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////          State variables           ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    // Array of definite prime numbers\n    uint256[] public definitePrimes;\n    \n    // Array of probable primes\n    uint256[] public probablePrimes;\n    \n    // Allowances\n    mapping(uint256 => address) public primeToAllowedAddress;\n    \n    // Allowed operators\n    mapping(address => mapping(address => bool)) private ownerToOperators;\n    \n    // Ownership of primes\n    mapping(address => uint256[]) private ownerToPrimes;\n    \n    // Number data contains:\n    // - Index of prime in ownerToPrimes array\n    // - Index of prime in definitePrimes or probablePrimes array\n    // - NumberType\n    // - Owner of prime\n    mapping(uint256 => bytes32) private numberToNumberdata;\n    \n    // Store known non-2 divisors of non-primes\n    mapping(uint256 => uint256) private numberToNonTwoDivisor;\n    \n    // List of all participants\n    address[] public participants;\n    mapping(address => uint256) private addressToParticipantsArrayIndex;\n    \n    // Statistics\n    mapping(address => uint256) public addressToGasSpent;\n    mapping(address => uint256) public addressToEtherSpent;\n    mapping(address => uint256) public addressToProbablePrimesClaimed;\n    mapping(address => uint256) public addressToProbablePrimesDisprovenBy;\n    mapping(address => uint256) public addressToProbablePrimesDisprovenFrom;\n\n    // Prime calculator state\n    uint256 public numberBeingTested;\n    uint256 public divisorIndexBeingTested;\n    \n    // Prime trading\n    mapping(address => uint256) public addressToEtherBalance;\n    mapping(uint256 => uint256) public primeToSellOrderPrice;\n    mapping(uint256 => BuyOrder[]) private primeToBuyOrders;\n\n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////               Events               ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    // Prime generation\n    event DefinitePrimeDiscovered(uint256 indexed prime, address indexed discoverer, uint256 indexed definitePrimesArrayIndex);\n    event ProbablePrimeDiscovered(uint256 indexed prime, address indexed discoverer, uint256 indexed probablePrimesArrayIndex);\n    event ProbablePrimeDisproven(uint256 indexed prime, uint256 divisor, address indexed owner, address indexed disprover, uint256 probablePrimesArrayIndex);\n    \n    // Token\n    event Transfer(address indexed from, address indexed to, uint256 prime);\n    event Approval(address indexed owner, address indexed spender, uint256 prime);\n    event ApprovalForAll(address indexed owner, address indexed operator, bool approved);\n    \n    // Trading\n    event BuyOrderCreated(address indexed buyer, uint256 indexed prime, uint256 indexed buyOrdersArrayIndex, uint256 bid);\n    event BuyOrderDestroyed(address indexed buyer, uint256 indexed prime, uint256 indexed buyOrdersArrayIndex);\n    event SellPriceSet(address indexed seller, uint256 indexed prime, uint256 price);\n    event PrimeTraded(address indexed seller, address indexed buyer, uint256 indexed prime, uint256 buyOrdersArrayIndex, uint256 price);\n    event EtherDeposited(address indexed depositer, uint256 amount);\n    event EtherWithdrawn(address indexed withdrawer, uint256 amount);\n    \n    \n    \n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////  Internal functions that write to  ////////////\n    ////////////          state variables           ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    function _addParticipant(address _newParticipant) private\n    {\n        // Add the participant to the list, but only if they are not 0x0 and they are not already in the list.\n        if (_newParticipant != address(0x0) && addressToParticipantsArrayIndex[_newParticipant] == 0)\n        {\n            addressToParticipantsArrayIndex[_newParticipant] = participants.length;\n            participants.push(_newParticipant);\n        }\n    }\n    \n    ////////////////////////////////////\n    //////// Internal functions to change ownership of a prime\n    \n    function _removePrimeFromOwnerPrimesArray(uint256 _prime) private\n    {\n        bytes32 numberdata = numberToNumberdata[_prime];\n        uint256[] storage ownerPrimes = ownerToPrimes[numberdataToOwner(numberdata)];\n        uint256 primeIndex = numberdataToOwnerPrimesIndex(numberdata);\n        \n        // Move the last one backwards into the freed slot\n        uint256 otherPrimeBeingMoved = ownerPrimes[ownerPrimes.length-1];\n        ownerPrimes[primeIndex] = otherPrimeBeingMoved;\n        _numberdataSetOwnerPrimesIndex(otherPrimeBeingMoved, uint40(primeIndex));\n        \n        // Refund gas by setting the now unused array slot to 0\n        // Advantage: Current transaction gets a gas refund of 15000\n        // Disadvantage: Next transaction that gives a prime to this owner will cost 15000 more gas\n        ownerPrimes[ownerPrimes.length-1] = 0; // Refund some gas\n        \n        // Decrease the length of the array\n        ownerPrimes.length--;\n    }\n    \n    function _setOwner(uint256 _prime, address _newOwner) private\n    {\n        _setOwner(_prime, _newOwner, \"\", address(0x0), \"\");\n    }\n    \n    function _setOwner(uint256 _prime, address _newOwner, bytes memory _data, address _operator, bytes memory _operatorData) private\n    {\n        // getOwner does not throw, so previousOwner can be 0x0\n        address previousOwner = getOwner(_prime);\n        \n        if (_operator == address(0x0))\n        {\n            _operator = previousOwner;\n        }\n        \n        // Shortcut in case we don't need to do anything\n        if (previousOwner == _newOwner)\n        {\n            return;\n        }\n        \n        // Delete _prime from ownerToPrimes[previousOwner]\n        if (previousOwner != address(0x0))\n        {\n            _removePrimeFromOwnerPrimesArray(_prime);\n        }\n        \n        // Store the new ownerPrimes array index and the new owner in the numberdata\n        _numberdataSetOwnerAndOwnerPrimesIndex(_prime, _newOwner, uint40(ownerToPrimes[_newOwner].length));\n        \n        // Add _prime to ownerToPrimes[_newOwner]\n        ownerToPrimes[_newOwner].push(_prime);\n        \n        // Delete any existing allowance\n        if (primeToAllowedAddress[_prime] != address(0x0))\n        {\n            primeToAllowedAddress[_prime] = address(0x0);\n        }\n        \n        // Delete any existing sell order\n        if (primeToSellOrderPrice[_prime] != 0)\n        {\n            primeToSellOrderPrice[_prime] = 0;\n            emit SellPriceSet(_newOwner, _prime, 0);\n        }\n        \n        // Add the new owner to the list of EtherPrime participants\n        _addParticipant(_newOwner);\n        \n        // If the new owner is a contract, try to notify them of the received token.\n        if (isContract(_newOwner))\n        {\n            bool success;\n            bytes32 returnValue;\n            \n            // Try to call onERC721Received (as per ERC721)\n            \n            (success, returnValue) = _tryCall(_newOwner, abi.encodeWithSelector(ERC721TokenReceiver(_newOwner).onERC721Received.selector, _operator, previousOwner, _prime, _data));\n            \n            if (!success || returnValue != bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\")))\n            {\n                // If ERC721::onERC721Received failed, try to call tokenFallback (as per ERC223)\n                \n                (success, returnValue) = _tryCall(_newOwner, abi.encodeWithSelector(ERC223Receiver(_newOwner).tokenFallback.selector, previousOwner, _prime, 0x0));\n                \n                if (!success)\n                {\n                    // If ERC223::tokenFallback failed, try to call tokensReceived (as per ERC777)\n                    \n                    (success, returnValue) = _tryCall(_newOwner, abi.encodeWithSelector(ERC777TokensRecipient(_newOwner).tokensReceived.selector, _operator, previousOwner, _newOwner, _prime, _data, _operatorData));\n                    \n                    if (!success)\n                    {\n                        // If all token fallback calls failed, give up and just give them their token.\n                        return;\n                    }\n                }\n            }\n        }\n        \n        emit Transfer(previousOwner, _newOwner, _prime);\n    }\n    \n    function _createPrime(uint256 _prime, address _owner, bool _isDefinitePrime) private\n    {\n        // Create the prime\n        _numberdataSetAllPrimesIndexAndNumberType(\n            _prime,\n            uint48(_isDefinitePrime ? definitePrimes.length : probablePrimes.length),\n            _isDefinitePrime ? NumberType.DEFINITE_PRIME : NumberType.PROBABLE_PRIME\n        );\n        if (_isDefinitePrime)\n        {\n            emit DefinitePrimeDiscovered(_prime, msg.sender, definitePrimes.length);\n            definitePrimes.push(_prime);\n        }\n        else\n        {\n            emit ProbablePrimeDiscovered(_prime, msg.sender, probablePrimes.length);\n            probablePrimes.push(_prime);\n        }\n        \n        // Give it to its new owner\n        _setOwner(_prime, _owner);\n    }\n    \n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////    Bitwise stuff on numberdata     ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    enum NumberType\n    {\n        NOT_PRIME_IF_PASSED,\n        NOT_PRIME,\n        PROBABLE_PRIME,\n        DEFINITE_PRIME\n    }\n    \n    // Number data format:\n    \n    // MSB                                                                                                                                           LSB\n    // [  40 bits for owner primes array index  ] [  48 bits for all primes array index  ] [  8 bits for number type  ] [  160 bits for owner address  ]\n    //   ^                                            ^                                               ^                            ^\n    //   ^ the index in ownerToPrimes array           ^ index in definitePrimes or probablePrimes     ^ a NumberType value         ^ owner of the number\n    \n    uint256 private constant NUMBERDATA_OWNER_PRIME_INDEX_SIZE = 40;\n    uint256 private constant NUMBERDATA_OWNER_PRIME_INDEX_SHIFT = NUMBERDATA_ALL_PRIME_INDEX_SHIFT + NUMBERDATA_ALL_PRIME_INDEX_SIZE;\n    bytes32 private constant NUMBERDATA_OWNER_PRIME_INDEX_MASK = bytes32(uint256(~uint40(0)) << NUMBERDATA_OWNER_PRIME_INDEX_SHIFT);\n    \n    uint256 private constant NUMBERDATA_ALL_PRIME_INDEX_SIZE = 48;\n    uint256 private constant NUMBERDATA_ALL_PRIME_INDEX_SHIFT = NUMBERDATA_NUMBER_TYPE_SHIFT + NUMBERDATA_NUMBER_TYPE_SIZE;\n    bytes32 private constant NUMBERDATA_ALL_PRIME_INDEX_MASK = bytes32(uint256(~uint48(0)) << NUMBERDATA_ALL_PRIME_INDEX_SHIFT);\n    \n    uint256 private constant NUMBERDATA_NUMBER_TYPE_SIZE = 8;\n    uint256 private constant NUMBERDATA_NUMBER_TYPE_SHIFT = NUMBERDATA_OWNER_ADDRESS_SHIFT + NUMBERDATA_OWNER_ADDRESS_SIZE;\n    bytes32 private constant NUMBERDATA_NUMBER_TYPE_MASK = bytes32(uint256(~uint8(0)) << NUMBERDATA_NUMBER_TYPE_SHIFT);\n    \n    uint256 private constant NUMBERDATA_OWNER_ADDRESS_SIZE = 160;\n    uint256 private constant NUMBERDATA_OWNER_ADDRESS_SHIFT = 0;\n    bytes32 private constant NUMBERDATA_OWNER_ADDRESS_MASK = bytes32(uint256(~uint160(0)) << NUMBERDATA_OWNER_ADDRESS_SHIFT);\n    \n    function numberdataToOwnerPrimesIndex(bytes32 _numberdata) private pure returns (uint40)\n    {\n        return uint40(uint256(_numberdata & NUMBERDATA_OWNER_PRIME_INDEX_MASK) >> NUMBERDATA_OWNER_PRIME_INDEX_SHIFT);\n    }\n    \n    function numberdataToAllPrimesIndex(bytes32 _numberdata) private pure returns (uint48)\n    {\n        return uint48(uint256(_numberdata & NUMBERDATA_ALL_PRIME_INDEX_MASK) >> NUMBERDATA_ALL_PRIME_INDEX_SHIFT);\n    }\n    \n    function numberdataToNumberType(bytes32 _numberdata) private pure returns (NumberType)\n    {\n        return NumberType(uint256(_numberdata & NUMBERDATA_NUMBER_TYPE_MASK) >> NUMBERDATA_NUMBER_TYPE_SHIFT);\n    }\n    \n    function numberdataToOwner(bytes32 _numberdata) private pure returns (address)\n    {\n        return address(uint160(uint256(_numberdata & NUMBERDATA_OWNER_ADDRESS_MASK) >> NUMBERDATA_OWNER_ADDRESS_SHIFT));\n    }\n    \n    function ownerPrimesIndex_allPrimesIndex_numberType_owner__toNumberdata(uint40 _ownerPrimesIndex, uint48 _allPrimesIndex, NumberType _numberType, address _owner) private pure returns (bytes32)\n    {\n        return\n            bytes32(\n                (uint256(_ownerPrimesIndex) << NUMBERDATA_OWNER_PRIME_INDEX_SHIFT) |\n                (uint256(_allPrimesIndex) << NUMBERDATA_ALL_PRIME_INDEX_SHIFT) |\n                (uint256(uint8(_numberType)) << NUMBERDATA_NUMBER_TYPE_SHIFT) |\n                (uint256(uint160(_owner)) << NUMBERDATA_OWNER_ADDRESS_SHIFT)\n            );\n    }\n    \n    function _numberdataSetOwnerPrimesIndex(uint256 _number, uint40 _ownerPrimesIndex) private\n    {\n        bytes32 numberdata = numberToNumberdata[_number];\n        numberdata &= ~NUMBERDATA_OWNER_PRIME_INDEX_MASK;\n        numberdata |= bytes32(uint256(_ownerPrimesIndex)) << NUMBERDATA_OWNER_PRIME_INDEX_SHIFT;\n        numberToNumberdata[_number] = numberdata;\n    }\n    \n    function _numberdataSetAllPrimesIndex(uint256 _number, uint48 _allPrimesIndex) private\n    {\n        bytes32 numberdata = numberToNumberdata[_number];\n        numberdata &= ~NUMBERDATA_ALL_PRIME_INDEX_MASK;\n        numberdata |= bytes32(uint256(_allPrimesIndex)) << NUMBERDATA_ALL_PRIME_INDEX_SHIFT;\n        numberToNumberdata[_number] = numberdata;\n    }\n    \n    function _numberdataSetNumberType(uint256 _number, NumberType _numberType) private\n    {\n        bytes32 numberdata = numberToNumberdata[_number];\n        numberdata &= ~NUMBERDATA_NUMBER_TYPE_MASK;\n        numberdata |= bytes32(uint256(uint8(_numberType))) << NUMBERDATA_NUMBER_TYPE_SHIFT;\n        numberToNumberdata[_number] = numberdata;\n    }\n    \n    /*function _numberdataSetOwner(uint256 _number, address _owner) private\n    {\n        bytes32 numberdata = numberToNumberdata[_number];\n        numberdata &= ~NUMBERDATA_OWNER_ADDRESS_MASK;\n        numberdata |= bytes32(uint256(uint160(_owner))) << NUMBERDATA_OWNER_ADDRESS_SHIFT;\n        numberToNumberdata[_number] = numberdata;\n    }*/\n    \n    function _numberdataSetOwnerAndOwnerPrimesIndex(uint256 _number, address _owner, uint40 _ownerPrimesIndex) private\n    {\n        bytes32 numberdata = numberToNumberdata[_number];\n        \n        numberdata &= ~NUMBERDATA_OWNER_ADDRESS_MASK;\n        numberdata |= bytes32(uint256(uint160(_owner))) << NUMBERDATA_OWNER_ADDRESS_SHIFT;\n        \n        numberdata &= ~NUMBERDATA_OWNER_PRIME_INDEX_MASK;\n        numberdata |= bytes32(uint256(_ownerPrimesIndex)) << NUMBERDATA_OWNER_PRIME_INDEX_SHIFT;\n        \n        numberToNumberdata[_number] = bytes32(numberdata);\n    }\n\n    function _numberdataSetAllPrimesIndexAndNumberType(uint256 _number, uint48 _allPrimesIndex, NumberType _numberType) private\n    {\n        bytes32 numberdata = numberToNumberdata[_number];\n        \n        numberdata &= ~NUMBERDATA_ALL_PRIME_INDEX_MASK;\n        numberdata |= bytes32(uint256(_allPrimesIndex)) << NUMBERDATA_ALL_PRIME_INDEX_SHIFT;\n        \n        numberdata &= ~NUMBERDATA_NUMBER_TYPE_MASK;\n        numberdata |= bytes32(uint256(uint8(_numberType))) << NUMBERDATA_NUMBER_TYPE_SHIFT;\n        \n        numberToNumberdata[_number] = bytes32(numberdata);\n    }\n    \n\n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////       Utility functions for        ////////////\n    ////////////       ERC721 implementation        ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    function isValidNFT(uint256 _prime) private view returns (bool)\n    {\n        NumberType numberType = numberdataToNumberType(numberToNumberdata[_prime]);\n        return numberType == NumberType.PROBABLE_PRIME || numberType == NumberType.DEFINITE_PRIME;\n    }\n    \n    function isApprovedFor(address _operator, uint256 _prime) private view returns (bool)\n    {\n        address owner = getOwner(_prime);\n        \n        return\n            (owner == _operator) ||\n            (primeToAllowedAddress[_prime] == _operator) ||\n            (ownerToOperators[owner][_operator] == true);\n    }\n    \n    function isContract(address _addr) private view returns (bool)\n    {\n        uint256 addrCodesize;\n        assembly { addrCodesize := extcodesize(_addr) }\n        return addrCodesize != 0;\n    }\n    \n    function _tryCall(address _contract, bytes memory _selectorAndArguments) private returns (bool _success, bytes32 _returnData)\n    {\n        bytes32[1] memory returnDataArray;\n        uint256 dataLengthBytes = _selectorAndArguments.length;\n        \n        assembly\n        {\n            // call(gas, address, value, arg_ptr, arg_size, return_ptr, return_max_size)\n            _success := call(gas(), _contract, 0, _selectorAndArguments, dataLengthBytes, returnDataArray, 32)\n        }\n        \n        _returnData = returnDataArray[0];\n    }\n    \n    // Does not throw if prime does not exist or has no owner\n    function getOwner(uint256 _prime) public view returns (address)\n    {\n        return numberdataToOwner(numberToNumberdata[_prime]);\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////        Token implementation        ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    function name() external pure returns (string memory)\n    {\n        return \"Prime number\";\n    }\n    \n    function symbol() external pure returns (string memory)\n    {\n        return \"PRIME\";\n    }\n    \n    function decimals() external pure returns (uint8)\n    {\n        return 0;\n    }\n    \n    function tokenURI(uint256 _tokenId) external view returns (string memory _uri)\n    {\n        require(isValidNFT(_tokenId));\n        \n        _uri = \"https://etherprime.jesbus.com/#search:\";\n        \n        uint256 baseURIlen = bytes(_uri).length;\n\n        // Count the amount of digits required to represent the prime number\n        uint256 digits = 0;\n        uint256 _currentNum = _tokenId;\n        while (_currentNum != 0)\n        {\n            _currentNum /= 10;\n            digits++;\n        }\n        \n        uint256 divisor = 10 ** (digits-1);\n        _currentNum = _tokenId;\n        \n        for (uint256 i=0; i<digits; i++)\n        {\n            uint8 digit = 0x30 + uint8(_currentNum / divisor);\n            \n            assembly { mstore8(add(add(_uri, 0x20), add(baseURIlen, i)), digit) }\n            \n            _currentNum %= divisor;\n            divisor /= 10;\n        }\n        \n        assembly { mstore(_uri, add(baseURIlen, digits)) }\n    }\n    \n    function totalSupply() external view returns (uint256)\n    {\n        return definitePrimes.length + probablePrimes.length;\n    }\n    \n    function balanceOf(address _owner) external view returns (uint256)\n    {\n        // According to ERC721 we should throw on queries about the 0x0 address\n        require(_owner != address(0x0), \"balanceOf error: owner may not be 0x0\");\n        \n        return ownerToPrimes[_owner].length;\n    }\n    \n    function addressPrimeCount(address _owner) external view returns (uint256)\n    {\n        return ownerToPrimes[_owner].length;\n    }\n    \n    function allowance(address _owner, address _spender) external view returns (uint256)\n    {\n        uint256 total = 0;\n        uint256[] storage primes = ownerToPrimes[_owner];\n        uint256 primesLength = primes.length;\n        for (uint256 i=0; i<primesLength; i++)\n        {\n            uint256 prime = primes[i];\n            if (primeToAllowedAddress[prime] == _spender)\n            {\n                total += prime;\n            }\n        }\n        return total;\n    }\n    \n    // Throws if prime has no owner or does not exist\n    function ownerOf(uint256 _prime) external view returns (address)\n    {\n        address owner = getOwner(_prime);\n        require(owner != address(0x0), \"ownerOf error: owner is set to 0x0\");\n        return owner;\n    }\n    \n    function safeTransferFrom(address _from, address _to, uint256 _prime, bytes memory _data) public returns (bool)\n    {\n        require(getOwner(_prime) == _from, \"safeTransferFrom error: from address does not own that prime\");\n        require(isApprovedFor(msg.sender, _prime), \"safeTransferFrom error: you do not have approval from the owner of that prime\");\n        _setOwner(_prime, _to, _data, msg.sender, \"\");\n        return true;\n    }\n    \n    function safeTransferFrom(address _from, address _to, uint256 _prime) external returns (bool)\n    {\n        return safeTransferFrom(_from, _to, _prime, \"\");\n    }\n    \n    function transferFrom(address _from, address _to, uint256 _prime) external returns (bool)\n    {\n        return safeTransferFrom(_from, _to, _prime, \"\");\n    }\n    \n    function approve(address _to, uint256 _prime) external returns (bool)\n    {\n        require(isApprovedFor(msg.sender, _prime), \"approve error: you do not have approval from the owner of that prime\");\n        primeToAllowedAddress[_prime] = _to;\n        emit Approval(msg.sender, _to, _prime);\n        return true;\n    }\n    \n    function setApprovalForAll(address _operator, bool _allowed) external returns (bool)\n    {\n        ownerToOperators[msg.sender][_operator] = _allowed;\n        emit ApprovalForAll(msg.sender, _operator, _allowed);\n        return true;\n    }\n    \n    function getApproved(uint256 _prime) external view returns (address)\n    {\n        require(isValidNFT(_prime), \"getApproved error: prime does not exist\");\n        return primeToAllowedAddress[_prime];\n    }\n    \n    function isApprovedForAll(address _owner, address _operator) external view returns (bool)\n    {\n        return ownerToOperators[_owner][_operator];\n    }\n    \n    function takeOwnership(uint256 _prime) external returns (bool)\n    {\n        require(isApprovedFor(msg.sender, _prime), \"takeOwnership error: you do not have approval from the owner of that prime\");\n        _setOwner(_prime, msg.sender);\n        return true;\n    }\n    \n    function transfer(address _to, uint256 _prime) external returns (bool)\n    {\n        require(isApprovedFor(msg.sender, _prime), \"transfer error: you do not have approval from the owner of that prime\");\n        _setOwner(_prime, _to);\n        return true;\n    }\n    \n    function transfer(address _to, uint _prime, bytes calldata _data) external returns (bool ok)\n    {\n        require(isApprovedFor(msg.sender, _prime), \"transfer error: you do not have approval from the owner of that prime\");\n        _setOwner(_prime, _to, _data, msg.sender, \"\");\n        return true;\n    }\n    \n    function tokenOfOwnerByIndex(address _owner, uint256 _index) external view returns (uint256)\n    {\n        uint256[] storage ownerPrimes = ownerToPrimes[_owner];\n        require(_index < ownerPrimes.length, \"tokenOfOwnerByIndex: index out of bounds\");\n        return ownerPrimes[_index];\n    }\n    \n    function tokenByIndex(uint256 _index) external view returns (uint256)\n    {\n        if (_index < definitePrimes.length) return definitePrimes[_index];\n        else if (_index < definitePrimes.length + probablePrimes.length) return probablePrimes[_index - definitePrimes.length];\n        else revert(\"tokenByIndex error: index out of bounds\");\n    }\n    \n    function tokensOf(address _owner) external view returns (uint256[] memory)\n    {\n        return ownerToPrimes[_owner];\n    }\n    \n    function implementsERC721() external pure returns (bool)\n    {\n        return true;\n    }\n    \n    function supportsInterface(bytes4 _interfaceID) external pure returns (bool)\n    {\n        \n        if (_interfaceID == 0x01ffc9a7) return true; // ERC165\n        if (_interfaceID == 0x80ac58cd) return true; // ERC721\n        if (_interfaceID == 0x5b5e139f) return true; // ERC721Metadata\n        if (_interfaceID == 0x780e9d63) return true; // ERC721Enumerable\n        return false;\n    }\n    \n    \n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////           View functions           ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    // numberToDivisor returns 0 if no divisor was found\n    function numberToDivisor(uint256 _number) public view returns (uint256)\n    {\n        if (_number == 0) return 0;\n        else if ((_number & 1) == 0) return 2;\n        else return numberToNonTwoDivisor[_number];\n    }\n    \n    function isPrime(uint256 _number) public view returns (Booly)\n    {\n        NumberType numberType = numberdataToNumberType(numberToNumberdata[_number]);\n        if (numberType == NumberType.DEFINITE_PRIME) return DEFINITELY;\n        else if (numberType == NumberType.PROBABLE_PRIME) return PROBABLY;\n        else if (numberType == NumberType.NOT_PRIME_IF_PASSED)\n        {\n            if (_number < numberBeingTested)\n            {\n                return DEFINITELY_NOT;\n            }\n            else\n            {\n                return UNKNOWN;\n            }\n        }\n        else if (numberType == NumberType.NOT_PRIME) return DEFINITELY_NOT;\n        else revert();\n    }\n    \n    function getPrimeFactors(uint256 _number) external view returns (bool _success, uint256[] memory _primeFactors)\n    {\n        _primeFactors = new uint256[](0);\n        if (_number == 0) { _success = false; return (_success, _primeFactors); }\n        \n        // Track length of primeFactors array\n        uint256 amount = 0;\n        \n        \n        uint256 currentNumber = _number;\n        \n        while (true)\n        {\n            // If we've divided to 1, we're done :)\n            if (currentNumber == 1) { _success = true; return (_success, _primeFactors); }\n            \n            uint256 divisor = numberToDivisor(currentNumber);\n            \n            if (divisor == 0)\n            {\n                if (isPrime(currentNumber) == DEFINITELY)\n                {\n                    // If we couldn't find a divisor and the current number is a definite prime,\n                    // then the current prime is itself the divisor.\n                    // It will be added to primeFactors, currentNumber will go to one,\n                    // and we will exit successfully on the next iteration.\n                    divisor = currentNumber;\n                }\n                else\n                {\n                    // If we don't know a divisor and we don't know for sure that the\n                    // current number is a definite prime, exit with failure.\n                    _success = false;\n                    return (_success, _primeFactors);\n                }\n            }\n            else\n            {\n                while (isPrime(divisor) != DEFINITELY)\n                {\n                    divisor = numberToDivisor(divisor);\n                    if (divisor == 0) { _success = false; return (_success, _primeFactors); }\n                }\n            }\n            \n            currentNumber /= divisor;\n            \n            // This in effect does: primeFactors.push(primeFactor)\n            {\n                amount++;\n                assembly\n                {\n                    mstore(0x40, add(mload(0x40), 0x20)) // dirty: extend usable memory\n                    mstore(_primeFactors, amount) // dirty: set memory array size\n                }\n                _primeFactors[amount-1] = divisor;\n            }\n        }\n    }\n    \n    /*function isKnownNotPrime(uint256 _number) external view returns (bool)\n    {\n        return numberdataToNumberType(numberToNumberdata[_number]) == NumberType.NOT_PRIME;\n    }\n    \n    function isKnownDefinitePrime(uint256 _number) public view returns (bool)\n    {\n        return numberdataToNumberType(numberToNumberdata[_number]) == NumberType.DEFINITE_PRIME;\n    }\n    \n    function isKnownProbablePrime(uint256 _number) public view returns (bool)\n    {\n        return numberdataToNumberType(numberToNumberdata[_number]) == NumberType.PROBABLE_PRIME;\n    }*/\n\n    function amountOfParticipants() external view returns (uint256)\n    {\n        return participants.length;\n    }\n    \n    function amountOfPrimesOwnedByOwner(address owner) external view returns (uint256)\n    {\n        return ownerToPrimes[owner].length;\n    }\n    \n    function amountOfPrimesFound() external view returns (uint256)\n    {\n        return definitePrimes.length + probablePrimes.length;\n    }\n    \n    function amountOfDefinitePrimesFound() external view returns (uint256)\n    {\n        return definitePrimes.length;\n    }\n    \n    function amountOfProbablePrimesFound() external view returns (uint256)\n    {\n        return probablePrimes.length;\n    }\n    \n    function largestDefinitePrimeFound() public view returns (uint256)\n    {\n        return definitePrimes[definitePrimes.length-1];\n    }\n    \n    function getInsecureRandomDefinitePrime() external view returns (uint256)\n    {\n        return definitePrimes[insecureRand()%definitePrimes.length];\n    }\n    \n    function getInsecureRandomProbablePrime() external view returns (uint256)\n    {\n        return probablePrimes[insecureRand()%probablePrimes.length];\n    }\n\n\n\n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////            Constructor             ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    constructor() public\n    {\n        participants.push(address(0x0));\n        \n        // Let's start with 2.\n        _createPrime(2, msg.sender, true);\n        \n        // The next one up for prime checking will be 3.\n        numberBeingTested = 3;\n        divisorIndexBeingTested = 0;\n        \n        new EtherPrimeChat(this);\n    }\n    \n    \n\n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////     Definite prime generation      ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    // Call these function to help calculate prime numbers.\n    // The reward shall be your immortalized glory.\n    \n    uint256 private constant DEFAULT_PRIMES_TO_MEMORIZE = 0;\n    uint256 private constant DEFAULT_LOW_LEVEL_GAS = 200000;\n    \n    function () external\n    {\n        computeWithParams(definitePrimes.length/2, DEFAULT_LOW_LEVEL_GAS, msg.sender);\n    }\n    \n    function compute() external\n    {\n        computeWithParams(definitePrimes.length/2, DEFAULT_LOW_LEVEL_GAS, msg.sender);\n    }\n    \n    function computeAndGiveTo(address _recipient) external\n    {\n        computeWithParams(definitePrimes.length/2, DEFAULT_LOW_LEVEL_GAS, _recipient);\n    }\n    \n    function computeWithPrimesToMemorize(uint256 _primesToMemorize) external\n    {\n        computeWithParams(_primesToMemorize, DEFAULT_LOW_LEVEL_GAS, msg.sender);\n    }\n    \n    function computeWithPrimesToMemorizeAndLowLevelGas(uint256 _primesToMemorize, uint256 _lowLevelGas) external\n    {\n        computeWithParams(_primesToMemorize, _lowLevelGas, msg.sender);\n    }\n    \n    function computeWithParams(uint256 _primesToMemorize, uint256 _lowLevelGas, address _recipient) public\n    {\n        require(_primesToMemorize <= definitePrimes.length, \"computeWithParams error: _primesToMemorize out of bounds\");\n        \n        uint256 startGas = gasleft();\n        \n        // We need to continue where we stopped last time.\n        uint256 number = numberBeingTested;\n        uint256 divisorIndex = divisorIndexBeingTested;\n        \n        // Read this in advance so we don't have to keep SLOAD'ing it\n        uint256 totalPrimes = definitePrimes.length;\n        \n        // Load some discovered definite primes into memory\n        uint256[] memory definitePrimesCache = new uint256[](_primesToMemorize);\n        for (uint256 i=0; i<_primesToMemorize; i++)\n        {\n            definitePrimesCache[i] = definitePrimes[i];\n        }\n        \n        for (; ; number += 2)\n        {\n            // Save state and stop if remaining gas is too low\n            if (gasleft() < _lowLevelGas)\n            {\n                numberBeingTested = number;\n                divisorIndexBeingTested = divisorIndex;\n                uint256 gasSpent = startGas - gasleft();\n                addressToGasSpent[msg.sender] += gasSpent;\n                addressToEtherSpent[msg.sender] += gasSpent * tx.gasprice;\n                return;\n            }\n            \n            if (isPrime(number) != DEFINITELY_NOT)\n            {\n                uint256 sqrtNumberRoundedDown = sqrtRoundedDown(number);\n                \n                bool numberCanStillBePrime = true;\n                uint256 divisor;\n                \n                for (; divisorIndex<totalPrimes; divisorIndex++)\n                {\n                    // Save state and stop if remaining gas is too low\n                    if (gasleft() < _lowLevelGas)\n                    {\n                        numberBeingTested = number;\n                        divisorIndexBeingTested = divisorIndex;\n                        uint256 gasSpent = startGas - gasleft();\n                        addressToGasSpent[msg.sender] += gasSpent;\n                        addressToEtherSpent[msg.sender] += gasSpent * tx.gasprice;\n                        return;\n                    }\n                    \n                    if (divisorIndex < definitePrimesCache.length) divisor = definitePrimesCache[divisorIndex];\n                    else divisor = definitePrimes[divisorIndex];\n                    \n                    if (number % divisor == 0)\n                    {\n                        numberCanStillBePrime = false;\n                        break;\n                    }\n                    \n                    // We don't have to try to divide by numbers higher than the\n                    // square root of the number. Why? Well, suppose you're testing\n                    // if 29 is prime. You've already tried dividing by 2, 3, 4, 5\n                    // and found that you couldn't, so now you move on to 6.\n                    // Trying to divide it by 6 is futile, because if 29 were\n                    // divisible by 6, it would logically also be divisible by 29/6\n                    // which you should already have found at that point, because\n                    // 29/6 < 6, because 6 > sqrt(29)\n                    if (divisor > sqrtNumberRoundedDown)\n                    {\n                        break;\n                    }\n                }\n                \n                if (numberCanStillBePrime)\n                {\n                    _createPrime(number, _recipient, true);\n                    totalPrimes++;\n                }\n                else\n                {\n                    numberToNonTwoDivisor[number] = divisor;\n                }\n                \n                // Start trying to divide by 3.\n                // We skip all the even numbers so we don't have to bother dividing by 2.\n                divisorIndex = 1;\n            }\n        }\n        \n        // This point should be unreachable.\n        revert(\"computeWithParams error: This point should never be reached.\");\n    }\n    \n    // https://en.wikipedia.org/wiki/Methods_of_computing_square_roots#Babylonian_method\n    function sqrtRoundedDown(uint256 x) private pure returns (uint256 y)\n    {\n        if (x == ~uint256(0)) return 340282366920938463463374607431768211455;\n        \n        uint256 z = (x + 1) >> 1;\n        y = x;\n        while (z < y)\n        {\n            y = z;\n            z = ((x / z) + z) >> 1;\n        }\n        return y;\n    }\n    \n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////            Prime classes           ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    // Balanced primes are exactly in the middle between the two surrounding primes\n    function isBalancedPrime(uint256 _prime) external view returns (Booly result, uint256 lowerPrime, uint256 higherPrime)\n    {\n        Booly primality = isPrime(_prime);\n        if (primality == DEFINITELY_NOT)\n        {\n            return (DEFINITELY_NOT, 0, 0);\n        }\n        else if (primality == PROBABLY_NOT)\n        {\n            return (PROBABLY_NOT, 0, 0);\n        }\n        else if (primality == UNKNOWN)\n        {\n            return (UNKNOWN, 0, 0);\n        }\n        else if (primality == PROBABLY)\n        {\n            return (UNKNOWN, 0, 0);\n        }\n        else if (primality == DEFINITELY)\n        {\n            uint256 index = numberdataToAllPrimesIndex(numberToNumberdata[_prime]);\n            if (index == 0)\n            {\n                // 2 is not a balanced prime, because there is no prime before it\n                return (DEFINITELY_NOT, 0, 0);\n            }\n            else if (index == definitePrimes.length-1)\n            {\n                // We cannot determine this property for the last prime we've found\n                return (UNKNOWN, 0, 0);\n            }\n            else\n            {\n                uint256 primeBefore = definitePrimes[index-1];\n                uint256 primeAfter = definitePrimes[index+1];\n                if (_prime - primeBefore == primeAfter - _prime) return (DEFINITELY, primeBefore, primeAfter);\n                else return (DEFINITELY_NOT, primeBefore, primeAfter);\n            }\n        }\n        else\n        {\n            revert();\n        }\n    }\n    \n    // NTuple mersenne primes:\n    // n=0 => primes                                            returns []\n    // n=1 => mersenne primes of form 2^p-1                     returns [p]\n    // n=2 => double mersenne primes of form 2^(2^p-1)-1        returns [2^p-1, p]\n    // n=3 => triple mersenne primes of form 2^(2^(2^p-1)-1)-1  returns [2^(2^p-1)-1, 2^p-1, p]\n    // etc..\n    function isNTupleMersennePrime(uint256 _number, uint256 _n) external view returns (Booly _result, uint256[] memory _powers)\n    {\n        _powers = new uint256[](_n);\n        \n        // Prevent overflow on _number+1\n        if (_number+1 < _number) return (UNKNOWN, _powers);\n        \n        _result = isPrime(_number);\n        if (_result == DEFINITELY_NOT) { return (DEFINITELY_NOT, _powers); }\n        \n        uint256 currentNumber = _number;\n        \n        for (uint256 i=0; i<_n; i++)\n        {\n            Booly powerOf2ity = isPowerOf2(currentNumber+1) ? DEFINITELY : DEFINITELY_NOT;\n            if (powerOf2ity == DEFINITELY_NOT) { return (DEFINITELY_NOT, _powers); }\n            \n            _powers[i] = currentNumber = log2ofPowerOf2(currentNumber+1);\n        }\n        \n        return (_result, _powers);\n    }\n    \n    // A good prime's square is greater than the product of all equally distant (by index) primes\n    function isGoodPrime(uint256 _number) external view returns (Booly)\n    {\n        // 2 is defined not to be a good prime.\n        if (_number == 2) return DEFINITELY_NOT;\n        \n        Booly primality = isPrime(_number);\n        if (primality == DEFINITELY)\n        {\n            uint256 index = numberdataToAllPrimesIndex(numberToNumberdata[_number]);\n            \n            if (index*2 >= definitePrimes.length)\n            {\n                // We haven't found enough definite primes yet to determine this property\n                return UNKNOWN;\n            }\n            else\n            {\n                uint256 squareOfInput;\n                bool mulSuccess;\n                \n                (squareOfInput, mulSuccess) = TRY_MUL(_number, _number);\n                if (!mulSuccess) return UNKNOWN;\n                \n                for (uint256 i=1; i<=index; i++)\n                {\n                    uint256 square;\n                    (square, mulSuccess) = TRY_MUL(definitePrimes[index-i], definitePrimes[index+i]);\n                    if (!mulSuccess) return UNKNOWN;\n                    if (square >= squareOfInput)\n                    {\n                        return DEFINITELY_NOT;\n                    }\n                }\n                return DEFINITELY;\n            }\n        }\n        else if (primality == PROBABLY || primality == UNKNOWN)\n        {\n            // We can't determine it\n            return UNKNOWN;\n        }\n        else if (primality == DEFINITELY_NOT)\n        {\n            return DEFINITELY_NOT;\n        }\n        else if (primality == PROBABLY_NOT)\n        {\n            return PROBABLY_NOT;\n        }\n        else\n        {\n            // This should never happen\n            revert();\n        }\n    }\n    \n    // Factorial primes are of the form n!+delta where delta = +1 or delta = -1\n    function isFactorialPrime(uint256 _number) external view returns (Booly _result, uint256 _n, int256 _delta)\n    {\n        // Prevent underflow on _number-1\n        if (_number == 0) return (DEFINITELY_NOT, 0, 0);\n        \n        // Prevent overflow on _number+1\n        if (_number == ~uint256(0)) return (DEFINITELY_NOT, 0, 0);\n        \n        \n        Booly primality = isPrime(_number);\n        \n        if (primality == DEFINITELY_NOT) return (DEFINITELY_NOT, 0, 0);\n        \n        bool factorialityOfPrimePlus1;\n        uint256 primePlus1n;\n\n        // Detect factorial primes of the form n!-1\n        (primePlus1n, factorialityOfPrimePlus1) = reverseFactorial(_number+1);\n        if (factorialityOfPrimePlus1) return (AND(primality, factorialityOfPrimePlus1), primePlus1n, -1);\n\n        bool factorialityOfPrimeMinus1;\n        uint256 primeMinus1n;\n        \n        (primeMinus1n, factorialityOfPrimeMinus1) = reverseFactorial(_number-1);\n        if (factorialityOfPrimeMinus1) return (AND(primality, factorialityOfPrimeMinus1), primeMinus1n, 1);\n        \n        return (DEFINITELY_NOT, 0, 0);\n    }\n    \n    // Cullen primes are of the form n * 2^n + 1\n    function isCullenPrime(uint256 _number) external pure returns (Booly _result, uint256 _n)\n    {\n        // There are only two cullen primes that fit in a 256-bit integer\n        if (_number == 3)  // n = 1\n        {\n            return (DEFINITELY, 1);\n        }\n        else if (_number == 393050634124102232869567034555427371542904833) // n = 141\n        {\n            return (DEFINITELY, 141);\n        }\n        else\n        {\n            return (DEFINITELY_NOT, 0);\n        }\n    }\n    \n    // Fermat primes are of the form 2^(2^n)+1\n    // Conjecturally, 3, 5, 17, 257, 65537 are the only ones\n    function isFermatPrime(uint256 _number) external view returns (Booly result, uint256 _2_pow_n, uint256 _n)\n    {\n        // Prevent underflow on _number-1\n        if (_number == 0) return (DEFINITELY_NOT, 0, 0);\n        \n        \n        Booly primality = isPrime(_number);\n        \n        if (primality == DEFINITELY_NOT) return (DEFINITELY_NOT, 0, 0);\n        \n        bool is__2_pow_2_pow_n__powerOf2 = isPowerOf2(_number-1);\n        \n        if (!is__2_pow_2_pow_n__powerOf2) return (DEFINITELY_NOT, 0, 0);\n        \n        _2_pow_n = log2ofPowerOf2(_number-1);\n        \n        bool is__2_pow_n__powerOf2 = isPowerOf2(_2_pow_n);\n        \n        if (!is__2_pow_n__powerOf2) return (DEFINITELY_NOT, _2_pow_n, 0);\n        \n        _n = log2ofPowerOf2(_2_pow_n);\n    }\n    \n    // Super-primes are primes with a prime index in the sequence of prime numbers. (indexed starting with 1)\n    function isSuperPrime(uint256 _number) public view returns (Booly _result, uint256 _indexStartAtOne)\n    {\n        Booly primality = isPrime(_number);\n        if (primality == DEFINITELY)\n        {\n            _indexStartAtOne = numberdataToAllPrimesIndex(numberToNumberdata[_number]) + 1;\n            _result = isPrime(_indexStartAtOne);\n            return (_result, _indexStartAtOne);\n        }\n        else if (primality == DEFINITELY_NOT)\n        {\n            return (DEFINITELY_NOT, 0);\n        }\n        else if (primality == UNKNOWN)\n        {\n            return (UNKNOWN, 0);\n        }\n        else if (primality == PROBABLY)\n        {\n            return (UNKNOWN, 0);\n        }\n        else if (primality == PROBABLY_NOT)\n        {\n            return (PROBABLY_NOT, 0);\n        }\n        else\n        {\n            revert();\n        }\n    }\n    \n    function isFibonacciPrime(uint256 _number) public view returns (Booly _result)\n    {\n        return AND_F(isPrime, isFibonacciNumber, _number);\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////          Number classes            ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    function isFibonacciNumber(uint256 _number) public pure returns (Booly _result)\n    {\n        // If _number doesn't fit inside a uint126, we can't perform the computations necessary to check fibonaccality.\n        // We need to be able to square it, multiply by 5 then add 4.\n        // Adding 4 removes 1 bit of room: uint256 -> uint255\n        // Multiplying by 5 removes 3 bits of room: uint255 -> uint252\n        // Squaring removes 50% of room: uint252 -> uint126\n        // Rounding down to the nearest solidity type: uint126 -> uint120\n\n        if (uint256(uint120(_number)) != _number) return UNKNOWN;\n        \n        uint256 squareOfNumber = _number * _number;\n        uint256 squareTimes5 = squareOfNumber * 5;\n        uint256 squareTimes5plus4 = squareTimes5 + 4;\n        \n        bool squareTimes5plus4squarality;\n        (squareTimes5plus4squarality, ) = isSquareNumber(squareTimes5plus4);\n        \n        if (squareTimes5plus4squarality) return DEFINITELY;\n        \n        uint256 squareTimes5minus4 = squareTimes5 - 4;\n        \n        bool squareTimes5minus4squarality;\n        \n        // Check underflow\n        if (squareTimes5minus4 > squareTimes5) \n        {\n            squareTimes5minus4squarality = false;\n        }\n        else\n        {\n            (squareTimes5minus4squarality, ) = isSquareNumber(squareTimes5minus4);\n        }\n        \n        return (squareTimes5plus4squarality || squareTimes5minus4squarality) ? DEFINITELY : DEFINITELY_NOT;\n    }\n    \n    function isSquareNumber(uint256 _number) private pure returns (bool _result, uint256 _squareRoot)\n    {\n        uint256 rootRoundedDown = sqrtRoundedDown(_number);\n        return (rootRoundedDown * rootRoundedDown == _number, rootRoundedDown);\n    }\n    \n\n\n\n\n\n\n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////           Math functions           ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    function reverseFactorial(uint256 _number) private pure returns (uint256 output, bool success)\n    {\n        // 0 = immediate failure\n        if (_number == 0) return (0, false);\n        \n        uint256 divisor = 1;\n        while (_number > 1)\n        {\n            divisor++;\n            uint256 remainder = _number % divisor;\n            if (remainder != 0) return (divisor, false);\n            _number /= divisor;\n        }\n        \n        return (divisor, true);\n    }\n    \n    function isPowerOf2(uint256 _number) private pure returns (bool)\n    {\n        if (_number == 0) return false;\n        else return ((_number-1) & _number) == 0;\n    }\n    \n    // Performs a log2 on a power of 2.\n    // This function will throw if the input was not a power of 2.\n    function log2ofPowerOf2(uint256 _powerOf2) private pure returns (uint256)\n    {\n        require(_powerOf2 != 0, \"log2ofPowerOf2 error: 0 is not a power of 2\");\n        uint256 iterations = 0;\n        while (true)\n        {\n            if (_powerOf2 == 1) return iterations;\n            require((_powerOf2 & 1) == 0, \"log2ofPowerOf2 error: argument is not a power of 2\"); // The current number must be divisible by 2\n            _powerOf2 >>= 1; // Divide by 2\n            iterations++;\n        }\n    }\n    \n    // Generate a random number with low gas cost.\n    // This RNG is not secure and can be influenced!\n    function insecureRand() private view returns (uint256)\n    {\n        return uint256(keccak256(abi.encodePacked(\n            largestDefinitePrimeFound(),\n            probablePrimes.length,\n            block.coinbase,\n            block.timestamp,\n            block.number,\n            block.difficulty,\n            tx.origin,\n            tx.gasprice,\n            msg.sender,\n            now,\n            gasleft()\n        )));\n    }\n    \n    // TRY_POW_MOD function defines 0^0 % n = 1\n    function TRY_POW_MOD(uint256 _base, uint256 _power, uint256 _modulus) private pure returns (uint256 result, bool success)\n    {\n        if (_modulus == 0) return (0, false);\n        \n        bool mulSuccess;\n        _base %= _modulus;\n        result = 1;\n        while (_power > 0)\n        {\n            if (_power & uint256(1) != 0)\n            {\n                (result, mulSuccess) = TRY_MUL(result, _base);\n                if (!mulSuccess) return (0, false);\n                result %= _modulus;\n            }\n            (_base, mulSuccess) = TRY_MUL(_base, _base);\n            if (!mulSuccess) return (0, false);\n            _base = _base % _modulus;\n            _power >>= 1;\n        }\n        success = true;\n    }\n    \n    function TRY_MUL(uint256 _i, uint256 _j) private pure returns (uint256 result, bool success)\n    {\n        if (_i == 0) { return (0, true); }\n        uint256 ret = _i * _j;\n        if (ret / _i == _j) return (ret, true);\n        else return (ret, false);\n    }\n\n\n\n\n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////           Miller-rabin             ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    // This function runs one trial. It returns false if n is\n    // definitely composite and true if n is probably prime.\n    // d must be an odd number such that d*2^r = n-1 for some r >= 1\n    function probabilisticTest(uint256 d, uint256 _number, uint256 _random) private pure returns (bool result, bool success)\n    {\n        // Check d\n        assert(d & 1 == 1); // d is odd\n        assert((_number-1) % d == 0); // n-1 divisible by d\n        uint256 nMinusOneOverD = (_number-1) / d;\n        assert(isPowerOf2(nMinusOneOverD)); // (n-1)/d is power of 2\n        assert(nMinusOneOverD >= 1); // 2^r >= 2 therefore r >= 1\n        \n        // Make sure we can subtract 4 from _number\n        if (_number < 4) return (false, false);\n        \n        // Pick a random number in [2..n-2]\n        uint256 a = 2 + _random % (_number - 4);\n        \n        // Compute a^d % n\n        uint256 x;\n        (x, success) = TRY_POW_MOD(a, d, _number);\n        if (!success) return (false, false);\n        \n        if (x == 1 || x == _number-1)\n        {\n            return (true, true);\n        }\n        \n        // Keep squaring x while one of the following doesn't\n        // happen\n        // (i)   d does not reach n-1\n        // (ii)  (x^2) % n is not 1\n        // (iii) (x^2) % n is not n-1\n        while (d != _number-1)\n        {\n            (x, success) = TRY_MUL(x, x);\n            if (!success) return (false, false);\n            \n            x %= _number;\n            \n            (d, success) = TRY_MUL(d, 2);\n            if (!success) return (false, false);\n            \n            \n            if (x == 1) return (false, true);\n            if (x == _number-1) return (true, true);\n        }\n     \n        // Return composite\n        return (false, true);\n    }\n    \n    // This functions runs multiple miller-rabin trials.\n    // It returns false if _number is definitely composite and\n    // true if _number is probably prime.\n    function isPrime_probabilistic(uint256 _number) public view returns (Booly)\n    {\n        // 40 iterations is heuristically enough for extremely high certainty\n        uint256 probabilistic_iterations = 40;\n        \n        // Corner cases\n        if (_number == 0 || _number == 1 || _number == 4)  return DEFINITELY_NOT;\n        if (_number == 2 || _number == 3) return DEFINITELY;\n        \n        // Find d such that _number == 2^d * r + 1 for some r >= 1\n        uint256 d = _number - 1;\n        while ((d & 1) == 0)\n        {\n            d >>= 1;\n        }\n        \n        uint256 random = insecureRand();\n        \n        // Run the probabilistic test many times with different randomness\n        for (uint256 i = 0; i < probabilistic_iterations; i++)\n        {\n            bool result;\n            bool success;\n            (result, success) = probabilisticTest(d, _number, random);\n            if (success == false)\n            {\n                return UNKNOWN;\n            }\n            if (result == false)\n            {\n                return DEFINITELY_NOT;\n            }\n            \n            // Shuffle bits\n            random *= 22777;\n            random ^= (random >> 7);\n            random *= 71879;\n            random ^= (random >> 11);\n        }\n        \n        return PROBABLY;\n    }\n    \n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////  Claim & disprove probable primes  ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    function claimProbablePrime(uint256 _number) public\n    {\n        require(tryClaimProbablePrime(_number), \"claimProbablePrime error: that number is not prime or has already been claimed\");\n    }\n    \n    function tryClaimProbablePrime(uint256 _number) public returns (bool _success)\n    {\n        uint256 startGas = gasleft();\n        \n        Booly primality = isPrime(_number);\n        \n        // If we already have knowledge about the provided number, cancel the claim attempt.\n        if (primality != UNKNOWN)\n        {\n            _success = false;\n        }\n        else\n        {\n            primality = isPrime_probabilistic(_number);\n            \n            if (primality == DEFINITELY_NOT)\n            {\n                // If it's not prime, remember it as such\n                _numberdataSetNumberType(_number, NumberType.NOT_PRIME);\n                \n                 _success = false;\n            }\n            else if (primality == PROBABLY)\n            {\n                _createPrime(_number, msg.sender, false);\n                \n                addressToProbablePrimesClaimed[msg.sender]++;\n                \n                 _success = true;\n            }\n            else\n            {\n                 _success = false;\n            }\n        }\n        \n        uint256 gasSpent = startGas - gasleft();\n        addressToGasSpent[msg.sender] += gasSpent;\n        addressToEtherSpent[msg.sender] += gasSpent * tx.gasprice;\n    }\n    \n    function disproveProbablePrime(uint256 _prime, uint256 _divisor) external\n    {\n        require(_divisor > 1 && _divisor < _prime, \"disproveProbablePrime error: divisor must be greater than 1 and smaller than prime\");\n        \n        bytes32 numberdata = numberToNumberdata[_prime];\n        \n        // If _prime is a probable prime...\n        require(numberdataToNumberType(numberdata) == NumberType.PROBABLE_PRIME, \"disproveProbablePrime error: that prime is not a probable prime\");\n        \n        // ... and _prime is divisible by _divisor ...\n        require((_prime % _divisor) == 0, \"disproveProbablePrime error: that prime is not divisible by that divisor\");\n        \n        address owner = numberdataToOwner(numberdata);\n        \n        // Statistics\n        addressToProbablePrimesDisprovenFrom[owner]++;\n        addressToProbablePrimesDisprovenBy[msg.sender]++;\n        \n        _setOwner(_prime, address(0x0));\n        \n        _numberdataSetNumberType(_prime, NumberType.NOT_PRIME);\n        \n        // Remove it from the probablePrimes array\n        uint256 primeIndex = numberdataToAllPrimesIndex(numberdata);\n        \n        // If the prime we're removing is not the last one in the probablePrimes array...\n        if (primeIndex < probablePrimes.length-1)\n        {\n            // ...move the last one back into its slot.\n            uint256 otherPrimeBeingMoved = probablePrimes[probablePrimes.length-1];\n            _numberdataSetAllPrimesIndex(otherPrimeBeingMoved, uint48(primeIndex));\n            probablePrimes[primeIndex] = otherPrimeBeingMoved;\n        }\n        probablePrimes[probablePrimes.length-1] = 0; // Refund some gas\n        probablePrimes.length--;\n        \n        // Broadcast event\n        emit ProbablePrimeDisproven(_prime, _divisor, owner, msg.sender, primeIndex);\n        \n        // Store the divisor\n        numberToNonTwoDivisor[_prime] = _divisor;\n    }\n    \n    function claimProbablePrimeInRange(uint256 _start, uint256 _end) external returns (bool _success, uint256 _prime)\n    {\n        for (uint256 currentNumber = _start; currentNumber <= _end; currentNumber++)\n        {\n            if (tryClaimProbablePrime(currentNumber)) { return (true, currentNumber); }\n        }\n        return (false, 0);\n    }\n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////      Try to stop people from       ////////////\n    ////////////    accidentally sending tokens     ////////////\n    ////////////         to this contract           ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    function onERC721Received(address, address, uint256, bytes calldata) external pure // ERC721\n    {\n        revert(\"EtherPrime contract should not receive tokens\");\n    }\n    \n    function tokenFallback(address, uint256, bytes calldata) external pure // ERC223\n    {\n        revert(\"EtherPrime contract should not receive tokens\");\n    }\n    \n    function tokensReceived(address, address, address, uint, bytes calldata, bytes calldata) external pure // ERC777\n    {\n        revert(\"EtherPrime contract should not receive tokens\");\n    }\n    \n    \n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////            Booly stuff             ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    // Penta-state logic implementation\n    \n    enum Booly\n    {\n        DEFINITELY_NOT,\n        PROBABLY_NOT,\n        UNKNOWN,\n        PROBABLY,\n        DEFINITELY\n    }\n    \n    Booly public constant DEFINITELY_NOT = Booly.DEFINITELY_NOT;\n    Booly public constant PROBABLY_NOT = Booly.PROBABLY_NOT;\n    Booly public constant UNKNOWN = Booly.UNKNOWN;\n    Booly public constant PROBABLY = Booly.PROBABLY;\n    Booly public constant DEFINITELY = Booly.DEFINITELY;\n    \n    function OR(Booly a, Booly b) internal pure returns (Booly)\n    {\n        if (a == DEFINITELY || b == DEFINITELY) return DEFINITELY;\n        else if (a == PROBABLY || b == PROBABLY) return PROBABLY;\n        else if (a == UNKNOWN || b == UNKNOWN) return UNKNOWN;\n        else if (a == PROBABLY_NOT || b == PROBABLY_NOT) return PROBABLY_NOT;\n        else if (a == DEFINITELY_NOT && b == DEFINITELY_NOT) return DEFINITELY_NOT;\n        else revert();\n    }\n    \n    function NOT(Booly a) internal pure returns (Booly)\n    {\n        if (a == DEFINITELY_NOT) return DEFINITELY;\n        else if (a == PROBABLY_NOT) return PROBABLY;\n        else if (a == UNKNOWN) return UNKNOWN;\n        else if (a == PROBABLY) return PROBABLY_NOT;\n        else if (a == DEFINITELY) return DEFINITELY_NOT;\n        else revert();\n    }\n    \n    function AND(Booly a, Booly b) internal pure returns (Booly)\n    {\n        if (a == DEFINITELY_NOT || b == DEFINITELY_NOT) return DEFINITELY_NOT;\n        else if (a == PROBABLY_NOT || b == PROBABLY_NOT) return PROBABLY_NOT;\n        else if (a == UNKNOWN || b == UNKNOWN) return UNKNOWN;\n        else if (a == PROBABLY || b == PROBABLY) return PROBABLY;\n        else if (a == DEFINITELY && b == DEFINITELY) return DEFINITELY;\n        else revert();\n    }\n    \n    function AND(Booly a, bool b) internal pure returns (Booly)\n    {\n        if (b == true) return a;\n        else return DEFINITELY_NOT;\n    }\n    \n    function XOR(Booly a, Booly b) internal pure returns (Booly)\n    {\n        return AND(OR(a, b), NOT(AND(a, b)));\n    }\n    \n    function NAND(Booly a, Booly b) internal pure returns (Booly)\n    {\n        return NOT(AND(a, b));\n    }\n    \n    function NOR(Booly a, Booly b) internal pure returns (Booly)\n    {\n        return NOT(OR(a, b));\n    }\n    \n    function XNOR(Booly a, Booly b) internal pure returns (Booly)\n    {\n        return NOT(XOR(a, b));\n    }\n    \n    function AND_F(function(uint256)view returns(Booly) aFunc, function(uint256)view returns(Booly) bFunc, uint256 _arg) internal view returns (Booly)\n    {\n        Booly a = aFunc(_arg);\n        if (a == DEFINITELY_NOT) return DEFINITELY_NOT;\n        else\n        {\n            Booly b = bFunc(_arg);\n            if (b == DEFINITELY_NOT) return DEFINITELY_NOT;\n            else if (a == PROBABLY_NOT) return PROBABLY_NOT;\n            else if (b == PROBABLY_NOT) return PROBABLY_NOT;\n            else if (a == UNKNOWN || b == UNKNOWN) return UNKNOWN;\n            else if (a == PROBABLY || b == PROBABLY) return PROBABLY;\n            else if (a == DEFINITELY && b == DEFINITELY) return DEFINITELY;\n            else revert();\n        }\n    }\n    \n    function OR_F(function(uint256)view returns(Booly) aFunc, function(uint256)view returns(Booly) bFunc, uint256 _arg) internal view returns (Booly)\n    {\n        Booly a = aFunc(_arg);\n        if (a == DEFINITELY) return DEFINITELY;\n        else\n        {\n            Booly b = bFunc(_arg);\n            if (b == DEFINITELY) return DEFINITELY;\n            else if (a == PROBABLY || b == PROBABLY) return PROBABLY;\n            else if (a == UNKNOWN || b == UNKNOWN) return UNKNOWN;\n            else if (a == PROBABLY_NOT || b == PROBABLY_NOT) return PROBABLY_NOT;\n            else if (a == DEFINITELY_NOT && b == DEFINITELY_NOT) return DEFINITELY_NOT;\n            else revert();\n        }\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////           Trading stuff            ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    // depositEther() should only be called at the start of 'external payable' functions.\n    function depositEther() public payable\n    {\n        addressToEtherBalance[msg.sender] += msg.value;\n        \n        emit EtherDeposited(msg.sender, msg.value);\n    }\n    \n    function withdrawEther(uint256 _amount) public\n    {\n        require(addressToEtherBalance[msg.sender] >= _amount, \"withdrawEther error: insufficient balance to withdraw that much ether\");\n        addressToEtherBalance[msg.sender] -= _amount;\n        msg.sender.transfer(_amount);\n        \n        emit EtherWithdrawn(msg.sender, _amount);\n    }\n    \n    struct BuyOrder\n    {\n        address buyer;\n        uint256 bid;\n    }\n    \n    function depositEtherAndCreateBuyOrder(uint256 _prime, uint256 _bid, uint256 _indexHint) external payable\n    {\n        depositEther();\n        \n        require(_bid > 0, \"createBuyOrder error: bid must be greater than 0\");\n        require(_prime >= 2, \"createBuyOrder error: prime must be greater than or equal to 2\");\n        \n        BuyOrder[] storage buyOrders = primeToBuyOrders[_prime];\n\n        uint256 _index;\n        \n        if (_indexHint == buyOrders.length)\n        {\n            _index = _indexHint;\n        }\n        else if (_indexHint < buyOrders.length &&\n                 buyOrders[_indexHint].buyer == address(0x0) &&\n                 buyOrders[_indexHint].bid == 0)\n        {\n            _index = _indexHint;\n        }\n        else\n        {\n            _index = findFreeBuyOrderSlot(_prime);\n        }\n        \n        if (_index == buyOrders.length)\n        {\n            buyOrders.length++;\n        }\n        \n        BuyOrder storage buyOrder = buyOrders[_index];\n        \n        buyOrder.buyer = msg.sender;\n        buyOrder.bid = _bid;\n        \n        emit BuyOrderCreated(msg.sender, _prime, _index, _bid);\n        \n        tryMatchSellAndBuyOrdersRange(_prime, _index, _index);\n    }\n    \n    function modifyBuyOrder(uint256 _prime, uint256 _index, uint256 _newBid) external\n    {\n        BuyOrder[] storage buyOrders = primeToBuyOrders[_prime];\n        require(_index < buyOrders.length, \"modifyBuyOrder error: index out of bounds\");\n        \n        BuyOrder storage buyOrder = buyOrders[_index];\n        require(buyOrder.buyer == msg.sender, \"modifyBuyOrder error: you do not own that buy order\");\n        \n        emit BuyOrderDestroyed(msg.sender, _prime, _index);\n        \n        buyOrder.bid = _newBid;\n        \n        emit BuyOrderCreated(msg.sender, _prime, _index, _newBid);\n    }\n    \n\n    function tryCancelBuyOrders(uint256[] memory _primes, uint256[] memory _buyOrderIndices) public returns (uint256 _amountCancelled)\n    {\n        require(_primes.length == _buyOrderIndices.length, \"tryCancelBuyOrders error: invalid input, arrays are not the same length\");\n        \n        _amountCancelled = 0;\n        \n        for (uint256 i=0; i<_primes.length; i++)\n        {\n            uint256 index = _buyOrderIndices[i];\n            uint256 prime = _primes[i];\n            \n            BuyOrder[] storage buyOrders = primeToBuyOrders[prime];\n            if (index < buyOrders.length)\n            {\n                BuyOrder storage buyOrder = buyOrders[index];\n                if (buyOrder.buyer == msg.sender)\n                {\n                    emit BuyOrderDestroyed(msg.sender, prime, index);\n                    \n                    buyOrder.buyer = address(0x0);\n                    buyOrder.bid = 0;\n                    \n                    _amountCancelled++;\n                }\n            }\n        }\n    }\n\n    function setSellPrice(uint256 _prime, uint256 _price, uint256 _matchStartBuyOrderIndex, uint256 _matchEndBuyOrderIndex) external returns (bool _sold)\n    {\n        require(isApprovedFor(msg.sender, _prime), \"createSellOrder error: you do not have ownership of or approval for that prime\");\n        \n        primeToSellOrderPrice[_prime] = _price;\n        \n        emit SellPriceSet(msg.sender, _prime, _price);\n        \n        if (_matchStartBuyOrderIndex != ~uint256(0))\n        {\n            return tryMatchSellAndBuyOrdersRange(_prime, _matchStartBuyOrderIndex, _matchEndBuyOrderIndex);\n        }\n        else\n        {\n            return false;\n        }\n    }\n\n    function tryMatchSellAndBuyOrdersRange(uint256 _prime, uint256 _startBuyOrderIndex, uint256 _endBuyOrderIndex) public returns (bool _sold)\n    {\n        uint256 sellOrderPrice = primeToSellOrderPrice[_prime];\n        address seller = getOwner(_prime);\n        \n        if (sellOrderPrice == 0 ||\n            seller == address(0x0))\n        {\n            return false;\n        }\n        else\n        {\n            BuyOrder[] storage buyOrders = primeToBuyOrders[_prime];\n            \n            uint256 buyOrders_length = buyOrders.length;\n\n            if (_startBuyOrderIndex > _endBuyOrderIndex ||\n                _endBuyOrderIndex >= buyOrders.length)\n            {\n                return false;\n            }\n            else\n            {\n                for (uint256 i=_startBuyOrderIndex; i<=_endBuyOrderIndex && i<buyOrders_length; i++)\n                {\n                    BuyOrder storage buyOrder = buyOrders[i];\n                    address buyer = buyOrder.buyer;\n                    uint256 bid = buyOrder.bid;\n                    \n                    if (bid >= sellOrderPrice &&\n                        addressToEtherBalance[buyer] >= bid)\n                    {\n                        addressToEtherBalance[buyer] -= bid;\n                        addressToEtherBalance[seller] += bid;\n                        \n                        _setOwner(_prime, buyer); // _setOwner sets primeToSellOrderPrice[_prime] = 0\n                        \n                        emit BuyOrderDestroyed(buyer, _prime, i);\n                        emit PrimeTraded(seller, buyer, _prime, i, bid);\n                        \n                        buyOrder.buyer = address(0x0);\n                        buyOrder.bid = 0;\n                        return true;\n                    }\n                }\n                return false;\n            }\n        }\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////       Trading view functions       ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    function countPrimeBuyOrders(uint256 _prime) external view returns (uint256 _amountOfBuyOrders)\n    {\n        _amountOfBuyOrders = 0;\n        \n        BuyOrder[] storage buyOrders = primeToBuyOrders[_prime];\n        for (uint256 i=0; i<buyOrders.length; i++)\n        {\n            if (buyOrders[i].buyer != address(0x0))\n            {\n                _amountOfBuyOrders++;\n            }\n        }\n    }\n    \n    function lengthOfPrimeBuyOrdersArray(uint256 _prime) external view returns (uint256 _lengthOfPrimeBuyOrdersArray)\n    {\n        return primeToBuyOrders[_prime].length;\n    }\n    \n    function getPrimeBuyOrder(uint256 _prime, uint256 _index) external view returns (address _buyer, uint256 _bid, bool _buyerHasEnoughFunds)\n    {\n       BuyOrder storage buyOrder = primeToBuyOrders[_prime][_index];\n       \n       _buyer = buyOrder.buyer;\n       _bid = buyOrder.bid;\n       \n       require(_buyer != address(0x0) && _bid != 0);\n       \n       _buyerHasEnoughFunds = addressToEtherBalance[_buyer] >= _bid;\n    }\n    \n    function findFreeBuyOrderSlot(uint256 _prime) public view returns (uint256 _buyOrderSlotIndex)\n    {\n        BuyOrder[] storage buyOrders = primeToBuyOrders[_prime];\n        uint256 len = buyOrders.length;\n        \n        for (uint256 i=0; i<len; i++)\n        {\n            if (buyOrders[i].buyer == address(0x0) &&\n                buyOrders[i].bid == 0)\n            {\n                return i;\n            }\n        }\n        \n        return len;\n    }  \n\n    function findHighestBidBuyOrder(uint256 _prime) public view returns (bool _found, uint256 _buyOrderIndex, address _buyer, uint256 _bid)\n    {\n        BuyOrder[] storage buyOrders = primeToBuyOrders[_prime];\n        uint256 highestBidBuyOrderIndexFound = 0;\n        uint256 highestBidFound = 0;\n        address highestBidAddress = address(0x0);\n        for (uint256 i=0; i<buyOrders.length; i++)\n        {\n            BuyOrder storage buyOrder = buyOrders[i];\n            if (buyOrder.bid > highestBidFound &&\n                addressToEtherBalance[buyOrder.buyer] >= buyOrder.bid)\n            {\n                highestBidBuyOrderIndexFound = i;\n                highestBidFound = buyOrder.bid;\n                highestBidAddress = buyOrder.buyer;\n            }\n        }\n        if (highestBidFound == 0)\n        {\n            return (false, 0, address(0x0), 0);\n        }\n        else\n        {\n            return (true, highestBidBuyOrderIndexFound, highestBidAddress, highestBidFound);\n        }\n    }\n    \n    function findBuyOrdersOfUserOnPrime(address _user, uint256 _prime) external view returns (uint256[] memory _buyOrderIndices, uint256[] memory _bids)\n    {\n        BuyOrder[] storage buyOrders = primeToBuyOrders[_prime];\n        \n        _buyOrderIndices = new uint256[](buyOrders.length);\n        _bids = new uint256[](buyOrders.length);\n        \n        uint256 amountOfBuyOrdersFound = 0;\n\n        for (uint256 i=0; i<buyOrders.length; i++)\n        {\n            BuyOrder storage buyOrder = buyOrders[i];\n            if (buyOrder.buyer == _user)\n            {\n                _buyOrderIndices[amountOfBuyOrdersFound] = i;\n                _bids[amountOfBuyOrdersFound] = buyOrder.bid;\n                amountOfBuyOrdersFound++;\n            }\n        }\n        \n        assembly\n        {\n            // _buyOrderIndices.length = amountOfBuyOrdersFound;\n            mstore(_buyOrderIndices, amountOfBuyOrdersFound)\n            \n            // _bids.length = amountOfBuyOrdersFound;\n            mstore(_bids, amountOfBuyOrdersFound)\n        }\n    }\n    \n    function findBuyOrdersOnUsersPrimes(address _user) external view returns (uint256[] memory _primes, uint256[] memory _buyOrderIndices, address[] memory _buyers, uint256[] memory _bids, bool[] memory _buyersHaveEnoughFunds)\n    {\n        uint256[] storage userPrimes = ownerToPrimes[_user];\n        \n        _primes = new uint256[](userPrimes.length);\n        _buyOrderIndices = new uint256[](userPrimes.length);\n        _buyers = new address[](userPrimes.length);\n        _bids = new uint256[](userPrimes.length);\n        _buyersHaveEnoughFunds = new bool[](userPrimes.length);\n        \n        uint256 amountOfBuyOrdersFound = 0;\n\n        for (uint256 i=0; i<userPrimes.length; i++)\n        {\n            uint256 prime = userPrimes[i];\n            \n            bool found; uint256 buyOrderIndex; address buyer; uint256 bid;\n            (found, buyOrderIndex, buyer, bid) = findHighestBidBuyOrder(prime);\n            \n            if (found == true)\n            {\n                _primes[amountOfBuyOrdersFound] = prime;\n                _buyers[amountOfBuyOrdersFound] = buyer;\n                _buyOrderIndices[amountOfBuyOrdersFound] = buyOrderIndex;\n                _bids[amountOfBuyOrdersFound] = bid;\n                _buyersHaveEnoughFunds[amountOfBuyOrdersFound] = addressToEtherBalance[buyer] >= bid;\n                amountOfBuyOrdersFound++;\n            }\n        }\n        \n        assembly\n        {\n            // _primes.length = amountOfBuyOrdersFound;\n            mstore(_primes, amountOfBuyOrdersFound)\n            \n            // _buyOrderIndices.length = amountOfBuyOrdersFound;\n            mstore(_buyOrderIndices, amountOfBuyOrdersFound)\n            \n            // _buyers.length = amountOfBuyOrdersFound;\n            mstore(_buyers, amountOfBuyOrdersFound)\n            \n            // _bids.length = amountOfBuyOrdersFound;\n            mstore(_bids, amountOfBuyOrdersFound)\n            \n            // _buyersHaveEnoughFunds.length = amountOfBuyOrdersFound;\n            mstore(_buyersHaveEnoughFunds, amountOfBuyOrdersFound)\n        }\n    }\n    \n    \n    \n    \n    \n    \n    \n    \n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    ////////////                                    ////////////\n    ////////////   Trading convenience functions    ////////////\n    ////////////                                    ////////////\n    ////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////\n    \n    // These functions don't directly modify state variables.\n    // They only serve as a wrapper for other functions.\n    // They do not introduce new state transitions.\n    \n    /*function withdrawAllEther() external\n    {\n        withdrawEther(addressToEtherBalance[msg.sender]);\n    }*/\n    \n    /*function cancelBuyOrders(uint256[] calldata _primes, uint256[] calldata _buyOrderIndices) external\n    {\n        require(tryCancelBuyOrders(_primes, _buyOrderIndices) == _primes.length, \"cancelBuyOrders error: not all buy orders could be cancelled\");\n    }*/\n    \n    function tryCancelBuyOrdersAndWithdrawEther(uint256[] calldata _primes, uint256[] calldata _buyOrderIndices, uint256 _amountToWithdraw) external returns (uint256 _amountCancelled)\n    {\n        withdrawEther(_amountToWithdraw);\n        return tryCancelBuyOrders(_primes, _buyOrderIndices);\n    }\n}\n\ncontract EtherPrimeChat\n{\n    EtherPrime etherPrime;\n    \n    constructor(EtherPrime _etherPrime) public\n    {\n        etherPrime = _etherPrime;\n    }\n    \n    // Social\n    mapping(address => bytes32) public addressToUsername;\n    mapping(bytes32 => address) public usernameToAddress;\n    mapping(address => uint256) public addressToGasUsedTowardsChatMessage;\n    uint256 public constant GAS_PER_CHAT_MESSAGE = 1000000;\n    address[] public chatMessageSenders;\n    uint256[] public chatMessageReplyToIndices;\n    string[] public chatMessages;\n    \n    event UsernameSet(address user, bytes32 username);\n    event ChatMessageSent(address indexed sender, uint256 indexed index, uint256 indexed replyToIndex);\n    \n    function setUsername(bytes32 _username) external\n    {\n        require(_username[0] != 0x00);\n        \n        bool seen0x00 = false;\n        for (uint256 i=0; i<32; i++)\n        {\n            if (_username[i] == 0x00)\n            {\n                seen0x00 = true;\n            }\n            \n            // If there's a non-0x00 after an 0x00, this is not a valid string.\n            else if (seen0x00)\n            {\n                revert(\"setUsername error: invalid string; character present after null terminator\");\n            }\n        }\n        \n        require(usernameToAddress[_username] == address(0x0), \"setUsername error: that username already exists\");\n        \n        usernameToAddress[_username] = msg.sender;\n        addressToUsername[msg.sender] = _username;\n        \n        emit UsernameSet(msg.sender, _username);\n    }\n    \n    function amountOfChatMessages() external view returns (uint256)\n    {\n        return chatMessages.length;\n    }\n    \n    function getChatMessage(uint256 _index) external view returns (address _sender, string memory _message, uint256 _replyToIndex)\n    {\n        require(_index < chatMessages.length, \"getChatMessage error: index out of bounds\");\n        \n        _sender = chatMessageSenders[_index];\n        _message = chatMessages[_index];\n        _replyToIndex = chatMessageReplyToIndices[_replyToIndex];\n    }\n    \n    function sendChatMessage(string calldata _message, uint256 _replyToIndex) external\n    {\n        require(etherPrime.addressToGasSpent(msg.sender) - addressToGasUsedTowardsChatMessage[msg.sender] >= GAS_PER_CHAT_MESSAGE, \"sendChatMessage error: you need to spend more gas on compute() to send a chat message\");\n        require(_replyToIndex == ~uint256(0) || _replyToIndex < chatMessages.length, \"sendChatMessage error: invalid reply index\");\n        \n        addressToGasUsedTowardsChatMessage[msg.sender] += GAS_PER_CHAT_MESSAGE;\n        \n        emit ChatMessageSent(msg.sender, chatMessages.length, _replyToIndex);\n        \n        chatMessageReplyToIndices.push(_replyToIndex);\n        chatMessageSenders.push(msg.sender);\n        chatMessages.push(_message);\n    }\n}",
  "bytecode": "60806040523480156200001157600080fd5b50600780546001818101835560009290925260008051602062007661833981519152018054600160a060020a03191690556200005b906002903390640100000000620000ab810204565b6003600e556000600f556040513090620000759062000b3d565b600160a060020a03909116815260405190819003602001906000f080158015620000a3573d6000803e3d6000fd5b505062000bb5565b620000e38382620000bf57600154620000c3565b6000545b83620000d1576002620000d4565b60035b640100000000620001d1810204565b80156200015257600080546040519091339186917f429cfb15033e9679c0e51b366408258dd0378c53a917ce9860785a6b9d11277b91a4600080546001810182559080527f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e56301839055620001b7565b600154604051339085907fe93558c94695db71339118415d1cde7ce17abe11110eb3b3b862ed9539da650690600090a46001805480820182556000919091527fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6018390555b620001cc83836401000000006200024b810204565b505050565b60008381526005602052604090205460a860020a60d860020a031916750100000000000000000000000000000000000000000065ffffffffffff8416021760a060020a60ff02191660a08260038111156200022857fe5b60009586526005602052604090952060ff90951660029190910a02179092555050565b6200028a82826020604051908101604052806000815250600060206040519081016040528060008152506200028e640100000000026401000000009004565b5050565b6000620002a4866401000000006200085e810204565b9050600160a060020a0383161515620002bb578092505b84600160a060020a031681600160a060020a03161415620002dd575062000857565b600160a060020a038116156200030157620003018664010000000062000887810204565b600160a060020a03851660009081526004602052604090205462000332908790879064010000000062000987810204565b600160a060020a0380861660009081526004602090815260408083208054600181018255908452828420018a9055898352600290915290205416156200038f5760008681526002602052604090208054600160a060020a03191690555b60008681526011602052604090205415620003f55760008681526011602090815260408083208390558051928352518892600160a060020a038916927ffa015edf7f3899369797d1c3ae2604af878f2a4f9c44d63cb0d592e2620be28b92918290030190a35b6200040985640100000000620009ed810204565b6200041d8564010000000062000a71810204565b156200080a57600080620005668788600160a060020a031663150b7a0290507c01000000000000000000000000000000000000000000000000000000000287868c8b6040516024018085600160a060020a0316600160a060020a0316815260200184600160a060020a0316600160a060020a0316815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b83811015620004d7578181015183820152602001620004bd565b50505050905090810190601f168015620005055780820380516001836020036101000a031916815260200191505b5060408051601f19818403018152919052602081018051600160e060020a03167fffffffff0000000000000000000000000000000000000000000000000000000090991698909817909752505064010000000062000a778102049350505050565b90925090508115806200059b575060405180602f620076328239602f0190506040518091039020600160e060020a0319168114155b15620008075760408051600160a060020a0385166024820152604481018a90526000606480830191909152825180830390910181526084909101909152602081018051600160e060020a03167fc0ee0b8a000000000000000000000000000000000000000000000000000000001790526200062190889064010000000062000a77810204565b90925090508115156200080757620007f18788600160a060020a03166223de2990507c01000000000000000000000000000000000000000000000000000000000287868b8d8c8b6040516024018087600160a060020a0316600160a060020a0316815260200186600160a060020a0316600160a060020a0316815260200185600160a060020a0316600160a060020a031681526020018481526020018060200180602001838103835285818151815260200191508051906020019080838360005b83811015620006fc578181015183820152602001620006e2565b50505050905090810190601f1680156200072a5780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b838110156200075f57818101518382015260200162000745565b50505050905090810190601f1680156200078d5780820380516001836020036101000a031916815260200191505b5060408051601f19818403018152919052602081018051600160e060020a03167fffffffff00000000000000000000000000000000000000000000000000000000909c169b909b17909a52505064010000000062000a778102049650505050505050565b9092509050811515620008075750505062000857565b50505b84600160a060020a031681600160a060020a03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef886040518082815260200191505060405180910390a3505b5050505050565b600081815260056020526040812054620008819064010000000062000a9f810204565b92915050565b60008181526005602052604081205490600481620008ae8464010000000062000a9f810204565b600160a060020a0316600160a060020a0316815260200190815260200160002090506000620008ec8362000aab640100000000026401000000009004565b64ffffffffff16905060008260018480549050038154811015156200090d57fe5b906000526020600020015490508083838154811015156200092a57fe5b6000918252602090912001556200094b818364010000000062000af1810204565b8254600090849060001981019081106200096157fe5b60009182526020909120015582546200097f84600019830162000b4b565b505050505050565b6000928352600560205260409092208054600160a060020a031916600160a060020a039290921691909117600160d860020a03167b0100000000000000000000000000000000000000000000000000000064ffffffffff90931692909202919091179055565b600160a060020a0381161580159062000a1c5750600160a060020a038116600090815260086020526040902054155b1562000a6e5760078054600160a060020a03831660008181526008602052604081208390556001830184559290925260008051602062007661833981519152018054600160a060020a03191690911790555b50565b3b151590565b60008062000a8462000b72565b8351602082828760008a5af191519196919550909350505050565b600160a060020a031690565b7b010000000000000000000000000000000000000000000000000000007fffffffffff000000000000000000000000000000000000000000000000000000821604919050565b600091825260056020526040909120805464ffffffffff929092167b0100000000000000000000000000000000000000000000000000000002600160d860020a03909216919091179055565b610c168062006a1c83390190565b815481835581811115620001cc57600083815260209020620001cc91810190830162000b91565b6020604051908101604052806001906020820280388339509192915050565b62000bb291905b8082111562000bae576000815560010162000b98565b5090565b90565b615e578062000bc56000396000f3fe6080604052600436106104ee5760003560e060020a9004806374006a1c11610290578063b10ba44a1161015e578063d0f21676116100d0578063e427e1c011610089578063e427e1c014611a4a578063e985e9c514611aa4578063f182edd014611adf578063f467bf3414611b12578063fc495deb14611b3b578063ffcecb7a14611bbe576104ee565b8063d0f2167614611967578063d2c3b0b314611991578063da8e6153146119bb578063dd62ed3e146119e5578063df5c127e14611a20578063e2a51b8f14611a35576104ee565b8063be61afb711610122578063be61afb7146109d8578063c0ee0b8a14611878578063c41a360a146118cb578063c5cfd4b5146118f5578063c87b56dd14611928578063cb3bb81e14611952576104ee565b8063b10ba44a14611695578063b2e6ceeb146116bf578063b88d4fde146116e9578063bceac057146117bc578063be45fd62146117e6576104ee565b80638be1baee116102025780639d5c1c99116101bb5780639d5c1c991461156d578063a22cb46514611582578063a6b08a19146115bd578063a9059cbb146115f3578063ab539e551461162c578063ae89bc5e1461166b576104ee565b80638be1baee1461143f57806395d89b411461145457806397abed241461146957806397c07c5f146114935780639887a0bc14610bbe57806398ea5fca14611565576104ee565b80637820844411610254578063782084441461134f57806378c5523c146113795780637924fa2b1461138e5780637a1bb205146113b85780637cd8d74c146113e2578063806d21bd1461140c576104ee565b806374006a1c14611265578063740e2f9a1461129557806374294a33146112c857806376934e02146112f257806377304fda14611325576104ee565b80633bed33ce116103cd5780635a3647751161033f57806368a124e0116102f857806368a124e01461106e5780636a317b12146110835780636e317893146111b75780636ef560e6146111f357806370a082311461121d5780637318345c14611250576104ee565b80635a36477514610eb15780635a3f267214610edb57806362e50d3714610f5e5780636352211e14610f91578063649336b914610fbb57806366afff8514610fe5576104ee565b806342842e0e1161039157806342842e0e14610a14578063445d694214610d135780634955c40d14610de25780634c411fa914610e0c5780634f6ccce714610e575780635654f7bf14610e81576104ee565b80633bed33ce14610c1b5780633dd61b4b14610c45578063402125d414610ca157806340f72cb714610cb65780634270349414610ce9576104ee565b80631a43c338116104665780632dba8d911161042a5780632dba8d9114610af05780632f745c5914610b45578063313ce56714610b7e57806333f1600a14610ba957806334c40fbe14610bbe57806335c1d34914610bf1576104ee565b80631a43c338146109ff57806323b872dd14610a1457806327cfc0df14610a5757806327e916c314610ab15780632d414bdf14610ac6576104ee565b8063095ea7b3116104b8578063095ea7b3146107585780630c78932d1461079157806310119fcb146107ca5780631051db3414610965578063150b7a021461097a57806318160ddd146109d8576104ee565b806223de2914610513578062810b251461060a57806301ffc9a71461064057806306fdde0314610688578063081812fc14610712575b3480156104fa57600080fd5b50600054610511906002905b0462030d4033611bd3565b005b34801561051f57600080fd5b50610511600480360360c081101561053657600080fd5b600160a060020a03823581169260208101358216926040820135909216916060820135919081019060a08101608082013564010000000081111561057957600080fd5b82018360208201111561058b57600080fd5b803590602001918460018302840111640100000000831117156105ad57600080fd5b9193909290916020810190356401000000008111156105cb57600080fd5b8201836020820111156105dd57600080fd5b803590602001918460018302840111640100000000831117156105ff57600080fd5b509092509050611e3a565b34801561061657600080fd5b506105116004803603606081101561062d57600080fd5b5080359060208101359060400135611e74565b34801561064c57600080fd5b506106746004803603602081101561066357600080fd5b5035600160e060020a031916611fa9565b604080519115158252519081900360200190f35b34801561069457600080fd5b5061069d61209c565b6040805160208082528351818301528351919283929083019185019080838360005b838110156106d75781810151838201526020016106bf565b50505050905090810190601f1680156107045780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561071e57600080fd5b5061073c6004803603602081101561073557600080fd5b50356120d4565b60408051600160a060020a039092168252519081900360200190f35b34801561076457600080fd5b506106746004803603604081101561077b57600080fd5b50600160a060020a03813516906020013561213b565b34801561079d57600080fd5b506107a66121f3565b604051808260048111156107b657fe5b60ff16815260200191505060405180910390f35b3480156107d657600080fd5b506107fd600480360360208110156107ed57600080fd5b5035600160a060020a03166121f8565b60405180806020018060200180602001806020018060200186810386528b818151815260200191508051906020019060200280838360005b8381101561084d578181015183820152602001610835565b5050505090500186810385528a818151815260200191508051906020019060200280838360005b8381101561088c578181015183820152602001610874565b50505050905001868103845289818151815260200191508051906020019060200280838360005b838110156108cb5781810151838201526020016108b3565b50505050905001868103835288818151815260200191508051906020019060200280838360005b8381101561090a5781810151838201526020016108f2565b50505050905001868103825287818151815260200191508051906020019060200280838360005b83811015610949578181015183820152602001610931565b505050509050019a505050505050505050505060405180910390f35b34801561097157600080fd5b50610674612451565b34801561098657600080fd5b506105116004803603608081101561099d57600080fd5b600160a060020a038235811692602081013590911691604082013591908101906080810160608201356401000000008111156105cb57600080fd5b3480156109e457600080fd5b506109ed612456565b60408051918252519081900360200190f35b348015610a0b57600080fd5b50610511612460565b348015610a2057600080fd5b5061067460048036036060811015610a3757600080fd5b50600160a060020a03813581169160208101359091169060400135612471565b348015610a6357600080fd5b50610a8160048036036020811015610a7a57600080fd5b5035612499565b6040805194151585526020850193909352600160a060020a03909116838301526060830152519081900360800190f35b348015610abd57600080fd5b506107a661256e565b348015610ad257600080fd5b506107a660048036036020811015610ae957600080fd5b5035612573565b348015610afc57600080fd5b50610b1a60048036036020811015610b1357600080fd5b5035612717565b60405180836004811115610b2a57fe5b60ff1681526020018281526020019250505060405180910390f35b348015610b5157600080fd5b506109ed60048036036040811015610b6857600080fd5b50600160a060020a038135169060200135612762565b348015610b8a57600080fd5b50610b936127de565b6040805160ff9092168252519081900360200190f35b348015610bb557600080fd5b506107a66127e3565b348015610bca57600080fd5b506109ed60048036036020811015610be157600080fd5b5035600160a060020a03166127e8565b348015610bfd57600080fd5b5061073c60048036036020811015610c1457600080fd5b5035612803565b348015610c2757600080fd5b5061051160048036036020811015610c3e57600080fd5b503561282b565b348015610c5157600080fd5b50610c6f60048036036020811015610c6857600080fd5b50356128f5565b60405180846004811115610c7f57fe5b60ff168152602001838152602001828152602001935050505060405180910390f35b348015610cad57600080fd5b506109ed612a7e565b348015610cc257600080fd5b5061051160048036036020811015610cd957600080fd5b5035600160a060020a0316612a84565b348015610cf557600080fd5b506107a660048036036020811015610d0c57600080fd5b5035612a9c565b348015610d1f57600080fd5b506109ed60048036036060811015610d3657600080fd5b810190602081018135640100000000811115610d5157600080fd5b820183602082011115610d6357600080fd5b80359060200191846020830284011164010000000083111715610d8557600080fd5b919390929091602081019035640100000000811115610da357600080fd5b820183602082011115610db557600080fd5b80359060200191846020830284011164010000000083111715610dd757600080fd5b919350915035612b44565b348015610dee57600080fd5b506109ed60048036036020811015610e0557600080fd5b5035612bc6565b348015610e1857600080fd5b50610e3c60048036036040811015610e2f57600080fd5b5080359060200135612bfe565b60408051921515835260208301919091528051918290030190f35b348015610e6357600080fd5b506109ed60048036036020811015610e7a57600080fd5b5035612c3b565b348015610e8d57600080fd5b5061051160048036036040811015610ea457600080fd5b5080359060200135612cc2565b348015610ebd57600080fd5b506107a660048036036020811015610ed457600080fd5b5035612f1e565b348015610ee757600080fd5b50610f0e60048036036020811015610efe57600080fd5b5035600160a060020a031661300a565b60408051602080825283518183015283519192839290830191858101910280838360005b83811015610f4a578181015183820152602001610f32565b505050509050019250505060405180910390f35b348015610f6a57600080fd5b506109ed60048036036020811015610f8157600080fd5b5035600160a060020a0316613076565b348015610f9d57600080fd5b5061073c60048036036020811015610fb457600080fd5b5035613088565b348015610fc757600080fd5b506109ed60048036036020811015610fde57600080fd5b50356130e0565b348015610ff157600080fd5b5061100f6004803603602081101561100857600080fd5b5035613170565b604051808315151515815260200180602001828103825283818151815260200191508051906020019060200280838360005b83811015611059578181015183820152602001611041565b50505050905001935050505060405180910390f35b34801561107a57600080fd5b506109ed61326f565b34801561108f57600080fd5b506109ed600480360360408110156110a657600080fd5b8101906020810181356401000000008111156110c157600080fd5b8201836020820111156110d357600080fd5b803590602001918460208302840111640100000000831117156110f557600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929594936020810193503591505064010000000081111561114557600080fd5b82018360208201111561115757600080fd5b8035906020019184602083028401116401000000008311171561117957600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550613275945050505050565b3480156111c357600080fd5b50610674600480360360808110156111da57600080fd5b50803590602081013590604081013590606001356133b3565b3480156111ff57600080fd5b506106746004803603602081101561121657600080fd5b503561346f565b34801561122957600080fd5b506109ed6004803603602081101561124057600080fd5b5035600160a060020a0316613553565b34801561125c57600080fd5b506109ed6135bb565b34801561127157600080fd5b506105116004803603604081101561128857600080fd5b50803590602001356135f1565b3480156112a157600080fd5b506109ed600480360360208110156112b857600080fd5b5035600160a060020a0316613600565b3480156112d457600080fd5b506109ed600480360360208110156112eb57600080fd5b5035613612565b3480156112fe57600080fd5b506109ed6004803603602081101561131557600080fd5b5035600160a060020a0316613624565b34801561133157600080fd5b506109ed6004803603602081101561134857600080fd5b5035613636565b34801561135b57600080fd5b50610c6f6004803603602081101561137257600080fd5b5035613655565b34801561138557600080fd5b506109ed613733565b34801561139a57600080fd5b506109ed600480360360208110156113b157600080fd5b5035613747565b3480156113c457600080fd5b506107a6600480360360208110156113db57600080fd5b50356137a6565b3480156113ee57600080fd5b506105116004803603602081101561140557600080fd5b50356137b7565b34801561141857600080fd5b506109ed6004803603602081101561142f57600080fd5b5035600160a060020a03166137c5565b34801561144b57600080fd5b506107a66137d7565b34801561146057600080fd5b5061069d6137dc565b34801561147557600080fd5b506107a66004803603602081101561148c57600080fd5b5035613813565b34801561149f57600080fd5b506114cc600480360360408110156114b657600080fd5b50600160a060020a0381351690602001356138a8565b604051808060200180602001838103835285818151815260200191508051906020019060200280838360005b838110156115105781810151838201526020016114f8565b50505050905001838103825284818151815260200191508051906020019060200280838360005b8381101561154f578181015183820152602001611537565b5050505090500194505050505060405180910390f35b6105116139b4565b34801561157957600080fd5b506109ed613a03565b34801561158e57600080fd5b50610674600480360360408110156115a557600080fd5b50600160a060020a0381351690602001351515613a09565b3480156115c957600080fd5b50610674600480360360608110156115e057600080fd5b5080359060208101359060400135613a7b565b3480156115ff57600080fd5b506106746004803603604081101561161657600080fd5b50600160a060020a038135169060200135613c63565b34801561163857600080fd5b506105116004803603606081101561164f57600080fd5b5080359060208101359060400135600160a060020a0316611bd3565b34801561167757600080fd5b506109ed6004803603602081101561168e57600080fd5b5035613cc2565b3480156116a157600080fd5b5061073c600480360360208110156116b857600080fd5b5035613cd4565b3480156116cb57600080fd5b50610674600480360360208110156116e257600080fd5b5035613cef565b3480156116f557600080fd5b506106746004803603608081101561170c57600080fd5b600160a060020a0382358116926020810135909116916040820135919081019060808101606082013564010000000081111561174757600080fd5b82018360208201111561175957600080fd5b8035906020019184600183028401116401000000008311171561177b57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550613d4d945050505050565b3480156117c857600080fd5b50610511600480360360208110156117df57600080fd5b5035613e1c565b3480156117f257600080fd5b506106746004803603606081101561180957600080fd5b600160a060020a038235169160208101359181019060608101604082013564010000000081111561183957600080fd5b82018360208201111561184b57600080fd5b8035906020019184600183028401116401000000008311171561186d57600080fd5b509092509050613e65565b34801561188457600080fd5b506105116004803603606081101561189b57600080fd5b600160a060020a03823516916020810135918101906060810160408201356401000000008111156105cb57600080fd5b3480156118d757600080fd5b5061073c600480360360208110156118ee57600080fd5b5035613f02565b34801561190157600080fd5b506109ed6004803603602081101561191857600080fd5b5035600160a060020a0316613f1a565b34801561193457600080fd5b5061069d6004803603602081101561194b57600080fd5b5035613f2c565b34801561195e57600080fd5b506109ed613fd5565b34801561197357600080fd5b50610b1a6004803603602081101561198a57600080fd5b5035613fdb565b34801561199d57600080fd5b50610c6f600480360360208110156119b457600080fd5b50356140bd565b3480156119c757600080fd5b506109ed600480360360208110156119de57600080fd5b5035614176565b3480156119f157600080fd5b506109ed60048036036040811015611a0857600080fd5b50600160a060020a0381358116916020013516614184565b348015611a2c57600080fd5b506107a6614207565b348015611a4157600080fd5b506109ed61420c565b348015611a5657600080fd5b50611a7a60048036036040811015611a6d57600080fd5b5080359060200135614212565b60408051600160a060020a0390941684526020840192909252151582820152519081900360600190f35b348015611ab057600080fd5b5061067460048036036040811015611ac757600080fd5b50600160a060020a038135811691602001351661429c565b348015611aeb57600080fd5b506109ed60048036036020811015611b0257600080fd5b5035600160a060020a03166142ca565b61051160048036036060811015611b2857600080fd5b50803590602081013590604001356142dc565b348015611b4757600080fd5b50611b6b60048036036040811015611b5e57600080fd5b50803590602001356144a7565b60405180836004811115611b7b57fe5b60ff168152602001806020018281038252838181518152602001915080519060200190602002808383600083811015611059578181015183820152602001611041565b348015611bca57600080fd5b506109ed614598565b600054831115611c175760405160e560020a62461bcd028152600401808060200182810382526038815260200180615b516038913960400191505060405180910390fd5b60005a600e54600f54600054604080518981526020808b028201019091529394509192909190606090888015611c57578160200160208202803883390190505b50905060005b88811015611c9e576000805482908110611c7357fe5b90600052602060002001548282815181101515611c8c57fe5b60209081029091010152600101611c5d565b505b865a1015611cf257600e849055600f83905560005a336000908152600960209081526040808320805494909a03938401909955600a90529690962080543a90970290960190955550611e359350505050565b6000611cfd85612a9c565b6004811115611d0857fe5b14611e2a576000611d18856145a6565b9050600160005b84861015611df357895a1015611d7c57600e879055600f86905560005a336000908152600960209081526040808320805494909d03938401909c55600a90529990992080543a909a0290990190985550611e359650505050505050565b8351861015611da4578386815181101515611d9357fe5b906020019060200201519050611dc0565b6000805487908110611db257fe5b906000526020600020015490505b8087811515611dcb57fe5b061515611ddb5760009150611df3565b82811115611de857611df3565b600190950194611d1f565b8115611e1057611e05878a60016145fd565b600190940193611e22565b60008781526006602052604090208190555b600195505050505b600284019350611ca0565b505050565b60405160e560020a62461bcd02815260040180806020018281038252602d815260200180615a3c602d913960400191505060405180910390fd5b600083815260126020526040902080548310611ec45760405160e560020a62461bcd028152600401808060200182810382526029815260200180615bb06029913960400191505060405180910390fd5b60008184815481101515611ed457fe5b600091825260209091206002909102018054909150600160a060020a03163314611f325760405160e560020a62461bcd028152600401808060200182810382526033815260200180615a096033913960400191505060405180910390fd5b6040518490869033907f39130f3803e463bedc98152c0506f90417cef1d5a3b4f459e04a20119f18752190600090a4600181018390556040805184815290518591879133917f9bf2a9ff58fc356bf424a89b4c8081a88dfc0a024a85b1a13b4f8c656fdfa020919081900360200190a45050505050565b60007f01ffc9a700000000000000000000000000000000000000000000000000000000600160e060020a031983161415611fe557506001612097565b7f80ac58cd00000000000000000000000000000000000000000000000000000000600160e060020a03198316141561201f57506001612097565b7f5b5e139f00000000000000000000000000000000000000000000000000000000600160e060020a03198316141561205957506001612097565b7f780e9d6300000000000000000000000000000000000000000000000000000000600160e060020a03198316141561209357506001612097565b5060005b919050565b60408051808201909152600c81527f5072696d65206e756d626572000000000000000000000000000000000000000060208201525b90565b60006120df82614702565b151561211f5760405160e560020a62461bcd028152600401808060200182810382526027815260200180615b896027913960400191505060405180910390fd5b50600090815260026020526040902054600160a060020a031690565b60006121473383614749565b15156121875760405160e560020a62461bcd028152600401808060200182810382526044815260200180615c6b6044913960600191505060405180910390fd5b6000828152600260209081526040918290208054600160a060020a031916600160a060020a03871690811790915582518581529251909233927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92592918290030190a35060015b92915050565b600281565b606080606080606060006004600088600160a060020a0316600160a060020a0316815260200190815260200160002090508080549050604051908082528060200260200182016040528015612257578160200160208202803883390190505b5081546040805182815260208084028201019091529197508015612285578160200160208202803883390190505b50815460408051828152602080840282010190915291965080156122b3578160200160208202803883390190505b50815460408051828152602080840282010190915291955080156122e1578160200160208202803883390190505b508154604080518281526020808402820101909152919450801561230f578160200160208202803883390190505b5091506000805b8254811015612436576000838281548110151561232f57fe5b9060005260206000200154905060008060008061234b85612499565b929650909450925090506001841515141561242557848d8881518110151561236f57fe5b602090810290910101528a5182908c908990811061238957fe5b600160a060020a039092166020928302909101909101528b5183908d90899081106123b057fe5b60209081029091010152895181908b90899081106123ca57fe5b9060200190602002018181525050806010600084600160a060020a0316600160a060020a03168152602001908152602001600020541015898881518110151561240f57fe5b9115156020928302909101909101526001909601955b505060019093019250612316915050565b50808752808652808552808452808352505091939590929450565b600190565b6001546000540190565b60005461246f90600290610506565b565b600061248f8484846020604051908101604052806000815250613d4d565b90505b9392505050565b6000818152601260205260408120819081908190818080805b845481101561253557600085828154811015156124cb57fe5b9060005260206000209060020201905083816001015411801561250b575060018101548154600160a060020a031660009081526010602052604090205410155b1561252c57600181015481549295509350600160a060020a03909116915083905b506001016124b2565b5081151561255457506000965086955085945084935061256792505050565b6001975091955090935091506125679050565b9193509193565b600081565b6000816002141561258657506000612097565b600061259183612a9c565b905060048160048111156125a157fe5b141561269c576000838152600560205260408120546125bf906147cc565b60005465ffffffffffff91909116915060028202106125e357600292505050612097565b6000806125f08687614807565b9092509050801515612609576002945050505050612097565b60015b83811161268e576000612655600083870381548110151561262957fe5b9060005260206000200154600084880181548110151561264557fe5b9060005260206000200154614807565b9350905082151561266f5760029650505050505050612097565b8381106126855760009650505050505050612097565b5060010161260c565b506004945050505050612097565b60038160048111156126aa57fe5b14806126c1575060028160048111156126bf57fe5b145b156126d0576002915050612097565b60008160048111156126de57fe5b14156126ee576000915050612097565b60018160048111156126fc57fe5b141561270c576001915050612097565b600080fd5b50919050565b600080826003141561272f575060049050600161275d565b827211a000000000000000000000000000000000011415612756575060049050608d61275d565b5060009050805b915091565b600160a060020a0382166000908152600460205260408120805483106127bc5760405160e560020a62461bcd028152600401808060200182810382526028815260200180615a946028913960400191505060405180910390fd5b80838154811015156127ca57fe5b906000526020600020015491505092915050565b600090565b600381565b600160a060020a031660009081526004602052604090205490565b600780548290811061281157fe5b600091825260209091200154600160a060020a0316905081565b3360009081526010602052604090205481111561287c5760405160e560020a62461bcd028152600401808060200182810382526045815260200180615d016045913960600191505060405180910390fd5b33600081815260106020526040808220805485900390555183156108fc0291849190818181858888f193505050501580156128bb573d6000803e3d6000fd5b5060408051828152905133917f06097061aeda806b5e9cb4133d9899f332ff0913956567fc0f7ea15e3d19947c919081900360200190a250565b60008060008061290485612a9c565b9050600081600481111561291457fe5b141561292a575060009250829150819050612a77565b600181600481111561293857fe5b141561294f57506001925060009150819050612a77565b600281600481111561295d57fe5b141561297457506002925060009150819050612a77565b600381600481111561298257fe5b141561299957506002925060009150819050612a77565b60048160048111156129a757fe5b141561270c576000858152600560205260408120546129c5906147cc565b65ffffffffffff1690508015156129e8575060009350839250829150612a779050565b60005460001901811415612a0957506002935060009250829150612a779050565b60008060018303815481101515612a1c57fe5b9060005260206000200154905060008083600101815481101515612a3c57fe5b906000526020600020015490508781038289031415612a6657600496509094509250612a77915050565b600096509094509250612a77915050565b9193909250565b600f5481565b600054612a99906002900462030d4083611bd3565b50565b6000818152600560205260408120548190612ab690614849565b90506003816003811115612ac657fe5b1415612ad6576004915050612097565b6002816003811115612ae457fe5b1415612af4576003915050612097565b6000816003811115612b0257fe5b1415612b2657600e54831015612b1c576000915050612097565b6002915050612097565b6001816003811115612b3457fe5b141561270c576000915050612097565b6000612b4f8261282b565b612bbc86868080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525050604080516020808a0282810182019093528982529093508992508891829185019084908082843760009201919091525061327592505050565b9695505050505050565b6000811515612bd757506000612097565b600182161515612be957506002612097565b50600081815260066020526040902054612097565b600080835b838111612c2b57612c138161346f565b15612c2357600192509050612c34565b600101612c03565b50600091508190505b9250929050565b60008054821015612c66576000805483908110612c5457fe5b90600052602060002001549050612097565b60015460005401821015612c88576000546001805490918403908110612c5457fe5b60405160e560020a62461bcd028152600401808060200182810382526027815260200180615d466027913960400191505060405180910390fd5b600181118015612cd157508181105b1515612d115760405160e560020a62461bcd0281526004018080602001828103825260528152602001806158706052913960600191505060405180910390fd5b6000828152600560205260409020546002612d2b82614849565b6003811115612d3657fe5b14612d755760405160e560020a62461bcd02815260040180806020018281038252603f815260200180615831603f913960400191505060405180910390fd5b8183811515612d8057fe5b0615612dc05760405160e560020a62461bcd028152600401808060200182810382526048815260200180615c236048913960600191505060405180910390fd5b6000612dcb82614885565b600160a060020a0381166000908152600d6020908152604080832080546001908101909155338452600c909252822080549091019055909150612e0f908590614891565b612e1a8460016148bf565b6000612e25836147cc565b65ffffffffffff1690506001808054905003811015612e895760018054600091906000198101908110612e5457fe5b90600052602060002001549050612e6b8183614916565b80600183815481101515612e7b57fe5b600091825260209091200155505b60018054600091906000198101908110612e9f57fe5b6000918252602090912001556001805490612ebe906000198301615778565b50604080518581526020810183905281513392600160a060020a0386169289927fb8dabc4b2361d8dd0d9ba40f9d9876f846d2717a49c1efac9f44ef6eafa98b1c929181900390910190a450505060009182526006602052604090912055565b60006028821580612f2f5750826001145b80612f3a5750826004145b15612f49576000915050612097565b8260021480612f585750826003145b15612f67576004915050612097565b60001983015b600181161515612f805760029004612f6d565b6000612f8a614972565b905060005b83811015612ffe57600080612fa5858986614a60565b9092509050801515612fc05760029650505050505050612097565b811515612fd65760009650505050505050612097565b505061080060806158f993909302928304909218620118c70291820490911890600101612f8f565b50600395945050505050565b600160a060020a03811660009081526004602090815260409182902080548351818402810184019094528084526060939283018282801561306a57602002820191906000526020600020905b815481526020019060010190808311613056575b50505050509050919050565b60106020526000908152604090205481565b60008061309483613f02565b9050600160a060020a03811615156121ed5760405160e560020a62461bcd028152600401808060200182810382526022815260200180615caf6022913960400191505060405180910390fd5b60008181526012602052604081208054825b8181101561316857825460009084908390811061310b57fe5b6000918252602090912060029091020154600160a060020a03161480156131515750828181548110151561313b57fe5b9060005260206000209060020201600101546000145b15613160579250612097915050565b6001016130f2565b509392505050565b60408051600080825260208201909252821515613190576000915061275d565b6000835b80600114156131a957506001925061275d9050565b60006131b482612bc6565b90508015156131f25760046131c883612a9c565b60048111156131d357fe5b14156131e05750806131ed565b506000935061275d915050565b613231565b60046131fd82612a9c565b600481111561320857fe5b146132315761321681612bc6565b905080151561322c57506000935061275d915050565b6131f2565b808281151561323c57fe5b604080516020019052600185018087529491900492508190859085811061325f57fe5b6020908102909101015250613194565b60015490565b80518251600091146132bb5760405160e560020a62461bcd028152600401808060200182810382526047815260200180615abc6047913960600191505060405180910390fd5b506000805b83518110156133ac57600083828151811015156132d957fe5b906020019060200201519050600085838151811015156132f557fe5b60209081029091018101516000818152601290925260409091208054919250908310156133a1576000818481548110151561332c57fe5b600091825260209091206002909102018054909150600160a060020a031633141561339f576040518490849033907f39130f3803e463bedc98152c0506f90417cef1d5a3b4f459e04a20119f18752190600090a48054600160a060020a0319168155600060018083019190915595909501945b505b5050506001016132c0565b5092915050565b60006133bf3386614749565b15156133ff5760405160e560020a62461bcd02815260040180806020018281038252604e815260200180615b03604e913960600191505060405180910390fd5b60008581526011602090815260409182902086905581518681529151879233927ffa015edf7f3899369797d1c3ae2604af878f2a4f9c44d63cb0d592e2620be28b92918290030190a360001983146134635761345c858484613a7b565b9050613467565b5060005b949350505050565b6000805a9050600061348084612a9c565b9050600281600481111561349057fe5b1461349e5760009250613516565b6134a784612f1e565b905060008160048111156134b757fe5b14156134d1576134c88460016148bf565b60009250613516565b60038160048111156134df57fe5b1415613511576134f1843360006145fd565b336000908152600b60205260409020805460019081019091559250613516565b600092505b60005a336000908152600960209081526040808320805494909703938401909655600a90529390932080543a909402909301909255509092915050565b6000600160a060020a038216151561359f5760405160e560020a62461bcd0281526004018080602001828103825260258152602001806159236025913960400191505060405180910390fd5b50600160a060020a031660009081526004602052604090205490565b60018054600091906135cb614972565b8115156135d457fe5b068154811015156135e157fe5b9060005260206000200154905090565b6135fc828233611bd3565b5050565b60096020526000908152604090205481565b60116020526000908152604090205481565b600b6020526000908152604090205481565b600080548290811061364457fe5b600091825260209091200154905081565b6000808083151561366e57506000915081905080612a77565b60001984141561368657506000915081905080612a77565b600061369185612a9c565b905060008160048111156136a157fe5b14156136b7575060009250829150819050612a77565b6000806136c687600101614bdb565b9250905081156136eb576136da8383614c3f565b955093506000199250612a77915050565b6000806136fa60018a03614bdb565b9250905081156137205761370e8583614c3f565b9750955060019450612a779350505050565b5060009889985088975095505050505050565b60008054819060001981019081106135e157fe5b6000818152601260205260408120815b815481101561379f57815460009083908390811061377157fe5b6000918252602090912060029091020154600160a060020a031614613797576001909201915b600101613757565b5050919050565b60006121ed612a9c61381384614c5b565b612a998162030d4033611bd3565b600d6020526000908152604090205481565b600481565b60408051808201909152600581527f5052494d45000000000000000000000000000000000000000000000000000000602082015290565b60006effffffffffffffffffffffffffffff8216821461383557506002612097565b8180026005810260048101600061384b82614d99565b5090508015613861576004945050505050612097565b600319830160008482111561387857506000613885565b61388182614d99565b5090505b828061388e5750805b61389957600061389c565b60045b98975050505050505050565b60008181526012602090815260409182902080548351818152818402810190930190935260609283929080156138e8578160200160208202803883390190505b5081546040805182815260208084028201019091529194508015613916578160200160208202803883390190505b5091506000805b82548110156139a4576000838281548110151561393657fe5b600091825260209091206002909102018054909150600160a060020a038981169116141561399b5781868481518110151561396d57fe5b602090810290910101526001810154855186908590811061398a57fe5b602090810290910101526001909201915b5060010161391d565b5080845280835250509250929050565b33600081815260106020908152604091829020805434908101909155825190815291517f939e51ac2fd009b158d6344f7e68a83d8d18d9b0cc88cf514aac6aaa9cad2a189281900390910190a2565b600e5481565b336000818152600360209081526040808320600160a060020a038716808552908352818420805460ff1916871515908117909155825190815291519394909390927f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31928290030190a350600192915050565b60008381526011602052604081205481613a9486613f02565b9050811580613aaa5750600160a060020a038116155b15613aba57600092505050612492565b6000868152601260205260409020805485871180613ad9575081548610155b15613aeb576000945050505050612492565b865b868111158015613afc57508181105b15613c555760008382815481101515613b1157fe5b6000918252602090912060029091020180546001820154919250600160a060020a031690878110801590613b5d5750600160a060020a0382166000908152601060205260409020548111155b15613c4a57600160a060020a0380831660009081526010602052604080822080548590039055918916815220805482019055613b998c83614891565b838c83600160a060020a03167f39130f3803e463bedc98152c0506f90417cef1d5a3b4f459e04a20119f18752160405160405180910390a48b82600160a060020a031688600160a060020a03167f628b76c34eae83328d4bbc51f6cdd8b2091db7716b9c2e3e4e8cedfd3dbd21798785604051808381526020018281526020019250505060405180910390a450508054600160a060020a031916815560006001918201559550612492945050505050565b505050600101613aed565b506000945050505050612492565b6000613c6f3383614749565b1515613caf5760405160e560020a62461bcd028152600401808060200182810382526045815260200180615d6d6045913960600191505060405180910390fd5b613cb98284614891565b50600192915050565b60009081526012602052604090205490565b600260205260009081526040902054600160a060020a031681565b6000613cfb3383614749565b1515613d3b5760405160e560020a62461bcd02815260040180806020018281038252604a815260200180615bd9604a913960600191505060405180910390fd5b613d458233614891565b506001919050565b600084600160a060020a0316613d6284613f02565b600160a060020a031614613daa5760405160e560020a62461bcd02815260040180806020018281038252603c815260200180615db2603c913960400191505060405180910390fd5b613db43384614749565b1515613df45760405160e560020a62461bcd02815260040180806020018281038252604d81526020018061596e604d913960600191505060405180910390fd5b613e11838584336020604051908101604052806000815250614db5565b506001949350505050565b613e258161346f565b1515612a995760405160e560020a62461bcd02815260040180806020018281038252604e8152602001806159bb604e913960600191505060405180910390fd5b6000613e713385614749565b1515613eb15760405160e560020a62461bcd028152600401808060200182810382526045815260200180615d6d6045913960600191505060405180910390fd5b613e11848685858080601f016020809104026020016040519081016040528093929190818152602001838380828437600092018290525060408051602081019091529081523393509150614db59050565b6000818152600560205260408120546121ed90614885565b600a6020526000908152604090205481565b6060613f3782614702565b1515613f4257600080fd5b606060405190810160405280602681526020016159486026913980519091506000835b8015613f7b5760019190910190600a9004613f65565b50836000198201600a0a60005b83811015613fca5760008284811515613f9d57fe5b046030019050808287016020890101538284811515613fb857fe5b069350600a8304925050600101613f88565b505050018152919050565b60005490565b6000806000613fe984612a9c565b90506004816004811115613ff957fe5b141561403657600084815260056020526040902054614017906147cc565b60010165ffffffffffff16915061402d82612a9c565b925061275d9050565b600081600481111561404457fe5b141561405757506000915081905061275d565b600281600481111561406557fe5b14156140795750600291506000905061275d565b600381600481111561408757fe5b141561409b5750600291506000905061275d565b60018160048111156140a957fe5b141561270c5750600191506000905061275d565b600080808315156140d657506000915081905080612a77565b60006140e185612a9c565b905060008160048111156140f157fe5b1415614107575060009250829150819050612a77565b6000614115600187036152b5565b9050801515614130575060009350839250829150612a779050565b61413c600187036152d4565b93506000614149856152b5565b9050801515614162575060009450849250612a77915050565b61416b856152d4565b959794965050505050565b600180548290811061364457fe5b600160a060020a03821660009081526004602052604081208054829190825b818110156141fc57600083828154811015156141bb57fe5b60009182526020808320909101548083526002909152604090912054909150600160a060020a0390811690881614156141f357938401935b506001016141a3565b509195945050505050565b600181565b60075490565b60008281526012602052604081208054829182918291908690811061423357fe5b6000918252602090912060029091020180546001820154600160a060020a03909116955093509050831580159061426957508215155b151561427457600080fd5b5050600160a060020a0382166000908152601060205260409020549194909350908311159150565b600160a060020a03918216600090815260036020908152604080832093909416825291909152205460ff1690565b600c6020526000908152604090205481565b6142e46139b4565b600082116143265760405160e560020a62461bcd028152600401808060200182810382526030815260200180615cd16030913960400191505060405180910390fd5b60028310156143695760405160e560020a62461bcd02815260040180806020018281038252603e815260200180615dee603e913960400191505060405180910390fd5b6000838152601260205260408120805490919083141561438a575081614405565b8154831080156143c2575081546000908390859081106143a657fe5b6000918252602090912060029091020154600160a060020a0316145b80156143ed575081838154811015156143d757fe5b9060005260206000209060020201600101546000145b156143f9575081614405565b614402856130e0565b90505b815481141561441f57815461441d836001830161579c565b505b6000828281548110151561442f57fe5b60009182526020918290206002909102018054600160a060020a0319163390811782556001820188905560408051898152905192945085938a937f9bf2a9ff58fc356bf424a89b4c8081a88dfc0a024a85b1a13b4f8c656fdfa0209281900390910190a461449e868384613a7b565b50505050505050565b60006060826040519080825280602002602001820160405280156144d5578160200160208202803883390190505b509050838460010110156144ec5760029150612c34565b6144f584612a9c565b9150600082600481111561450557fe5b14156145145760009150612c34565b8360005b8481101561458f57600061452e836001016152b5565b61453957600061453c565b60045b9050600081600481111561454c57fe5b141561455f575060009350612c34915050565b61456b836001016152d4565b925082848381518110151561457c57fe5b6020908102909101015250600101614518565b50509250929050565b6000805481906135cb614972565b60006000198214156145c957506fffffffffffffffffffffffffffffffff612097565b5080600260018201045b818110156127115780915060018182858115156145ec57fe5b60029390930a9204010490506145d3565b614626838261460e57600154614612565b6000545b8361461e576002614621565b60035b61537b565b801561469357600080546040519091339186917f429cfb15033e9679c0e51b366408258dd0378c53a917ce9860785a6b9d11277b91a4600080546001810182559080527f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563018390556146f8565b600154604051339085907fe93558c94695db71339118415d1cde7ce17abe11110eb3b3b862ed9539da650690600090a46001805480820182556000919091527fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6018390555b611e358383614891565b600081815260056020526040812054819061471c90614849565b9050600281600381111561472c57fe5b14806124925750600381600381111561474157fe5b149392505050565b60008061475583613f02565b905083600160a060020a031681600160a060020a031614806147905750600083815260026020526040902054600160a060020a038581169116145b806134675750600160a060020a0380821660009081526003602090815260408083209388168352929052205460ff161515600114949350505050565b75010000000000000000000000000000000000000000007affffffffffff000000000000000000000000000000000000000000821604919050565b60008083151561481d5750600090506001612c34565b83830283858281151561482c57fe5b04141561483e57915060019050612c34565b915060009050612c34565b60007401000000000000000000000000000000000000000074ff000000000000000000000000000000000000000083160460038111156121ed57fe5b600160a060020a031690565b6135fc8282602060405190810160405280600081525060006020604051908101604052806000815250614db5565b60008281526005602052604090205474ff0000000000000000000000000000000000000000191660a08260038111156148f457fe5b60009485526005602052604090942060ff90941660029190910a021790915550565b600091825260056020526040909120805465ffffffffffff929092167501000000000000000000000000000000000000000000027affffffffffff00000000000000000000000000000000000000000019909216919091179055565b600061497c613733565b60015441424344323a33855a604051602001808c81526020018b81526020018a600160a060020a0316600160a060020a03166c0100000000000000000000000002815260140189815260200188815260200187815260200186600160a060020a0316600160a060020a03166c0100000000000000000000000002815260140185815260200184600160a060020a0316600160a060020a03166c010000000000000000000000000281526014018381526020018281526020019b5050505050505050505050506040516020818303038152906040528051906020012060019004905090565b600080600180861614614a6f57fe5b8460018503811515614a7d57fe5b0615614a8557fe5b60008560018603811515614a9557fe5b049050614aa1816152b5565b1515614aa957fe5b6001811015614ab457fe5b6004851015614aca576000809250925050614bd3565b60006004860385811515614ada57fe5b0660020190506000614aed828989615413565b94509050831515614b075760008094509450505050614bd3565b8060011480614b1857506001870381145b15614b2c5760018094509450505050614bd3565b60001987018814614bc757614b418182614807565b94509050831515614b5b5760008094509450505050614bd3565b8681811515614b6657fe5b069050614b74886002614807565b9098509350831515614b8f5760008094509450505050614bd3565b8060011415614ba8576000600194509450505050614bd3565b60018703811415614bc25760018094509450505050614bd3565b614b2c565b60006001945094505050505b935093915050565b600080821515614bf05750600090508061275d565b60015b6001841115614c355760010160008185811515614c0c57fe5b0690508015614c21575091506000905061275d565b8185811515614c2c57fe5b04945050614bf3565b9360019350915050565b600060018215151415614c535750816121ed565b5060006121ed565b600080614c6b838663ffffffff16565b90506000816004811115614c7b57fe5b1415614c8b576000915050612492565b6000614c9a848663ffffffff16565b90506000816004811115614caa57fe5b1415614cbb57600092505050612492565b6001826004811115614cc957fe5b1415614cda57600192505050612492565b6001816004811115614ce857fe5b1415614cf957600192505050612492565b6002826004811115614d0757fe5b1480614d1e57506002816004811115614d1c57fe5b145b15614d2e57600292505050612492565b6003826004811115614d3c57fe5b1480614d5357506003816004811115614d5157fe5b145b15614d6357600392505050612492565b6004826004811115614d7157fe5b148015614d8957506004816004811115614d8757fe5b145b1561270c57600492505050612492565b6000806000614da7846145a6565b808002949094149492505050565b6000614dc086613f02565b9050600160a060020a0383161515614dd6578092505b84600160a060020a031681600160a060020a03161415614df657506152ae565b600160a060020a03811615614e0e57614e0e866154ca565b600160a060020a038516600090815260046020526040902054614e34908790879061559e565b600160a060020a0380861660009081526004602090815260408083208054600181018255908452828420018a905589835260029091529020541615614e905760008681526002602052604090208054600160a060020a03191690555b60008681526011602052604090205415614ef55760008681526011602090815260408083208390558051928352518892600160a060020a038916927ffa015edf7f3899369797d1c3ae2604af878f2a4f9c44d63cb0d592e2620be28b92918290030190a35b614efe85615618565b614f07856156aa565b15615261576000806150108788600160a060020a031663150b7a02905060e060020a0287868c8b6040516024018085600160a060020a0316600160a060020a0316815260200184600160a060020a0316600160a060020a0316815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b83811015614fa4578181015183820152602001614f8c565b50505050905090810190601f168015614fd15780820380516001836020036101000a031916815260200191505b5060408051601f19818403018152919052602081018051600160e060020a0316600160e060020a031990991698909817909752506156b0945050505050565b9092509050811580615043575060405180602f6158c28239602f0190506040518091039020600160e060020a0319168114155b1561525e5760408051600160a060020a0385166024820152604481018a90526000606480830191909152825180830390910181526084909101909152602081018051600160e060020a03167fc0ee0b8a000000000000000000000000000000000000000000000000000000001790526150bd9088906156b0565b909250905081151561525e5761524a8788600160a060020a03166223de29905060e060020a0287868b8d8c8b6040516024018087600160a060020a0316600160a060020a0316815260200186600160a060020a0316600160a060020a0316815260200185600160a060020a0316600160a060020a031681526020018481526020018060200180602001838103835285818151815260200191508051906020019080838360005b8381101561517b578181015183820152602001615163565b50505050905090810190601f1680156151a85780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b838110156151db5781810151838201526020016151c3565b50505050905090810190601f1680156152085780820380516001836020036101000a031916815260200191505b5060408051601f19818403018152919052602081018051600160e060020a0316600160e060020a0319909c169b909b17909a52506156b0975050505050505050565b909250905081151561525e575050506152ae565b50505b84600160a060020a031681600160a060020a03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef886040518082815260200191505060405180910390a3505b5050505050565b60008115156152c657506000612097565b506000198101811615612097565b60008115156153175760405160e560020a62461bcd02815260040180806020018281038252602b815260200180615a69602b913960400191505060405180910390fd5b60005b826001141561532a579050612097565b600183161561536d5760405160e560020a62461bcd0281526004018080602001828103825260328152602001806158f16032913960400191505060405180910390fd5b60029092049160010161531a565b6000838152600560205260409020547affffffffffff0000000000000000000000000000000000000000001916750100000000000000000000000000000000000000000065ffffffffffff8416021774ff0000000000000000000000000000000000000000191660a08260038111156153f057fe5b60009586526005602052604090952060ff90951660029190910a02179092555050565b60008082151561542857506000905080614bd3565b6000838681151561543557fe5b069550600192505b60008511156154bd576001851615615481576154598387614807565b9093509050801515615472575060009150819050614bd3565b838381151561547d57fe5b0692505b61548b8687614807565b90965090508015156154a4575060009150819050614bd3565b83868115156154af57fe5b06955060029094049361543d565b6001915050935093915050565b600081815260056020526040812054906004816154e684614885565b600160a060020a0316600160a060020a0316815260200190815260200160002090506000615513836156d6565b64ffffffffff169050600082600184805490500381548110151561553357fe5b9060005260206000200154905080838381548110151561554f57fe5b6000918252602090912001556155658183615718565b82546000908490600019810190811061557a57fe5b6000918252602090912001558254615596846000198301615778565b505050505050565b6000928352600560205260409092208054600160a060020a031916600160a060020a0392909216919091177affffffffffffffffffffffffffffffffffffffffffffffffffffff167b0100000000000000000000000000000000000000000000000000000064ffffffffff90931692909202919091179055565b600160a060020a038116158015906156465750600160a060020a038116600090815260086020526040902054155b15612a995760078054600160a060020a0383166000818152600860205260408120839055600183018455929092527fa66cc928b5edb82af9bd49922954155ab7b0942694bea4ce44661d9a8736c688018054600160a060020a031916909117905550565b3b151590565b6000806156bb6157c8565b8351602082828760008a5af191519196919550909350505050565b7b010000000000000000000000000000000000000000000000000000007affffffffffffffffffffffffffffffffffffffffffffffffffffff19821604919050565b600091825260056020526040909120805464ffffffffff929092167b01000000000000000000000000000000000000000000000000000000027affffffffffffffffffffffffffffffffffffffffffffffffffffff909216919091179055565b815481835581811115611e3557600083815260209020611e359181019083016157e7565b815481835581811115611e3557600202816002028360005260206000209182019101611e359190615805565b6020604051908101604052806001906020820280388339509192915050565b6120d191905b8082111561580157600081556001016157ed565b5090565b6120d191905b80821115615801578054600160a060020a03191681556000600182015560020161580b56fe64697370726f766550726f6261626c655072696d65206572726f723a2074686174207072696d65206973206e6f7420612070726f6261626c65207072696d6564697370726f766550726f6261626c655072696d65206572726f723a2064697669736f72206d7573742062652067726561746572207468616e203120616e6420736d616c6c6572207468616e207072696d656f6e455243373231526563656976656428616464726573732c616464726573732c75696e743235362c6279746573296c6f67326f66506f7765724f6632206572726f723a20617267756d656e74206973206e6f74206120706f776572206f66203262616c616e63654f66206572726f723a206f776e6572206d6179206e6f742062652030783068747470733a2f2f65746865727072696d652e6a65736275732e636f6d2f237365617263683a736166655472616e7366657246726f6d206572726f723a20796f7520646f206e6f74206861766520617070726f76616c2066726f6d20746865206f776e6572206f662074686174207072696d65636c61696d50726f6261626c655072696d65206572726f723a2074686174206e756d626572206973206e6f74207072696d65206f722068617320616c7265616479206265656e20636c61696d65646d6f646966794275794f72646572206572726f723a20796f7520646f206e6f74206f776e207468617420627579206f7264657245746865725072696d6520636f6e74726163742073686f756c64206e6f74207265636569766520746f6b656e736c6f67326f66506f7765724f6632206572726f723a2030206973206e6f74206120706f776572206f662032746f6b656e4f664f776e65724279496e6465783a20696e646578206f7574206f6620626f756e647374727943616e63656c4275794f7264657273206572726f723a20696e76616c696420696e7075742c2061727261797320617265206e6f74207468652073616d65206c656e67746863726561746553656c6c4f72646572206572726f723a20796f7520646f206e6f742068617665206f776e657273686970206f66206f7220617070726f76616c20666f722074686174207072696d65636f6d7075746557697468506172616d73206572726f723a205f7072696d6573546f4d656d6f72697a65206f7574206f6620626f756e6473676574417070726f766564206572726f723a207072696d6520646f6573206e6f742065786973746d6f646966794275794f72646572206572726f723a20696e646578206f7574206f6620626f756e647374616b654f776e657273686970206572726f723a20796f7520646f206e6f74206861766520617070726f76616c2066726f6d20746865206f776e6572206f662074686174207072696d6564697370726f766550726f6261626c655072696d65206572726f723a2074686174207072696d65206973206e6f7420646976697369626c6520627920746861742064697669736f72617070726f7665206572726f723a20796f7520646f206e6f74206861766520617070726f76616c2066726f6d20746865206f776e6572206f662074686174207072696d656f776e65724f66206572726f723a206f776e65722069732073657420746f203078306372656174654275794f72646572206572726f723a20626964206d7573742062652067726561746572207468616e203077697468647261774574686572206572726f723a20696e73756666696369656e742062616c616e636520746f2077697468647261772074686174206d756368206574686572746f6b656e4279496e646578206572726f723a20696e646578206f7574206f6620626f756e64737472616e73666572206572726f723a20796f7520646f206e6f74206861766520617070726f76616c2066726f6d20746865206f776e6572206f662074686174207072696d65736166655472616e7366657246726f6d206572726f723a2066726f6d206164647265737320646f6573206e6f74206f776e2074686174207072696d656372656174654275794f72646572206572726f723a207072696d65206d7573742062652067726561746572207468616e206f7220657175616c20746f2032a165627a7a72305820467f2a18764a16869420c15c1d1c650dfd782698a5ffe6430baa42ccfab90be40029608060405234801561001057600080fd5b50604051602080610c168339810180604052602081101561003057600080fd5b505160008054600160a060020a03909216600160a060020a0319909216919091179055610bb4806100626000396000f3fe608060405234801561001057600080fd5b50600436106100c6576000357c0100000000000000000000000000000000000000000000000000000000900480636fbaa1211161008e5780636fbaa1211461026d578063c49d9ff814610275578063df95fd4e14610307578063e07a0baa14610324578063e8cc478f1461034a578063ec079aa814610352576100c6565b8063246135f1146100cb5780632fdf15d5146100fa5780633157506a14610133578063451548f414610152578063641f4e83146101fd575b600080fd5b6100e8600480360360208110156100e157600080fd5b5035610378565b60408051918252519081900360200190f35b6101176004803603602081101561011057600080fd5b5035610397565b60408051600160a060020a039092168252519081900360200190f35b6101506004803603602081101561014957600080fd5b50356103b2565b005b61016f6004803603602081101561016857600080fd5b503561055d565b60408051600160a060020a0385168152908101829052606060208083018281528551928401929092528451608084019186019080838360005b838110156101c05781810151838201526020016101a8565b50505050905090810190601f1680156101ed5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b6101506004803603604081101561021357600080fd5b81019060208101813564010000000081111561022e57600080fd5b82018360208201111561024057600080fd5b8035906020019184600183028401116401000000008311171561026257600080fd5b919350915035610696565b6100e86108ce565b6102926004803603602081101561028b57600080fd5b50356108d5565b6040805160208082528351818301528351919283929083019185019080838360005b838110156102cc5781810151838201526020016102b4565b50505050905090810190601f1680156102f95780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6101176004803603602081101561031d57600080fd5b503561097c565b6100e86004803603602081101561033a57600080fd5b5035600160a060020a03166109a4565b6100e86109b6565b6100e86004803603602081101561036857600080fd5b5035600160a060020a03166109bd565b600580548290811061038657fe5b600091825260209091200154905081565b600260205260009081526040902054600160a060020a031681565b7fff0000000000000000000000000000000000000000000000000000000000000060f860020a600083901a021615156103ea57600080fd5b6000805b602081101561048b5782816020811061040357fe5b1a60f860020a027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916600060f860020a0214156104435760019150610483565b81156104835760405160e560020a62461bcd02815260040180806020018281038252604a815260200180610a68604a913960600191505060405180910390fd5b6001016103ee565b50600082815260026020526040902054600160a060020a0316156104e35760405160e560020a62461bcd02815260040180806020018281038252602f815260200180610ab2602f913960400191505060405180910390fd5b6000828152600260209081526040808320805473ffffffffffffffffffffffffffffffffffffffff1916339081179091558084526001835292819020859055805192835290820184905280517fecfe7c0967bd11938c97b0ca7b35cebf4f1b6b0fa5185576f9562c57d42e0cf29281900390910190a15050565b600654600090606090829084106105a85760405160e560020a62461bcd028152600401808060200182810382526029815260200180610ae16029913960400191505060405180910390fd5b60048054859081106105b657fe5b60009182526020909120015460068054600160a060020a03909216945090859081106105de57fe5b600091825260209182902001805460408051601f600260001961010060018716150201909416939093049283018590048502810185019091528181529283018282801561066c5780601f106106415761010080835404028352916020019161066c565b820191906000526020600020905b81548152906001019060200180831161064f57829003601f168201915b5050505050915060058181548110151561068257fe5b906000526020600020015490509193909250565b33600081815260036020908152604080832054925481517f740e2f9a00000000000000000000000000000000000000000000000000000000815260048101959095529051620f424094600160a060020a039092169263740e2f9a9260248082019391829003018186803b15801561070c57600080fd5b505afa158015610720573d6000803e3d6000fd5b505050506040513d602081101561073657600080fd5b50510310156107795760405160e560020a62461bcd028152600401808060200182810382526055815260200180610b0a6055913960600191505060405180910390fd5b60001981148061078a575060065481105b15156107ca5760405160e560020a62461bcd02815260040180806020018281038252602a815260200180610b5f602a913960400191505060405180910390fd5b336000818152600360205260408082208054620f42400190556006549051849391927fac1e50dbb13b0927df722756cd14ae7668b6033ad90e92f7166c252c4337fd1291a46005805460018181019092557f036b6384b5eca791c62761152d0c79bb0604c104a5fb6f4eb0703f3154bb3db001829055600480548083019091557f8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b01805473ffffffffffffffffffffffffffffffffffffffff19163317905560068054918201808255600091909152906108c7907ff652222313e28459528d920b65115c16c04f3efc82aaedc97be59f3f377c0d3f0185856109cf565b5050505050565b620f424081565b60068054829081106108e357fe5b600091825260209182902001805460408051601f60026000196101006001871615020190941693909304928301859004850281018501909152818152935090918301828280156109745780601f1061094957610100808354040283529160200191610974565b820191906000526020600020905b81548152906001019060200180831161095757829003601f168201915b505050505081565b600480548290811061098a57fe5b600091825260209091200154600160a060020a0316905081565b60016020526000908152604090205481565b6006545b90565b60036020526000908152604090205481565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610a105782800160ff19823516178555610a3d565b82800160010185558215610a3d579182015b82811115610a3d578235825591602001919060010190610a22565b50610a49929150610a4d565b5090565b6109ba91905b80821115610a495760008155600101610a5356fe736574557365726e616d65206572726f723a20696e76616c696420737472696e673b206368617261637465722070726573656e74206166746572206e756c6c207465726d696e61746f72736574557365726e616d65206572726f723a207468617420757365726e616d6520616c726561647920657869737473676574436861744d657373616765206572726f723a20696e646578206f7574206f6620626f756e647373656e64436861744d657373616765206572726f723a20796f75206e65656420746f207370656e64206d6f726520676173206f6e20636f6d70757465282920746f2073656e6420612063686174206d65737361676573656e64436861744d657373616765206572726f723a20696e76616c6964207265706c7920696e646578a165627a7a72305820ae8276540fd97545f69678da3f2ef940e2a21829dfce1520ab923f900ea2a06500296f6e455243373231526563656976656428616464726573732c616464726573732c75696e743235362c627974657329a66cc928b5edb82af9bd49922954155ab7b0942694bea4ce44661d9a8736c688",
  "constructorArguments": "6f6e455243373231526563656976656428616464726573732c616464726573732c75696e743235362c627974657329a66cc928b5edb82af9bd49922954155ab7b0942694bea4ce44661d9a8736c688"
}