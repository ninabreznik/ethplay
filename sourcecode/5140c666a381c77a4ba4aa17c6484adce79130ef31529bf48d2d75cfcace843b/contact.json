{
  "address": "0x891eb4de45bb4f8e06fcef9662da4e7eaaca569d",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "SnailNumber",
  "compilerVersion": "v0.5.7+commit.6da8b019",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2019-04-10\n*/\n\npragma solidity ^0.5.7;\n\n/* SNAILNUMBER\n\nSimple game contract to let players pick a magic number.\nThe number has no importance in itself, but will be used in another game!\n\nPlayers must bid higher than the previous bid to enter their number.\nWhoever has the highest bid at the end of a 24 hours period wins.\nThe winner gets a share of all the ETH, based on how quickly he bid.\nThe rest of the ETH is sent to SnailThrone as divs.\n\n*/\n\ncontract SnailNumber {\n\tusing SafeMath for uint;\n\t\n\tevent GameBid (address indexed player, uint eth, uint number, uint pot, uint winnerShare);\n\tevent GameEnd (address indexed player, uint leaderReward, uint throneReward, uint number);\n\t\n\taddress payable constant SNAILTHRONE= 0x261d650a521103428C6827a11fc0CBCe96D74DBc;\n    uint256 constant SECONDS_IN_DAY = 86400;\n    uint256 constant numberMin = 300;\n    uint256 constant numberMax = 3000;\n    \n    uint256 public pot;\n    uint256 public bid;\n    address payable public leader;\n    uint256 public shareToWinner;\n    uint256 public shareToThrone;\n    uint256 public timerEnd;\n    uint256 public timerStart;\n    uint256 public number;\n    \n    address payable dev;\n    \n    // CONSTRUCTOR\n    // Sets end timer to 24 hours\n    \n    constructor() public {\n        timerStart = now;\n        timerEnd = now.add(SECONDS_IN_DAY);\n        dev = msg.sender;\n    }\n    \n    // BID\n    // Lets player pick number\n    // Locks his potential winnings\n    \n    function Bid(uint256 _number) payable public {\n        require(now < timerEnd, \"game is over!\");\n        require(msg.value > bid, \"not enough to beat current leader\");\n        require(_number >= numberMin, \"number too low\");\n        require(_number <= numberMax, \"number too high\");\n\n        pot = pot.add(msg.value);\n        shareToWinner = ComputeShare();\n        uint256 _share = 100;\n        shareToThrone = _share.sub(shareToWinner);\n        leader = msg.sender;\n        number = _number;\n            \n        emit GameBid(msg.sender, msg.value, number, pot, shareToWinner);\n    }\n    \n    // END \n    // Can be called manually after the game ends\n    // Sends pot to winner and snailthrone\n    \n    function End() public {\n        require(now > timerEnd, \"game is still running!\");\n        \n        uint256 _throneReward = pot.mul(shareToThrone).div(100);\n        pot = pot.sub(_throneReward);\n        (bool success, bytes memory data) = SNAILTHRONE.call.value(_throneReward)(\"\");\n        require(success);\n        \n        uint256 _winnerReward = pot;\n        pot = 0;\n        leader.transfer(_winnerReward);\n        \n        emit GameEnd(leader, _winnerReward, _throneReward, number);\n    }\n    \n    // COMPUTESHARE \n    // Calculates the share of the winner and of the throne, based on time lapsed\n    // Decreasing % from 100 to 0. The earlier the bid, the more money\n    \n    function ComputeShare() public view returns(uint256) {\n        uint256 _length = timerEnd.sub(timerStart);\n        uint256 _currentPoint = timerEnd.sub(now);\n        return _currentPoint.mul(100).div(_length);\n    }\n    \n    // ESCAPEHATCH\n    // Just in case a bug stops the \"End\" function, dev can withdraw all ETH\n    // But *only* a full day after the game has already ended!\n    \n    function EscapeHatch() public {\n        require(msg.sender == dev, \"you're not the dev\");\n        require(now > timerEnd.add(SECONDS_IN_DAY), \"escape hatch only available 24h after end\");\n        \n        dev.transfer(address(this).balance);\n    }\n}\n\nlibrary SafeMath {\n\n  /**\n  * @dev Multiplies two numbers, throws on overflow.\n  */\n  function mul(uint256 a, uint256 b) internal pure returns (uint256) {\n    if (a == 0) {\n      return 0;\n    }\n    uint256 c = a * b;\n    assert(c / a == b);\n    return c;\n  }\n\n  /**\n  * @dev Integer division of two numbers, truncating the quotient.\n  */\n  function div(uint256 a, uint256 b) internal pure returns (uint256) {\n    // assert(b > 0); // Solidity automatically throws when dividing by 0\n    uint256 c = a / b;\n    // assert(a == b * c + a % b); // There is no case in which this doesn't hold\n    return c;\n  }\n\n  /**\n  * @dev Substracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend).\n  */\n  function sub(uint256 a, uint256 b) internal pure returns (uint256) {\n    assert(b <= a);\n    return a - b;\n  }\n\n  /**\n  * @dev Adds two numbers, throws on overflow.\n  */\n  function add(uint256 a, uint256 b) internal pure returns (uint256) {\n    uint256 c = a + b;\n    assert(c >= a);\n    return c;\n  }\n}",
  "abi": "[{\"constant\":false,\"inputs\":[],\"name\":\"End\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"shareToWinner\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"EscapeHatch\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bid\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ComputeShare\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"leader\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"pot\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_number\",\"type\":\"uint256\"}],\"name\":\"Bid\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"number\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"shareToThrone\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"timerEnd\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"timerStart\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"eth\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"number\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"pot\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"winnerShare\",\"type\":\"uint256\"}],\"name\":\"GameBid\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"leaderReward\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"throneReward\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"number\",\"type\":\"uint256\"}],\"name\":\"GameEnd\",\"type\":\"event\"}]",
  "bytecode": "608060405234801561001057600080fd5b5042600681905550610032620151804261004c60201b61074c1790919060201c565b600555600880546001600160a01b03191633179055610062565b60008282018381101561005b57fe5b9392505050565b6107d1806100716000396000f3fe6080604052600436106100a75760003560e01c80634ba2363a116100645780634ba2363a1461015a5780637a183e841461016f5780638381f58a1461018c578063b37f6e14146101a1578063db9f0676146101b6578063de5e21df146101cb576100a7565b806306e64907146100ac578063169ee8d6146100c357806316ed36fb146100ea5780631998aeef146100ff5780633adb91141461011457806340eedabb14610129575b600080fd5b3480156100b857600080fd5b506100c16101e0565b005b3480156100cf57600080fd5b506100d8610383565b60408051918252519081900360200190f35b3480156100f657600080fd5b506100c1610389565b34801561010b57600080fd5b506100d861047e565b34801561012057600080fd5b506100d8610484565b34801561013557600080fd5b5061013e6104d5565b604080516001600160a01b039092168252519081900360200190f35b34801561016657600080fd5b506100d86104e4565b6100c16004803603602081101561018557600080fd5b50356104ea565b34801561019857600080fd5b506100d86106e0565b3480156101ad57600080fd5b506100d86106e6565b3480156101c257600080fd5b506100d86106ec565b3480156101d757600080fd5b506100d86106f2565b60055442116102395760408051600160e51b62461bcd02815260206004820152601660248201527f67616d65206973207374696c6c2072756e6e696e672100000000000000000000604482015290519081900360640190fd5b600061026360646102576004546000546106f890919063ffffffff16565b9063ffffffff61072516565b600054909150610279908263ffffffff61073a16565b600090815560405160609073261d650a521103428c6827a11fc0cbce96d74dbc9084908481818185875af1925050503d80600081146102d4576040519150601f19603f3d011682016040523d82523d6000602084013e6102d9565b606091505b5091509150816102e857600080fd5b6000805481805560025460405191926001600160a01b039091169183156108fc0291849190818181858888f1935050505015801561032a573d6000803e3d6000fd5b50600254600754604080518481526020810188905280820192909252516001600160a01b03909216917fd32d50b4b588e1608b0a9e54916a7dd1d3e62789fe05040b5668eae06c2bd8589181900360600190a250505050565b60035481565b6008546001600160a01b031633146103eb5760408051600160e51b62461bcd02815260206004820152601260248201527f796f75277265206e6f7420746865206465760000000000000000000000000000604482015290519081900360640190fd5b600554610401906201518063ffffffff61074c16565b421161044157604051600160e51b62461bcd02815260040180806020018281038252602981526020018061077d6029913960400191505060405180910390fd5b6008546040516001600160a01b0390911690303180156108fc02916000818181858888f1935050505015801561047b573d6000803e3d6000fd5b50565b60015481565b60008061049e60065460055461073a90919063ffffffff16565b905060006104b74260055461073a90919063ffffffff16565b90506104ce8261025783606463ffffffff6106f816565b9250505090565b6002546001600160a01b031681565b60005481565b60055442106105435760408051600160e51b62461bcd02815260206004820152600d60248201527f67616d65206973206f7665722100000000000000000000000000000000000000604482015290519081900360640190fd5b600154341161058657604051600160e51b62461bcd02815260040180806020018281038252602181526020018061075c6021913960400191505060405180910390fd5b61012c8110156105e05760408051600160e51b62461bcd02815260206004820152600e60248201527f6e756d62657220746f6f206c6f77000000000000000000000000000000000000604482015290519081900360640190fd5b610bb881111561063a5760408051600160e51b62461bcd02815260206004820152600f60248201527f6e756d62657220746f6f20686967680000000000000000000000000000000000604482015290519081900360640190fd5b60005461064d903463ffffffff61074c16565b600055610658610484565b600381905560649061067190829063ffffffff61073a16565b600455600280546001600160a01b0319163390811790915560078390556000546003546040805134815260208101879052808201939093526060830191909152517f1e4954a55a10954b99de1248ab11f39eef61f1c90c621fa9a70a1e1a494efec99181900360800190a25050565b60075481565b60045481565b60055481565b60065481565b6000826107075750600061071f565b8282028284828161071457fe5b041461071c57fe5b90505b92915050565b60008082848161073157fe5b04949350505050565b60008282111561074657fe5b50900390565b60008282018381101561071c57fefe6e6f7420656e6f75676820746f20626561742063757272656e74206c6561646572657363617065206861746368206f6e6c7920617661696c61626c652032346820616674657220656e64a165627a7a723058209ad66955d3594b977c893a930ab7d416d0ee366c424a400f31eba7003b8bbaa00029"
}