{
  "address": "0xcf1f6377f2756446b1ca87c8a2ca2b6ea692edae",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "Chibi Fighters: ETH Crystals",
  "contractName": "Crystals",
  "compilerVersion": "v0.4.24+commit.e67f0147",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2018-05-30\n*/\n\npragma solidity ^0.4.24;\n\n// written by madgustave from Team Chibi Fighters\n// find us at https://chibigame.io\n// [emailÂ protected]\n// version 1.0.0\n\ncontract ExternalTokensSupport {\n    function calculateAmount(address, uint256, address, bytes, uint256) public pure returns(uint256, uint256, uint256) {}\n}\n\n\ncontract Owned {\n    address public owner;\n    address public newOwner;\n\n    event OwnershipTransferred(address indexed _from, address indexed _to);\n\n    constructor() public {\n        owner = msg.sender;\n    }\n\n    modifier onlyOwner {\n        require(msg.sender == owner);\n        _;\n    }\n\n    function transferOwnership(address _newOwner) public onlyOwner {\n        newOwner = _newOwner;\n    }\n    \n    function acceptOwnership() public {\n        require(msg.sender == newOwner);\n        emit OwnershipTransferred(owner, newOwner);\n        owner = newOwner;\n        newOwner = address(0);\n    }\n}\n\n\ninterface ERC20Interface {\n    function transferFrom(address from, address to, uint tokens) external returns (bool success);\n    function transfer(address to, uint tokens) external;\n    function balanceOf(address _owner) external view returns (uint256 _balance);\n}\n\ninterface ERC20InterfaceClassic {\n    function transfer(address to, uint tokens) external returns (bool success);\n}\n\ncontract Crystals is Owned {\n\t// price of one crystal in wei\n\tuint256 public crystalPrice;\n    ExternalTokensSupport public etsContract;    \n\n\tevent crystalsBought(\n\t\taddress indexed buyer,\n\t\tuint256 amount,\n        uint256 indexed paymentMethod \n\t);\n\n\tconstructor(uint256 startPrice, address etsAddress) public {\n\t\tcrystalPrice = startPrice;\n        etsContract = ExternalTokensSupport(etsAddress);\n\t}\n\n\tfunction () public payable {\n\t\trequire(msg.value >= crystalPrice);\n\n\t\t// crystal is indivisible\n\t\trequire(msg.value % crystalPrice == 0);\n\n\t\temit crystalsBought(msg.sender, msg.value / crystalPrice, 0);\n\t}\n\n    function buyWithERC20(address _sender, uint256 _value, ERC20Interface _tokenContract, bytes _extraData) internal {\n        require(etsContract != address(0));\n\n        (uint256 crystalsAmount, uint256 neededTokensAmount, uint256 paymentMethod) = etsContract.calculateAmount(_sender, _value, _tokenContract, _extraData, crystalPrice);\n\n        require(_tokenContract.transferFrom(_sender, address(this), neededTokensAmount));\n\n        emit crystalsBought(_sender, crystalsAmount, paymentMethod);\n    }\n\n    function receiveApproval(address _sender, uint256 _value, ERC20Interface _tokenContract, bytes _extraData) public {\n        buyWithERC20(_sender, _value, _tokenContract, _extraData);\n    }\n\n\tfunction changePrice(uint256 newPrice) public onlyOwner {\n\t\tcrystalPrice = newPrice;\n\t}\n\n    function changeEtsAddress(address etsAddress) public onlyOwner {\n        etsContract = ExternalTokensSupport(etsAddress);\n    }\n\n    /**\n    * @dev Send Ether to owner\n    * @param _address Receiving address\n    * @param _amountWei Amount in WEI to send\n    **/\n    function weiToOwner(address _address, uint _amountWei) public onlyOwner returns (bool) {\n        require(_amountWei <= address(this).balance);\n        _address.transfer(_amountWei);\n        return true;\n    }\n\n    function ERC20ToOwner(address _to, uint256 _amount, ERC20Interface _tokenContract) public onlyOwner {\n        _tokenContract.transfer(_to, _amount);\n    }\n\n    function ERC20ClassicToOwner(address _to, uint256 _amount, ERC20InterfaceClassic _tokenContract) public onlyOwner {\n        _tokenContract.transfer(_to, _amount);\n    }\n    \n    function queryERC20(ERC20Interface _tokenContract) public view onlyOwner returns (uint) {\n        return _tokenContract.balanceOf(this);\n    }\n}",
  "abi": "[{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"_amountWei\",\"type\":\"uint256\"}],\"name\":\"weiToOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_amount\",\"type\":\"uint256\"},{\"name\":\"_tokenContract\",\"type\":\"address\"}],\"name\":\"ERC20ClassicToOwner\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"etsContract\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"acceptOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sender\",\"type\":\"address\"},{\"name\":\"_value\",\"type\":\"uint256\"},{\"name\":\"_tokenContract\",\"type\":\"address\"},{\"name\":\"_extraData\",\"type\":\"bytes\"}],\"name\":\"receiveApproval\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenContract\",\"type\":\"address\"}],\"name\":\"queryERC20\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newPrice\",\"type\":\"uint256\"}],\"name\":\"changePrice\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"crystalPrice\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"etsAddress\",\"type\":\"address\"}],\"name\":\"changeEtsAddress\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"newOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_amount\",\"type\":\"uint256\"},{\"name\":\"_tokenContract\",\"type\":\"address\"}],\"name\":\"ERC20ToOwner\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"startPrice\",\"type\":\"uint256\"},{\"name\":\"etsAddress\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"buyer\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"paymentMethod\",\"type\":\"uint256\"}],\"name\":\"crystalsBought\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_to\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"}]",
  "bytecode": "608060405234801561001057600080fd5b506040516040806109d183398101604052805160209091015160008054600160a060020a0319908116331790915560029290925560038054600160a060020a0390921691909216179055610968806100696000396000f3006080604052600436106100ab5763ffffffff60e060020a6000350416630db5db26811461012257806328f145731461015a57806354c866281461018757806379ba5097146101b85780638da5cb5b146101cd5780638f4ffcb1146101e257806395d9117214610252578063a2b40d1914610285578063c5c5135c1461029d578063ccb00344146102b2578063d4ee1d90146102d3578063dea21027146102e8578063f2fde38b14610313575b6002543410156100ba57600080fd5b600254348115156100c757fe5b06156100d257600080fd5b600033600160a060020a03167ff016fdea12468ec341af2406a8f4bb986347550a19282cc2f711ccb491aa78166002543481151561010c57fe5b60408051929091048252519081900360200190a3005b34801561012e57600080fd5b50610146600160a060020a0360043516602435610334565b604080519115158252519081900360200190f35b34801561016657600080fd5b50610185600160a060020a03600435811690602435906044351661039a565b005b34801561019357600080fd5b5061019c610445565b60408051600160a060020a039092168252519081900360200190f35b3480156101c457600080fd5b50610185610454565b3480156101d957600080fd5b5061019c6104dc565b3480156101ee57600080fd5b50604080516020601f60643560048181013592830184900484028501840190955281845261018594600160a060020a038135811695602480359660443590931695369560849492019181908401838280828437509497506104eb9650505050505050565b34801561025e57600080fd5b50610273600160a060020a03600435166104fd565b60408051918252519081900360200190f35b34801561029157600080fd5b506101856004356105a8565b3480156102a957600080fd5b506102736105c4565b3480156102be57600080fd5b50610185600160a060020a03600435166105ca565b3480156102df57600080fd5b5061019c610610565b3480156102f457600080fd5b50610185600160a060020a03600435811690602435906044351661061f565b34801561031f57600080fd5b50610185600160a060020a03600435166106b6565b60008054600160a060020a0316331461034c57600080fd5b303182111561035a57600080fd5b604051600160a060020a0384169083156108fc029084906000818181858888f19350505050158015610390573d6000803e3d6000fd5b5060019392505050565b600054600160a060020a031633146103b157600080fd5b80600160a060020a031663a9059cbb84846040518363ffffffff1660e060020a0281526004018083600160a060020a0316600160a060020a0316815260200182815260200192505050602060405180830381600087803b15801561041457600080fd5b505af1158015610428573d6000803e3d6000fd5b505050506040513d602081101561043e57600080fd5b5050505050565b600354600160a060020a031681565b600154600160a060020a0316331461046b57600080fd5b60015460008054604051600160a060020a0393841693909116917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a3600180546000805473ffffffffffffffffffffffffffffffffffffffff19908116600160a060020a03841617909155169055565b600054600160a060020a031681565b6104f7848484846106fc565b50505050565b60008054600160a060020a0316331461051557600080fd5b604080517f70a082310000000000000000000000000000000000000000000000000000000081523060048201529051600160a060020a038416916370a082319160248083019260209291908290030181600087803b15801561057657600080fd5b505af115801561058a573d6000803e3d6000fd5b505050506040513d60208110156105a057600080fd5b505192915050565b600054600160a060020a031633146105bf57600080fd5b600255565b60025481565b600054600160a060020a031633146105e157600080fd5b6003805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600154600160a060020a031681565b600054600160a060020a0316331461063657600080fd5b80600160a060020a031663a9059cbb84846040518363ffffffff1660e060020a0281526004018083600160a060020a0316600160a060020a0316815260200182815260200192505050600060405180830381600087803b15801561069957600080fd5b505af11580156106ad573d6000803e3d6000fd5b50505050505050565b600054600160a060020a031633146106cd57600080fd5b6001805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60035460009081908190600160a060020a0316151561071a57600080fd5b6003546002546040517f361eb2a6000000000000000000000000000000000000000000000000000000008152600160a060020a038a811660048301908152602483018b905289821660448401526084830184905260a060648401908152895160a48501528951929095169463361eb2a6948d948d948d948d949092909160c490910190602086019080838360005b838110156107c05781810151838201526020016107a8565b50505050905090810190601f1680156107ed5780820380516001836020036101000a031916815260200191505b509650505050505050606060405180830381600087803b15801561081057600080fd5b505af1158015610824573d6000803e3d6000fd5b505050506040513d606081101561083a57600080fd5b50805160208083015160409384015184517f23b872dd000000000000000000000000000000000000000000000000000000008152600160a060020a038d811660048301523060248301526044820184905295519498509196509450928816926323b872dd92606480830193928290030181600087803b1580156108bc57600080fd5b505af11580156108d0573d6000803e3d6000fd5b505050506040513d60208110156108e657600080fd5b505115156108f357600080fd5b6040805184815290518291600160a060020a038a16917ff016fdea12468ec341af2406a8f4bb986347550a19282cc2f711ccb491aa78169181900360200190a3505050505050505600a165627a7a723058205614b2174c735f230c9eccefce7d835187fda96c8060df91cc75f7a3cb5a1eac002900000000000000000000000000000000000000000000000000071afd498d000000000000000000000000000096be7c812c68a1aa915a85c4051dc1669bd677f6",
  "constructorArguments": "00000000000000000000000000000000000000000000000000071afd498d000000000000000000000000000096be7c812c68a1aa915a85c4051dc1669bd677f6"
}