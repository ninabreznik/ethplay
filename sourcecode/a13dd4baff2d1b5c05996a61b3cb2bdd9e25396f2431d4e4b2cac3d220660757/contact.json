{
  "address": "0xa2ce821f2a990dbd5de5a9e221c6bfba261a3807",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "AssetProxy",
  "compilerVersion": "v0.5.8+commit.23d335f2",
  "optimization": true,
  "runs": "10000",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2019-05-28\n*/\n\n// File: contracts/EToken2Interface.sol\n\npragma solidity 0.5.8;\n\n\ncontract RegistryICAPInterface {\n    function parse(bytes32 _icap) public view returns(address, bytes32, bool);\n    function institutions(bytes32 _institution) public view returns(address);\n}\n\n\ncontract EToken2Interface {\n    function registryICAP() public view returns(RegistryICAPInterface);\n    function baseUnit(bytes32 _symbol) public view returns(uint8);\n    function description(bytes32 _symbol) public view returns(string memory);\n    function owner(bytes32 _symbol) public view returns(address);\n    function isOwner(address _owner, bytes32 _symbol) public view returns(bool);\n    function totalSupply(bytes32 _symbol) public view returns(uint);\n    function balanceOf(address _holder, bytes32 _symbol) public view returns(uint);\n    function isLocked(bytes32 _symbol) public view returns(bool);\n\n    function issueAsset(\n        bytes32 _symbol,\n        uint _value,\n        string memory _name,\n        string memory _description,\n        uint8 _baseUnit,\n        bool _isReissuable)\n    public returns(bool);\n\n    function reissueAsset(bytes32 _symbol, uint _value) public returns(bool);\n    function revokeAsset(bytes32 _symbol, uint _value) public returns(bool);\n    function setProxy(address _address, bytes32 _symbol) public returns(bool);\n    function lockAsset(bytes32 _symbol) public returns(bool);\n\n    function proxyTransferFromToICAPWithReference(\n        address _from,\n        bytes32 _icap,\n        uint _value,\n        string memory _reference,\n        address _sender)\n    public returns(bool);\n\n    function proxyApprove(address _spender, uint _value, bytes32 _symbol, address _sender)\n    public returns(bool);\n    \n    function allowance(address _from, address _spender, bytes32 _symbol) public view returns(uint);\n\n    function proxyTransferFromWithReference(\n        address _from,\n        address _to,\n        uint _value,\n        bytes32 _symbol,\n        string memory _reference,\n        address _sender)\n    public returns(bool);\n\n    function changeOwnership(bytes32 _symbol, address _newOwner) public returns(bool);\n}\n\n// File: contracts/AssetInterface.sol\n\npragma solidity 0.5.8;\n\n\ncontract AssetInterface {\n    function _performTransferWithReference(\n        address _to,\n        uint _value,\n        string memory _reference,\n        address _sender)\n    public returns(bool);\n\n    function _performTransferToICAPWithReference(\n        bytes32 _icap,\n        uint _value,\n        string memory _reference,\n        address _sender)\n    public returns(bool);\n\n    function _performApprove(address _spender, uint _value, address _sender)\n    public returns(bool);\n\n    function _performTransferFromWithReference(\n        address _from,\n        address _to,\n        uint _value,\n        string memory _reference,\n        address _sender)\n    public returns(bool);\n\n    function _performTransferFromToICAPWithReference(\n        address _from,\n        bytes32 _icap,\n        uint _value,\n        string memory _reference,\n        address _sender)\n    public returns(bool);\n\n    function _performGeneric(bytes memory, address) public payable {\n        revert();\n    }\n}\n\n// File: contracts/ERC20Interface.sol\n\npragma solidity 0.5.8;\n\n\ncontract ERC20Interface {\n    event Transfer(address indexed from, address indexed to, uint256 value);\n    event Approval(address indexed from, address indexed spender, uint256 value);\n\n    function totalSupply() public view returns(uint256 supply);\n    function balanceOf(address _owner) public view returns(uint256 balance);\n    // solhint-disable-next-line no-simple-event-func-name\n    function transfer(address _to, uint256 _value) public returns(bool success);\n    function transferFrom(address _from, address _to, uint256 _value) public returns(bool success);\n    function approve(address _spender, uint256 _value) public returns(bool success);\n    function allowance(address _owner, address _spender) public view returns(uint256 remaining);\n\n    // function symbol() constant returns(string);\n    function decimals() public view returns(uint8);\n    // function name() constant returns(string);\n}\n\n// File: contracts/AssetProxyInterface.sol\n\npragma solidity 0.5.8;\n\n\n\ncontract AssetProxyInterface is ERC20Interface {\n    function _forwardApprove(address _spender, uint _value, address _sender)\n    public returns(bool);\n\n    function _forwardTransferFromWithReference(\n        address _from,\n        address _to,\n        uint _value,\n        string memory _reference,\n        address _sender)\n    public returns(bool);\n\n    function _forwardTransferFromToICAPWithReference(\n        address _from,\n        bytes32 _icap,\n        uint _value,\n        string memory _reference,\n        address _sender)\n    public returns(bool);\n\n    function recoverTokens(ERC20Interface _asset, address _receiver, uint _value)\n    public returns(bool);\n\n    function etoken2() external view returns(address); // To be replaced by the implicit getter;\n\n    // To be replaced by the implicit getter;\n    function etoken2Symbol() external view returns(bytes32);\n}\n\n// File: smart-contracts-common/contracts/Bytes32.sol\n\npragma solidity 0.5.8;\n\n\ncontract Bytes32 {\n    function _bytes32(string memory _input) internal pure returns(bytes32 result) {\n        assembly {\n            result := mload(add(_input, 32))\n        }\n    }\n}\n\n// File: smart-contracts-common/contracts/ReturnData.sol\n\npragma solidity 0.5.8;\n\n\ncontract ReturnData {\n    function _returnReturnData(bool _success) internal pure {\n        assembly {\n            let returndatastart := 0\n            returndatacopy(returndatastart, 0, returndatasize)\n            switch _success case 0 { revert(returndatastart, returndatasize) }\n                default { return(returndatastart, returndatasize) }\n        }\n    }\n\n    function _assemblyCall(address _destination, uint _value, bytes memory _data)\n    internal returns(bool success) {\n        assembly {\n            success := call(gas, _destination, _value, add(_data, 32), mload(_data), 0, 0)\n        }\n    }\n}\n\n// File: contracts/AssetProxy.sol\n\npragma solidity 0.5.8;\n\n\n\n\n\n\n\n\n/**\n * @title EToken2 Asset Proxy.\n *\n * Proxy implements ERC20 interface and acts as a gateway to a single EToken2 asset.\n * Proxy adds etoken2Symbol and caller(sender) when forwarding requests to EToken2.\n * Every request that is made by caller first sent to the specific asset implementation\n * contract, which then calls back to be forwarded onto EToken2.\n *\n * Calls flow: Caller ->\n *             Proxy.func(...) ->\n *             Asset._performFunc(..., Caller.address) ->\n *             Proxy._forwardFunc(..., Caller.address) ->\n *             Platform.proxyFunc(..., symbol, Caller.address)\n *\n * Generic call flow: Caller ->\n *             Proxy.unknownFunc(...) ->\n *             Asset._performGeneric(..., Caller.address) ->\n *             Asset.unknownFunc(...)\n *\n * Asset implementation contract is mutable, but each user have an option to stick with\n * old implementation, through explicit decision made in timely manner, if he doesn't agree\n * with new rules.\n * Each user have a possibility to upgrade to latest asset contract implementation, without the\n * possibility to rollback.\n *\n * Note: all the non constant functions return false instead of throwing in case if state change\n * didn't happen yet.\n */\ncontract AssetProxy is ERC20Interface, AssetProxyInterface, Bytes32, ReturnData {\n    // Assigned EToken2, immutable.\n    EToken2Interface public etoken2;\n\n    // Assigned symbol, immutable.\n    bytes32 public etoken2Symbol;\n\n    // Assigned name, immutable. For UI.\n    string public name;\n    string public symbol;\n\n    /**\n     * Sets EToken2 address, assigns symbol and name.\n     *\n     * Can be set only once.\n     *\n     * @param _etoken2 EToken2 contract address.\n     * @param _symbol assigned symbol.\n     * @param _name assigned name.\n     *\n     * @return success.\n     */\n    function init(EToken2Interface _etoken2, string memory _symbol, string memory _name)\n        public returns(bool)\n    {\n        if (address(etoken2) != address(0)) {\n            return false;\n        }\n        etoken2 = _etoken2;\n        etoken2Symbol = _bytes32(_symbol);\n        name = _name;\n        symbol = _symbol;\n        return true;\n    }\n\n    /**\n     * Only EToken2 is allowed to call.\n     */\n    modifier onlyEToken2() {\n        if (msg.sender == address(etoken2)) {\n            _;\n        }\n    }\n\n    /**\n     * Only current asset owner is allowed to call.\n     */\n    modifier onlyAssetOwner() {\n        if (etoken2.isOwner(msg.sender, etoken2Symbol)) {\n            _;\n        }\n    }\n\n    /**\n     * Returns asset implementation contract for current caller.\n     *\n     * @return asset implementation contract.\n     */\n    function _getAsset() internal view returns(AssetInterface) {\n        return AssetInterface(getVersionFor(msg.sender));\n    }\n\n    /**\n     * Recovers tokens on proxy contract\n     *\n     * @param _asset type of tokens to recover.\n     * @param _value tokens that will be recovered.\n     * @param _receiver address where to send recovered tokens.\n     *\n     * @return success.\n     */\n    function recoverTokens(ERC20Interface _asset, address _receiver, uint _value)\n    public onlyAssetOwner() returns(bool) {\n        return _asset.transfer(_receiver, _value);\n    }\n\n    /**\n     * Returns asset total supply.\n     *\n     * @return asset total supply.\n     */\n    function totalSupply() public view returns(uint) {\n        return etoken2.totalSupply(etoken2Symbol);\n    }\n\n    /**\n     * Returns asset balance for a particular holder.\n     *\n     * @param _owner holder address.\n     *\n     * @return holder balance.\n     */\n    function balanceOf(address _owner) public view returns(uint) {\n        return etoken2.balanceOf(_owner, etoken2Symbol);\n    }\n\n    /**\n     * Returns asset allowance from one holder to another.\n     *\n     * @param _from holder that allowed spending.\n     * @param _spender holder that is allowed to spend.\n     *\n     * @return holder to spender allowance.\n     */\n    function allowance(address _from, address _spender) public view returns(uint) {\n        return etoken2.allowance(_from, _spender, etoken2Symbol);\n    }\n\n    /**\n     * Returns asset decimals.\n     *\n     * @return asset decimals.\n     */\n    function decimals() public view returns(uint8) {\n        return etoken2.baseUnit(etoken2Symbol);\n    }\n\n    /**\n     * Transfers asset balance from the caller to specified receiver.\n     *\n     * @param _to holder address to give to.\n     * @param _value amount to transfer.\n     *\n     * @return success.\n     */\n    function transfer(address _to, uint _value) public returns(bool) {\n        return transferWithReference(_to, _value, '');\n    }\n\n    /**\n     * Transfers asset balance from the caller to specified receiver adding specified comment.\n     * Resolves asset implementation contract for the caller and forwards there arguments along with\n     * the caller address.\n     *\n     * @param _to holder address to give to.\n     * @param _value amount to transfer.\n     * @param _reference transfer comment to be included in a EToken2's Transfer event.\n     *\n     * @return success.\n     */\n    function transferWithReference(address _to, uint _value, string memory _reference)\n    public returns(bool) {\n        return _getAsset()._performTransferWithReference(\n            _to, _value, _reference, msg.sender);\n    }\n\n    /**\n     * Transfers asset balance from the caller to specified ICAP.\n     *\n     * @param _icap recipient ICAP to give to.\n     * @param _value amount to transfer.\n     *\n     * @return success.\n     */\n    function transferToICAP(bytes32 _icap, uint _value) public returns(bool) {\n        return transferToICAPWithReference(_icap, _value, '');\n    }\n\n    /**\n     * Transfers asset balance from the caller to specified ICAP adding specified comment.\n     * Resolves asset implementation contract for the caller and forwards there arguments along with\n     * the caller address.\n     *\n     * @param _icap recipient ICAP to give to.\n     * @param _value amount to transfer.\n     * @param _reference transfer comment to be included in a EToken2's Transfer event.\n     *\n     * @return success.\n     */\n    function transferToICAPWithReference(\n        bytes32 _icap,\n        uint _value,\n        string memory _reference)\n    public returns(bool) {\n        return _getAsset()._performTransferToICAPWithReference(\n            _icap, _value, _reference, msg.sender);\n    }\n\n    /**\n     * Prforms allowance transfer of asset balance between holders.\n     *\n     * @param _from holder address to take from.\n     * @param _to holder address to give to.\n     * @param _value amount to transfer.\n     *\n     * @return success.\n     */\n    function transferFrom(address _from, address _to, uint _value) public returns(bool) {\n        return transferFromWithReference(_from, _to, _value, '');\n    }\n\n    /**\n     * Prforms allowance transfer of asset balance between holders adding specified comment.\n     * Resolves asset implementation contract for the caller and forwards there arguments along with\n     * the caller address.\n     *\n     * @param _from holder address to take from.\n     * @param _to holder address to give to.\n     * @param _value amount to transfer.\n     * @param _reference transfer comment to be included in a EToken2's Transfer event.\n     *\n     * @return success.\n     */\n    function transferFromWithReference(\n        address _from,\n        address _to,\n        uint _value,\n        string memory _reference)\n    public returns(bool) {\n        return _getAsset()._performTransferFromWithReference(\n            _from,\n            _to,\n            _value,\n            _reference,\n            msg.sender\n        );\n    }\n\n    /**\n     * Performs transfer call on the EToken2 by the name of specified sender.\n     *\n     * Can only be called by asset implementation contract assigned to sender.\n     *\n     * @param _from holder address to take from.\n     * @param _to holder address to give to.\n     * @param _value amount to transfer.\n     * @param _reference transfer comment to be included in a EToken2's Transfer event.\n     * @param _sender initial caller.\n     *\n     * @return success.\n     */\n    function _forwardTransferFromWithReference(\n        address _from,\n        address _to,\n        uint _value,\n        string memory _reference,\n        address _sender)\n    public onlyImplementationFor(_sender) returns(bool) {\n        return etoken2.proxyTransferFromWithReference(\n            _from,\n            _to,\n            _value,\n            etoken2Symbol,\n            _reference,\n            _sender\n        );\n    }\n\n    /**\n     * Prforms allowance transfer of asset balance between holders.\n     *\n     * @param _from holder address to take from.\n     * @param _icap recipient ICAP address to give to.\n     * @param _value amount to transfer.\n     *\n     * @return success.\n     */\n    function transferFromToICAP(address _from, bytes32 _icap, uint _value)\n    public returns(bool) {\n        return transferFromToICAPWithReference(_from, _icap, _value, '');\n    }\n\n    /**\n     * Prforms allowance transfer of asset balance between holders adding specified comment.\n     * Resolves asset implementation contract for the caller and forwards there arguments along with\n     * the caller address.\n     *\n     * @param _from holder address to take from.\n     * @param _icap recipient ICAP address to give to.\n     * @param _value amount to transfer.\n     * @param _reference transfer comment to be included in a EToken2's Transfer event.\n     *\n     * @return success.\n     */\n    function transferFromToICAPWithReference(\n        address _from,\n        bytes32 _icap,\n        uint _value,\n        string memory _reference)\n    public returns(bool) {\n        return _getAsset()._performTransferFromToICAPWithReference(\n            _from,\n            _icap,\n            _value,\n            _reference,\n            msg.sender\n        );\n    }\n\n    /**\n     * Performs allowance transfer to ICAP call on the EToken2 by the name of specified sender.\n     *\n     * Can only be called by asset implementation contract assigned to sender.\n     *\n     * @param _from holder address to take from.\n     * @param _icap recipient ICAP address to give to.\n     * @param _value amount to transfer.\n     * @param _reference transfer comment to be included in a EToken2's Transfer event.\n     * @param _sender initial caller.\n     *\n     * @return success.\n     */\n    function _forwardTransferFromToICAPWithReference(\n        address _from,\n        bytes32 _icap,\n        uint _value,\n        string memory _reference,\n        address _sender)\n    public onlyImplementationFor(_sender) returns(bool) {\n        return etoken2.proxyTransferFromToICAPWithReference(\n            _from,\n            _icap,\n            _value,\n            _reference,\n            _sender\n        );\n    }\n\n    /**\n     * Sets asset spending allowance for a specified spender.\n     * Resolves asset implementation contract for the caller and forwards there arguments along with\n     * the caller address.\n     *\n     * @param _spender holder address to set allowance to.\n     * @param _value amount to allow.\n     *\n     * @return success.\n     */\n    function approve(address _spender, uint _value) public returns(bool) {\n        return _getAsset()._performApprove(_spender, _value, msg.sender);\n    }\n\n    /**\n     * Performs allowance setting call on the EToken2 by the name of specified sender.\n     *\n     * Can only be called by asset implementation contract assigned to sender.\n     *\n     * @param _spender holder address to set allowance to.\n     * @param _value amount to allow.\n     * @param _sender initial caller.\n     *\n     * @return success.\n     */\n    function _forwardApprove(address _spender, uint _value, address _sender)\n    public onlyImplementationFor(_sender) returns(bool) {\n        return etoken2.proxyApprove(_spender, _value, etoken2Symbol, _sender);\n    }\n\n    /**\n     * Emits ERC20 Transfer event on this contract.\n     *\n     * Can only be, and, called by assigned EToken2 when asset transfer happens.\n     */\n    function emitTransfer(address _from, address _to, uint _value) public onlyEToken2() {\n        emit Transfer(_from, _to, _value);\n    }\n\n    /**\n     * Emits ERC20 Approval event on this contract.\n     *\n     * Can only be, and, called by assigned EToken2 when asset allowance set happens.\n     */\n    function emitApprove(address _from, address _spender, uint _value) public onlyEToken2() {\n        emit Approval(_from, _spender, _value);\n    }\n\n    /**\n     * Resolves asset implementation contract for the caller and forwards there transaction data,\n     * along with the value. This allows for proxy interface growth.\n     */\n    function () external payable {\n        _getAsset()._performGeneric.value(msg.value)(msg.data, msg.sender);\n        _returnReturnData(true);\n    }\n\n    // Interface functions to allow specifying ICAP addresses as strings.\n    function transferToICAP(string memory _icap, uint _value) public returns(bool) {\n        return transferToICAPWithReference(_icap, _value, '');\n    }\n\n    function transferToICAPWithReference(string memory _icap, uint _value, string memory _reference)\n    public returns(bool) {\n        return transferToICAPWithReference(_bytes32(_icap), _value, _reference);\n    }\n\n    function transferFromToICAP(address _from, string memory _icap, uint _value)\n        public returns(bool)\n    {\n        return transferFromToICAPWithReference(_from, _icap, _value, '');\n    }\n\n    function transferFromToICAPWithReference(\n        address _from,\n        string memory _icap,\n        uint _value,\n        string memory _reference)\n    public returns(bool) {\n        return transferFromToICAPWithReference(_from, _bytes32(_icap), _value, _reference);\n    }\n\n    /**\n     * Indicates an upgrade freeze-time start, and the next asset implementation contract.\n     */\n    event UpgradeProposed(address newVersion);\n    event UpgradePurged(address newVersion);\n    event UpgradeCommited(address newVersion);\n    event OptedOut(address sender, address version);\n    event OptedIn(address sender, address version);\n\n    // Current asset implementation contract address.\n    address internal latestVersion;\n\n    // Proposed next asset implementation contract address.\n    address internal pendingVersion;\n\n    // Upgrade freeze-time start.\n    uint internal pendingVersionTimestamp;\n\n    // Timespan for users to review the new implementation and make decision.\n    uint internal constant UPGRADE_FREEZE_TIME = 3 days;\n\n    // Asset implementation contract address that user decided to stick with.\n    // 0x0 means that user uses latest version.\n    mapping(address => address) internal userOptOutVersion;\n\n    /**\n     * Only asset implementation contract assigned to sender is allowed to call.\n     */\n    modifier onlyImplementationFor(address _sender) {\n        if (getVersionFor(_sender) == msg.sender) {\n            _;\n        }\n    }\n\n    /**\n     * Returns asset implementation contract address assigned to sender.\n     *\n     * @param _sender sender address.\n     *\n     * @return asset implementation contract address.\n     */\n    function getVersionFor(address _sender) public view returns(address) {\n        return userOptOutVersion[_sender] == address(0) ?\n            latestVersion : userOptOutVersion[_sender];\n    }\n\n    /**\n     * Returns current asset implementation contract address.\n     *\n     * @return asset implementation contract address.\n     */\n    function getLatestVersion() public view returns(address) {\n        return latestVersion;\n    }\n\n    /**\n     * Returns proposed next asset implementation contract address.\n     *\n     * @return asset implementation contract address.\n     */\n    function getPendingVersion() public view returns(address) {\n        return pendingVersion;\n    }\n\n    /**\n     * Returns upgrade freeze-time start.\n     *\n     * @return freeze-time start.\n     */\n    function getPendingVersionTimestamp() public view returns(uint) {\n        return pendingVersionTimestamp;\n    }\n\n    /**\n     * Propose next asset implementation contract address.\n     *\n     * Can only be called by current asset owner.\n     *\n     * Note: freeze-time should not be applied for the initial setup.\n     *\n     * @param _newVersion asset implementation contract address.\n     *\n     * @return success.\n     */\n    function proposeUpgrade(address _newVersion) public onlyAssetOwner() returns(bool) {\n        // Should not already be in the upgrading process.\n        if (pendingVersion != address(0)) {\n            return false;\n        }\n        // New version address should be other than 0x0.\n        if (_newVersion == address(0)) {\n            return false;\n        }\n        // Don't apply freeze-time for the initial setup.\n        if (latestVersion == address(0)) {\n            latestVersion = _newVersion;\n            return true;\n        }\n        pendingVersion = _newVersion;\n        // solhint-disable-next-line not-rely-on-time\n        pendingVersionTimestamp = now;\n        emit UpgradeProposed(_newVersion);\n        return true;\n    }\n\n    /**\n     * Cancel the pending upgrade process.\n     *\n     * Can only be called by current asset owner.\n     *\n     * @return success.\n     */\n    function purgeUpgrade() public onlyAssetOwner() returns(bool) {\n        if (pendingVersion == address(0)) {\n            return false;\n        }\n        emit UpgradePurged(pendingVersion);\n        delete pendingVersion;\n        delete pendingVersionTimestamp;\n        return true;\n    }\n\n    /**\n     * Finalize an upgrade process setting new asset implementation contract address.\n     *\n     * Can only be called after an upgrade freeze-time.\n     *\n     * @return success.\n     */\n    function commitUpgrade() public returns(bool) {\n        if (pendingVersion == address(0)) {\n            return false;\n        }\n        // solhint-disable-next-line not-rely-on-time\n        if (pendingVersionTimestamp + UPGRADE_FREEZE_TIME > now) {\n            return false;\n        }\n        latestVersion = pendingVersion;\n        delete pendingVersion;\n        delete pendingVersionTimestamp;\n        emit UpgradeCommited(latestVersion);\n        return true;\n    }\n\n    /**\n     * Disagree with proposed upgrade, and stick with current asset implementation\n     * until further explicit agreement to upgrade.\n     *\n     * @return success.\n     */\n    function optOut() public returns(bool) {\n        if (userOptOutVersion[msg.sender] != address(0)) {\n            return false;\n        }\n        userOptOutVersion[msg.sender] = latestVersion;\n        emit OptedOut(msg.sender, latestVersion);\n        return true;\n    }\n\n    /**\n     * Implicitly agree to upgrade to current and future asset implementation upgrades,\n     * until further explicit disagreement.\n     *\n     * @return success.\n     */\n    function optIn() public returns(bool) {\n        delete userOptOutVersion[msg.sender];\n        emit OptedIn(msg.sender, latestVersion);\n        return true;\n    }\n\n    // Backwards compatibility.\n    function multiAsset() public view returns(EToken2Interface) {\n        return etoken2;\n    }\n}",
  "bytecode": "608060405234801561001057600080fd5b506126bb806100206000396000f3fe6080604052600436106102855760003560e01c80637609c5a911610153578063a525f42c116100cb578063b2b45df51161007f578063d4eec5a611610064578063d4eec5a6146111eb578063dd62ed3e14611200578063fe8beb711461123b57610285565b8063b2b45df51461106e578063c915fc93146111b857610285565b8063a883fb90116100b0578063a883fb9014610f58578063a9059cbb14610f6d578063ac35caee14610fa657610285565b8063a525f42c14610f04578063a66e6e5c14610f4357610285565b806384c5c34d116101225780639ab253cc116101075780639ab253cc14610c195780639b487f3f14610d5b578063a48a663c14610e3557610285565b806384c5c34d14610ab257806395d89b4114610c0457610285565b80637609c5a91461083657806377fe38a4146108fb5780637bcdc2f0146109ba57806381d434e9146109fd57610285565b806323de6651116102015780635b48684e116101b55780636461fe391161019a5780636461fe391461070057806370a08231146107d3578063733480b71461080657610285565b80635b48684e146106a85780635f3e849f146106bd57610285565b8063406838b3116101e6578063406838b3146106695780634bfaf2e81461067e5780634dfe950d1461069357610285565b806323de6651146105fb578063313ce5671461063e57610285565b80630e6d1de91161025857806318160ddd1161023d57806318160ddd1461054e578063233850891461057557806323b872dd146105b857610285565b80630e6d1de91461045b57806314cba0021461047057610285565b8063029a8bf71461033e57806306fdde031461036f578063095ea7b3146103f95780630ba12c8314610446575b61028d61126e565b6001600160a01b031663db00b84834600036336040518563ffffffff1660e01b81526004018080602001836001600160a01b03166001600160a01b031681526020018281038252858582818152602001925080828437600081840152601f19601f8201169050808301925050509450505050506000604051808303818588803b15801561031957600080fd5b505af115801561032d573d6000803e3d6000fd5b505050505061033c600161127f565b005b34801561034a57600080fd5b5061035361129a565b604080516001600160a01b039092168252519081900360200190f35b34801561037b57600080fd5b506103846112a9565b6040805160208082528351818301528351919283929083019185019080838360005b838110156103be5781810151838201526020016103a6565b50505050905090810190601f1680156103eb5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561040557600080fd5b506104326004803603604081101561041c57600080fd5b506001600160a01b038135169060200135611352565b604080519115158252519081900360200190f35b34801561045257600080fd5b50610432611402565b34801561046757600080fd5b506103536114b6565b34801561047c57600080fd5b50610432600480360360a081101561049357600080fd5b6001600160a01b038235811692602081013590911691604082013591908101906080810160608201356401000000008111156104ce57600080fd5b8201836020820111156104e057600080fd5b8035906020019184600183028401116401000000008311171561050257600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550505090356001600160a01b031691506114c59050565b34801561055a57600080fd5b5061056361161d565b60408051918252519081900360200190f35b34801561058157600080fd5b5061033c6004803603606081101561059857600080fd5b506001600160a01b038135811691602081013590911690604001356116b7565b3480156105c457600080fd5b50610432600480360360608110156105db57600080fd5b506001600160a01b0381358116916020810135909116906040013561171a565b34801561060757600080fd5b5061033c6004803603606081101561061e57600080fd5b506001600160a01b03813581169160208101359091169060400135611741565b34801561064a57600080fd5b506106536117a4565b6040805160ff9092168252519081900360200190f35b34801561067557600080fd5b5061035361180d565b34801561068a57600080fd5b5061056361181c565b34801561069f57600080fd5b50610432611822565b3480156106b457600080fd5b5061043261194c565b3480156106c957600080fd5b50610432600480360360608110156106e057600080fd5b506001600160a01b038135811691602081013590911690604001356119d1565b34801561070c57600080fd5b506104326004803603608081101561072357600080fd5b6001600160a01b0382358116926020810135909116916040820135919081019060808101606082013564010000000081111561075e57600080fd5b82018360208201111561077057600080fd5b8035906020019184600183028401116401000000008311171561079257600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550611b05945050505050565b3480156107df57600080fd5b50610563600480360360208110156107f657600080fd5b50356001600160a01b0316611c41565b34801561081257600080fd5b506104326004803603604081101561082957600080fd5b5080359060200135611ce7565b34801561084257600080fd5b506104326004803603606081101561085957600080fd5b6001600160a01b03823516919081019060408101602082013564010000000081111561088457600080fd5b82018360208201111561089657600080fd5b803590602001918460018302840111640100000000831117156108b857600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295505091359250611d03915050565b34801561090757600080fd5b506104326004803603606081101561091e57600080fd5b81359160208101359181019060608101604082013564010000000081111561094557600080fd5b82018360208201111561095757600080fd5b8035906020019184600183028401116401000000008311171561097957600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550611d20945050505050565b3480156109c657600080fd5b50610432600480360360608110156109dd57600080fd5b506001600160a01b03813581169160208101359160409091013516611dfb565b348015610a0957600080fd5b5061043260048036036040811015610a2057600080fd5b810190602081018135640100000000811115610a3b57600080fd5b820183602082011115610a4d57600080fd5b80359060200191846001830284011164010000000083111715610a6f57600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295505091359250611ed3915050565b348015610abe57600080fd5b5061043260048036036080811015610ad557600080fd5b6001600160a01b038235169190810190604081016020820135640100000000811115610b0057600080fd5b820183602082011115610b1257600080fd5b80359060200191846001830284011164010000000083111715610b3457600080fd5b91908080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525092958435959094909350604081019250602001359050640100000000811115610b8f57600080fd5b820183602082011115610ba157600080fd5b80359060200191846001830284011164010000000083111715610bc357600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550611eef945050505050565b348015610c1057600080fd5b50610384611f0e565b348015610c2557600080fd5b5061043260048036036060811015610c3c57600080fd5b810190602081018135640100000000811115610c5757600080fd5b820183602082011115610c6957600080fd5b80359060200191846001830284011164010000000083111715610c8b57600080fd5b91908080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525092958435959094909350604081019250602001359050640100000000811115610ce657600080fd5b820183602082011115610cf857600080fd5b80359060200191846001830284011164010000000083111715610d1a57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550611f87945050505050565b348015610d6757600080fd5b50610432600480360360a0811015610d7e57600080fd5b6001600160a01b038235169160208101359160408201359190810190608081016060820135640100000000811115610db557600080fd5b820183602082011115610dc757600080fd5b80359060200191846001830284011164010000000083111715610de957600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550505090356001600160a01b03169150611f9c9050565b348015610e4157600080fd5b5061043260048036036080811015610e5857600080fd5b6001600160a01b038235169160208101359160408201359190810190608081016060820135640100000000811115610e8f57600080fd5b820183602082011115610ea157600080fd5b80359060200191846001830284011164010000000083111715610ec357600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295506120b8945050505050565b348015610f1057600080fd5b5061043260048036036060811015610f2757600080fd5b506001600160a01b03813516906020810135906040013561215c565b348015610f4f57600080fd5b50610563612179565b348015610f6457600080fd5b5061035361217f565b348015610f7957600080fd5b5061043260048036036040811015610f9057600080fd5b506001600160a01b03813516906020013561218e565b348015610fb257600080fd5b5061043260048036036060811015610fc957600080fd5b6001600160a01b0382351691602081013591810190606081016040820135640100000000811115610ff957600080fd5b82018360208201111561100b57600080fd5b8035906020019184600183028401116401000000008311171561102d57600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295506121a6945050505050565b34801561107a57600080fd5b506104326004803603606081101561109157600080fd5b6001600160a01b0382351691908101906040810160208201356401000000008111156110bc57600080fd5b8201836020820111156110ce57600080fd5b803590602001918460018302840111640100000000831117156110f057600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929594936020810193503591505064010000000081111561114357600080fd5b82018360208201111561115557600080fd5b8035906020019184600183028401116401000000008311171561117757600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929550612241945050505050565b3480156111c457600080fd5b50610432600480360360208110156111db57600080fd5b50356001600160a01b03166122cc565b3480156111f757600080fd5b5061043261245b565b34801561120c57600080fd5b506105636004803603604081101561122357600080fd5b506001600160a01b038135811691602001351661250d565b34801561124757600080fd5b506103536004803603602081101561125e57600080fd5b50356001600160a01b031661259b565b60006112793361259b565b90505b90565b60003d6000823e818015611291573d82f35b3d82fd5b505050565b6000546001600160a01b031690565b600280546040805160206001841615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff01909316849004601f8101849004840282018401909252818152929183018282801561134a5780601f1061131f5761010080835404028352916020019161134a565b820191906000526020600020905b81548152906001019060200180831161132d57829003601f168201915b505050505081565b600061135c61126e565b604080517fe34f71370000000000000000000000000000000000000000000000000000000081526001600160a01b038681166004830152602482018690523360448301529151929091169163e34f7137916064808201926020929091908290030181600087803b1580156113cf57600080fd5b505af11580156113e3573d6000803e3d6000fd5b505050506040513d60208110156113f957600080fd5b50519392505050565b6005546000906001600160a01b031661141d5750600061127c565b426203f4806006540111156114345750600061127c565b60058054600480546001600160a01b038084167fffffffffffffffffffffffff000000000000000000000000000000000000000092831617928390559216909255600060065560408051929091168252517f3d14778962aac3ae6130883f4c9d2e995d6fc2a644b7867087a59e92b954b4ed916020908290030190a150600190565b6004546001600160a01b031690565b600081336114d28261259b565b6001600160a01b0316141561161357600080546001546040517f161ff6620000000000000000000000000000000000000000000000000000000081526001600160a01b038b8116600483019081528b82166024840152604483018b90526064830184905288821660a484015260c0608484019081528a5160c48501528a51929095169563161ff662958e958e958e9591948e948e949193919260e4019160208701918190849084905b8381101561159357818101518382015260200161157b565b50505050905090810190601f1680156115c05780820380516001836020036101000a031916815260200191505b50975050505050505050602060405180830381600087803b1580156115e457600080fd5b505af11580156115f8573d6000803e3d6000fd5b505050506040513d602081101561160e57600080fd5b505191505b5095945050505050565b60008054600154604080517fb524abcf0000000000000000000000000000000000000000000000000000000081526004810192909252516001600160a01b039092169163b524abcf91602480820192602092909190829003018186803b15801561168657600080fd5b505afa15801561169a573d6000803e3d6000fd5b505050506040513d60208110156116b057600080fd5b5051905090565b6000546001600160a01b031633141561129557816001600160a01b0316836001600160a01b03167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925836040518082815260200191505060405180910390a3505050565b600061173784848460405180602001604052806000815250611b05565b90505b9392505050565b6000546001600160a01b031633141561129557816001600160a01b0316836001600160a01b03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040518082815260200191505060405180910390a3505050565b60008054600154604080517fdc86e6f00000000000000000000000000000000000000000000000000000000081526004810192909252516001600160a01b039092169163dc86e6f091602480820192602092909190829003018186803b15801561168657600080fd5b6000546001600160a01b031681565b60065490565b60008054600154604080517fe96b462a0000000000000000000000000000000000000000000000000000000081523360048201526024810192909252516001600160a01b039092169163e96b462a91604480820192602092909190829003018186803b15801561189157600080fd5b505afa1580156118a5573d6000803e3d6000fd5b505050506040513d60208110156118bb57600080fd5b50511561127c576005546001600160a01b03166118da5750600061127c565b600554604080516001600160a01b039092168252517f076759518ae32ffdfd36b17503d14cdd8042c074645c635aa26dceea2719acef9181900360200190a150600580547fffffffffffffffffffffffff00000000000000000000000000000000000000001690556000600655600190565b33600081815260076020908152604080832080547fffffffffffffffffffffffff000000000000000000000000000000000000000016905560045481519485526001600160a01b031691840191909152805191927fd70d37e6618959bdba868db2d4138b221ef96101565dfc1a0bd38af1d3ab63c1929081900390910190a150600190565b60008054600154604080517fe96b462a0000000000000000000000000000000000000000000000000000000081523360048201526024810192909252516001600160a01b039092169163e96b462a91604480820192602092909190829003018186803b158015611a4057600080fd5b505afa158015611a54573d6000803e3d6000fd5b505050506040513d6020811015611a6a57600080fd5b50511561173a57836001600160a01b031663a9059cbb84846040518363ffffffff1660e01b815260040180836001600160a01b03166001600160a01b0316815260200182815260200192505050602060405180830381600087803b158015611ad157600080fd5b505af1158015611ae5573d6000803e3d6000fd5b505050506040513d6020811015611afb57600080fd5b5051949350505050565b6000611b0f61126e565b6001600160a01b031663cca9702586868686336040518663ffffffff1660e01b815260040180866001600160a01b03166001600160a01b03168152602001856001600160a01b03166001600160a01b0316815260200184815260200180602001836001600160a01b03166001600160a01b03168152602001828103825284818151815260200191508051906020019080838360005b83811015611bbc578181015183820152602001611ba4565b50505050905090810190601f168015611be95780820380516001836020036101000a031916815260200191505b509650505050505050602060405180830381600087803b158015611c0c57600080fd5b505af1158015611c20573d6000803e3d6000fd5b505050506040513d6020811015611c3657600080fd5b505195945050505050565b60008054600154604080517f4d30b6be0000000000000000000000000000000000000000000000000000000081526001600160a01b038681166004830152602482019390935290519190921691634d30b6be916044808301926020929190829003018186803b158015611cb357600080fd5b505afa158015611cc7573d6000803e3d6000fd5b505050506040513d6020811015611cdd57600080fd5b505190505b919050565b600061173a838360405180602001604052806000815250611d20565b600061173784848460405180602001604052806000815250611eef565b6000611d2a61126e565b6001600160a01b031663c10796df858585336040518563ffffffff1660e01b81526004018085815260200184815260200180602001836001600160a01b03166001600160a01b03168152602001828103825284818151815260200191508051906020019080838360005b83811015611dac578181015183820152602001611d94565b50505050905090810190601f168015611dd95780820380516001836020036101000a031916815260200191505b5095505050505050602060405180830381600087803b158015611ad157600080fd5b60008133611e088261259b565b6001600160a01b03161415611ecb5760008054600154604080517f14712e2f0000000000000000000000000000000000000000000000000000000081526001600160a01b038a81166004830152602482018a905260448201939093528783166064820152905191909216926314712e2f92608480820193602093909283900390910190829087803b158015611e9c57600080fd5b505af1158015611eb0573d6000803e3d6000fd5b505050506040513d6020811015611ec657600080fd5b505191505b509392505050565b600061173a838360405180602001604052806000815250611f87565b6000611f0585611efe866125f0565b85856120b8565b95945050505050565b6003805460408051602060026001851615610100027fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0190941693909304601f8101849004840282018401909252818152929183018282801561134a5780601f1061131f5761010080835404028352916020019161134a565b6000611737611f95856125f0565b8484611d20565b60008133611fa98261259b565b6001600160a01b03161415611613576000809054906101000a90046001600160a01b03166001600160a01b031663a69032ee88888888886040518663ffffffff1660e01b815260040180866001600160a01b03166001600160a01b0316815260200185815260200184815260200180602001836001600160a01b03166001600160a01b03168152602001828103825284818151815260200191508051906020019080838360005b83811015612068578181015183820152602001612050565b50505050905090810190601f1680156120955780820380516001836020036101000a031916815260200191505b509650505050505050602060405180830381600087803b1580156115e457600080fd5b60006120c261126e565b6001600160a01b031663eb58705b86868686336040518663ffffffff1660e01b815260040180866001600160a01b03166001600160a01b0316815260200185815260200184815260200180602001836001600160a01b03166001600160a01b031681526020018281038252848181518152602001915080519060200190808383600083811015611bbc578181015183820152602001611ba4565b6000611737848484604051806020016040528060008152506120b8565b60015481565b6005546001600160a01b031690565b600061173a8383604051806020016040528060008152505b60006121b061126e565b6040517f1962df710000000000000000000000000000000000000000000000000000000081526001600160a01b03868116600483019081526024830187905233606484018190526080604485019081528751608486015287519590931694631962df71948a948a948a9493909260a40190602086019080838360008315611dac578181015183820152602001611d94565b600080546001600160a01b03161561225b5750600061173a565b600080547fffffffffffffffffffffffff0000000000000000000000000000000000000000166001600160a01b038616179055612297836125f0565b60015581516122ad9060029060208501906125f7565b5082516122c19060039060208601906125f7565b506001949350505050565b60008054600154604080517fe96b462a0000000000000000000000000000000000000000000000000000000081523360048201526024810192909252516001600160a01b039092169163e96b462a91604480820192602092909190829003018186803b15801561233b57600080fd5b505afa15801561234f573d6000803e3d6000fd5b505050506040513d602081101561236557600080fd5b505115611ce2576005546001600160a01b03161561238557506000611ce2565b6001600160a01b03821661239b57506000611ce2565b6004546001600160a01b03166123e65750600480547fffffffffffffffffffffffff0000000000000000000000000000000000000000166001600160a01b0383161790556001611ce2565b600580546001600160a01b0384167fffffffffffffffffffffffff000000000000000000000000000000000000000090911681179091554260065560408051918252517f8ddc9aa7b538ef74fb9f825a27578614d8cd88e4062392c6613d2d65ed987d769181900360200190a1506001919050565b336000908152600760205260408120546001600160a01b0316156124815750600061127c565b600480543360008181526007602090815260409182902080547fffffffffffffffffffffffff0000000000000000000000000000000000000000166001600160a01b03958616179055935481519283529092169281019290925280517fe1dc7792699a69777c1f0b1695b7c1b9a2677af13bb0b61b9b9b975d30acf7b29281900390910190a150600190565b60008054600154604080517f1c8d5d380000000000000000000000000000000000000000000000000000000081526001600160a01b0387811660048301528681166024830152604482019390935290519190921691631c8d5d38916064808301926020929190829003018186803b15801561258757600080fd5b505afa1580156113e3573d6000803e3d6000fd5b6001600160a01b03818116600090815260076020526040812054909116156125dd576001600160a01b03808316600090815260076020526040902054166125ea565b6004546001600160a01b03165b92915050565b6020015190565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061263857805160ff1916838001178555612665565b82800160010185558215612665579182015b8281111561266557825182559160200191906001019061264a565b50612671929150612675565b5090565b61127c91905b80821115612671576000815560010161267b56fea165627a7a72305820154bd9f5278cc0eca8563343acc16bf5fc6717560cdf3c21a0719f7755eb4bd70029"
}