{
  "address": "0xde2b11b71ad892ac3e47ce99d107788d65fe764e",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "FairExchange",
  "compilerVersion": "v0.4.25+commit.59dbf8f1",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2018-10-11\n*/\n\npragma solidity ^0.4.25;\n\n/*\n*\n*  https://fairdapp.com/exchange/  https://fairdapp.com/exchange/   https://fairdapp.com/exchange/\n*\n*                _______     _       ______  _______ ______ ______  \n*               (_______)   (_)     (______)(_______|_____ (_____ \\ \n*                _____ _____ _  ____ _     _ _______ _____) )____) )\n*               |  ___|____ | |/ ___) |   | |  ___  |  ____/  ____/ \n*               | |   / ___ | | |   | |__/ /| |   | | |    | |      \n*               |_|   \\_____|_|_|   |_____/ |_|   |_|_|    |_|      \n*                                                                   \n*                _______            _                               \n*               (_______)          | |                              \n*                _____   _   _ ____| |__  _____ ____   ____ _____   \n*               |  ___) ( \\ / ) ___)  _ \\(____ |  _ \\ / _  | ___ |  \n*               | |_____ ) X ( (___| | | / ___ | | | ( (_| | ____|  \n*               |_______|_/ \\_)____)_| |_\\_____|_| |_|\\___ |_____)  \n*                                                    (_____| \n*  Warning:\n*     \n*  This contract is intended to link DAPPs on the FairDAPP platform. \n*  All could be lost by sending anything to this contract address. \n*  All users are prohibited to interact with this contract if this \n*  contract is in conflict with userâ€™s local regulations or laws.\n*  \n*  Original code by TEAM JUST\n*  Original concept by Dr. Jochen Hoenicke\n*  Modified by the FairDAPP community with more scalable and fairer settings. \n* \n*/\n\ncontract FairExchange {\n    \n    using NameFilter for string;\n    /*=================================\n    =            MODIFIERS            =\n    =================================*/\n    // only people with tokens\n    modifier onlyBagholders() {\n        require(myTokens() > 0);\n        _;\n    }\n    \n    // only people with profits\n    modifier onlyStronghands() {\n        require(myDividends(true) > 0);\n        _;\n    }\n    \n    // administrators can:\n    // -> change the name of the contract\n    // -> change the name of the token\n    // -> Allow contracts to use transfer functions\n    // they CANNOT:\n    // -> take funds\n    // -> disable withdrawals\n    // -> kill the contract\n    // -> change the price of tokens\n    modifier onlyAdministrator(){\n        address _customerAddress = msg.sender;\n        require(administrators[keccak256(abi.encodePacked(_customerAddress))]);\n        _;\n    }\n    \n    modifier buyVerify(uint256 _amountOfEthereum){\n        \n        if((totalEthereumBalance() - _amountOfEthereum) < whaleBalanceLimit)\n            require(tx.gasprice <= gaspriceMax);\n        \n        address _customerAddress = msg.sender;\n        if(onlyAmbassadors && now <= startTime)\n            require(ambassadors_[_customerAddress]);\n        else{\n            \n            if(onlyAmbassadors)\n                onlyAmbassadors = false;\n                \n            if((totalEthereumBalance() - _amountOfEthereum) < whaleBalanceLimit)\n                require(_amountOfEthereum <= maxEarlyStake);\n        }\n        _;\n    }\n    \n    \n    /*==============================\n    =            EVENTS            =\n    ==============================*/\n    event onTokenPurchase(\n        address indexed customerAddress,\n        uint256 incomingEthereum,\n        uint256 tokensMinted,\n        address indexed referredBy\n    );\n    \n    event onTokenSell(\n        address indexed customerAddress,\n        uint256 tokensBurned,\n        uint256 ethereumEarned\n    );\n    \n    event onReinvestment(\n        address indexed customerAddress,\n        uint256 ethereumReinvested,\n        uint256 tokensMinted\n    );\n    \n    event onWithdraw(\n        address indexed customerAddress,\n        uint256 ethereumWithdrawn\n    );\n    \n    // ERC223\n    event Transfer(\n        address indexed from,\n        address indexed to,\n        uint256 tokens,\n        bytes data\n    );\n    \n    \n    /*=====================================\n    =            CONFIGURABLES            =\n    =====================================*/\n    string public name = \"FairExchange\";\n    string public symbol = \"Fair\";\n    uint8 constant public decimals = 18;\n    uint8 constant internal dividendFee_ = 10;\n    uint256 constant internal tokenPriceInitial_ = 0.0001 ether;\n    uint256 constant internal tokenPriceIncremental_ = 0.000000005 ether;\n    uint256 constant internal magnitude = 2**64;\n    \n    uint256 public gaspriceMax = 20000000000;\n    uint256 public startTime = 1539478800;\n    \n    /// @dev anti-early-whale\n    uint256 public maxEarlyStake = 2.5 ether;\n    uint256 public whaleBalanceLimit = 250 ether;\n\n\n    // private offering program\n    mapping(address => bool) internal ambassadors_;\n    \n    \n   /*================================\n    =            DATASETS            =\n    ================================*/\n    // amount of shares for each address (scaled number)\n    mapping(address => uint256) internal tokenBalanceLedger_;\n    mapping(address => uint256) internal referralBalance_;\n    mapping(address => int256) internal payoutsTo_;\n    \n    uint256 internal tokenSupply_ = 0;\n    uint256 internal profitPerShare_;\n    \n    // administrator list (see above on what they can do)\n    mapping(bytes32 => bool) public administrators;\n    \n    // when this is set to true, only ambassadors can purchase tokens (this prevents a whale premine, it ensures a fairly distributed upper pyramid)\n    bool public onlyAmbassadors = true;\n    \n    mapping (address => bytes32) public register;\n    mapping (bytes32 => address) public userName;\n    mapping (address => bool) public user;\n    \n\n\n    /*=======================================\n    =            PUBLIC FUNCTIONS            =\n    =======================================*/\n    /*\n    * -- APPLICATION ENTRY POINTS --  \n    */\n    constructor()\n        public\n    {\n        // add administrators here\n        administrators[0x851d084c805eabf5ec90588a0f5cade287038d80d52c510eefe81f320e97cdcc] = true;\n        \n        // add the ambassadors here.\n\t\t// max 113 ETH, 40% to developer, 60% to limited quota private sales\n        ambassadors_[0xbC817A495f0114755Da5305c5AA84fc5ca7ebaBd] = true;\n\n    }\n    \n    function registered(string _userName)\n        public\n    {\n        address _customerAddress = msg.sender;\n        bytes32 _name = _userName.nameFilter();\n        \n        require (_customerAddress == tx.origin, \"sender does not meet the rules\");\n        require(_name != bytes32(0), \"name cannot be empty\");\n        require(userName[_name] == address(0), \"this name has already been registered\");\n        require(register[_customerAddress] == bytes32(0), \"please do not repeat registration\");\n        \n        userName[_name] = _customerAddress;\n        register[_customerAddress] = _name;\n        \n        if(!user[_customerAddress])\n            user[_customerAddress] = true;\n    }\n     \n    /**\n     * Converts all incoming ethereum to tokens for the caller, and passes down the referral addy (if any)\n     */\n    function buy(address _referredBy)\n        buyVerify(msg.value)\n        public\n        payable\n        returns(uint256)\n    {\n        purchaseTokens(msg.value, _referredBy);\n    }\n    \n    /**\n     * Converts all incoming ethereum to tokens for the caller, and passes down the referral addy (if any)\n     */\n    function buyXname(string _referredName)\n        buyVerify(msg.value)\n        public\n        payable\n        returns(uint256)\n    {\n        purchaseTokens(msg.value, userName[_referredName.nameFilter()]);\n    }\n    \n    /**\n     * Fallback function to handle ethereum that was send straight to the contract\n     * Unfortunately we cannot use a referral address this way.\n     */\n    function()\n        buyVerify(msg.value)\n        payable\n        public\n    {\n        purchaseTokens(msg.value, 0x0);\n    }\n    \n    /**\n     * Converts all of caller's dividends to tokens.\n     */\n    function reinvest()\n        onlyStronghands()\n        public\n    {\n        // fetch dividends\n        uint256 _dividends = myDividends(false); // retrieve ref. bonus later in the code\n        \n        // pay out the dividends virtually\n        address _customerAddress = msg.sender;\n        payoutsTo_[_customerAddress] +=  (int256) (_dividends * magnitude);\n        \n        // retrieve ref. bonus\n        _dividends += referralBalance_[_customerAddress];\n        referralBalance_[_customerAddress] = 0;\n        \n        // dispatch a buy order with the virtualized \"withdrawn dividends\"\n        uint256 _tokens = purchaseTokens(_dividends, 0x0);\n        \n        // fire event\n        emit onReinvestment(_customerAddress, _dividends, _tokens);\n    }\n    \n    /**\n     * Alias of sell() and withdraw().\n     */\n    function exit()\n        public\n    {\n        // get token count for caller & sell them all\n        address _customerAddress = msg.sender;\n        uint256 _tokens = tokenBalanceLedger_[_customerAddress];\n        if(_tokens > 0) sell(_tokens);\n        \n        // lambo delivery service\n        withdraw();\n    }\n\n    /**\n     * Withdraws all of the callers earnings.\n     */\n    function withdraw()\n        onlyStronghands()\n        public\n    {\n        // setup data\n        address _customerAddress = msg.sender;\n        uint256 _dividends = myDividends(false); // get ref. bonus later in the code\n        \n        // update dividend tracker\n        payoutsTo_[_customerAddress] +=  (int256) (_dividends * magnitude);\n        \n        // add ref. bonus\n        _dividends += referralBalance_[_customerAddress];\n        referralBalance_[_customerAddress] = 0;\n        \n        // lambo delivery service\n        _customerAddress.transfer(_dividends);\n        \n        // fire event\n        emit onWithdraw(_customerAddress, _dividends);\n    }\n    \n    /**\n     * Liquifies tokens to ethereum.\n     */\n    function sell(uint256 _amountOfTokens)\n        onlyBagholders()\n        public\n    {\n        // setup data\n        address _customerAddress = msg.sender;\n        // russian hackers BTFO\n        require(_amountOfTokens <= tokenBalanceLedger_[_customerAddress]);\n        uint256 _tokens = _amountOfTokens;\n        uint256 _ethereum = tokensToEthereum_(_tokens);\n        uint256 _dividends = SafeMath.div(_ethereum, dividendFee_);\n        uint256 _taxedEthereum = SafeMath.sub(_ethereum, _dividends);\n        \n        // burn the sold tokens\n        tokenSupply_ = SafeMath.sub(tokenSupply_, _tokens);\n        tokenBalanceLedger_[_customerAddress] = SafeMath.sub(tokenBalanceLedger_[_customerAddress], _tokens);\n        \n        // update dividends tracker\n        int256 _updatedPayouts = (int256) (profitPerShare_ * _tokens + (_taxedEthereum * magnitude));\n        payoutsTo_[_customerAddress] -= _updatedPayouts;       \n        \n        // dividing by zero is a bad idea\n        if (tokenSupply_ > 0) {\n            // update the amount of dividends per token\n            profitPerShare_ = SafeMath.add(profitPerShare_, (_dividends * magnitude) / tokenSupply_);\n        }\n        \n        // fire event\n        emit onTokenSell(_customerAddress, _tokens, _taxedEthereum);\n    }\n    \n    \n    /**\n     * ERC20 Transfer\n     * Contract address is blocked from using the transfer function\n     * Contact us to approve contracts for transfer\n     * Contracts will not be a registered user by default\n     * All contracts will be approved unless the contract is malicious\n     */\n    function transfer(address _toAddress, uint256 _amountOfTokens)\n        onlyBagholders()\n        public\n        returns(bool)\n    {\n        // setup\n        address _customerAddress = msg.sender;\n        \n        require(_amountOfTokens <= tokenBalanceLedger_[_customerAddress]);\n        require(user[_customerAddress]);\n        \n        // withdraw all outstanding dividends first\n        if(myDividends(true) > 0) withdraw();\n\n        // exchange tokens\n        tokenBalanceLedger_[_customerAddress] = SafeMath.sub(tokenBalanceLedger_[_customerAddress], _amountOfTokens);\n        tokenBalanceLedger_[_toAddress] = SafeMath.add(tokenBalanceLedger_[_toAddress], _amountOfTokens);\n        \n        // update dividend trackers\n        payoutsTo_[_customerAddress] -= (int256) (profitPerShare_ * _amountOfTokens);\n        payoutsTo_[_toAddress] += (int256) (profitPerShare_ * _amountOfTokens);\n        \n        bytes memory _empty;\n        uint256 codeLength;\n        assembly {\n            codeLength := extcodesize(_toAddress)\n        }\n        if(codeLength > 0){\n            ERC223ReceivingContract receiver = ERC223ReceivingContract(_toAddress);\n            receiver.tokenFallback(_customerAddress, _amountOfTokens, _empty);\n        }\n        \n        // fire event\n        emit Transfer(_customerAddress, _toAddress, _amountOfTokens, _empty);\n        \n        // ERC20\n        return true;\n    }\n    \n    /**\n     * ERC223 Transfer\n     * Contract address is blocked from using the transfer function\n     * Contact us to approve contracts for transfer \n     * Contracts will not be a registered user by default\n     * All contracts will be approved unless the contract is malicious\n     */\n    function transfer(address _toAddress, uint256 _amountOfTokens, bytes _data)\n        onlyBagholders()\n        public\n        returns(bool)\n    {\n        // setup\n        address _customerAddress = msg.sender;\n        \n        require(_amountOfTokens <= tokenBalanceLedger_[_customerAddress]);\n        require(user[_customerAddress]);\n        \n        // withdraw all outstanding dividends first\n        if(myDividends(true) > 0) withdraw();\n        \n        // exchange tokens\n        tokenBalanceLedger_[_customerAddress] = SafeMath.sub(tokenBalanceLedger_[_customerAddress], _amountOfTokens);\n        tokenBalanceLedger_[_toAddress] = SafeMath.add(tokenBalanceLedger_[_toAddress], _amountOfTokens);\n        \n        // update dividend trackers\n        payoutsTo_[_customerAddress] -= (int256) (profitPerShare_ * _amountOfTokens);\n        payoutsTo_[_toAddress] += (int256) (profitPerShare_ * _amountOfTokens);\n        \n        uint256 codeLength;\n        assembly {\n            codeLength := extcodesize(_toAddress)\n        }\n        if(codeLength > 0){\n            ERC223ReceivingContract receiver = ERC223ReceivingContract(_toAddress);\n            receiver.tokenFallback(_customerAddress, _amountOfTokens, _data);\n        }\n        \n        // fire event\n        emit Transfer(_customerAddress, _toAddress, _amountOfTokens, _data);\n        \n        // ERC223\n        return true;  \n    }\n    \n    /*----------  ADMINISTRATOR ONLY FUNCTIONS  ----------*/\n    \n    /**\n     * In case one of us dies, we need to replace ourselves.\n     */\n    function setAdministrator(bytes32 _identifier, bool _status)\n        onlyAdministrator()\n        public\n    {\n        administrators[_identifier] = _status;\n    }\n    \n    /**\n     * If we want to rebrand, we can.\n     */\n    function setName(string _name)\n        onlyAdministrator()\n        public\n    {\n        name = _name;\n    }\n    \n    /**\n     * If we want to rebrand, we can.\n     */\n    function setSymbol(string _symbol)\n        onlyAdministrator()\n        public\n    {\n        symbol = _symbol;\n    }\n    \n    /**\n     * Change start time.\n     */\n    function setTimestamp(uint256 _timestamp)\n        onlyAdministrator()\n        public\n    {\n        require(now < 1541001600);\n        startTime = _timestamp;\n    }\n    \n    /**\n     * Manually add a user to contract for transfer.\n     */\n    function setUser(address[] _userAddress)\n        onlyAdministrator()\n        public\n    {\n        uint256 _length = _userAddress.length;\n        require(_length > 0);\n        \n        for(uint256 i = 0; i < _length; i++){\n            \n            if(!user[_userAddress[i]])\n                user[_userAddress[i]] = true;\n        }\n    }\n\n    \n    /*----------  HELPERS AND CALCULATORS  ----------*/\n    /**\n     * Method to view the current Ethereum stored in the contract\n     * Example: totalEthereumBalance()\n     */\n    function totalEthereumBalance()\n        public\n        view\n        returns(uint)\n    {\n        return address(this).balance;\n    }\n    \n    /**\n     * Retrieve the total token supply.\n     */\n    function totalSupply()\n        public\n        view\n        returns(uint256)\n    {\n        return tokenSupply_;\n    }\n    \n    /**\n     * Retrieve the tokens owned by the caller.\n     */\n    function myTokens()\n        public\n        view\n        returns(uint256)\n    {\n        address _customerAddress = msg.sender;\n        return balanceOf(_customerAddress);\n    }\n    \n    /**\n     * Retrieve the dividends owned by the caller.\n     * If `_includeReferralBonus` is to to 1/true, the referral bonus will be included in the calculations.\n     * The reason for this, is that in the frontend, we will want to get the total divs (global + ref)\n     * But in the internal calculations, we want them separate. \n     */ \n    function myDividends(bool _includeReferralBonus) \n        public \n        view \n        returns(uint256)\n    {\n        address _customerAddress = msg.sender;\n        return _includeReferralBonus ? dividendsOf(_customerAddress) + referralBalance_[_customerAddress] : dividendsOf(_customerAddress) ;\n    }\n    \n    /**\n     * Retrieve the token balance of any single address.\n     */\n    function balanceOf(address _customerAddress)\n        view\n        public\n        returns(uint256)\n    {\n        return tokenBalanceLedger_[_customerAddress];\n    }\n    \n    /**\n     * Retrieve the dividend balance of any single address.\n     */\n    function dividendsOf(address _customerAddress)\n        view\n        public\n        returns(uint256)\n    {\n        return (uint256) ((int256)(profitPerShare_ * tokenBalanceLedger_[_customerAddress]) - payoutsTo_[_customerAddress]) / magnitude;\n    }\n    \n    /**\n     * Return the buy price of 1 individual token.\n     */\n    function sellPrice() \n        public \n        view \n        returns(uint256)\n    {\n        // our calculation relies on the token supply, so we need supply. Doh.\n        if(tokenSupply_ == 0){\n            return tokenPriceInitial_ - tokenPriceIncremental_;\n        } else {\n            uint256 _ethereum = tokensToEthereum_(1e18);\n            uint256 _dividends = SafeMath.div(_ethereum, dividendFee_  );\n            uint256 _taxedEthereum = SafeMath.sub(_ethereum, _dividends);\n            return _taxedEthereum;\n        }\n    }\n    \n    /**\n     * Return the sell price of 1 individual token.\n     */\n    function buyPrice() \n        public \n        view \n        returns(uint256)\n    {\n        // our calculation relies on the token supply, so we need supply. Doh.\n        if(tokenSupply_ == 0){\n            return tokenPriceInitial_ + tokenPriceIncremental_;\n        } else {\n            uint256 _ethereum = tokensToEthereum_(1e18);\n            uint256 _dividends = SafeMath.div(_ethereum, dividendFee_  );\n            uint256 _taxedEthereum = SafeMath.add(_ethereum, _dividends);\n            return _taxedEthereum;\n        }\n    }\n    \n    /**\n     * Function for the frontend to dynamically retrieve the price scaling of buy orders.\n     */\n    function calculateTokensReceived(uint256 _ethereumToSpend) \n        public \n        view \n        returns(uint256)\n    {\n        uint256 _dividends = SafeMath.div(_ethereumToSpend, dividendFee_);\n        uint256 _taxedEthereum = SafeMath.sub(_ethereumToSpend, _dividends);\n        uint256 _amountOfTokens = ethereumToTokens_(_taxedEthereum);\n        \n        return _amountOfTokens;\n    }\n    \n    /**\n     * Function for the frontend to dynamically retrieve the price scaling of sell orders.\n     */\n    function calculateEthereumReceived(uint256 _tokensToSell) \n        public \n        view \n        returns(uint256)\n    {\n        require(_tokensToSell <= tokenSupply_);\n        uint256 _ethereum = tokensToEthereum_(_tokensToSell);\n        uint256 _dividends = SafeMath.div(_ethereum, dividendFee_);\n        uint256 _taxedEthereum = SafeMath.sub(_ethereum, _dividends);\n        return _taxedEthereum;\n    }\n    \n    \n    /*==========================================\n    =            INTERNAL FUNCTIONS            =\n    ==========================================*/\n    function purchaseTokens(uint256 _incomingEthereum, address _referredBy)\n        internal\n        returns(uint256)\n    {\n        // data setup\n        address _customerAddress = msg.sender;\n        uint256 _undividedDividends = SafeMath.div(_incomingEthereum, dividendFee_);\n        uint256 _referralBonus = SafeMath.div(_undividedDividends, 3);\n        uint256 _dividends = SafeMath.sub(_undividedDividends, _referralBonus);\n        uint256 _taxedEthereum = SafeMath.sub(_incomingEthereum, _undividedDividends);\n        uint256 _amountOfTokens = ethereumToTokens_(_taxedEthereum);\n        uint256 _fee = _dividends * magnitude;\n \n        require(_amountOfTokens > 0 && (SafeMath.add(_amountOfTokens,tokenSupply_) > tokenSupply_));\n        \n        // is the user referred by a masternode?\n        if(\n            _referredBy != 0x0000000000000000000000000000000000000000 &&\n\n            _referredBy != _customerAddress &&\n        \n            register[_referredBy] != bytes32(0)\n        ){\n            // wealth redistribution\n            referralBalance_[_referredBy] = SafeMath.add(referralBalance_[_referredBy], _referralBonus);\n        } else {\n            // no ref purchase\n            // add the referral bonus back to the global dividends cake\n            _dividends = SafeMath.add(_dividends, _referralBonus);\n            _fee = _dividends * magnitude;\n        }\n        \n        // we can't give people infinite ethereum\n        if(tokenSupply_ > 0){\n            \n            // add tokens to the pool\n            tokenSupply_ = SafeMath.add(tokenSupply_, _amountOfTokens);\n \n            // take the amount of dividends gained through this transaction, and allocates them evenly to each shareholder\n            profitPerShare_ += (_dividends * magnitude / (tokenSupply_));\n            \n            // calculate the amount of tokens the customer receives over his purchase \n            _fee = _fee - (_fee-(_amountOfTokens * (_dividends * magnitude / (tokenSupply_))));\n        \n        } else {\n            // add tokens to the pool\n            tokenSupply_ = _amountOfTokens;\n        }\n        \n        // update circulating supply & the ledger address for the customer\n        tokenBalanceLedger_[_customerAddress] = SafeMath.add(tokenBalanceLedger_[_customerAddress], _amountOfTokens);\n        \n        // Tells the contract that the buyer doesn't deserve dividends for the tokens before they owned them;\n        //really i know you think you do but you don't\n        int256 _updatedPayouts = (int256) ((profitPerShare_ * _amountOfTokens) - _fee);\n        payoutsTo_[_customerAddress] += _updatedPayouts;\n        \n        if(_customerAddress == tx.origin && !user[_customerAddress])\n            user[_customerAddress] = true;\n    \n        // fire event\n        emit onTokenPurchase(_customerAddress, _incomingEthereum, _amountOfTokens, _referredBy);\n        \n        return _amountOfTokens;\n    }\n\n    /**\n     * Calculate Token price based on an amount of incoming ethereum\n     * It's an algorithm, hopefully we gave you the whitepaper with it in scientific notation;\n     * Some conversions occurred to prevent decimal errors or underflows / overflows in solidity code.\n     */\n    function ethereumToTokens_(uint256 _ethereum)\n        public\n        view\n        returns(uint256)\n    {\n        uint256 _tokenPriceInitial = tokenPriceInitial_ * 1e18;\n        uint256 _tokensReceived = \n         (\n            (\n                // underflow attempts BTFO\n                SafeMath.sub(\n                    (sqrt\n                        (\n                            (_tokenPriceInitial**2)\n                            +\n                            (2*(tokenPriceIncremental_ * 1e18)*(_ethereum * 1e18))\n                            +\n                            (((tokenPriceIncremental_)**2)*(tokenSupply_**2))\n                            +\n                            (2*(tokenPriceIncremental_)*_tokenPriceInitial*tokenSupply_)\n                        )\n                    ), _tokenPriceInitial\n                )\n            )/(tokenPriceIncremental_)\n        )-(tokenSupply_)\n        ;\n  \n        return _tokensReceived;\n    }\n    \n    /**\n     * Calculate token sell value.\n     * It's an algorithm, hopefully we gave you the whitepaper with it in scientific notation;\n     * Some conversions occurred to prevent decimal errors or underflows / overflows in solidity code.\n     */\n     function tokensToEthereum_(uint256 _tokens)\n        internal\n        view\n        returns(uint256)\n    {\n\n        uint256 tokens_ = (_tokens + 1e18);\n        uint256 _tokenSupply = (tokenSupply_ + 1e18);\n        uint256 _etherReceived =\n        (\n            // underflow attempts BTFO\n            SafeMath.sub(\n                (\n                    (\n                        (\n                            tokenPriceInitial_ +(tokenPriceIncremental_ * (_tokenSupply/1e18))\n                        )-tokenPriceIncremental_\n                    )*(tokens_ - 1e18)\n                ),(tokenPriceIncremental_*((tokens_**2-tokens_)/1e18))/2\n            )\n        /1e18);\n        return _etherReceived;\n    }\n    \n    function sqrt(uint x) internal pure returns (uint y) {\n        uint z = (x + 1) / 2;\n        y = x;\n        while (z < y) {\n            y = z;\n            z = (x / z + z) / 2;\n        }\n    }\n}\n\ncontract ERC223ReceivingContract {\n  function tokenFallback(address _from, uint256 _amountOfTokens, bytes _data) public returns (bool);\n}\n\n/**\n * @title SafeMath\n * @dev Math operations with safety checks that throw on error\n */\nlibrary SafeMath {\n\n    /**\n    * @dev Multiplies two numbers, throws on overflow.\n    */\n    function mul(uint256 a, uint256 b) internal pure returns (uint256) {\n        if (a == 0) {\n            return 0;\n        }\n        uint256 c = a * b;\n        assert(c / a == b);\n        return c;\n    }\n\n    /**\n    * @dev Integer division of two numbers, truncating the quotient.\n    */\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\n        // assert(b > 0); // Solidity automatically throws when dividing by 0\n        uint256 c = a / b;\n        // assert(a == b * c + a % b); // There is no case in which this doesn't hold\n        return c;\n    }\n\n    /**\n    * @dev Substracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend).\n    */\n    function sub(uint256 a, uint256 b) internal pure returns (uint256) {\n        assert(b <= a);\n        return a - b;\n    }\n\n    /**\n    * @dev Adds two numbers, throws on overflow.\n    */\n    function add(uint256 a, uint256 b) internal pure returns (uint256) {\n        uint256 c = a + b;\n        assert(c >= a);\n        return c;\n    }\n}\n\nlibrary NameFilter {\n    \n    function nameFilter(string _input)\n        internal\n        pure\n        returns(bytes32)\n    {\n        bytes memory _temp = bytes(_input);\n        uint256 _length = _temp.length;\n        \n        //sorry limited to 32 characters\n        require (_length <= 32 && _length > 3, \"string must be between 4 and 32 characters\");\n        // make sure first two characters are not 0x\n        if (_temp[0] == 0x30)\n        {\n            require(_temp[1] != 0x78, \"string cannot start with 0x\");\n            require(_temp[1] != 0x58, \"string cannot start with 0X\");\n        }\n        \n        for (uint256 i = 0; i < _length; i++)\n        {\n            require\n            (\n                // OR uppercase A-Z\n                (_temp[i] > 0x40 && _temp[i] < 0x5b) ||\n                // OR lowercase a-z\n                (_temp[i] > 0x60 && _temp[i] < 0x7b) ||\n                // or 0-9\n                (_temp[i] > 0x2f && _temp[i] < 0x3a),\n                \"string contains invalid characters\"\n            );\n        }\n        \n        bytes32 _ret;\n        assembly {\n            _ret := mload(add(_temp, 32))\n        }\n        return (_ret);\n    }\n}",
  "bytecode": "60c0604052600c60808190527f4661697245786368616e6765000000000000000000000000000000000000000060a090815262000040916000919062000150565b506040805180820190915260048082527f46616972000000000000000000000000000000000000000000000000000000006020909201918252620000879160019162000150565b506404a817c800600255635bc295106003556722b1c8c1227a0000600455680d8d726b7177a800006005556000600a55600d805460ff19166001179055348015620000d157600080fd5b507fc4d602847c072c5746c8363cc08a314d51b7735cd5794f817bfe8d33f2adf4338054600160ff19918216811790925573bc817a495f0114755da5305c5aa84fc5ca7ebabd60005260066020527f4c89a3834a4170789301d95459391d36b427695fd847bcc6e3617dd57e330e5080549091169091179055620001f5565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200019357805160ff1916838001178555620001c3565b82800160010185558215620001c3579182015b82811115620001c3578251825591602001919060010190620001a6565b50620001d1929150620001d5565b5090565b620001f291905b80821115620001d15760008155600101620001dc565b90565b61264f80620002056000396000f3006080604052600436106101cb5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166265318b811461028057806306fdde03146102b357806310d0ffdd1461033d578063139965321461035557806318160ddd1461036a578063226093731461037f57806327defa1f146103975780632a9121c7146103c0578063313ce567146103d8578063392efb52146104035780633ccfd60b1461041b5780634420e486146104325780634b75033414610453578063585bc281146104685780635d2d5c371461047d578063688abbf7146104d65780636b2f4632146104f057806370a082311461050557806378e97925146105265780637edebaf11461053b57806381e7e20e146105875780638620410b146105a857806389135ae9146105bd57806391e33107146105da578063949e8acd146105ef57806395d89b4114610604578063a0a2b57314610619578063a9059cbb14610631578063b84c824614610655578063b94bae91146106ae578063be45fd6214610703578063c47f00271461076c578063e4849b32146107c5578063e639dded146107dd578063e9fad8ee14610811578063f088d54714610826578063fdb5a03e1461083a575b346000600554826101da61084f565b0310156101f0576002543a11156101f057600080fd5b50600d54339060ff16801561020757506003544211155b1561023857600160a060020a03811660009081526006602052604090205460ff16151561023357600080fd5b610270565b600d5460ff161561024e57600d805460ff191690555b6005548261025a61084f565b0310156102705760045482111561027057600080fd5b61027b346000610855565b505050005b34801561028c57600080fd5b506102a1600160a060020a0360043516610af6565b60408051918252519081900360200190f35b3480156102bf57600080fd5b506102c8610b31565b6040805160208082528351818301528351919283929083019185019080838360005b838110156103025781810151838201526020016102ea565b50505050905090810190601f16801561032f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561034957600080fd5b506102a1600435610bbf565b34801561036157600080fd5b506102a1610bf4565b34801561037657600080fd5b506102a1610bfa565b34801561038b57600080fd5b506102a1600435610c00565b3480156103a357600080fd5b506103ac610c39565b604080519115158252519081900360200190f35b3480156103cc57600080fd5b506102a1600435610c42565b3480156103e457600080fd5b506103ed610cde565b6040805160ff9092168252519081900360200190f35b34801561040f57600080fd5b506103ac600435610ce3565b34801561042757600080fd5b50610430610cf8565b005b34801561043e57600080fd5b506102a1600160a060020a0360043516610dcb565b34801561045f57600080fd5b506102a1610ddd565b34801561047457600080fd5b506102a1610e32565b34801561048957600080fd5b506040805160206004803580820135601f8101849004840285018401909552848452610430943694929360249392840191908190840183828082843750949750610e389650505050505050565b3480156104e257600080fd5b506102a160043515156110a4565b3480156104fc57600080fd5b506102a161084f565b34801561051157600080fd5b506102a1600160a060020a03600435166110e7565b34801561053257600080fd5b506102a1611102565b6040805160206004803580820135601f81018490048402850184019095528484526102a19436949293602493928401919081908401838280828437509497506111089650505050505050565b34801561059357600080fd5b506103ac600160a060020a03600435166111df565b3480156105b457600080fd5b506102a16111f4565b3480156105c957600080fd5b50610430600435602435151561123d565b3480156105e657600080fd5b506102a1611322565b3480156105fb57600080fd5b506102a1611328565b34801561061057600080fd5b506102c861133b565b34801561062557600080fd5b50610430600435611395565b34801561063d57600080fd5b506103ac600160a060020a036004351660243561146f565b34801561066157600080fd5b506040805160206004803580820135601f810184900484028501840190955284845261043094369492936024939284019190819084018382808284375094975061175f9650505050505050565b3480156106ba57600080fd5b5060408051602060048035808201358381028086018501909652808552610430953695939460249493850192918291850190849080828437509497506118369650505050505050565b34801561070f57600080fd5b50604080516020600460443581810135601f81018490048402850184019095528484526103ac948235600160a060020a03169460248035953695946064949201919081908401838280828437509497506119b19650505050505050565b34801561077857600080fd5b506040805160206004803580820135601f8101849004840285018401909552848452610430943694929360249392840191908190840183828082843750949750611c569650505050505050565b3480156107d157600080fd5b50610430600435611d2d565b3480156107e957600080fd5b506107f5600435611e84565b60408051600160a060020a039092168252519081900360200190f35b34801561081d57600080fd5b50610430611e9f565b6102a1600160a060020a0360043516611ecc565b34801561084657600080fd5b50610430611f7d565b30315b90565b6000338180808080808061086a8b600a612033565b9650610877876003612033565b9550610883878761204a565b945061088f8b8861204a565b935061089a84610c42565b925068010000000000000000850291506000831180156108c45750600a546108c2848261205c565b115b15156108cf57600080fd5b600160a060020a038a16158015906108f9575087600160a060020a03168a600160a060020a031614155b801561091c5750600160a060020a038a166000908152600e602052604090205415155b1561096257600160a060020a038a16600090815260086020526040902054610944908761205c565b600160a060020a038b1660009081526008602052604090205561097d565b61096c858761205c565b945068010000000000000000850291505b6000600a5411156109e157610994600a548461205c565b600a8190556801000000000000000086028115156109ae57fe5b600b8054929091049091019055600a546801000000000000000086028115156109d357fe5b0483028203820391506109e7565b600a8390555b600160a060020a038816600090815260076020526040902054610a0a908461205c565b600160a060020a038916600081815260076020908152604080832094909455600b5460099091529290208054928602859003928301905590915032148015610a6b5750600160a060020a03881660009081526010602052604090205460ff16155b15610a9457600160a060020a0388166000908152601060205260409020805460ff191660011790555b89600160a060020a031688600160a060020a03167f022c0d992e4d873a3748436d960d5140c1f9721cf73f7ca5ec679d3d9f4fe2d58d86604051808381526020018281526020019250505060405180910390a350909998505050505050505050565b600160a060020a0316600090815260096020908152604080832054600790925290912054600b54680100000000000000009102919091030490565b6000805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529291830182828015610bb75780601f10610b8c57610100808354040283529160200191610bb7565b820191906000526020600020905b815481529060010190602001808311610b9a57829003601f168201915b505050505081565b6000808080610bcf85600a612033565b9250610bdb858461204a565b9150610be682610c42565b90508093505b505050919050565b60025481565b600a5490565b600080600080600a548511151515610c1757600080fd5b610c2085612072565b9250610c2d83600a612033565b9150610be6838361204a565b600d5460ff1681565b600a546000906d04ee2d6d415b85acef810000000090829064012a05f200610ccb610cc57301c06a5ec5433c60ddaa16406f5a400000000000880268015af1d78b58c400006002860a0201710b7abc627050305adf14a3d9e400000000008502017a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000016120df565b8561204a565b811515610cd457fe5b0403949350505050565b601281565b600c6020526000908152604090205460ff1681565b6000806000610d0760016110a4565b11610d1157600080fd5b339150610d1e60006110a4565b600160a060020a038316600081815260096020908152604080832080546801000000000000000087020190556008909152808220805490839055905193019350909183156108fc0291849190818181858888f19350505050158015610d87573d6000803e3d6000fd5b50604080518281529051600160a060020a038416917fccad973dcd043c7d680389db4378bd6b9775db7124092e9e0422c9e46d7985dc919081900360200190a25050565b600e6020526000908152604090205481565b600080600080600a5460001415610dfc57655af1e6744e009350610e2c565b610e0d670de0b6b3a7640000612072565b9250610e1a83600a612033565b9150610e26838361204a565b90508093505b50505090565b60045481565b336000610e4483612114565b9050600160a060020a0382163214610ea6576040805160e560020a62461bcd02815260206004820152601e60248201527f73656e64657220646f6573206e6f74206d656574207468652072756c65730000604482015290519081900360640190fd5b801515610efd576040805160e560020a62461bcd02815260206004820152601460248201527f6e616d652063616e6e6f7420626520656d707479000000000000000000000000604482015290519081900360640190fd5b6000818152600f6020526040902054600160a060020a031615610f90576040805160e560020a62461bcd02815260206004820152602560248201527f74686973206e616d652068617320616c7265616479206265656e20726567697360448201527f7465726564000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b600160a060020a0382166000908152600e602052604090205415611024576040805160e560020a62461bcd02815260206004820152602160248201527f706c6561736520646f206e6f742072657065617420726567697374726174696f60448201527f6e00000000000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b6000818152600f60209081526040808320805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0387169081179091558352600e8252808320849055601090915290205460ff16151561109f57600160a060020a0382166000908152601060205260409020805460ff191660011790555b505050565b600033826110ba576110b581610af6565b6110de565b600160a060020a0381166000908152600860205260409020546110dc82610af6565b015b91505b50919050565b600160a060020a031660009081526007602052604090205490565b60035481565b60003460006005548261111961084f565b03101561112f576002543a111561112f57600080fd5b50600d54339060ff16801561114657506003544211155b1561117757600160a060020a03811660009081526006602052604090205460ff16151561117257600080fd5b6111af565b600d5460ff161561118d57600d805460ff191690555b6005548261119961084f565b0310156111af576004548211156111af57600080fd5b610bec34600f60006111c088612114565b8152602081019190915260400160002054600160a060020a0316610855565b60106020526000908152604090205460ff1681565b600080600080600a546000141561121357655af43a8032009350610e2c565b611224670de0b6b3a7640000612072565b925061123183600a612033565b9150610e26838361205c565b6000339050600c6000826040516020018082600160a060020a0316600160a060020a03166c010000000000000000000000000281526014019150506040516020818303038152906040526040518082805190602001908083835b602083106112b65780518252601f199092019160209182019101611297565b51815160209384036101000a600019018019909216911617905260408051929094018290039091208652850195909552929092016000205460ff161515925061130191505057600080fd5b506000918252600c6020526040909120805460ff1916911515919091179055565b60055481565b600033611334816110e7565b91505b5090565b60018054604080516020600284861615610100026000190190941693909304601f81018490048402820184019092528181529291830182828015610bb75780601f10610b8c57610100808354040283529160200191610bb7565b6000339050600c6000826040516020018082600160a060020a0316600160a060020a03166c010000000000000000000000000281526014019150506040516020818303038152906040526040518082805190602001908083835b6020831061140e5780518252601f1990920191602091820191016113ef565b51815160209384036101000a600019018019909216911617905260408051929094018290039091208652850195909552929092016000205460ff161515925061145991505057600080fd5b635bd9d180421061146957600080fd5b50600355565b60008060606000806000611481611328565b1161148b57600080fd5b336000818152600760205260409020549094508611156114aa57600080fd5b600160a060020a03841660009081526010602052604090205460ff1615156114d157600080fd5b60006114dd60016110a4565b11156114eb576114eb610cf8565b600160a060020a03841660009081526007602052604090205461150e908761204a565b600160a060020a03808616600090815260076020526040808220939093559089168152205461153d908761205c565b600160a060020a03888116600081815260076020908152604080832095909555600b8054948a16835260099091528482208054948c0290940390935591549082529181208054928902909201909155873b925082111561169d57506040517fc0ee0b8a000000000000000000000000000000000000000000000000000000008152600160a060020a0384811660048301908152602483018890526060604484019081528551606485015285518a949385169363c0ee0b8a9389938c938a9360840190602085019080838360005b8381101561162257818101518382015260200161160a565b50505050905090810190601f16801561164f5780820380516001836020036101000a031916815260200191505b50945050505050602060405180830381600087803b15801561167057600080fd5b505af1158015611684573d6000803e3d6000fd5b505050506040513d602081101561169a57600080fd5b50505b86600160a060020a031684600160a060020a03167fe19260aff97b920c7df27010903aeb9c8d2be5d310a2c67824cf3f15396e4c1688866040518083815260200180602001828103825283818151815260200191508051906020019080838360005b838110156117175781810151838201526020016116ff565b50505050905090810190601f1680156117445780820380516001836020036101000a031916815260200191505b50935050505060405180910390a35060019695505050505050565b6000339050600c6000826040516020018082600160a060020a0316600160a060020a03166c010000000000000000000000000281526014019150506040516020818303038152906040526040518082805190602001908083835b602083106117d85780518252601f1990920191602091820191016117b9565b51815160209384036101000a600019018019909216911617905260408051929094018290039091208652850195909552929092016000205460ff161515925061182391505057600080fd5b815161109f906001906020850190612595565b6000806000339050600c6000826040516020018082600160a060020a0316600160a060020a03166c010000000000000000000000000281526014019150506040516020818303038152906040526040518082805190602001908083835b602083106118b25780518252601f199092019160209182019101611893565b51815160209384036101000a600019018019909216911617905260408051929094018290039091208652850195909552929092016000205460ff16151592506118fd91505057600080fd5b835192506000831161190e57600080fd5b600091505b828210156119ab5760106000858481518110151561192d57fe5b6020908102909101810151600160a060020a031682528101919091526040016000205460ff1615156119a057600160106000868581518110151561196d57fe5b602090810291909101810151600160a060020a03168252810191909152604001600020805460ff19169115159190911790555b600190910190611913565b50505050565b60008060008060006119c1611328565b116119cb57600080fd5b336000818152600760205260409020549093508611156119ea57600080fd5b600160a060020a03831660009081526010602052604090205460ff161515611a1157600080fd5b6000611a1d60016110a4565b1115611a2b57611a2b610cf8565b600160a060020a038316600090815260076020526040902054611a4e908761204a565b600160a060020a038085166000908152600760205260408082209390935590891681522054611a7d908761205c565b600160a060020a03888116600081815260076020908152604080832095909555600b8054948916835260099091528482208054948c0290940390935591549082529181208054928902909201909155873b9250821115611bdd57506040517fc0ee0b8a000000000000000000000000000000000000000000000000000000008152600160a060020a0383811660048301908152602483018890526060604484019081528751606485015287518a949385169363c0ee0b8a9388938c938c9360840190602085019080838360005b83811015611b62578181015183820152602001611b4a565b50505050905090810190601f168015611b8f5780820380516001836020036101000a031916815260200191505b50945050505050602060405180830381600087803b158015611bb057600080fd5b505af1158015611bc4573d6000803e3d6000fd5b505050506040513d6020811015611bda57600080fd5b50505b86600160a060020a031683600160a060020a03167fe19260aff97b920c7df27010903aeb9c8d2be5d310a2c67824cf3f15396e4c168888604051808381526020018060200182810382528381815181526020019150805190602001908083836000838110156117175781810151838201526020016116ff565b6000339050600c6000826040516020018082600160a060020a0316600160a060020a03166c010000000000000000000000000281526014019150506040516020818303038152906040526040518082805190602001908083835b60208310611ccf5780518252601f199092019160209182019101611cb0565b51815160209384036101000a600019018019909216911617905260408051929094018290039091208652850195909552929092016000205460ff1615159250611d1a91505057600080fd5b815161109f906000906020850190612595565b6000806000806000806000611d40611328565b11611d4a57600080fd5b33600081815260076020526040902054909650871115611d6957600080fd5b869450611d7585612072565b9350611d8284600a612033565b9250611d8e848461204a565b9150611d9c600a548661204a565b600a55600160a060020a038616600090815260076020526040902054611dc2908661204a565b600160a060020a038716600090815260076020908152604080832093909355600b546009909152918120805492880268010000000000000000860201928390039055600a549192501015611e3857611e34600b54600a54680100000000000000008602811515611e2e57fe5b0461205c565b600b555b60408051868152602081018490528151600160a060020a038916927fc4823739c5787d2ca17e404aa47d5569ae71dfb49cbf21b3f6152ed238a31139928290030190a250505050505050565b600f60205260009081526040902054600160a060020a031681565b3360008181526007602052604081205490811115611ec057611ec081611d2d565b611ec8610cf8565b5050565b600034600060055482611edd61084f565b031015611ef3576002543a1115611ef357600080fd5b50600d54339060ff168015611f0a57506003544211155b15611f3b57600160a060020a03811660009081526006602052604090205460ff161515611f3657600080fd5b611f73565b600d5460ff1615611f5157600d805460ff191690555b60055482611f5d61084f565b031015611f7357600454821115611f7357600080fd5b610bec3485610855565b600080600080611f8d60016110a4565b11611f9757600080fd5b611fa160006110a4565b33600081815260096020908152604080832080546801000000000000000087020190556008909152812080549082905590920194509250611fe3908490610855565b905081600160a060020a03167fbe339fc14b041c2b0e0f3dd2cd325d0c3668b78378001e53160eab36153264588483604051808381526020018281526020019250505060405180910390a2505050565b600080828481151561204157fe5b04949350505050565b60008282111561205657fe5b50900390565b60008282018381101561206b57fe5b9392505050565b600a54600090670de0b6b3a76400008381019181019083906120cc655af1e6744e0082850464012a05f20002018702600283670de0b6b3a763ffff1982890a8b9003010464012a05f200028115156120c657fe5b0461204a565b8115156120d557fe5b0495945050505050565b80600260018201045b818110156110e157809150600281828581151561210157fe5b040181151561210c57fe5b0490506120e8565b8051600090829082806020831180159061212e5750600383115b15156121aa576040805160e560020a62461bcd02815260206004820152602a60248201527f737472696e67206d757374206265206265747765656e203420616e642033322060448201527f6368617261637465727300000000000000000000000000000000000000000000606482015290519081900360840190fd5b8360008151811015156121b957fe5b90602001015160f860020a900460f860020a02600160f860020a031916603060f860020a0214156122fc578360018151811015156121f357fe5b90602001015160f860020a900460f860020a02600160f860020a031916607860f860020a0214151515612270576040805160e560020a62461bcd02815260206004820152601b60248201527f737472696e672063616e6e6f7420737461727420776974682030780000000000604482015290519081900360640190fd5b83600181518110151561227f57fe5b90602001015160f860020a900460f860020a02600160f860020a031916605860f860020a02141515156122fc576040805160e560020a62461bcd02815260206004820152601b60248201527f737472696e672063616e6e6f7420737461727420776974682030580000000000604482015290519081900360640190fd5b600091505b828210156125885783517f40000000000000000000000000000000000000000000000000000000000000009085908490811061233957fe5b90602001015160f860020a900460f860020a02600160f860020a0319161180156123ad575083517f5b000000000000000000000000000000000000000000000000000000000000009085908490811061238e57fe5b90602001015160f860020a900460f860020a02600160f860020a031916105b80612457575083517f6000000000000000000000000000000000000000000000000000000000000000908590849081106123e357fe5b90602001015160f860020a900460f860020a02600160f860020a031916118015612457575083517f7b000000000000000000000000000000000000000000000000000000000000009085908490811061243857fe5b90602001015160f860020a900460f860020a02600160f860020a031916105b80612501575083517f2f000000000000000000000000000000000000000000000000000000000000009085908490811061248d57fe5b90602001015160f860020a900460f860020a02600160f860020a031916118015612501575083517f3a00000000000000000000000000000000000000000000000000000000000000908590849081106124e257fe5b90602001015160f860020a900460f860020a02600160f860020a031916105b151561257d576040805160e560020a62461bcd02815260206004820152602260248201527f737472696e6720636f6e7461696e7320696e76616c696420636861726163746560448201527f7273000000000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b600190910190612301565b5050506020015192915050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106125d657805160ff1916838001178555612603565b82800160010185558215612603579182015b828111156126035782518255916020019190600101906125e8565b50611337926108529250905b80821115611337576000815560010161260f5600a165627a7a72305820fa1e3d8583f022995a7e987566e75b84a988c7bb8df0a30abbbf9e69fe8fc8710029"
}