{
  "address": "0xdc4d9bba9a9013b6fe27ee2c531cabe5d6b43197",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "DragonKing",
  "compilerVersion": "v0.4.24+commit.e67f0147",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2019-01-17\n*/\n\n/**\n  * Dragonking is a blockchain game in which players may purchase dragons and knights of different levels and values.\n  * Once every period of time the volcano erupts and wipes a few of them from the board. The value of the killed characters\n  * gets distributed amongst all of the survivors. The dragon king receive a bigger share than the others.\n  * In contrast to dragons, knights need to be teleported to the battlefield first with the use of teleport tokens.\n  * Additionally, they may attack a dragon once per period.\n  * Both character types can be protected from death up to three times.\n  * Take a look at dragonking.io for more detailed information.\n  * @author: Julia Altenried, Yuriy Kashnikov\n  * */\n\npragma solidity ^0.4.24;\n\ncontract ERC20Basic {\n  function totalSupply() public view returns (uint256);\n  function balanceOf(address _who) public view returns (uint256);\n  function transfer(address _to, uint256 _value) public returns (bool);\n  event Transfer(address indexed from, address indexed to, uint256 value);\n}\n\ncontract ERC20 is ERC20Basic {\n  function allowance(address _owner, address _spender)\n    public view returns (uint256);\n\n  function transferFrom(address _from, address _to, uint256 _value)\n    public returns (bool);\n\n  function approve(address _spender, uint256 _value) public returns (bool);\n  event Approval(\n    address indexed owner,\n    address indexed spender,\n    uint256 value\n  );\n}\n\n\n\n/**\n * @title Ownable\n * @dev The Ownable contract has an owner address, and provides basic authorization control\n * functions, this simplifies the implementation of \"user permissions\".\n */\ncontract Ownable {\n  address public owner;\n\n  event OwnershipTransferred(\n    address indexed previousOwner,\n    address indexed newOwner\n  );\n\n\n  /**\n   * @dev The Ownable constructor sets the original `owner` of the contract to the sender\n   * account.\n   */\n  constructor() public {\n    owner = msg.sender;\n  }\n\n  /**\n   * @dev Throws if called by any account other than the owner.\n   */\n  modifier onlyOwner() {\n    require(msg.sender == owner);\n    _;\n  }\n\n  /**\n   * @dev Allows the current owner to transfer control of the contract to a newOwner.\n   * @param _newOwner The address to transfer ownership to.\n   */\n  function transferOwnership(address _newOwner) public onlyOwner {\n    _transferOwnership(_newOwner);\n  }\n\n  /**\n   * @dev Transfers control of the contract to a newOwner.\n   * @param _newOwner The address to transfer ownership to.\n   */\n  function _transferOwnership(address _newOwner) internal {\n    require(_newOwner != address(0));\n    emit OwnershipTransferred(owner, _newOwner);\n    owner = _newOwner;\n  }\n}\n\n/**\n * @title Destructible\n * @dev Base contract that can be destroyed by owner. All funds in contract will be sent to the owner.\n */\ncontract Destructible is Ownable {\n  /**\n   * @dev Transfers the current balance to the owner and terminates the contract.\n   */\n  function destroy() public onlyOwner {\n    selfdestruct(owner);\n  }\n\n  function destroyAndSend(address _recipient) public onlyOwner {\n    selfdestruct(_recipient);\n  }\n}\n\n/**\n * DragonKing game configuration contract\n**/\n\ncontract DragonKingConfig is Ownable {\n\n  struct PurchaseRequirement {\n    address[] tokens;\n    uint256[] amounts;\n  }\n\n  /** the Gift token contract **/\n  ERC20 public giftToken;\n  /** amount of gift tokens to send **/\n  uint256 public giftTokenAmount;\n  /** purchase requirements for each type of character **/\n  PurchaseRequirement[30] purchaseRequirements; \n  /** the cost of each character type */\n  uint128[] public costs;\n  /** the value of each character type (cost - fee), so it's not necessary to compute it each time*/\n  uint128[] public values;\n  /** the fee to be paid each time an character is bought in percent*/\n  uint8 fee;\n  /** The maximum of characters allowed in the game */\n  uint16 public maxCharacters;\n  /** the amount of time that should pass since last eruption **/\n  uint256 public eruptionThreshold;\n  /** the amount of time that should pass ince last castle loot distribution **/\n  uint256 public castleLootDistributionThreshold;\n  /** how many characters to kill in %, e.g. 20 will stand for 20%, should be < 100 **/\n  uint8 public percentageToKill;\n  /* Cooldown threshold */\n  uint256 public constant CooldownThreshold = 1 days;\n  /** fight factor, used to compute extra probability in fight **/\n  uint8 public fightFactor;\n\n  /** the price for teleportation*/\n  uint256 public teleportPrice;\n  /** the price for protection */\n  uint256 public protectionPrice;\n  /** the luck threshold */\n  uint256 public luckThreshold;\n\n  function hasEnoughTokensToPurchase(address buyer, uint8 characterType) external returns (bool canBuy) {\n    for (uint256 i = 0; i < purchaseRequirements[characterType].tokens.length; i++) {\n      if (ERC20(purchaseRequirements[characterType].tokens[i]).balanceOf(buyer) < purchaseRequirements[characterType].amounts[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n\n  function getPurchaseRequirements(uint8 characterType) view external returns (address[] tokens, uint256[] amounts) {\n    tokens = purchaseRequirements[characterType].tokens;\n    amounts = purchaseRequirements[characterType].amounts;\n  }\n\n\n}\n\n\ncontract DragonKing is Destructible {\n\n  /**\n   * @dev Throws if called by contract not a user \n   */\n  modifier onlyUser() {\n    require(msg.sender == tx.origin, \n            \"contracts cannot execute this method\"\n           );\n    _;\n  }\n\n\n  struct Character {\n    uint8 characterType;\n    uint128 value;\n    address owner;\n    uint64 purchaseTimestamp;\n    uint8 fightCount;\n  }\n\n  DragonKingConfig public config;\n\n  /** the neverdie token contract used to purchase protection from eruptions and fights */\n  ERC20 neverdieToken;\n  /** the teleport token contract used to send knights to the game scene */\n  ERC20 teleportToken;\n  /** the luck token contract **/\n  ERC20 luckToken;\n  /** the SKL token contract **/\n  ERC20 sklToken;\n  /** the XP token contract **/\n  ERC20 xperToken;\n  \n\n  /** array holding ids of the curret characters **/\n  uint32[] public ids;\n  /** the id to be given to the next character **/\n  uint32 public nextId;\n  /** non-existant character **/\n  uint16 public constant INVALID_CHARACTER_INDEX = ~uint16(0);\n\n  /** the castle treasury **/\n  uint128 public castleTreasury;\n  /** the castle loot distribution factor **/\n  uint8 public luckRounds = 2;\n  /** the id of the oldest character **/\n  uint32 public oldest;\n  /** the character belonging to a given id **/\n  mapping(uint32 => Character) characters;\n  /** teleported knights **/\n  mapping(uint32 => bool) teleported;\n\n  /** constant used to signal that there is no King at the moment **/\n  uint32 constant public noKing = ~uint32(0);\n\n  /** total number of characters in the game **/\n  uint16 public numCharacters;\n  /** number of characters per type **/\n  mapping(uint8 => uint16) public numCharactersXType;\n\n  /** timestamp of the last eruption event **/\n  uint256 public lastEruptionTimestamp;\n  /** timestamp of the last castle loot distribution **/\n  mapping(uint32 => uint256) public lastCastleLootDistributionTimestamp;\n\n  /** character type range constants **/\n  uint8 public constant DRAGON_MIN_TYPE = 0;\n  uint8 public constant DRAGON_MAX_TYPE = 5;\n\n  uint8 public constant KNIGHT_MIN_TYPE = 6;\n  uint8 public constant KNIGHT_MAX_TYPE = 11;\n\n  uint8 public constant BALLOON_MIN_TYPE = 12;\n  uint8 public constant BALLOON_MAX_TYPE = 14;\n\n  uint8 public constant WIZARD_MIN_TYPE = 15;\n  uint8 public constant WIZARD_MAX_TYPE = 20;\n\n  uint8 public constant ARCHER_MIN_TYPE = 21;\n  uint8 public constant ARCHER_MAX_TYPE = 26;\n\n  uint8 public constant NUMBER_OF_LEVELS = 6;\n\n  uint8 public constant INVALID_CHARACTER_TYPE = 27;\n\n    /** knight cooldown. contains the timestamp of the earliest possible moment to start a fight */\n  mapping(uint32 => uint) public cooldown;\n\n    /** tells the number of times a character is protected */\n  mapping(uint32 => uint8) public protection;\n\n  // EVENTS\n\n  /** is fired when new characters are purchased (who bought how many characters of which type?) */\n  event NewPurchase(address player, uint8 characterType, uint16 amount, uint32 startId);\n  /** is fired when a player leaves the game */\n  event NewExit(address player, uint256 totalBalance, uint32[] removedCharacters);\n  /** is fired when an eruption occurs */\n  event NewEruption(uint32[] hitCharacters, uint128 value, uint128 gasCost);\n  /** is fired when a single character is sold **/\n  event NewSell(uint32 characterId, address player, uint256 value);\n  /** is fired when a knight fights a dragon **/\n  event NewFight(uint32 winnerID, uint32 loserID, uint256 value, uint16 probability, uint16 dice);\n  /** is fired when a knight is teleported to the field **/\n  event NewTeleport(uint32 characterId);\n  /** is fired when a protection is purchased **/\n  event NewProtection(uint32 characterId, uint8 lifes);\n  /** is fired when a castle loot distribution occurs**/\n  event NewDistributionCastleLoot(uint128 castleLoot, uint32 characterId, uint128 luckFactor);\n\n  /* initializes the contract parameter */\n  constructor(address tptAddress, address ndcAddress, address sklAddress, address xperAddress, address luckAddress, address _configAddress) public {\n    nextId = 1;\n    teleportToken = ERC20(tptAddress);\n    neverdieToken = ERC20(ndcAddress);\n    sklToken = ERC20(sklAddress);\n    xperToken = ERC20(xperAddress);\n    luckToken = ERC20(luckAddress);\n    config = DragonKingConfig(_configAddress);\n  }\n\n  /** \n    * gifts one character\n    * @param receiver gift character owner\n    * @param characterType type of the character to create as a gift\n    */\n  function giftCharacter(address receiver, uint8 characterType) payable public onlyUser {\n    _addCharacters(receiver, characterType);\n    assert(config.giftToken().transfer(receiver, config.giftTokenAmount()));\n  }\n\n  /**\n   * buys as many characters as possible with the transfered value of the given type\n   * @param characterType the type of the character\n   */\n  function addCharacters(uint8 characterType) payable public onlyUser {\n    _addCharacters(msg.sender, characterType);\n  }\n\n  function _addCharacters(address receiver, uint8 characterType) internal {\n    uint16 amount = uint16(msg.value / config.costs(characterType));\n    require(\n      amount > 0,\n      \"insufficient amount of ether to purchase a given type of character\");\n    uint16 nchars = numCharacters;\n    require(\n      config.hasEnoughTokensToPurchase(receiver, characterType),\n      \"insufficinet amount of tokens to purchase a given type of character\"\n    );\n    if (characterType >= INVALID_CHARACTER_TYPE || msg.value < config.costs(characterType) || nchars + amount > config.maxCharacters()) revert();\n    uint32 nid = nextId;\n    //if type exists, enough ether was transferred and there are less than maxCharacters characters in the game\n    if (characterType <= DRAGON_MAX_TYPE) {\n      //dragons enter the game directly\n      if (oldest == 0 || oldest == noKing)\n        oldest = nid;\n      for (uint8 i = 0; i < amount; i++) {\n        addCharacter(nid + i, nchars + i);\n        characters[nid + i] = Character(characterType, config.values(characterType), receiver, uint64(now), 0);\n      }\n      numCharactersXType[characterType] += amount;\n      numCharacters += amount;\n    }\n    else {\n      // to enter game knights, mages, and archers should be teleported later\n      for (uint8 j = 0; j < amount; j++) {\n        characters[nid + j] = Character(characterType, config.values(characterType), receiver, uint64(now), 0);\n      }\n    }\n    nextId = nid + amount;\n    emit NewPurchase(receiver, characterType, amount, nid);\n  }\n\n\n\n  /**\n   * adds a single dragon of the given type to the ids array, which is used to iterate over all characters\n   * @param nId the id the character is about to receive\n   * @param nchars the number of characters currently in the game\n   */\n  function addCharacter(uint32 nId, uint16 nchars) internal {\n    if (nchars < ids.length)\n      ids[nchars] = nId;\n    else\n      ids.push(nId);\n  }\n\n  /**\n   * leave the game.\n   * pays out the sender's balance and removes him and his characters from the game\n   * */\n  function exit() public {\n    uint32[] memory removed = new uint32[](50);\n    uint8 count;\n    uint32 lastId;\n    uint playerBalance;\n    uint16 nchars = numCharacters;\n    for (uint16 i = 0; i < nchars; i++) {\n      if (characters[ids[i]].owner == msg.sender \n          && characters[ids[i]].purchaseTimestamp + 1 days < now\n          && (characters[ids[i]].characterType < BALLOON_MIN_TYPE || characters[ids[i]].characterType > BALLOON_MAX_TYPE)) {\n        //first delete all characters at the end of the array\n        while (nchars > 0 \n            && characters[ids[nchars - 1]].owner == msg.sender \n            && characters[ids[nchars - 1]].purchaseTimestamp + 1 days < now\n            && (characters[ids[i]].characterType < BALLOON_MIN_TYPE || characters[ids[i]].characterType > BALLOON_MAX_TYPE)) {\n          nchars--;\n          lastId = ids[nchars];\n          numCharactersXType[characters[lastId].characterType]--;\n          playerBalance += characters[lastId].value;\n          removed[count] = lastId;\n          count++;\n          if (lastId == oldest) oldest = 0;\n          delete characters[lastId];\n        }\n        //replace the players character by the last one\n        if (nchars > i + 1) {\n          playerBalance += characters[ids[i]].value;\n          removed[count] = ids[i];\n          count++;\n          nchars--;\n          replaceCharacter(i, nchars);\n        }\n      }\n    }\n    numCharacters = nchars;\n    emit NewExit(msg.sender, playerBalance, removed); //fire the event to notify the client\n    msg.sender.transfer(playerBalance);\n    if (oldest == 0)\n      findOldest();\n  }\n\n  /**\n   * Replaces the character with the given id with the last character in the array\n   * @param index the index of the character in the id array\n   * @param nchars the number of characters\n   * */\n  function replaceCharacter(uint16 index, uint16 nchars) internal {\n    uint32 characterId = ids[index];\n    numCharactersXType[characters[characterId].characterType]--;\n    if (characterId == oldest) oldest = 0;\n    delete characters[characterId];\n    ids[index] = ids[nchars];\n    delete ids[nchars];\n  }\n\n  /**\n   * The volcano eruption can be triggered by anybody but only if enough time has passed since the last eription.\n   * The volcano hits up to a certain percentage of characters, but at least one.\n   * The percantage is specified in 'percentageToKill'\n   * */\n\n  function triggerVolcanoEruption() public onlyUser {\n    require(now >= lastEruptionTimestamp + config.eruptionThreshold(),\n           \"not enough time passed since last eruption\");\n    require(numCharacters > 0,\n           \"there are no characters in the game\");\n    lastEruptionTimestamp = now;\n    uint128 pot;\n    uint128 value;\n    uint16 random;\n    uint32 nextHitId;\n    uint16 nchars = numCharacters;\n    uint32 howmany = nchars * config.percentageToKill() / 100;\n    uint128 neededGas = 80000 + 10000 * uint32(nchars);\n    if(howmany == 0) howmany = 1;//hit at least 1\n    uint32[] memory hitCharacters = new uint32[](howmany);\n    bool[] memory alreadyHit = new bool[](nextId);\n    uint16 i = 0;\n    uint16 j = 0;\n    while (i < howmany) {\n      j++;\n      random = uint16(generateRandomNumber(lastEruptionTimestamp + j) % nchars);\n      nextHitId = ids[random];\n      if (!alreadyHit[nextHitId]) {\n        alreadyHit[nextHitId] = true;\n        hitCharacters[i] = nextHitId;\n        value = hitCharacter(random, nchars, 0);\n        if (value > 0) {\n          nchars--;\n        }\n        pot += value;\n        i++;\n      }\n    }\n    uint128 gasCost = uint128(neededGas * tx.gasprice);\n    numCharacters = nchars;\n    if (pot > gasCost){\n      distribute(pot - gasCost); //distribute the pot minus the oraclize gas costs\n      emit NewEruption(hitCharacters, pot - gasCost, gasCost);\n    }\n    else\n      emit NewEruption(hitCharacters, 0, gasCost);\n  }\n\n  /**\n   * Knight can attack a dragon.\n   * Archer can attack only a balloon.\n   * Dragon can attack wizards and archers.\n   * Wizard can attack anyone, except balloon.\n   * Balloon cannot attack.\n   * The value of the loser is transfered to the winner.\n   * @param characterID the ID of the knight to perfrom the attack\n   * @param characterIndex the index of the knight in the ids-array. Just needed to save gas costs.\n   *            In case it's unknown or incorrect, the index is looked up in the array.\n   * */\n  function fight(uint32 characterID, uint16 characterIndex) public onlyUser {\n    if (characterIndex >= numCharacters || characterID != ids[characterIndex])\n      characterIndex = getCharacterIndex(characterID);\n    Character storage character = characters[characterID];\n    require(cooldown[characterID] + config.CooldownThreshold() <= now,\n            \"not enough time passed since the last fight of this character\");\n    require(character.owner == msg.sender,\n            \"only owner can initiate a fight for this character\");\n\n    uint8 ctype = character.characterType;\n    require(ctype < BALLOON_MIN_TYPE || ctype > BALLOON_MAX_TYPE,\n            \"balloons cannot fight\");\n\n    uint16 adversaryIndex = getRandomAdversary(characterID, ctype);\n    require(adversaryIndex != INVALID_CHARACTER_INDEX);\n    uint32 adversaryID = ids[adversaryIndex];\n\n    Character storage adversary = characters[adversaryID];\n    uint128 value;\n    uint16 base_probability;\n    uint16 dice = uint16(generateRandomNumber(characterID) % 100);\n    if (luckToken.balanceOf(msg.sender) >= config.luckThreshold()) {\n      base_probability = uint16(generateRandomNumber(dice) % 100);\n      if (base_probability < dice) {\n        dice = base_probability;\n      }\n      base_probability = 0;\n    }\n    uint256 characterPower = sklToken.balanceOf(character.owner) / 10**15 + xperToken.balanceOf(character.owner);\n    uint256 adversaryPower = sklToken.balanceOf(adversary.owner) / 10**15 + xperToken.balanceOf(adversary.owner);\n    \n    if (character.value == adversary.value) {\n        base_probability = 50;\n      if (characterPower > adversaryPower) {\n        base_probability += uint16(100 / config.fightFactor());\n      } else if (adversaryPower > characterPower) {\n        base_probability -= uint16(100 / config.fightFactor());\n      }\n    } else if (character.value > adversary.value) {\n      base_probability = 100;\n      if (adversaryPower > characterPower) {\n        base_probability -= uint16((100 * adversary.value) / character.value / config.fightFactor());\n      }\n    } else if (characterPower > adversaryPower) {\n        base_probability += uint16((100 * character.value) / adversary.value / config.fightFactor());\n    }\n    \n    if (characters[characterID].fightCount < 3) {\n      characters[characterID].fightCount++;\n    }\n    \n    if (dice >= base_probability) {\n      // adversary won\n      if (adversary.characterType < BALLOON_MIN_TYPE || adversary.characterType > BALLOON_MAX_TYPE) {\n        value = hitCharacter(characterIndex, numCharacters, adversary.characterType);\n        if (value > 0) {\n          numCharacters--;\n        } else {\n          cooldown[characterID] = now;\n        }\n        if (adversary.characterType >= ARCHER_MIN_TYPE && adversary.characterType <= ARCHER_MAX_TYPE) {\n          castleTreasury += value;\n        } else {\n          adversary.value += value;\n        }\n        emit NewFight(adversaryID, characterID, value, base_probability, dice);\n      } else {\n        emit NewFight(adversaryID, characterID, 0, base_probability, dice); // balloons do not hit back\n      }\n    } else {\n      // character won\n      cooldown[characterID] = now;\n      value = hitCharacter(adversaryIndex, numCharacters, character.characterType);\n      if (value > 0) {\n        numCharacters--;\n      }\n      if (character.characterType >= ARCHER_MIN_TYPE && character.characterType <= ARCHER_MAX_TYPE) {\n        castleTreasury += value;\n      } else {\n        character.value += value;\n      }\n      if (oldest == 0) findOldest();\n      emit NewFight(characterID, adversaryID, value, base_probability, dice);\n    }\n  }\n\n  \n  /*\n  * @param characterType\n  * @param adversaryType\n  * @return whether adversaryType is a valid type of adversary for a given character\n  */\n  function isValidAdversary(uint8 characterType, uint8 adversaryType) pure returns (bool) {\n    if (characterType >= KNIGHT_MIN_TYPE && characterType <= KNIGHT_MAX_TYPE) { // knight\n      return (adversaryType <= DRAGON_MAX_TYPE);\n    } else if (characterType >= WIZARD_MIN_TYPE && characterType <= WIZARD_MAX_TYPE) { // wizard\n      return (adversaryType < BALLOON_MIN_TYPE || adversaryType > BALLOON_MAX_TYPE);\n    } else if (characterType >= DRAGON_MIN_TYPE && characterType <= DRAGON_MAX_TYPE) { // dragon\n      return (adversaryType >= WIZARD_MIN_TYPE);\n    } else if (characterType >= ARCHER_MIN_TYPE && characterType <= ARCHER_MAX_TYPE) { // archer\n      return ((adversaryType >= BALLOON_MIN_TYPE && adversaryType <= BALLOON_MAX_TYPE)\n             || (adversaryType >= KNIGHT_MIN_TYPE && adversaryType <= KNIGHT_MAX_TYPE));\n \n    }\n    return false;\n  }\n\n  /**\n   * pick a random adversary.\n   * @param nonce a nonce to make sure there's not always the same adversary chosen in a single block.\n   * @return the index of a random adversary character\n   * */\n  function getRandomAdversary(uint256 nonce, uint8 characterType) internal view returns(uint16) {\n    uint16 randomIndex = uint16(generateRandomNumber(nonce) % numCharacters);\n    // use 7, 11 or 13 as step size. scales for up to 1000 characters\n    uint16 stepSize = numCharacters % 7 == 0 ? (numCharacters % 11 == 0 ? 13 : 11) : 7;\n    uint16 i = randomIndex;\n    //if the picked character is a knight or belongs to the sender, look at the character + stepSizes ahead in the array (modulo the total number)\n    //will at some point return to the startingPoint if no character is suited\n    do {\n      if (isValidAdversary(characterType, characters[ids[i]].characterType) && characters[ids[i]].owner != msg.sender) {\n        return i;\n      }\n      i = (i + stepSize) % numCharacters;\n    } while (i != randomIndex);\n\n    return INVALID_CHARACTER_INDEX;\n  }\n\n\n  /**\n   * generate a random number.\n   * @param nonce a nonce to make sure there's not always the same number returned in a single block.\n   * @return the random number\n   * */\n  function generateRandomNumber(uint256 nonce) internal view returns(uint) {\n    return uint(keccak256(block.blockhash(block.number - 1), now, numCharacters, nonce));\n  }\n\n\t/**\n   * Hits the character of the given type at the given index.\n   * Wizards can knock off two protections. Other characters can do only one.\n   * @param index the index of the character\n   * @param nchars the number of characters\n   * @return the value gained from hitting the characters (zero is the character was protected)\n   * */\n  function hitCharacter(uint16 index, uint16 nchars, uint8 characterType) internal returns(uint128 characterValue) {\n    uint32 id = ids[index];\n    uint8 knockOffProtections = 1;\n    if (characterType >= WIZARD_MIN_TYPE && characterType <= WIZARD_MAX_TYPE) {\n      knockOffProtections = 2;\n    }\n    if (protection[id] >= knockOffProtections) {\n      protection[id] = protection[id] - knockOffProtections;\n      return 0;\n    }\n    characterValue = characters[ids[index]].value;\n    nchars--;\n    replaceCharacter(index, nchars);\n  }\n\n  /**\n   * finds the oldest character\n   * */\n  function findOldest() public {\n    uint32 newOldest = noKing;\n    for (uint16 i = 0; i < numCharacters; i++) {\n      if (ids[i] < newOldest && characters[ids[i]].characterType <= DRAGON_MAX_TYPE)\n        newOldest = ids[i];\n    }\n    oldest = newOldest;\n  }\n\n  /**\n  * distributes the given amount among the surviving characters\n  * @param totalAmount nthe amount to distribute\n  */\n  function distribute(uint128 totalAmount) internal {\n    uint128 amount;\n    castleTreasury += totalAmount / 20; //5% into castle treasury\n    if (oldest == 0)\n      findOldest();\n    if (oldest != noKing) {\n      //pay 10% to the oldest dragon\n      characters[oldest].value += totalAmount / 10;\n      amount  = totalAmount / 100 * 85;\n    } else {\n      amount  = totalAmount / 100 * 95;\n    }\n    //distribute the rest according to their type\n    uint128 valueSum;\n    uint8 size = ARCHER_MAX_TYPE + 1;\n    uint128[] memory shares = new uint128[](size);\n    for (uint8 v = 0; v < size; v++) {\n      if ((v < BALLOON_MIN_TYPE || v > BALLOON_MAX_TYPE) && numCharactersXType[v] > 0) {\n           valueSum += config.values(v);\n      }\n    }\n    for (uint8 m = 0; m < size; m++) {\n      if ((v < BALLOON_MIN_TYPE || v > BALLOON_MAX_TYPE) && numCharactersXType[m] > 0) {\n        shares[m] = amount * config.values(m) / valueSum / numCharactersXType[m];\n      }\n    }\n    uint8 cType;\n    for (uint16 i = 0; i < numCharacters; i++) {\n      cType = characters[ids[i]].characterType;\n      if (cType < BALLOON_MIN_TYPE || cType > BALLOON_MAX_TYPE)\n        characters[ids[i]].value += shares[characters[ids[i]].characterType];\n    }\n  }\n\n  /**\n   * allows the owner to collect the accumulated fees\n   * sends the given amount to the owner's address if the amount does not exceed the\n   * fees (cannot touch the players' balances) minus 100 finney (ensure that oraclize fees can be paid)\n   * @param amount the amount to be collected\n   * */\n  function collectFees(uint128 amount) public onlyOwner {\n    uint collectedFees = getFees();\n    if (amount + 100 finney < collectedFees) {\n      owner.transfer(amount);\n    }\n  }\n\n  /**\n  * withdraw NDC and TPT tokens\n  */\n  function withdraw() public onlyOwner {\n    uint256 ndcBalance = neverdieToken.balanceOf(this);\n    if(ndcBalance > 0)\n      assert(neverdieToken.transfer(owner, ndcBalance));\n    uint256 tptBalance = teleportToken.balanceOf(this);\n    if(tptBalance > 0)\n      assert(teleportToken.transfer(owner, tptBalance));\n  }\n\n  /**\n   * pays out the players.\n   * */\n  function payOut() public onlyOwner {\n    for (uint16 i = 0; i < numCharacters; i++) {\n      characters[ids[i]].owner.transfer(characters[ids[i]].value);\n      delete characters[ids[i]];\n    }\n    delete ids;\n    numCharacters = 0;\n  }\n\n  /**\n   * pays out the players and kills the game.\n   * */\n  function stop() public onlyOwner {\n    withdraw();\n    payOut();\n    destroy();\n  }\n\n  function generateLuckFactor(uint128 nonce) internal view returns(uint128 luckFactor) {\n    uint128 f;\n    luckFactor = 50;\n    for(uint8 i = 0; i < luckRounds; i++){\n      f = roll(uint128(generateRandomNumber(nonce+i*7)%1000));\n      if(f < luckFactor) luckFactor = f;\n    }\n  }\n  \n  function roll(uint128 nonce) internal view returns(uint128) {\n    uint128 sum = 0;\n    uint128 inc = 1;\n    for (uint128 i = 45; i >= 3; i--) {\n      if (sum > nonce) {\n          return i;\n      }\n      sum += inc;\n      if (i != 35) {\n          inc += 1;\n      }\n    }\n    return 3;\n  }\n  \n  function distributeCastleLootMulti(uint32[] characterIds) external onlyUser {\n    require(characterIds.length <= 50);\n    for(uint i = 0; i < characterIds.length; i++){\n      distributeCastleLoot(characterIds[i]);\n    }\n  }\n\n  /* @dev distributes castle loot among archers */\n  function distributeCastleLoot(uint32 characterId) public onlyUser {\n    require(castleTreasury > 0, \"empty treasury\");\n    Character archer = characters[characterId];\n    require(archer.characterType >= ARCHER_MIN_TYPE && archer.characterType <= ARCHER_MAX_TYPE, \"only archers can access the castle treasury\");\n    if(lastCastleLootDistributionTimestamp[characterId] == 0) \n      require(now - archer.purchaseTimestamp >= config.castleLootDistributionThreshold(), \n            \"not enough time has passed since the purchase\");\n    else \n      require(now >= lastCastleLootDistributionTimestamp[characterId] + config.castleLootDistributionThreshold(),\n            \"not enough time passed since the last castle loot distribution\");\n    require(archer.fightCount >= 3, \"need to fight 3 times\");\n    lastCastleLootDistributionTimestamp[characterId] = now;\n    archer.fightCount = 0;\n    \n    uint128 luckFactor = generateLuckFactor(uint128(generateRandomNumber(characterId) % 1000));\n    if (luckFactor < 3) {\n      luckFactor = 3;\n    }\n    assert(luckFactor <= 50);\n    uint128 amount = castleTreasury * luckFactor / 100; \n    archer.value += amount;\n    castleTreasury -= amount;\n    emit NewDistributionCastleLoot(amount, characterId, luckFactor);\n\n  }\n\n  /**\n   * sell the character of the given id\n   * throws an exception in case of a knight not yet teleported to the game\n   * @param characterId the id of the character\n   * */\n  function sellCharacter(uint32 characterId, uint16 characterIndex) public onlyUser {\n    if (characterIndex >= numCharacters || characterId != ids[characterIndex])\n      characterIndex = getCharacterIndex(characterId);\n    Character storage char = characters[characterId];\n    require(msg.sender == char.owner,\n            \"only owners can sell their characters\");\n    require(char.characterType < BALLOON_MIN_TYPE || char.characterType > BALLOON_MAX_TYPE,\n            \"balloons are not sellable\");\n    require(char.purchaseTimestamp + 1 days < now,\n            \"character can be sold only 1 day after the purchase\");\n    uint128 val = char.value;\n    numCharacters--;\n    replaceCharacter(characterIndex, numCharacters);\n    msg.sender.transfer(val);\n    if (oldest == 0)\n      findOldest();\n    emit NewSell(characterId, msg.sender, val);\n  }\n\n  /**\n   * receive approval to spend some tokens.\n   * used for teleport and protection.\n   * @param sender the sender address\n   * @param value the transferred value\n   * @param tokenContract the address of the token contract\n   * @param callData the data passed by the token contract\n   * */\n  function receiveApproval(address sender, uint256 value, address tokenContract, bytes callData) public {\n    require(tokenContract == address(teleportToken), \"everything is paid with teleport tokens\");\n    bool forProtection = secondToUint32(callData) == 1 ? true : false;\n    uint32 id;\n    uint256 price;\n    if (!forProtection) {\n      id = toUint32(callData);\n      price = config.teleportPrice();\n      if (characters[id].characterType >= BALLOON_MIN_TYPE && characters[id].characterType <= WIZARD_MAX_TYPE) {\n        price *= 2;\n      }\n      require(value >= price,\n              \"insufficinet amount of tokens to teleport this character\");\n      assert(teleportToken.transferFrom(sender, this, price));\n      teleportCharacter(id);\n    } else {\n      id = toUint32(callData);\n      // user can purchase extra lifes only right after character purchaes\n      // in other words, user value should be equal the initial value\n      uint8 cType = characters[id].characterType;\n      require(characters[id].value == config.values(cType),\n              \"protection could be bought only before the first fight and before the first volcano eruption\");\n\n      // calc how many lifes user can actually buy\n      // the formula is the following:\n\n      uint256 lifePrice;\n      uint8 max;\n      if(cType <= KNIGHT_MAX_TYPE ){\n        lifePrice = ((cType % NUMBER_OF_LEVELS) + 1) * config.protectionPrice();\n        max = 3;\n      } else if (cType >= BALLOON_MIN_TYPE && cType <= BALLOON_MAX_TYPE) {\n        lifePrice = (((cType+3) % NUMBER_OF_LEVELS) + 1) * config.protectionPrice() * 2;\n        max = 6;\n      } else if (cType >= WIZARD_MIN_TYPE && cType <= WIZARD_MAX_TYPE) {\n        lifePrice = (((cType+3) % NUMBER_OF_LEVELS) + 1) * config.protectionPrice() * 2;\n        max = 3;\n      } else if (cType >= ARCHER_MIN_TYPE && cType <= ARCHER_MAX_TYPE) {\n        lifePrice = (((cType+3) % NUMBER_OF_LEVELS) + 1) * config.protectionPrice();\n        max = 3;\n      }\n\n      price = 0;\n      uint8 i = protection[id];\n      for (i; i < max && value >= price + lifePrice * (i + 1); i++) {\n        price += lifePrice * (i + 1);\n      }\n      assert(teleportToken.transferFrom(sender, this, price));\n      protectCharacter(id, i);\n    } \n  }\n\n  /**\n   * Knights, balloons, wizards, and archers are only entering the game completely, when they are teleported to the scene\n   * @param id the character id\n   * */\n  function teleportCharacter(uint32 id) internal {\n    // ensure we do not teleport twice\n    require(teleported[id] == false,\n           \"already teleported\");\n    teleported[id] = true;\n    Character storage character = characters[id];\n    require(character.characterType > DRAGON_MAX_TYPE,\n           \"dragons do not need to be teleported\"); //this also makes calls with non-existent ids fail\n    addCharacter(id, numCharacters);\n    numCharacters++;\n    numCharactersXType[character.characterType]++;\n    emit NewTeleport(id);\n  }\n\n  /**\n   * adds protection to a character\n   * @param id the character id\n   * @param lifes the number of protections\n   * */\n  function protectCharacter(uint32 id, uint8 lifes) internal {\n    protection[id] = lifes;\n    emit NewProtection(id, lifes);\n  }\n  \n  /**\n   * set the castle loot factor (percent of the luck factor being distributed)\n   * */\n  function setLuckRound(uint8 rounds) public onlyOwner{\n    require(rounds >= 1 && rounds <= 100);\n    luckRounds = rounds;\n  }\n\n\n  /****************** GETTERS *************************/\n\n  /**\n   * returns the character of the given id\n   * @param characterId the character id\n   * @return the type, value and owner of the character\n   * */\n  function getCharacter(uint32 characterId) public view returns(uint8, uint128, address) {\n    return (characters[characterId].characterType, characters[characterId].value, characters[characterId].owner);\n  }\n\n  /**\n   * returns the index of a character of the given id\n   * @param characterId the character id\n   * @return the character id\n   * */\n  function getCharacterIndex(uint32 characterId) constant public returns(uint16) {\n    for (uint16 i = 0; i < ids.length; i++) {\n      if (ids[i] == characterId) {\n        return i;\n      }\n    }\n    revert();\n  }\n\n  /**\n   * returns 10 characters starting from a certain indey\n   * @param startIndex the index to start from\n   * @return 4 arrays containing the ids, types, values and owners of the characters\n   * */\n  function get10Characters(uint16 startIndex) constant public returns(uint32[10] characterIds, uint8[10] types, uint128[10] values, address[10] owners) {\n    uint32 endIndex = startIndex + 10 > numCharacters ? numCharacters : startIndex + 10;\n    uint8 j = 0;\n    uint32 id;\n    for (uint16 i = startIndex; i < endIndex; i++) {\n      id = ids[i];\n      characterIds[j] = id;\n      types[j] = characters[id].characterType;\n      values[j] = characters[id].value;\n      owners[j] = characters[id].owner;\n      j++;\n    }\n\n  }\n\n  /**\n   * returns the number of dragons in the game\n   * @return the number of dragons\n   * */\n  function getNumDragons() constant public returns(uint16 numDragons) {\n    for (uint8 i = DRAGON_MIN_TYPE; i <= DRAGON_MAX_TYPE; i++)\n      numDragons += numCharactersXType[i];\n  }\n\n  /**\n   * returns the number of wizards in the game\n   * @return the number of wizards\n   * */\n  function getNumWizards() constant public returns(uint16 numWizards) {\n    for (uint8 i = WIZARD_MIN_TYPE; i <= WIZARD_MAX_TYPE; i++)\n      numWizards += numCharactersXType[i];\n  }\n  /**\n   * returns the number of archers in the game\n   * @return the number of archers\n   * */\n  function getNumArchers() constant public returns(uint16 numArchers) {\n    for (uint8 i = ARCHER_MIN_TYPE; i <= ARCHER_MAX_TYPE; i++)\n      numArchers += numCharactersXType[i];\n  }\n\n  /**\n   * returns the number of knights in the game\n   * @return the number of knights\n   * */\n  function getNumKnights() constant public returns(uint16 numKnights) {\n    for (uint8 i = KNIGHT_MIN_TYPE; i <= KNIGHT_MAX_TYPE; i++)\n      numKnights += numCharactersXType[i];\n  }\n\n  /**\n   * @return the accumulated fees\n   * */\n  function getFees() constant public returns(uint) {\n    uint reserved = castleTreasury;\n    for (uint16 j = 0; j < numCharacters; j++)\n      reserved += characters[ids[j]].value;\n    return address(this).balance - reserved;\n  }\n\n\n  /************* HELPERS ****************/\n\n  /**\n   * only works for bytes of length < 32\n   * @param b the byte input\n   * @return the uint\n   * */\n  function toUint32(bytes b) internal pure returns(uint32) {\n    bytes32 newB;\n    assembly {\n      newB: = mload(0xa0)\n    }\n    return uint32(newB);\n  }\n  \n  function secondToUint32(bytes b) internal pure returns(uint32){\n    bytes32 newB;\n    assembly {\n      newB: = mload(0xc0)\n    }\n    return uint32(newB);\n  }\n}",
  "abi": "[{\"constant\":false,\"inputs\":[{\"name\":\"characterId\",\"type\":\"uint32\"},{\"name\":\"characterIndex\",\"type\":\"uint16\"}],\"name\":\"sellCharacter\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"stop\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"receiver\",\"type\":\"address\"},{\"name\":\"characterType\",\"type\":\"uint8\"}],\"name\":\"giftCharacter\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"rounds\",\"type\":\"uint8\"}],\"name\":\"setLuckRound\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNumArchers\",\"outputs\":[{\"name\":\"numArchers\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"triggerVolcanoEruption\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"KNIGHT_MAX_TYPE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"amount\",\"type\":\"uint128\"}],\"name\":\"collectFees\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"castleTreasury\",\"outputs\":[{\"name\":\"\",\"type\":\"uint128\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"name\":\"numCharactersXType\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"BALLOON_MIN_TYPE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"characterId\",\"type\":\"uint32\"}],\"name\":\"getCharacter\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"},{\"name\":\"\",\"type\":\"uint128\"},{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"oldest\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"withdraw\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"INVALID_CHARACTER_INDEX\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"characterId\",\"type\":\"uint32\"}],\"name\":\"getCharacterIndex\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"name\":\"lastCastleLootDistributionTimestamp\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"startIndex\",\"type\":\"uint16\"}],\"name\":\"get10Characters\",\"outputs\":[{\"name\":\"characterIds\",\"type\":\"uint32[10]\"},{\"name\":\"types\",\"type\":\"uint8[10]\"},{\"name\":\"values\",\"type\":\"uint128[10]\"},{\"name\":\"owners\",\"type\":\"address[10]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"nextId\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"name\":\"protection\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"luckRounds\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"characterID\",\"type\":\"uint32\"},{\"name\":\"characterIndex\",\"type\":\"uint16\"}],\"name\":\"fight\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"config\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"characterType\",\"type\":\"uint8\"}],\"name\":\"addCharacters\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"destroy\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNumDragons\",\"outputs\":[{\"name\":\"numDragons\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"sender\",\"type\":\"address\"},{\"name\":\"value\",\"type\":\"uint256\"},{\"name\":\"tokenContract\",\"type\":\"address\"},{\"name\":\"callData\",\"type\":\"bytes\"}],\"name\":\"receiveApproval\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"KNIGHT_MIN_TYPE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"WIZARD_MAX_TYPE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNumWizards\",\"outputs\":[{\"name\":\"numWizards\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"NUMBER_OF_LEVELS\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"characterType\",\"type\":\"uint8\"},{\"name\":\"adversaryType\",\"type\":\"uint8\"}],\"name\":\"isValidAdversary\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"pure\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ARCHER_MIN_TYPE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"name\":\"cooldown\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"WIZARD_MIN_TYPE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNumKnights\",\"outputs\":[{\"name\":\"numKnights\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"lastEruptionTimestamp\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"DRAGON_MAX_TYPE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"payOut\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ARCHER_MAX_TYPE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"BALLOON_MAX_TYPE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"characterIds\",\"type\":\"uint32[]\"}],\"name\":\"distributeCastleLootMulti\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getFees\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"noKing\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"characterId\",\"type\":\"uint32\"}],\"name\":\"distributeCastleLoot\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"exit\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"DRAGON_MIN_TYPE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"numCharacters\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_recipient\",\"type\":\"address\"}],\"name\":\"destroyAndSend\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"INVALID_CHARACTER_TYPE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"ids\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"findOldest\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"tptAddress\",\"type\":\"address\"},{\"name\":\"ndcAddress\",\"type\":\"address\"},{\"name\":\"sklAddress\",\"type\":\"address\"},{\"name\":\"xperAddress\",\"type\":\"address\"},{\"name\":\"luckAddress\",\"type\":\"address\"},{\"name\":\"_configAddress\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"characterType\",\"type\":\"uint8\"},{\"indexed\":false,\"name\":\"amount\",\"type\":\"uint16\"},{\"indexed\":false,\"name\":\"startId\",\"type\":\"uint32\"}],\"name\":\"NewPurchase\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"totalBalance\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"removedCharacters\",\"type\":\"uint32[]\"}],\"name\":\"NewExit\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"hitCharacters\",\"type\":\"uint32[]\"},{\"indexed\":false,\"name\":\"value\",\"type\":\"uint128\"},{\"indexed\":false,\"name\":\"gasCost\",\"type\":\"uint128\"}],\"name\":\"NewEruption\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"characterId\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"NewSell\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"winnerID\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"loserID\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"value\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"probability\",\"type\":\"uint16\"},{\"indexed\":false,\"name\":\"dice\",\"type\":\"uint16\"}],\"name\":\"NewFight\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"characterId\",\"type\":\"uint32\"}],\"name\":\"NewTeleport\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"characterId\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"lifes\",\"type\":\"uint8\"}],\"name\":\"NewProtection\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"castleLoot\",\"type\":\"uint128\"},{\"indexed\":false,\"name\":\"characterId\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"luckFactor\",\"type\":\"uint128\"}],\"name\":\"NewDistributionCastleLoot\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"}]",
  "bytecode": "60806040526008805460a060020a60ff0219167402000000000000000000000000000000000000000017905534801561003757600080fd5b5060405160c08062005ca583398101604090815281516020830151918301516060840151608085015160a0909501516000805433600160a060020a03199182161782556008805463ffffffff19166001908117909155600380548316600160a060020a0398891617905560028054831698881698909817909755600580548216958716959095179094556006805485169386169390931790925560048054841696851696909617909555835490911691909316179055615ba7908190620000fe90396000f30060806040526004361061026d5763ffffffff60e060020a600035041662bfd441811461027257806307da68f5146102995780630a3dfba7146102ae5780630bc142c6146102c85780631d2a6dcf146102e35780631e466eee1461030f57806326bdce711461032457806328acb0021461034f578063291ed7731461037057806329b20bb6146103a157806330aaed53146103bc5780633728bec2146103d15780633c3c22b3146104225780633ccfd60b146104505780634afe49c2146104655780634f255b801461047a5780635c4c4a1814610498578063603709e3146104c857806361b8ce8c146105a157806372ad21c7146105b6578063772ca5b8146105d4578063773e1e84146105e957806379502c551461060e578063797e2aec1461063f57806383197ef01461064d578063851ad4d6146106625780638da5cb5b146106775780638f4ffcb11461068c5780639271a988146106fc5780639ced242b14610711578063a050d07d14610726578063a9689b4f146106fc578063ad389d5d1461073b578063ad70ae1a14610770578063b066ef3c14610785578063b0eee8db146107a3578063b32dbcd8146107b8578063c10435cc146107cd578063c1255299146107e2578063c2052403146107f7578063d0f9bad11461080c578063d39512b814610821578063d9f8695014610836578063db8d55f114610856578063dc9bb7db1461086b578063e4b971f814610880578063e9fad8ee1461089e578063f10e2ec1146108b3578063f1be42f1146108c8578063f2fde38b146108dd578063f5074f41146108fe578063f690648d1461091f578063fac333ac14610934578063fbe6529f1461094c575b600080fd5b34801561027e57600080fd5b5061029763ffffffff6004351661ffff60243516610961565b005b3480156102a557600080fd5b50610297610cb4565b610297600160a060020a036004351660ff60243516610ce5565b3480156102d457600080fd5b5061029760ff60043516610ede565b3480156102ef57600080fd5b506102f8610f49565b6040805161ffff9092168252519081900360200190f35b34801561031b57600080fd5b50610297610f81565b34801561033057600080fd5b50610339611577565b6040805160ff9092168252519081900360200190f35b34801561035b57600080fd5b506102976001608060020a036004351661157c565b34801561037c57600080fd5b50610385611601565b604080516001608060020a039092168252519081900360200190f35b3480156103ad57600080fd5b506102f860ff60043516611618565b3480156103c857600080fd5b5061033961162e565b3480156103dd57600080fd5b506103ef63ffffffff60043516611633565b6040805160ff90941684526001608060020a039092166020840152600160a060020a031682820152519081900360600190f35b34801561042e57600080fd5b50610437611672565b6040805163ffffffff9092168252519081900360200190f35b34801561045c57600080fd5b50610297611685565b34801561047157600080fd5b506102f86118cd565b34801561048657600080fd5b506102f863ffffffff600435166118d3565b3480156104a457600080fd5b506104b663ffffffff6004351661193f565b60408051918252519081900360200190f35b3480156104d457600080fd5b506104e461ffff60043516611951565b604051808561014080838360005b8381101561050a5781810151838201526020016104f2565b5050505090500184600a60200280838360005b8381101561053557818101518382015260200161051d565b5050505090500183600a60200280838360005b83811015610560578181015183820152602001610548565b5050505090500182600a60200280838360005b8381101561058b578181015183820152602001610573565b5050505090500194505050505060405180910390f35b3480156105ad57600080fd5b50610437611af8565b3480156105c257600080fd5b5061033963ffffffff60043516611b04565b3480156105e057600080fd5b50610339611b19565b3480156105f557600080fd5b5061029763ffffffff6004351661ffff60243516611b29565b34801561061a57600080fd5b50610623612933565b60408051600160a060020a039092168252519081900360200190f35b61029760ff60043516612942565b34801561065957600080fd5b506102976129a3565b34801561066e57600080fd5b506102f86129c8565b34801561068357600080fd5b506106236129fb565b34801561069857600080fd5b50604080516020601f60643560048181013592830184900484028501840190955281845261029794600160a060020a03813581169560248035966044359093169536956084949201918190840183828082843750949750612a0a9650505050505050565b34801561070857600080fd5b5061033961322f565b34801561071d57600080fd5b50610339613234565b34801561073257600080fd5b506102f8613239565b34801561074757600080fd5b5061075c60ff6004358116906024351661326d565b604080519115158252519081900360200190f35b34801561077c57600080fd5b50610339613360565b34801561079157600080fd5b506104b663ffffffff60043516613365565b3480156107af57600080fd5b50610339613377565b3480156107c457600080fd5b506102f861337c565b3480156107d957600080fd5b506104b66133b0565b3480156107ee57600080fd5b506103396133b6565b34801561080357600080fd5b506102976133bb565b34801561081857600080fd5b50610339613593565b34801561082d57600080fd5b50610339613598565b34801561084257600080fd5b50610297600480356024810191013561359d565b34801561086257600080fd5b506104b6613636565b34801561087757600080fd5b506104376118cd565b34801561088c57600080fd5b5061029763ffffffff600435166136cf565b3480156108aa57600080fd5b50610297613c40565b3480156108bf57600080fd5b506103396142ef565b3480156108d457600080fd5b506102f86142f4565b3480156108e957600080fd5b50610297600160a060020a03600435166142fe565b34801561090a57600080fd5b50610297600160a060020a036004351661431e565b34801561092b57600080fd5b50610339614341565b34801561094057600080fd5b50610437600435614346565b34801561095857600080fd5b5061029761437e565b6000803332146109b8576040805160e560020a62461bcd02815260206004820152602480820152600080516020615b5c833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b600b5461ffff908116908416101580610a1457506007805461ffff85169081106109de57fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff1663ffffffff168463ffffffff1614155b15610a2557610a22846118d3565b92505b63ffffffff841660009081526009602052604090206001810154909250600160a060020a03163314610ac7576040805160e560020a62461bcd02815260206004820152602560248201527f6f6e6c79206f776e6572732063616e2073656c6c20746865697220636861726160448201527f6374657273000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b8154600c60ff9091161080610ae257508154600e60ff909116115b1515610b38576040805160e560020a62461bcd02815260206004820152601960248201527f62616c6c6f6f6e7320617265206e6f742073656c6c61626c6500000000000000604482015290519081900360640190fd5b60018201544260a060020a90910467ffffffffffffffff90811662015180011610610bd3576040805160e560020a62461bcd02815260206004820152603360248201527f6368617261637465722063616e20626520736f6c64206f6e6c7920312064617960448201527f2061667465722074686520707572636861736500000000000000000000000000606482015290519081900360840190fd5b508054600b805461ffff19811661ffff91821660001901821617918290556101009092046001608060020a031691610c0d918591166144b2565b60405133906001608060020a03831680156108fc02916000818181858888f19350505050158015610c42573d6000803e3d6000fd5b5060085460a860020a900463ffffffff161515610c6157610c6161437e565b6040805163ffffffff861681523360208201526001608060020a0383168183015290517fe5cc68f68d9672681158062a835b6abc2ff3fba89f8db70f3a227d4ac35da3c39181900360600190a150505050565b600054600160a060020a03163314610ccb57600080fd5b610cd3611685565b610cdb6133bb565b610ce36129a3565b565b333214610d39576040805160e560020a62461bcd02815260206004820152602480820152600080516020615b5c833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b610d43828261466d565b600160009054906101000a9004600160a060020a0316600160a060020a0316632091f9556040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015610d9657600080fd5b505af1158015610daa573d6000803e3d6000fd5b505050506040513d6020811015610dc057600080fd5b5051600154604080517f5bdaa8e70000000000000000000000000000000000000000000000000000000081529051600160a060020a039384169363a9059cbb938793911691635bdaa8e7916004808201926020929091908290030181600087803b158015610e2d57600080fd5b505af1158015610e41573d6000803e3d6000fd5b505050506040513d6020811015610e5757600080fd5b50516040805160e060020a63ffffffff8616028152600160a060020a03909316600484015260248301919091525160448083019260209291908290030181600087803b158015610ea657600080fd5b505af1158015610eba573d6000803e3d6000fd5b505050506040513d6020811015610ed057600080fd5b50511515610eda57fe5b5050565b600054600160a060020a03163314610ef557600080fd5b60018160ff1610158015610f0d575060648160ff1611155b1515610f1857600080fd5b6008805460ff90921660a060020a0274ff000000000000000000000000000000000000000019909216919091179055565b600060155b601a60ff821611610f7d5760ff81166000908152600c602052604090205461ffff169190910190600101610f4e565b5090565b6000808080808080606080828080333214610fe3576040805160e560020a62461bcd02815260206004820152602480820152600080516020615b5c833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b600160009054906101000a9004600160a060020a0316600160a060020a031663afb7e4956040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561103657600080fd5b505af115801561104a573d6000803e3d6000fd5b505050506040513d602081101561106057600080fd5b5051600d54014210156110e3576040805160e560020a62461bcd02815260206004820152602a60248201527f6e6f7420656e6f7567682074696d65207061737365642073696e6365206c617360448201527f74206572757074696f6e00000000000000000000000000000000000000000000606482015290519081900360840190fd5b600b54600061ffff90911611611169576040805160e560020a62461bcd02815260206004820152602360248201527f746865726520617265206e6f206368617261637465727320696e20746865206760448201527f616d650000000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b42600d55600b54600154604080517f11a5a793000000000000000000000000000000000000000000000000000000008152905161ffff9093169a50606492600160a060020a03909216916311a5a793916004808201926020929091908290030181600087803b1580156111db57600080fd5b505af11580156111ef573d6000803e3d6000fd5b505050506040513d602081101561120557600080fd5b505160ff16890261ffff1681151561121957fe5b0461ffff1696508761ffff1661271002620138800163ffffffff1695508663ffffffff166000141561124a57600196505b8663ffffffff1660405190808252806020026020018201604052801561127a578160200160208202803883390190505b506008546040805163ffffffff90921680835260208082028401019091529196509080156112b2578160200160208202803883390190505b50935060009250600091505b8663ffffffff168361ffff1610156113de5781806001019250508761ffff166112ee8361ffff16600d5401614f0c565b8115156112f757fe5b06995060078a61ffff1681548110151561130d57fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff169850838963ffffffff1681518110151561134957fe5b9060200190602002015115156113d9576001848a63ffffffff1681518110151561136f57fe5b91151560209283029091019091015284518990869061ffff861690811061139257fe5b63ffffffff9092166020928302909101909101526113b28a896000614f65565b9a5060008b6001608060020a031611156113ce57600019909701965b9a8a019a6001909201915b6112be565b50600b805461ffff891661ffff199091161790556001608060020a038086163a0290818116908d1611156114c757611417818d0361508f565b7fa06ad7d0261a795ad8f33fdbef7cf65a0f9f9a825353b13358a96a750acd6b3d85828e03836040518080602001846001608060020a03166001608060020a03168152602001836001608060020a03166001608060020a03168152602001828103825285818151815260200191508051906020019060200280838360005b838110156114ad578181015183820152602001611495565b5050505090500194505050505060405180910390a1611569565b7fa06ad7d0261a795ad8f33fdbef7cf65a0f9f9a825353b13358a96a750acd6b3d856000836040518080602001846001608060020a03168152602001836001608060020a03166001608060020a03168152602001828103825285818151815260200191508051906020019060200280838360005b8381101561155357818101518382015260200161153b565b5050505090500194505050505060405180910390a15b505050505050505050505050565b600b81565b60008054600160a060020a0316331461159457600080fd5b61159c613636565b9050808267016345785d8a0000016001608060020a03161015610eda5760008054604051600160a060020a03909116916001608060020a03851680156108fc02929091818181858888f193505050501580156115fc573d6000803e3d6000fd5b505050565b60085464010000000090046001608060020a031681565b600c6020526000908152604090205461ffff1681565b600c81565b63ffffffff166000908152600960205260409020805460019091015460ff8216926101009092046001608060020a031691600160a060020a0390911690565b60085460a860020a900463ffffffff1681565b600080548190600160a060020a0316331461169f57600080fd5b6002546040805160e060020a6370a082310281523060048201529051600160a060020a03909216916370a08231916024808201926020929091908290030181600087803b1580156116ef57600080fd5b505af1158015611703573d6000803e3d6000fd5b505050506040513d602081101561171957600080fd5b5051915060008211156117d05760025460008054604080517fa9059cbb000000000000000000000000000000000000000000000000000000008152600160a060020a039283166004820152602481018790529051919093169263a9059cbb9260448083019360209390929083900390910190829087803b15801561179c57600080fd5b505af11580156117b0573d6000803e3d6000fd5b505050506040513d60208110156117c657600080fd5b505115156117d057fe5b6003546040805160e060020a6370a082310281523060048201529051600160a060020a03909216916370a08231916024808201926020929091908290030181600087803b15801561182057600080fd5b505af1158015611834573d6000803e3d6000fd5b505050506040513d602081101561184a57600080fd5b505190506000811115610eda5760035460008054604080517fa9059cbb000000000000000000000000000000000000000000000000000000008152600160a060020a039283166004820152602481018690529051919093169263a9059cbb9260448083019360209390929083900390910190829087803b158015610ea657600080fd5b60001981565b6000805b60075461ffff8216101561026d578263ffffffff1660078261ffff168154811015156118ff57fe5b6000918252602090912060088204015460079091166004026101000a900463ffffffff16141561193157809150611939565b6001016118d7565b50919050565b600e6020526000908152604090205481565b611959615afe565b611961615afe565b611969615afe565b611971615afe565b600b5460009081908190819061ffff908116600a8b01909116116119985788600a016119a0565b600b5461ffff165b61ffff169350600092508890505b8363ffffffff168161ffff161015611aed576007805461ffff83169081106119d257fe5b6000918252602090912060088204015460079091166004026101000a900463ffffffff169150818860ff8516600a8110611a0857fe5b63ffffffff9283166020918202929092019190915290831660009081526009909152604090205460ff9081169088908516600a8110611a4357fe5b60ff9283166020918202929092019190915263ffffffff841660009081526009909152604090205461010090046001608060020a03169087908516600a8110611a8857fe5b6001608060020a039092166020928302919091015263ffffffff8316600090815260099091526040902060010154600160a060020a03168560ff8516600a8110611ace57fe5b600160a060020a039092166020929092020152600192830192016119ae565b505050509193509193565b60085463ffffffff1681565b60106020526000908152604090205460ff1681565b60085460a060020a900460ff1681565b6000808080808080808080333214611b88576040805160e560020a62461bcd02815260206004820152602480820152600080516020615b5c833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b600b5461ffff908116908c16101580611be457506007805461ffff8d16908110611bae57fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff1663ffffffff168c63ffffffff1614155b15611bf557611bf28c6118d3565b9a505b63ffffffff8c16600090815260096020908152604080832060015482517f4597dc8e0000000000000000000000000000000000000000000000000000000081529251919e504294600160a060020a0390911693634597dc8e936004808201949293918390030190829087803b158015611c6d57600080fd5b505af1158015611c81573d6000803e3d6000fd5b505050506040513d6020811015611c9757600080fd5b505163ffffffff8e166000908152600f6020526040902054011115611d2c576040805160e560020a62461bcd02815260206004820152603d60248201527f6e6f7420656e6f7567682074696d65207061737365642073696e63652074686560448201527f206c617374206669676874206f66207468697320636861726163746572000000606482015290519081900360840190fd5b60018a0154600160a060020a03163314611db6576040805160e560020a62461bcd02815260206004820152603260248201527f6f6e6c79206f776e65722063616e20696e69746961746520612066696768742060448201527f666f722074686973206368617261637465720000000000000000000000000000606482015290519081900360840190fd5b895460ff169850600c891080611dcf5750600e60ff8a16115b1515611e25576040805160e560020a62461bcd02815260206004820152601560248201527f62616c6c6f6f6e732063616e6e6f742066696768740000000000000000000000604482015290519081900360640190fd5b611e358c63ffffffff168a615550565b975061ffff8089161415611e4857600080fd5b6007805461ffff8a16908110611e5a57fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff908116808452600990925260409092209098509650606490611ea1908e16614f0c565b811515611eaa57fe5b069250600160009054906101000a9004600160a060020a0316600160a060020a0316638f7561476040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015611f0057600080fd5b505af1158015611f14573d6000803e3d6000fd5b505050506040513d6020811015611f2a57600080fd5b5051600480546040805160e060020a6370a08231028152339381019390935251600160a060020a03909116916370a082319160248083019260209291908290030181600087803b158015611f7d57600080fd5b505af1158015611f91573d6000803e3d6000fd5b505050506040513d6020811015611fa757600080fd5b505110611fe2576064611fbd8461ffff16614f0c565b811515611fc657fe5b0693508261ffff168461ffff161015611fdd578392505b600093505b60065460018b01546040805160e060020a6370a08231028152600160a060020a039283166004820152905191909216916370a082319160248083019260209291908290030181600087803b15801561203957600080fd5b505af115801561204d573d6000803e3d6000fd5b505050506040513d602081101561206357600080fd5b505160055460018c01546040805160e060020a6370a08231028152600160a060020a039283166004820152905166038d7ea4c680009392909216916370a08231916024808201926020929091908290030181600087803b1580156120c657600080fd5b505af11580156120da573d6000803e3d6000fd5b505050506040513d60208110156120f057600080fd5b50518115156120fb57fe5b60065460018a01546040805160e060020a6370a08231028152600160a060020a03928316600482015290519490930494909401955092909216916370a082319160248083019260209291908290030181600087803b15801561215c57600080fd5b505af1158015612170573d6000803e3d6000fd5b505050506040513d602081101561218657600080fd5b505160055460018801546040805160e060020a6370a08231028152600160a060020a039283166004820152905166038d7ea4c680009392909216916370a08231916024808201926020929091908290030181600087803b1580156121e957600080fd5b505af11580156121fd573d6000803e3d6000fd5b505050506040513d602081101561221357600080fd5b505181151561221e57fe5b88548d5492909104929092019250610100918290046001608060020a03908116929091041614156123925760329350808211156122ef57600160009054906101000a9004600160a060020a0316600160a060020a0316634ad6e6486040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156122a857600080fd5b505af11580156122bc573d6000803e3d6000fd5b505050506040513d60208110156122d257600080fd5b505160ff1660648115156122e257fe5b0460ff168401935061238d565b8181111561238d57600160009054906101000a9004600160a060020a0316600160a060020a0316634ad6e6486040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561234a57600080fd5b505af115801561235e573d6000803e3d6000fd5b505050506040513d602081101561237457600080fd5b505160ff16606481151561238457fe5b0460ff16840393505b612558565b85548a546001608060020a036101009283900481169290910416111561248957606493508181111561238d57600160009054906101000a9004600160a060020a0316600160a060020a0316634ad6e6486040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561241157600080fd5b505af1158015612425573d6000803e3d6000fd5b505050506040513d602081101561243b57600080fd5b50518a54875460ff90921691610100918290046001608060020a039081169290910481166064021681151561246c57fe5b046001608060020a031681151561247f57fe5b0484039350612558565b8082111561255857600160009054906101000a9004600160a060020a0316600160a060020a0316634ad6e6486040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156124e457600080fd5b505af11580156124f8573d6000803e3d6000fd5b505050506040513d602081101561250e57600080fd5b505186548b5460ff90921691610100918290046001608060020a039081169290910481166064021681151561253f57fe5b046001608060020a031681151561255257fe5b04840193505b63ffffffff8c16600090815260096020526040902060010154600360e060020a90910460ff1610156125c65763ffffffff8c1660009081526009602052604090206001908101805460ff60e060020a80830482169094011690920260e060020a60ff02199092169190911790555b61ffff808516908416106127b2578554600c60ff90911610806125ef57508554600e60ff909116115b1561275357600b54865461260e918d9161ffff9091169060ff16614f65565b94506000856001608060020a0316111561264157600b805461ffff19811661ffff9182166000190190911617905561265a565b63ffffffff8c166000908152600f602052604090204290555b8554601560ff9091161080159061267857508554601a60ff90911611155b156126bb57600880546001608060020a03640100000000808304821689019091160273ffffffffffffffffffffffffffffffff00000000199091161790556126ed565b85546001608060020a03610100808304821688019091160270ffffffffffffffffffffffffffffffff00199091161786555b6040805163ffffffff808a1682528e1660208201526001608060020a0387168183015261ffff80871660608301528516608082015290517f24758388bd6bf650dde3bbde100b1056920770025a9f1c5998b4587670d4f3859181900360a00190a16127ad565b6040805163ffffffff808a1682528e16602082015260008183015261ffff80871660608301528516608082015290517f24758388bd6bf650dde3bbde100b1056920770025a9f1c5998b4587670d4f3859181900360a00190a15b611569565b63ffffffff8c166000908152600f60205260409020429055600b548a546127e4918a9161ffff9091169060ff16614f65565b94506000856001608060020a0316111561281357600b805461ffff19811661ffff918216600019019091161790555b8954601560ff9091161080159061283157508954601a60ff90911611155b1561287457600880546001608060020a03640100000000808304821689019091160273ffffffffffffffffffffffffffffffff00000000199091161790556128a6565b89546001608060020a03610100808304821688019091160270ffffffffffffffffffffffffffffffff0019909116178a555b60085460a860020a900463ffffffff1615156128c4576128c461437e565b6040805163ffffffff808f168252891660208201526001608060020a0387168183015261ffff80871660608301528516608082015290517f24758388bd6bf650dde3bbde100b1056920770025a9f1c5998b4587670d4f3859181900360a00190a1505050505050505050505050565b600154600160a060020a031681565b333214612996576040805160e560020a62461bcd02815260206004820152602480820152600080516020615b5c833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b6129a0338261466d565b50565b600054600160a060020a031633146129ba57600080fd5b600054600160a060020a0316ff5b6000805b600560ff821611610f7d5760ff81166000908152600c602052604090205461ffff1691909101906001016129cc565b600054600160a060020a031681565b600354600090819081908190819081908190600160a060020a038a8116911614612aa4576040805160e560020a62461bcd02815260206004820152602760248201527f65766572797468696e67206973207061696420776974682074656c65706f727460448201527f20746f6b656e7300000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b612aad886156c0565b63ffffffff16600114612ac1576000612ac4565b60015b9650861515612ce157612ad6886156c7565b9550600160009054906101000a9004600160a060020a0316600160a060020a0316636121e5226040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015612b2b57600080fd5b505af1158015612b3f573d6000803e3d6000fd5b505050506040513d6020811015612b5557600080fd5b505163ffffffff8716600090815260096020526040902054909550600c60ff90911610801590612ba0575063ffffffff8616600090815260096020526040902054601460ff90911611155b15612bac576002850294505b848a1015612c2a576040805160e560020a62461bcd02815260206004820152603860248201527f696e737566666963696e657420616d6f756e74206f6620746f6b656e7320746f60448201527f2074656c65706f72742074686973206368617261637465720000000000000000606482015290519081900360840190fd5b600354604080517f23b872dd000000000000000000000000000000000000000000000000000000008152600160a060020a038e8116600483015230602483015260448201899052915191909216916323b872dd9160648083019260209291908290030181600087803b158015612c9f57600080fd5b505af1158015612cb3573d6000803e3d6000fd5b505050506040513d6020811015612cc957600080fd5b50511515612cd357fe5b612cdc866156ce565b613222565b612cea886156c7565b63ffffffff8116600090815260096020908152604080832054600154825160e060020a635e383d2102815260ff909216600483018190529251959b50919850600160a060020a0390911693635e383d2193602480840194938390030190829087803b158015612d5857600080fd5b505af1158015612d6c573d6000803e3d6000fd5b505050506040513d6020811015612d8257600080fd5b505163ffffffff871660009081526009602052604090205461010090046001608060020a03908116911614612e4d576040805160e560020a62461bcd02815260206004820152605c60248201527f70726f74656374696f6e20636f756c6420626520626f75676874206f6e6c792060448201527f6265666f72652074686520666972737420666967687420616e64206265666f7260648201527f652074686520666972737420766f6c63616e6f206572757074696f6e00000000608482015290519081900360a40190fd5b600b60ff851611612ef057600160009054906101000a9004600160a060020a0316600160a060020a03166319f353bb6040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015612eab57600080fd5b505af1158015612ebf573d6000803e3d6000fd5b505050506040513d6020811015612ed557600080fd5b5051600660ff86160660010160ff160292506003915061311a565b600c60ff851610801590612f085750600e60ff851611155b15612fab57600160009054906101000a9004600160a060020a0316600160a060020a03166319f353bb6040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015612f6057600080fd5b505af1158015612f74573d6000803e3d6000fd5b505050506040513d6020811015612f8a57600080fd5b505160066003860160ff160660010160ff160260020292506006915061311a565b600f60ff851610801590612fc35750601460ff851611155b1561306657600160009054906101000a9004600160a060020a0316600160a060020a03166319f353bb6040518163ffffffff1660e060020a028152600401602060405180830381600087803b15801561301b57600080fd5b505af115801561302f573d6000803e3d6000fd5b505050506040513d602081101561304557600080fd5b505160066003860160ff160660010160ff160260020292506003915061311a565b601560ff85161080159061307e5750601a60ff851611155b1561311a57600160009054906101000a9004600160a060020a0316600160a060020a03166319f353bb6040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156130d657600080fd5b505af11580156130ea573d6000803e3d6000fd5b505050506040513d602081101561310057600080fd5b505160066003860160ff160660010160ff16029250600391505b5063ffffffff851660009081526010602052604081205490945060ff165b8160ff168160ff1610801561315757508060010160ff16830285018a10155b1561316f5760010160ff811683029490940193613138565b600354604080517f23b872dd000000000000000000000000000000000000000000000000000000008152600160a060020a038e8116600483015230602483015260448201899052915191909216916323b872dd9160648083019260209291908290030181600087803b1580156131e457600080fd5b505af11580156131f8573d6000803e3d6000fd5b505050506040513d602081101561320e57600080fd5b5051151561321857fe5b6132228682615880565b5050505050505050505050565b600681565b601481565b6000600f5b601460ff821611610f7d5760ff81166000908152600c602052604090205461ffff16919091019060010161323e565b6000600660ff8416108015906132875750600b60ff841611155b1561329a5750600560ff8216111561335a565b600f60ff8416108015906132b25750601460ff841611155b156132d357600c60ff831610806132cc5750600e60ff8316115b905061335a565b600060ff8416108015906132eb5750600560ff841611155b156132fe5750600f60ff8216101561335a565b601560ff8416108015906133165750601a60ff841611155b1561335657600c60ff8316108015906133335750600e60ff831611155b806132cc5750600660ff8316108015906132cc575050600b60ff8216111561335a565b5060005b92915050565b601581565b600f6020526000908152604090205481565b600f81565b600060065b600b60ff821611610f7d5760ff81166000908152600c602052604090205461ffff169190910190600101613381565b600d5481565b600581565b60008054600160a060020a031633146133d357600080fd5b5060005b600b5461ffff9081169082161015613579576009600060078361ffff1681548110151561340057fe5b6000918252602080832060088304015460079283166004026101000a900463ffffffff16845283019390935260409091018120600101548254600160a060020a03909116926108fc9260099290919061ffff871690811061345d57fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff1663ffffffff1663ffffffff16815260200190815260200160002060000160019054906101000a90046001608060020a03166001608060020a03169081150290604051600060405180830381858888f193505050501580156134e8573d6000803e3d6000fd5b506009600060078361ffff1681548110151561350057fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff1683528201929092526040019020805470ffffffffffffffffffffffffffffffffff19168155600190810180547cffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19169055016133d7565b61358560076000615b1e565b50600b805461ffff19169055565b601a81565b600e81565b60003332146135f3576040805160e560020a62461bcd02815260206004820152602480820152600080516020615b5c833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b603282111561360157600080fd5b5060005b818110156115fc5761362e83838381811061361c57fe5b9050602002013563ffffffff166136cf565b600101613605565b60085460009064010000000090046001608060020a0316815b600b5461ffff90811690821610156136c6576009600060078361ffff1681548110151561367857fe5b60009182526020808320600883040154600790921660040261010090810a90920463ffffffff1684528301939093526040909101902054046001608060020a0316919091019060010161364f565b50303103919050565b60008080333214613727576040805160e560020a62461bcd02815260206004820152602480820152600080516020615b5c833981519152604482015260e260020a631d1a1bd902606482015290519081900360840190fd5b60085460006401000000009091046001608060020a031611613793576040805160e560020a62461bcd02815260206004820152600e60248201527f656d707479207472656173757279000000000000000000000000000000000000604482015290519081900360640190fd5b63ffffffff841660009081526009602052604090208054909350601560ff909116108015906137c957508254601a60ff90911611155b1515613845576040805160e560020a62461bcd02815260206004820152602b60248201527f6f6e6c7920617263686572732063616e2061636365737320746865206361737460448201527f6c65207472656173757279000000000000000000000000000000000000000000606482015290519081900360840190fd5b63ffffffff84166000908152600e6020526040902054151561397957600160009054906101000a9004600160a060020a0316600160a060020a03166399bd59ee6040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156138b457600080fd5b505af11580156138c8573d6000803e3d6000fd5b505050506040513d60208110156138de57600080fd5b5051600184015460a060020a900467ffffffffffffffff1642031015613974576040805160e560020a62461bcd02815260206004820152602d60248201527f6e6f7420656e6f7567682074696d6520686173207061737365642073696e636560448201527f2074686520707572636861736500000000000000000000000000000000000000606482015290519081900360840190fd5b613a8c565b600160009054906101000a9004600160a060020a0316600160a060020a03166399bd59ee6040518163ffffffff1660e060020a028152600401602060405180830381600087803b1580156139cc57600080fd5b505af11580156139e0573d6000803e3d6000fd5b505050506040513d60208110156139f657600080fd5b505163ffffffff85166000908152600e602052604090205401421015613a8c576040805160e560020a62461bcd02815260206004820152603e60248201527f6e6f7420656e6f7567682074696d65207061737365642073696e63652074686560448201527f206c61737420636173746c65206c6f6f7420646973747269627574696f6e0000606482015290519081900360840190fd5b6001830154600360e060020a90910460ff161015613af4576040805160e560020a62461bcd02815260206004820152601560248201527f6e65656420746f20666967687420332074696d65730000000000000000000000604482015290519081900360640190fd5b63ffffffff84166000818152600e6020526040902042905560018401805460e060020a60ff0219169055613b3e906103e890613b2f90614f0c565b811515613b3857fe5b066158e2565b91506003826001608060020a03161015613b5757600391505b60326001608060020a0383161115613b6b57fe5b6008546064906001608060020a03640100000000909104811684021684546001608060020a03610100808304821694909304938401811690920270ffffffffffffffffffffffffffffffff001990911617855560088054640100000000808204841685900384160273ffffffffffffffffffffffffffffffff000000001990911617905560408051828416815263ffffffff8816602082015291851682820152519192507f044748c9c1d4b639839f14eae2bf0670989e54a214f284e8713a6bce527b656f919081900360600190a150505050565b606060008060008060006032604051908082528060200260200182016040528015613c75578160200160208202803883390190505b50600b5490965061ffff169150600090505b8161ffff168161ffff1610156141fe5733600160a060020a03166009600060078461ffff16815481101515613cb857fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff168352820192909252604001902060010154600160a060020a0316148015613d685750426009600060078461ffff16815481101515613d1757fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190206001015460a060020a900467ffffffffffffffff908116620151800116105b8015613e1c5750600c60ff166009600060078461ffff16815481101515613d8b57fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff161080613e1c5750600e60ff166009600060078461ffff16815481101515613de457fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff16115b156141f6575b60008261ffff16118015613e96575033600160a060020a03166009600060076001860361ffff16815481101515613e5557fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff168352820192909252604001902060010154600160a060020a0316145b8015613f095750426009600060076001860361ffff16815481101515613eb857fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190206001015460a060020a900467ffffffffffffffff908116620151800116105b8015613fbd5750600c60ff166009600060078461ffff16815481101515613f2c57fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff161080613fbd5750600e60ff166009600060078461ffff16815481101515613f8557fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff16115b1561411057600780546000199093019261ffff8416908110613fdb57fe5b60009182526020808320600883040154600790921660040261010090810a90920463ffffffff1680845260098083526040808620805460ff9081168852600c8652918720805461ffff19811661ffff9182166000190190911617905595839052925292548951939750919091046001608060020a0316949094019385918891881690811061406557fe5b63ffffffff9283166020918202909201015260085460019096019585821660a860020a90910490911614156140b7576008805478ffffffff000000000000000000000000000000000000000000191690555b63ffffffff84166000908152600960205260409020805470ffffffffffffffffffffffffffffffffff1916815560010180547cffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19169055613e22565b8060010161ffff168261ffff1611156141f6576009600060078361ffff1681548110151561413a57fe5b60009182526020808320600883040154600792831660040261010090810a90910463ffffffff16855290840194909452604090920190205481549290046001608060020a031694909401939061ffff831690811061419457fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff16868660ff168151811015156141cb57fe5b63ffffffff909216602092830290910190910152600190940193600019909101906141f681836144b2565b600101613c87565b600b805461ffff191661ffff84161790556040805133808252602080830187905260609383018481528a519484019490945289517f1e6d26af567145cb0b46ea7135e21671f1e58e8d1f818dab12b0e10eb5ebb07b94929388938c93919290916080840191858201910280838360005b8381101561428657818101518382015260200161426e565b5050505090500194505050505060405180910390a1604051339084156108fc029085906000818181858888f193505050501580156142c8573d6000803e3d6000fd5b5060085460a860020a900463ffffffff1615156142e7576142e761437e565b505050505050565b600081565b600b5461ffff1681565b600054600160a060020a0316331461431557600080fd5b6129a08161595e565b600054600160a060020a0316331461433557600080fd5b80600160a060020a0316ff5b601b81565b600780548290811061435457fe5b9060005260206000209060089182820401919006600402915054906101000a900463ffffffff1681565b60001960005b600b5461ffff9081169082161015614479578163ffffffff1660078261ffff168154811015156143b057fe5b6000918252602090912060088204015460079091166004026101000a900463ffffffff161080156144315750600560ff166009600060078461ffff168154811015156143f857fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff1611155b15614471576007805461ffff831690811061444857fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff1691505b600101614384565b506008805463ffffffff90921660a860020a0278ffffffff00000000000000000000000000000000000000000019909216919091179055565b600060078361ffff168154811015156144c757fe5b6000918252602080832060088084049091015460079093166004026101000a90920463ffffffff9081168085526009835260408086205460ff168652600c90935291909320805461ffff19811661ffff91821660001901909116179055905490925060a860020a90041681141561455b576008805478ffffffff000000000000000000000000000000000000000000191690555b63ffffffff81166000908152600960205260409020805470ffffffffffffffffffffffffffffffffff1916815560010180547cffffffffffffffffffffffffffffffffffffffffffffffffffffffffff191690556007805461ffff84169081106145c157fe5b90600052602060002090600891828204019190066004029054906101000a900463ffffffff1660078461ffff168154811015156145fa57fe5b90600052602060002090600891828204019190066004026101000a81548163ffffffff021916908363ffffffff16021790555060078261ffff1681548110151561464057fe5b90600052602060002090600891828204019190066004026101000a81549063ffffffff0219169055505050565b6000806000806000600160009054906101000a9004600160a060020a0316600160a060020a03166349b3b29f876040518263ffffffff1660e060020a028152600401808260ff168152602001915050602060405180830381600087803b1580156146d657600080fd5b505af11580156146ea573d6000803e3d6000fd5b505050506040513d602081101561470057600080fd5b50516001608060020a03163481151561471557fe5b049450600061ffff8616116147c0576040805160e560020a62461bcd02815260206004820152604260248201527f696e73756666696369656e7420616d6f756e74206f6620657468657220746f2060448201527f7075726368617365206120676976656e2074797065206f66206368617261637460648201527f6572000000000000000000000000000000000000000000000000000000000000608482015290519081900360a40190fd5b600b54600154604080517f49e77c8b000000000000000000000000000000000000000000000000000000008152600160a060020a038b8116600483015260ff8b166024830152915161ffff90941697509116916349e77c8b916044808201926020929091908290030181600087803b15801561483b57600080fd5b505af115801561484f573d6000803e3d6000fd5b505050506040513d602081101561486557600080fd5b50511515614909576040805160e560020a62461bcd02815260206004820152604360248201527f696e737566666963696e657420616d6f756e74206f6620746f6b656e7320746f60448201527f207075726368617365206120676976656e2074797065206f662063686172616360648201527f7465720000000000000000000000000000000000000000000000000000000000608482015290519081900360a40190fd5b601b60ff87161015806149b85750600154604080517f49b3b29f00000000000000000000000000000000000000000000000000000000815260ff891660048201529051600160a060020a03909216916349b3b29f916024808201926020929091908290030181600087803b15801561498057600080fd5b505af1158015614994573d6000803e3d6000fd5b505050506040513d60208110156149aa57600080fd5b50516001608060020a031634105b80614a4b5750600160009054906101000a9004600160a060020a0316600160a060020a0316638882ddc96040518163ffffffff1660e060020a028152600401602060405180830381600087803b158015614a1157600080fd5b505af1158015614a25573d6000803e3d6000fd5b505050506040513d6020811015614a3b57600080fd5b505161ffff908116858701909116115b15614a5557600080fd5b60085463ffffffff169250600560ff871611614cd95760085460a860020a900463ffffffff161580614a96575060085460a860020a900463ffffffff908116145b15614acc576008805478ffffffff000000000000000000000000000000000000000000191660a860020a63ffffffff8616021790555b600091505b8461ffff168260ff161015614c9657614af260ff83168481019086016159db565b6040805160a08101825260ff8816808252600154835160e060020a635e383d21028152600481019290925292519192602080850193600160a060020a0390921692635e383d2192602480830193928290030181600087803b158015614b5657600080fd5b505af1158015614b6a573d6000803e3d6000fd5b505050506040513d6020811015614b8057600080fd5b50516001608060020a039081168252600160a060020a038a81166020808501919091524267ffffffffffffffff9081166040808701919091526000606096870181905260ff8a81168c0163ffffffff168252600985529082902088518154958a015160ff199096169083161770ffffffffffffffffffffffffffffffff0019166101009590971694909402959095178355860151600192830180549688015160809098015173ffffffffffffffffffffffffffffffffffffffff1990971691909416177bffffffffffffffff0000000000000000000000000000000000000000191660a060020a96909116959095029490941760e060020a60ff02191660e060020a939092169290920217905590910190614ad1565b60ff86166000908152600c60205260409020805461ffff1980821661ffff9283168901831617909255600b80549283169282168801909116919091179055614e8d565b5060005b8461ffff168160ff161015614e8d576040805160a08101825260ff8816808252600154835160e060020a635e383d21028152600481019290925292519192602080850193600160a060020a0390921692635e383d2192602480830193928290030181600087803b158015614d5057600080fd5b505af1158015614d64573d6000803e3d6000fd5b505050506040513d6020811015614d7a57600080fd5b50516001608060020a039081168252600160a060020a038a81166020808501919091524267ffffffffffffffff9081166040808701919091526000606096870181905260ff8981168c0163ffffffff168252600985529082902088518154958a015160ff199096169083161770ffffffffffffffffffffffffffffffff0019166101009590971694909402959095178355860151600192830180549688015160809098015173ffffffffffffffffffffffffffffffffffffffff1990971691909416177bffffffffffffffff0000000000000000000000000000000000000000191660a060020a96909116959095029490941760e060020a60ff02191660e060020a939092169290920217905501614cdd565b6008805463ffffffff191661ffff871685810163ffffffff9081169290921790925560408051600160a060020a038b16815260ff8a166020820152808201939093529085166060830152517ff7ad76543f114c7bb00ff2cd992ff749d502ed5c0c6f87901ad48f6871fceca1916080908290030190a150505050505050565b600b546040805160001943014081524260208201527e0100000000000000000000000000000000000000000000000000000000000061ffff90931692909202828201526042820183905251908190036062019020919050565b600080600060078661ffff16815481101515614f7d57fe5b6000918252602090912060088204015460079091166004026101000a900463ffffffff16915060019050600f60ff851610801590614fbf5750601460ff851611155b15614fc8575060025b63ffffffff821660009081526010602052604090205460ff80831691161061501a5763ffffffff82166000908152601060205260408120805460ff8082168590031660ff199091161790559250615086565b6009600060078861ffff1681548110151561503157fe5b60009182526020808320600883040154600790921660040261010090810a90920463ffffffff16845283019390935260409091019020546000199690960195046001608060020a0316925061508686866144b2565b50509392505050565b600880546401000000008082046001608060020a0390811660148683160401160273ffffffffffffffffffffffffffffffff0000000019909116179081905560009081908190606090829081908190819063ffffffff60a860020a9091041615156150fc576150fc61437e565b60085460a860020a900463ffffffff908116146151795760085460a860020a900463ffffffff166000908152600960205260409020805470ffffffffffffffffffffffffffffffff00198116600a6001608060020a038d81169182046101009485900482160116909202179091556055606490910402975061518c565b60646001608060020a038a1604605f0297505b60408051601b8082526103808201909252909650866020820161036080388339019050509450600093505b8560ff168460ff16101561528f57600c60ff851610806151da5750600e60ff8516115b80156151fa575060ff84166000908152600c602052604081205461ffff16115b15615284576001546040805160e060020a635e383d2102815260ff871660048201529051600160a060020a0390921691635e383d21916024808201926020929091908290030181600087803b15801561525257600080fd5b505af1158015615266573d6000803e3d6000fd5b505050506040513d602081101561527c57600080fd5b505196909601955b6001909301926151b7565b600092505b8560ff168360ff1610156153d857600c60ff851610806152b75750600e60ff8516115b80156152d7575060ff83166000908152600c602052604081205461ffff16115b156153cd5760ff83166000818152600c6020908152604080832054600154825160e060020a635e383d210281526004810196909652915161ffff909116946001608060020a038d1694600160a060020a0390931693635e383d219360248084019492938390030190829087803b15801561535057600080fd5b505af1158015615364573d6000803e3d6000fd5b505050506040513d602081101561537a57600080fd5b50518a026001608060020a031681151561539057fe5b046001608060020a03168115156153a357fe5b04858460ff168151811015156153b557fe5b6001608060020a039092166020928302909101909101525b600190920191615294565b5060005b600b5461ffff9081169082161015615545576009600060078361ffff1681548110151561540557fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff169150600c82108061544f5750600e60ff8316115b1561553d57846009600060078461ffff1681548110151561546c57fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff168352820192909252604001902054815160ff9091169081106154af57fe5b906020019060200201516009600060078461ffff168154811015156154d057fe5b60009182526020808320600883040154600790921660040261010090810a90920463ffffffff16845283019390935260409091019020805470ffffffffffffffffffffffffffffffff00198116908390046001608060020a03908116949094019093169091029190911790555b6001016153dc565b505050505050505050565b600b5460009081908190819061ffff1661556987614f0c565b81151561557257fe5b600b549190069350600761ffff9182160616156155905760076155ae565b600b805461ffff160661ffff166000146155ab57600b6155ae565b600d5b60ff1691508290505b61560d856009600060078561ffff168154811015156155d257fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff16835282019290925260400190205460ff1661326d565b8015615677575033600160a060020a03166009600060078461ffff1681548110151561563557fe5b6000918252602080832060088304015460079092166004026101000a90910463ffffffff168352820192909252604001902060010154600160a060020a031614155b15615684578093506156b7565b600b5461ffff908116908284011681151561569b57fe5b06905061ffff808216908416146156b1576155b7565b60001993505b50505092915050565b5060c05190565b5060a05190565b63ffffffff81166000908152600a602052604081205460ff161561573c576040805160e560020a62461bcd02815260206004820152601260248201527f616c72656164792074656c65706f727465640000000000000000000000000000604482015290519081900360640190fd5b5063ffffffff81166000908152600a60209081526040808320805460ff19166001179055600990915290208054600560ff91909116116157eb576040805160e560020a62461bcd028152602060048201526024808201527f647261676f6e7320646f206e6f74206e65656420746f2062652074656c65706f60448201527f7274656400000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b600b546157fd90839061ffff166159db565b600b805461ffff8082166001908101821661ffff1993841617909355835460ff166000908152600c6020908152604091829020805480851690960190931694909316939093179055815163ffffffff8516815291517f663f46f5a2fd740de613966ad0391fbc9d840f82898698e6d7f16ba0ed126b3b9281900390910190a15050565b63ffffffff8216600081815260106020908152604091829020805460ff191660ff861690811790915582519384529083015280517f088ba7785fd329abbf01eaa732bad30e14b205b9fc8ab9378f9f5295731135559281900390910190a15050565b60326000805b60085460ff60a060020a909104811690821610156159575761592f6103e86159208360070260ff1687016001608060020a0316614f0c565b81151561592957fe5b06615a91565b9150826001608060020a0316826001608060020a0316101561594f578192505b6001016158e8565b5050919050565b600160a060020a038116151561597357600080fd5b60008054604051600160a060020a03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60075461ffff82161015615a35578160078261ffff168154811015156159fd57fe5b90600052602060002090600891828204019190066004026101000a81548163ffffffff021916908363ffffffff160217905550610eda565b506007805460018101825560008290527fa66cc928b5edb82af9bd49922954155ab7b0942694bea4ce44661d9a8736c68860088204018054919092166004026101000a63ffffffff818102199092169390911602919091179055565b6000806001602d5b60036001608060020a03821610615af157846001608060020a0316836001608060020a03161115615acc57809350615af6565b9181019160236001608060020a03821614615ae8576001820191505b60001901615a99565b600393505b505050919050565b61014060405190810160405280600a906020820280388339509192915050565b5080546000825560070160089004906000526020600020908101906129a09190615b5891905b80821115610f7d5760008155600101615b44565b905600636f6e7472616374732063616e6e6f7420657865637574652074686973206d65a165627a7a7230582067949d9f96abb63cbad0550203e0ab8cd2695e80d6e3628f574cf82a32544f7a0029000000000000000000000000c596bd09d652827b0106292d3e378d5938df4b12000000000000000000000000a54ddc7b3cce7fc8b1e3fa0256d0db80d2c10970000000000000000000000000a7bd9d58d22d5e35ec4a08083141e0340ea2ca93000000000000000000000000d28525ad63f337c86843d720dae921228e44f0ac000000000000000000000000ca1c217a2200b60dbd52e33c7cb1758db2b30a0e0000000000000000000000000242269c58c2885684a597d47da9ef87917771fb",
  "constructorArguments": "000000000000000000000000c596bd09d652827b0106292d3e378d5938df4b12000000000000000000000000a54ddc7b3cce7fc8b1e3fa0256d0db80d2c10970000000000000000000000000a7bd9d58d22d5e35ec4a08083141e0340ea2ca93000000000000000000000000d28525ad63f337c86843d720dae921228e44f0ac000000000000000000000000ca1c217a2200b60dbd52e33c7cb1758db2b30a0e0000000000000000000000000242269c58c2885684a597d47da9ef87917771fb"
}