{
  "address": "0xdf3d4cafe943982eb4aedd110e1a2dee330fb898",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "DaoCreator",
  "compilerVersion": "v0.5.4+commit.9549d8ff",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2019-04-03\n*/\n\n// File: openzeppelin-solidity/contracts/ownership/Ownable.sol\n\npragma solidity ^0.5.0;\n\n/**\n * @title Ownable\n * @dev The Ownable contract has an owner address, and provides basic authorization control\n * functions, this simplifies the implementation of \"user permissions\".\n */\ncontract Ownable {\n    address private _owner;\n\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\n\n    /**\n     * @dev The Ownable constructor sets the original `owner` of the contract to the sender\n     * account.\n     */\n    constructor () internal {\n        _owner = msg.sender;\n        emit OwnershipTransferred(address(0), _owner);\n    }\n\n    /**\n     * @return the address of the owner.\n     */\n    function owner() public view returns (address) {\n        return _owner;\n    }\n\n    /**\n     * @dev Throws if called by any account other than the owner.\n     */\n    modifier onlyOwner() {\n        require(isOwner());\n        _;\n    }\n\n    /**\n     * @return true if `msg.sender` is the owner of the contract.\n     */\n    function isOwner() public view returns (bool) {\n        return msg.sender == _owner;\n    }\n\n    /**\n     * @dev Allows the current owner to relinquish control of the contract.\n     * @notice Renouncing to ownership will leave the contract without an owner.\n     * It will not be possible to call the functions with the `onlyOwner`\n     * modifier anymore.\n     */\n    function renounceOwnership() public onlyOwner {\n        emit OwnershipTransferred(_owner, address(0));\n        _owner = address(0);\n    }\n\n    /**\n     * @dev Allows the current owner to transfer control of the contract to a newOwner.\n     * @param newOwner The address to transfer ownership to.\n     */\n    function transferOwnership(address newOwner) public onlyOwner {\n        _transferOwnership(newOwner);\n    }\n\n    /**\n     * @dev Transfers control of the contract to a newOwner.\n     * @param newOwner The address to transfer ownership to.\n     */\n    function _transferOwnership(address newOwner) internal {\n        require(newOwner != address(0));\n        emit OwnershipTransferred(_owner, newOwner);\n        _owner = newOwner;\n    }\n}\n\n// File: @daostack/infra/contracts/Reputation.sol\n\npragma solidity ^0.5.4;\n\n\n\n/**\n * @title Reputation system\n * @dev A DAO has Reputation System which allows peers to rate other peers in order to build trust .\n * A reputation is use to assign influence measure to a DAO'S peers.\n * Reputation is similar to regular tokens but with one crucial difference: It is non-transferable.\n * The Reputation contract maintain a map of address to reputation value.\n * It provides an onlyOwner functions to mint and burn reputation _to (or _from) a specific address.\n */\n\ncontract Reputation is Ownable {\n\n    uint8 public decimals = 18;             //Number of decimals of the smallest unit\n    // Event indicating minting of reputation to an address.\n    event Mint(address indexed _to, uint256 _amount);\n    // Event indicating burning of reputation for an address.\n    event Burn(address indexed _from, uint256 _amount);\n\n      /// @dev `Checkpoint` is the structure that attaches a block number to a\n      ///  given value, the block number attached is the one that last changed the\n      ///  value\n    struct Checkpoint {\n\n    // `fromBlock` is the block number that the value was generated from\n        uint128 fromBlock;\n\n          // `value` is the amount of reputation at a specific block number\n        uint128 value;\n    }\n\n      // `balances` is the map that tracks the balance of each address, in this\n      //  contract when the balance changes the block number that the change\n      //  occurred is also included in the map\n    mapping (address => Checkpoint[]) balances;\n\n      // Tracks the history of the `totalSupply` of the reputation\n    Checkpoint[] totalSupplyHistory;\n\n    /// @notice Constructor to create a Reputation\n    constructor(\n    ) public\n    {\n    }\n\n    /// @dev This function makes it easy to get the total number of reputation\n    /// @return The total number of reputation\n    function totalSupply() public view returns (uint256) {\n        return totalSupplyAt(block.number);\n    }\n\n  ////////////////\n  // Query balance and totalSupply in History\n  ////////////////\n    /**\n    * @dev return the reputation amount of a given owner\n    * @param _owner an address of the owner which we want to get his reputation\n    */\n    function balanceOf(address _owner) public view returns (uint256 balance) {\n        return balanceOfAt(_owner, block.number);\n    }\n\n      /// @dev Queries the balance of `_owner` at a specific `_blockNumber`\n      /// @param _owner The address from which the balance will be retrieved\n      /// @param _blockNumber The block number when the balance is queried\n      /// @return The balance at `_blockNumber`\n    function balanceOfAt(address _owner, uint256 _blockNumber)\n    public view returns (uint256)\n    {\n        if ((balances[_owner].length == 0) || (balances[_owner][0].fromBlock > _blockNumber)) {\n            return 0;\n          // This will return the expected balance during normal situations\n        } else {\n            return getValueAt(balances[_owner], _blockNumber);\n        }\n    }\n\n      /// @notice Total amount of reputation at a specific `_blockNumber`.\n      /// @param _blockNumber The block number when the totalSupply is queried\n      /// @return The total amount of reputation at `_blockNumber`\n    function totalSupplyAt(uint256 _blockNumber) public view returns(uint256) {\n        if ((totalSupplyHistory.length == 0) || (totalSupplyHistory[0].fromBlock > _blockNumber)) {\n            return 0;\n          // This will return the expected totalSupply during normal situations\n        } else {\n            return getValueAt(totalSupplyHistory, _blockNumber);\n        }\n    }\n\n      /// @notice Generates `_amount` reputation that are assigned to `_owner`\n      /// @param _user The address that will be assigned the new reputation\n      /// @param _amount The quantity of reputation generated\n      /// @return True if the reputation are generated correctly\n    function mint(address _user, uint256 _amount) public onlyOwner returns (bool) {\n        uint256 curTotalSupply = totalSupply();\n        require(curTotalSupply + _amount >= curTotalSupply); // Check for overflow\n        uint256 previousBalanceTo = balanceOf(_user);\n        require(previousBalanceTo + _amount >= previousBalanceTo); // Check for overflow\n        updateValueAtNow(totalSupplyHistory, curTotalSupply + _amount);\n        updateValueAtNow(balances[_user], previousBalanceTo + _amount);\n        emit Mint(_user, _amount);\n        return true;\n    }\n\n      /// @notice Burns `_amount` reputation from `_owner`\n      /// @param _user The address that will lose the reputation\n      /// @param _amount The quantity of reputation to burn\n      /// @return True if the reputation are burned correctly\n    function burn(address _user, uint256 _amount) public onlyOwner returns (bool) {\n        uint256 curTotalSupply = totalSupply();\n        uint256 amountBurned = _amount;\n        uint256 previousBalanceFrom = balanceOf(_user);\n        if (previousBalanceFrom < amountBurned) {\n            amountBurned = previousBalanceFrom;\n        }\n        updateValueAtNow(totalSupplyHistory, curTotalSupply - amountBurned);\n        updateValueAtNow(balances[_user], previousBalanceFrom - amountBurned);\n        emit Burn(_user, amountBurned);\n        return true;\n    }\n\n  ////////////////\n  // Internal helper functions to query and set a value in a snapshot array\n  ////////////////\n\n      /// @dev `getValueAt` retrieves the number of reputation at a given block number\n      /// @param checkpoints The history of values being queried\n      /// @param _block The block number to retrieve the value at\n      /// @return The number of reputation being queried\n    function getValueAt(Checkpoint[] storage checkpoints, uint256 _block) internal view returns (uint256) {\n        if (checkpoints.length == 0) {\n            return 0;\n        }\n\n          // Shortcut for the actual value\n        if (_block >= checkpoints[checkpoints.length-1].fromBlock) {\n            return checkpoints[checkpoints.length-1].value;\n        }\n        if (_block < checkpoints[0].fromBlock) {\n            return 0;\n        }\n\n          // Binary search of the value in the array\n        uint256 min = 0;\n        uint256 max = checkpoints.length-1;\n        while (max > min) {\n            uint256 mid = (max + min + 1) / 2;\n            if (checkpoints[mid].fromBlock<=_block) {\n                min = mid;\n            } else {\n                max = mid-1;\n            }\n        }\n        return checkpoints[min].value;\n    }\n\n      /// @dev `updateValueAtNow` used to update the `balances` map and the\n      ///  `totalSupplyHistory`\n      /// @param checkpoints The history of data being updated\n      /// @param _value The new number of reputation\n    function updateValueAtNow(Checkpoint[] storage checkpoints, uint256 _value) internal {\n        require(uint128(_value) == _value); //check value is in the 128 bits bounderies\n        if ((checkpoints.length == 0) || (checkpoints[checkpoints.length - 1].fromBlock < block.number)) {\n            Checkpoint storage newCheckPoint = checkpoints[checkpoints.length++];\n            newCheckPoint.fromBlock = uint128(block.number);\n            newCheckPoint.value = uint128(_value);\n        } else {\n            Checkpoint storage oldCheckPoint = checkpoints[checkpoints.length-1];\n            oldCheckPoint.value = uint128(_value);\n        }\n    }\n}\n\n// File: openzeppelin-solidity/contracts/token/ERC20/IERC20.sol\n\npragma solidity ^0.5.0;\n\n/**\n * @title ERC20 interface\n * @dev see https://github.com/ethereum/EIPs/issues/20\n */\ninterface IERC20 {\n    function transfer(address to, uint256 value) external returns (bool);\n\n    function approve(address spender, uint256 value) external returns (bool);\n\n    function transferFrom(address from, address to, uint256 value) external returns (bool);\n\n    function totalSupply() external view returns (uint256);\n\n    function balanceOf(address who) external view returns (uint256);\n\n    function allowance(address owner, address spender) external view returns (uint256);\n\n    event Transfer(address indexed from, address indexed to, uint256 value);\n\n    event Approval(address indexed owner, address indexed spender, uint256 value);\n}\n\n// File: openzeppelin-solidity/contracts/math/SafeMath.sol\n\npragma solidity ^0.5.0;\n\n/**\n * @title SafeMath\n * @dev Unsigned math operations with safety checks that revert on error\n */\nlibrary SafeMath {\n    /**\n    * @dev Multiplies two unsigned integers, reverts on overflow.\n    */\n    function mul(uint256 a, uint256 b) internal pure returns (uint256) {\n        // Gas optimization: this is cheaper than requiring 'a' not being zero, but the\n        // benefit is lost if 'b' is also tested.\n        // See: https://github.com/OpenZeppelin/openzeppelin-solidity/pull/522\n        if (a == 0) {\n            return 0;\n        }\n\n        uint256 c = a * b;\n        require(c / a == b);\n\n        return c;\n    }\n\n    /**\n    * @dev Integer division of two unsigned integers truncating the quotient, reverts on division by zero.\n    */\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\n        // Solidity only automatically asserts when dividing by 0\n        require(b > 0);\n        uint256 c = a / b;\n        // assert(a == b * c + a % b); // There is no case in which this doesn't hold\n\n        return c;\n    }\n\n    /**\n    * @dev Subtracts two unsigned integers, reverts on overflow (i.e. if subtrahend is greater than minuend).\n    */\n    function sub(uint256 a, uint256 b) internal pure returns (uint256) {\n        require(b <= a);\n        uint256 c = a - b;\n\n        return c;\n    }\n\n    /**\n    * @dev Adds two unsigned integers, reverts on overflow.\n    */\n    function add(uint256 a, uint256 b) internal pure returns (uint256) {\n        uint256 c = a + b;\n        require(c >= a);\n\n        return c;\n    }\n\n    /**\n    * @dev Divides two unsigned integers and returns the remainder (unsigned integer modulo),\n    * reverts when dividing by zero.\n    */\n    function mod(uint256 a, uint256 b) internal pure returns (uint256) {\n        require(b != 0);\n        return a % b;\n    }\n}\n\n// File: openzeppelin-solidity/contracts/token/ERC20/ERC20.sol\n\npragma solidity ^0.5.0;\n\n\n\n/**\n * @title Standard ERC20 token\n *\n * @dev Implementation of the basic standard token.\n * https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md\n * Originally based on code by FirstBlood:\n * https://github.com/Firstbloodio/token/blob/master/smart_contract/FirstBloodToken.sol\n *\n * This implementation emits additional Approval events, allowing applications to reconstruct the allowance status for\n * all accounts just by listening to said events. Note that this isn't required by the specification, and other\n * compliant implementations may not do it.\n */\ncontract ERC20 is IERC20 {\n    using SafeMath for uint256;\n\n    mapping (address => uint256) private _balances;\n\n    mapping (address => mapping (address => uint256)) private _allowed;\n\n    uint256 private _totalSupply;\n\n    /**\n    * @dev Total number of tokens in existence\n    */\n    function totalSupply() public view returns (uint256) {\n        return _totalSupply;\n    }\n\n    /**\n    * @dev Gets the balance of the specified address.\n    * @param owner The address to query the balance of.\n    * @return An uint256 representing the amount owned by the passed address.\n    */\n    function balanceOf(address owner) public view returns (uint256) {\n        return _balances[owner];\n    }\n\n    /**\n     * @dev Function to check the amount of tokens that an owner allowed to a spender.\n     * @param owner address The address which owns the funds.\n     * @param spender address The address which will spend the funds.\n     * @return A uint256 specifying the amount of tokens still available for the spender.\n     */\n    function allowance(address owner, address spender) public view returns (uint256) {\n        return _allowed[owner][spender];\n    }\n\n    /**\n    * @dev Transfer token for a specified address\n    * @param to The address to transfer to.\n    * @param value The amount to be transferred.\n    */\n    function transfer(address to, uint256 value) public returns (bool) {\n        _transfer(msg.sender, to, value);\n        return true;\n    }\n\n    /**\n     * @dev Approve the passed address to spend the specified amount of tokens on behalf of msg.sender.\n     * Beware that changing an allowance with this method brings the risk that someone may use both the old\n     * and the new allowance by unfortunate transaction ordering. One possible solution to mitigate this\n     * race condition is to first reduce the spender's allowance to 0 and set the desired value afterwards:\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\n     * @param spender The address which will spend the funds.\n     * @param value The amount of tokens to be spent.\n     */\n    function approve(address spender, uint256 value) public returns (bool) {\n        require(spender != address(0));\n\n        _allowed[msg.sender][spender] = value;\n        emit Approval(msg.sender, spender, value);\n        return true;\n    }\n\n    /**\n     * @dev Transfer tokens from one address to another.\n     * Note that while this function emits an Approval event, this is not required as per the specification,\n     * and other compliant implementations may not emit the event.\n     * @param from address The address which you want to send tokens from\n     * @param to address The address which you want to transfer to\n     * @param value uint256 the amount of tokens to be transferred\n     */\n    function transferFrom(address from, address to, uint256 value) public returns (bool) {\n        _allowed[from][msg.sender] = _allowed[from][msg.sender].sub(value);\n        _transfer(from, to, value);\n        emit Approval(from, msg.sender, _allowed[from][msg.sender]);\n        return true;\n    }\n\n    /**\n     * @dev Increase the amount of tokens that an owner allowed to a spender.\n     * approve should be called when allowed_[_spender] == 0. To increment\n     * allowed value is better to use this function to avoid 2 calls (and wait until\n     * the first transaction is mined)\n     * From MonolithDAO Token.sol\n     * Emits an Approval event.\n     * @param spender The address which will spend the funds.\n     * @param addedValue The amount of tokens to increase the allowance by.\n     */\n    function increaseAllowance(address spender, uint256 addedValue) public returns (bool) {\n        require(spender != address(0));\n\n        _allowed[msg.sender][spender] = _allowed[msg.sender][spender].add(addedValue);\n        emit Approval(msg.sender, spender, _allowed[msg.sender][spender]);\n        return true;\n    }\n\n    /**\n     * @dev Decrease the amount of tokens that an owner allowed to a spender.\n     * approve should be called when allowed_[_spender] == 0. To decrement\n     * allowed value is better to use this function to avoid 2 calls (and wait until\n     * the first transaction is mined)\n     * From MonolithDAO Token.sol\n     * Emits an Approval event.\n     * @param spender The address which will spend the funds.\n     * @param subtractedValue The amount of tokens to decrease the allowance by.\n     */\n    function decreaseAllowance(address spender, uint256 subtractedValue) public returns (bool) {\n        require(spender != address(0));\n\n        _allowed[msg.sender][spender] = _allowed[msg.sender][spender].sub(subtractedValue);\n        emit Approval(msg.sender, spender, _allowed[msg.sender][spender]);\n        return true;\n    }\n\n    /**\n    * @dev Transfer token for a specified addresses\n    * @param from The address to transfer from.\n    * @param to The address to transfer to.\n    * @param value The amount to be transferred.\n    */\n    function _transfer(address from, address to, uint256 value) internal {\n        require(to != address(0));\n\n        _balances[from] = _balances[from].sub(value);\n        _balances[to] = _balances[to].add(value);\n        emit Transfer(from, to, value);\n    }\n\n    /**\n     * @dev Internal function that mints an amount of the token and assigns it to\n     * an account. This encapsulates the modification of balances such that the\n     * proper events are emitted.\n     * @param account The account that will receive the created tokens.\n     * @param value The amount that will be created.\n     */\n    function _mint(address account, uint256 value) internal {\n        require(account != address(0));\n\n        _totalSupply = _totalSupply.add(value);\n        _balances[account] = _balances[account].add(value);\n        emit Transfer(address(0), account, value);\n    }\n\n    /**\n     * @dev Internal function that burns an amount of the token of a given\n     * account.\n     * @param account The account whose tokens will be burnt.\n     * @param value The amount that will be burnt.\n     */\n    function _burn(address account, uint256 value) internal {\n        require(account != address(0));\n\n        _totalSupply = _totalSupply.sub(value);\n        _balances[account] = _balances[account].sub(value);\n        emit Transfer(account, address(0), value);\n    }\n\n    /**\n     * @dev Internal function that burns an amount of the token of a given\n     * account, deducting from the sender's allowance for said account. Uses the\n     * internal burn function.\n     * Emits an Approval event (reflecting the reduced allowance).\n     * @param account The account whose tokens will be burnt.\n     * @param value The amount that will be burnt.\n     */\n    function _burnFrom(address account, uint256 value) internal {\n        _allowed[account][msg.sender] = _allowed[account][msg.sender].sub(value);\n        _burn(account, value);\n        emit Approval(account, msg.sender, _allowed[account][msg.sender]);\n    }\n}\n\n// File: openzeppelin-solidity/contracts/token/ERC20/ERC20Burnable.sol\n\npragma solidity ^0.5.0;\n\n\n/**\n * @title Burnable Token\n * @dev Token that can be irreversibly burned (destroyed).\n */\ncontract ERC20Burnable is ERC20 {\n    /**\n     * @dev Burns a specific amount of tokens.\n     * @param value The amount of token to be burned.\n     */\n    function burn(uint256 value) public {\n        _burn(msg.sender, value);\n    }\n\n    /**\n     * @dev Burns a specific amount of tokens from the target address and decrements allowance\n     * @param from address The address which you want to send tokens from\n     * @param value uint256 The amount of token to be burned\n     */\n    function burnFrom(address from, uint256 value) public {\n        _burnFrom(from, value);\n    }\n}\n\n// File: contracts/controller/DAOToken.sol\n\npragma solidity ^0.5.4;\n\n\n\n\n\n/**\n * @title DAOToken, base on zeppelin contract.\n * @dev ERC20 compatible token. It is a mintable, burnable token.\n */\n\ncontract DAOToken is ERC20, ERC20Burnable, Ownable {\n\n    string public name;\n    string public symbol;\n    // solhint-disable-next-line const-name-snakecase\n    uint8 public constant decimals = 18;\n    uint256 public cap;\n\n    /**\n    * @dev Constructor\n    * @param _name - token name\n    * @param _symbol - token symbol\n    * @param _cap - token cap - 0 value means no cap\n    */\n    constructor(string memory _name, string memory _symbol, uint256 _cap)\n    public {\n        name = _name;\n        symbol = _symbol;\n        cap = _cap;\n    }\n\n    /**\n     * @dev Function to mint tokens\n     * @param _to The address that will receive the minted tokens.\n     * @param _amount The amount of tokens to mint.\n     */\n    function mint(address _to, uint256 _amount) public onlyOwner returns (bool) {\n        if (cap > 0)\n            require(totalSupply().add(_amount) <= cap);\n        _mint(_to, _amount);\n        return true;\n    }\n}\n\n// File: openzeppelin-solidity/contracts/utils/Address.sol\n\npragma solidity ^0.5.0;\n\n/**\n * Utility library of inline functions on addresses\n */\nlibrary Address {\n    /**\n     * Returns whether the target address is a contract\n     * @dev This function will return false if invoked during the constructor of a contract,\n     * as the code is not actually created until after the constructor finishes.\n     * @param account address of the account to check\n     * @return whether the target address is a contract\n     */\n    function isContract(address account) internal view returns (bool) {\n        uint256 size;\n        // XXX Currently there is no better way to check if there is a contract in an address\n        // than to check the size of the code at that address.\n        // See https://ethereum.stackexchange.com/a/14016/36603\n        // for more details about how this works.\n        // TODO Check this again before the Serenity release, because all addresses will be\n        // contracts then.\n        // solhint-disable-next-line no-inline-assembly\n        assembly { size := extcodesize(account) }\n        return size > 0;\n    }\n}\n\n// File: contracts/libs/SafeERC20.sol\n\n/*\n\nSafeERC20 by daostack.\nThe code is based on a fix by SECBIT Team.\n\nUSE WITH CAUTION & NO WARRANTY\n\nREFERENCE & RELATED READING\n- https://github.com/ethereum/solidity/issues/4116\n- https://medium.com/@chris_77367/explaining-unexpected-reverts-starting-with-solidity-0-4-22-3ada6e82308c\n- https://medium.com/coinmonks/missing-return-value-bug-at-least-130-tokens-affected-d67bf08521ca\n- https://gist.github.com/BrendanChou/88a2eeb80947ff00bcf58ffdafeaeb61\n\n*/\npragma solidity ^0.5.4;\n\n\n\nlibrary SafeERC20 {\n    using Address for address;\n\n    bytes4 constant private TRANSFER_SELECTOR = bytes4(keccak256(bytes(\"transfer(address,uint256)\")));\n    bytes4 constant private TRANSFERFROM_SELECTOR = bytes4(keccak256(bytes(\"transferFrom(address,address,uint256)\")));\n    bytes4 constant private APPROVE_SELECTOR = bytes4(keccak256(bytes(\"approve(address,uint256)\")));\n\n    function safeTransfer(address _erc20Addr, address _to, uint256 _value) internal {\n\n        // Must be a contract addr first!\n        require(_erc20Addr.isContract());\n\n        (bool success, bytes memory returnValue) =\n        // solhint-disable-next-line avoid-low-level-calls\n        _erc20Addr.call(abi.encodeWithSelector(TRANSFER_SELECTOR, _to, _value));\n        // call return false when something wrong\n        require(success);\n        //check return value\n        require(returnValue.length == 0 || (returnValue.length == 32 && (returnValue[31] != 0)));\n    }\n\n    function safeTransferFrom(address _erc20Addr, address _from, address _to, uint256 _value) internal {\n\n        // Must be a contract addr first!\n        require(_erc20Addr.isContract());\n\n        (bool success, bytes memory returnValue) =\n        // solhint-disable-next-line avoid-low-level-calls\n        _erc20Addr.call(abi.encodeWithSelector(TRANSFERFROM_SELECTOR, _from, _to, _value));\n        // call return false when something wrong\n        require(success);\n        //check return value\n        require(returnValue.length == 0 || (returnValue.length == 32 && (returnValue[31] != 0)));\n    }\n\n    function safeApprove(address _erc20Addr, address _spender, uint256 _value) internal {\n\n        // Must be a contract addr first!\n        require(_erc20Addr.isContract());\n\n        // safeApprove should only be called when setting an initial allowance,\n        // or when resetting it to zero.\n        require((_value == 0) || (IERC20(_erc20Addr).allowance(address(this), _spender) == 0));\n\n        (bool success, bytes memory returnValue) =\n        // solhint-disable-next-line avoid-low-level-calls\n        _erc20Addr.call(abi.encodeWithSelector(APPROVE_SELECTOR, _spender, _value));\n        // call return false when something wrong\n        require(success);\n        //check return value\n        require(returnValue.length == 0 || (returnValue.length == 32 && (returnValue[31] != 0)));\n    }\n}\n\n// File: contracts/controller/Avatar.sol\n\npragma solidity ^0.5.4;\n\n\n\n\n\n\n\n/**\n * @title An Avatar holds tokens, reputation and ether for a controller\n */\ncontract Avatar is Ownable {\n    using SafeERC20 for address;\n\n    string public orgName;\n    DAOToken public nativeToken;\n    Reputation public nativeReputation;\n\n    event GenericCall(address indexed _contract, bytes _data, uint _value, bool _success);\n    event SendEther(uint256 _amountInWei, address indexed _to);\n    event ExternalTokenTransfer(address indexed _externalToken, address indexed _to, uint256 _value);\n    event ExternalTokenTransferFrom(address indexed _externalToken, address _from, address _to, uint256 _value);\n    event ExternalTokenApproval(address indexed _externalToken, address _spender, uint256 _value);\n    event ReceiveEther(address indexed _sender, uint256 _value);\n    event MetaData(string _metaData);\n\n    /**\n    * @dev the constructor takes organization name, native token and reputation system\n    and creates an avatar for a controller\n    */\n    constructor(string memory _orgName, DAOToken _nativeToken, Reputation _nativeReputation) public {\n        orgName = _orgName;\n        nativeToken = _nativeToken;\n        nativeReputation = _nativeReputation;\n    }\n\n    /**\n    * @dev enables an avatar to receive ethers\n    */\n    function() external payable {\n        emit ReceiveEther(msg.sender, msg.value);\n    }\n\n    /**\n    * @dev perform a generic call to an arbitrary contract\n    * @param _contract  the contract's address to call\n    * @param _data ABI-encoded contract call to call `_contract` address.\n    * @param _value value (ETH) to transfer with the transaction\n    * @return bool    success or fail\n    *         bytes - the return bytes of the called contract's function.\n    */\n    function genericCall(address _contract, bytes memory _data, uint256 _value)\n    public\n    onlyOwner\n    returns(bool success, bytes memory returnValue) {\n      // solhint-disable-next-line avoid-call-value\n        (success, returnValue) = _contract.call.value(_value)(_data);\n        emit GenericCall(_contract, _data, _value, success);\n    }\n\n    /**\n    * @dev send ethers from the avatar's wallet\n    * @param _amountInWei amount to send in Wei units\n    * @param _to send the ethers to this address\n    * @return bool which represents success\n    */\n    function sendEther(uint256 _amountInWei, address payable _to) public onlyOwner returns(bool) {\n        _to.transfer(_amountInWei);\n        emit SendEther(_amountInWei, _to);\n        return true;\n    }\n\n    /**\n    * @dev external token transfer\n    * @param _externalToken the token contract\n    * @param _to the destination address\n    * @param _value the amount of tokens to transfer\n    * @return bool which represents success\n    */\n    function externalTokenTransfer(IERC20 _externalToken, address _to, uint256 _value)\n    public onlyOwner returns(bool)\n    {\n        address(_externalToken).safeTransfer(_to, _value);\n        emit ExternalTokenTransfer(address(_externalToken), _to, _value);\n        return true;\n    }\n\n    /**\n    * @dev external token transfer from a specific account\n    * @param _externalToken the token contract\n    * @param _from the account to spend token from\n    * @param _to the destination address\n    * @param _value the amount of tokens to transfer\n    * @return bool which represents success\n    */\n    function externalTokenTransferFrom(\n        IERC20 _externalToken,\n        address _from,\n        address _to,\n        uint256 _value\n    )\n    public onlyOwner returns(bool)\n    {\n        address(_externalToken).safeTransferFrom(_from, _to, _value);\n        emit ExternalTokenTransferFrom(address(_externalToken), _from, _to, _value);\n        return true;\n    }\n\n    /**\n    * @dev externalTokenApproval approve the spender address to spend a specified amount of tokens\n    *      on behalf of msg.sender.\n    * @param _externalToken the address of the Token Contract\n    * @param _spender address\n    * @param _value the amount of ether (in Wei) which the approval is referring to.\n    * @return bool which represents a success\n    */\n    function externalTokenApproval(IERC20 _externalToken, address _spender, uint256 _value)\n    public onlyOwner returns(bool)\n    {\n        address(_externalToken).safeApprove(_spender, _value);\n        emit ExternalTokenApproval(address(_externalToken), _spender, _value);\n        return true;\n    }\n\n    /**\n    * @dev metaData emits an event with a string, should contain the hash of some meta data.\n    * @param _metaData a string representing a hash of the meta data\n    * @return bool which represents a success\n    */\n    function metaData(string memory _metaData) public onlyOwner returns(bool) {\n        emit MetaData(_metaData);\n        return true;\n    }\n\n\n}\n\n// File: contracts/universalSchemes/UniversalSchemeInterface.sol\n\npragma solidity ^0.5.4;\n\n\ncontract UniversalSchemeInterface {\n\n    function getParametersFromController(Avatar _avatar) internal view returns(bytes32);\n    \n}\n\n// File: contracts/globalConstraints/GlobalConstraintInterface.sol\n\npragma solidity ^0.5.4;\n\n\ncontract GlobalConstraintInterface {\n\n    enum CallPhase { Pre, Post, PreAndPost }\n\n    function pre( address _scheme, bytes32 _params, bytes32 _method ) public returns(bool);\n    function post( address _scheme, bytes32 _params, bytes32 _method ) public returns(bool);\n    /**\n     * @dev when return if this globalConstraints is pre, post or both.\n     * @return CallPhase enum indication  Pre, Post or PreAndPost.\n     */\n    function when() public returns(CallPhase);\n}\n\n// File: contracts/controller/ControllerInterface.sol\n\npragma solidity ^0.5.4;\n\n\n\n/**\n * @title Controller contract\n * @dev A controller controls the organizations tokens ,reputation and avatar.\n * It is subject to a set of schemes and constraints that determine its behavior.\n * Each scheme has it own parameters and operation permissions.\n */\ninterface ControllerInterface {\n\n    /**\n     * @dev Mint `_amount` of reputation that are assigned to `_to` .\n     * @param  _amount amount of reputation to mint\n     * @param _to beneficiary address\n     * @return bool which represents a success\n    */\n    function mintReputation(uint256 _amount, address _to, address _avatar)\n    external\n    returns(bool);\n\n    /**\n     * @dev Burns `_amount` of reputation from `_from`\n     * @param _amount amount of reputation to burn\n     * @param _from The address that will lose the reputation\n     * @return bool which represents a success\n     */\n    function burnReputation(uint256 _amount, address _from, address _avatar)\n    external\n    returns(bool);\n\n    /**\n     * @dev mint tokens .\n     * @param  _amount amount of token to mint\n     * @param _beneficiary beneficiary address\n     * @param _avatar address\n     * @return bool which represents a success\n     */\n    function mintTokens(uint256 _amount, address _beneficiary, address _avatar)\n    external\n    returns(bool);\n\n  /**\n   * @dev register or update a scheme\n   * @param _scheme the address of the scheme\n   * @param _paramsHash a hashed configuration of the usage of the scheme\n   * @param _permissions the permissions the new scheme will have\n   * @param _avatar address\n   * @return bool which represents a success\n   */\n    function registerScheme(address _scheme, bytes32 _paramsHash, bytes4 _permissions, address _avatar)\n    external\n    returns(bool);\n\n    /**\n     * @dev unregister a scheme\n     * @param _avatar address\n     * @param _scheme the address of the scheme\n     * @return bool which represents a success\n     */\n    function unregisterScheme(address _scheme, address _avatar)\n    external\n    returns(bool);\n\n    /**\n     * @dev unregister the caller's scheme\n     * @param _avatar address\n     * @return bool which represents a success\n     */\n    function unregisterSelf(address _avatar) external returns(bool);\n\n    /**\n     * @dev add or update Global Constraint\n     * @param _globalConstraint the address of the global constraint to be added.\n     * @param _params the constraint parameters hash.\n     * @param _avatar the avatar of the organization\n     * @return bool which represents a success\n     */\n    function addGlobalConstraint(address _globalConstraint, bytes32 _params, address _avatar)\n    external returns(bool);\n\n    /**\n     * @dev remove Global Constraint\n     * @param _globalConstraint the address of the global constraint to be remove.\n     * @param _avatar the organization avatar.\n     * @return bool which represents a success\n     */\n    function removeGlobalConstraint (address _globalConstraint, address _avatar)\n    external  returns(bool);\n\n  /**\n    * @dev upgrade the Controller\n    *      The function will trigger an event 'UpgradeController'.\n    * @param  _newController the address of the new controller.\n    * @param _avatar address\n    * @return bool which represents a success\n    */\n    function upgradeController(address _newController, Avatar _avatar)\n    external returns(bool);\n\n    /**\n    * @dev perform a generic call to an arbitrary contract\n    * @param _contract  the contract's address to call\n    * @param _data ABI-encoded contract call to call `_contract` address.\n    * @param _avatar the controller's avatar address\n    * @param _value value (ETH) to transfer with the transaction\n    * @return bool -success\n    *         bytes  - the return value of the called _contract's function.\n    */\n    function genericCall(address _contract, bytes calldata _data, Avatar _avatar, uint256 _value)\n    external\n    returns(bool, bytes memory);\n\n  /**\n   * @dev send some ether\n   * @param _amountInWei the amount of ether (in Wei) to send\n   * @param _to address of the beneficiary\n   * @param _avatar address\n   * @return bool which represents a success\n   */\n    function sendEther(uint256 _amountInWei, address payable _to, Avatar _avatar)\n    external returns(bool);\n\n    /**\n    * @dev send some amount of arbitrary ERC20 Tokens\n    * @param _externalToken the address of the Token Contract\n    * @param _to address of the beneficiary\n    * @param _value the amount of ether (in Wei) to send\n    * @param _avatar address\n    * @return bool which represents a success\n    */\n    function externalTokenTransfer(IERC20 _externalToken, address _to, uint256 _value, Avatar _avatar)\n    external\n    returns(bool);\n\n    /**\n    * @dev transfer token \"from\" address \"to\" address\n    *      One must to approve the amount of tokens which can be spend from the\n    *      \"from\" account.This can be done using externalTokenApprove.\n    * @param _externalToken the address of the Token Contract\n    * @param _from address of the account to send from\n    * @param _to address of the beneficiary\n    * @param _value the amount of ether (in Wei) to send\n    * @param _avatar address\n    * @return bool which represents a success\n    */\n    function externalTokenTransferFrom(\n    IERC20 _externalToken,\n    address _from,\n    address _to,\n    uint256 _value,\n    Avatar _avatar)\n    external\n    returns(bool);\n\n    /**\n    * @dev externalTokenApproval approve the spender address to spend a specified amount of tokens\n    *      on behalf of msg.sender.\n    * @param _externalToken the address of the Token Contract\n    * @param _spender address\n    * @param _value the amount of ether (in Wei) which the approval is referring to.\n    * @return bool which represents a success\n    */\n    function externalTokenApproval(IERC20 _externalToken, address _spender, uint256 _value, Avatar _avatar)\n    external\n    returns(bool);\n\n    /**\n    * @dev metaData emits an event with a string, should contain the hash of some meta data.\n    * @param _metaData a string representing a hash of the meta data\n    * @param _avatar Avatar\n    * @return bool which represents a success\n    */\n    function metaData(string calldata _metaData, Avatar _avatar) external returns(bool);\n\n    /**\n     * @dev getNativeReputation\n     * @param _avatar the organization avatar.\n     * @return organization native reputation\n     */\n    function getNativeReputation(address _avatar)\n    external\n    view\n    returns(address);\n\n    function isSchemeRegistered( address _scheme, address _avatar) external view returns(bool);\n\n    function getSchemeParameters(address _scheme, address _avatar) external view returns(bytes32);\n\n    function getGlobalConstraintParameters(address _globalConstraint, address _avatar) external view returns(bytes32);\n\n    function getSchemePermissions(address _scheme, address _avatar) external view returns(bytes4);\n\n    /**\n     * @dev globalConstraintsCount return the global constraint pre and post count\n     * @return uint256 globalConstraintsPre count.\n     * @return uint256 globalConstraintsPost count.\n     */\n    function globalConstraintsCount(address _avatar) external view returns(uint, uint);\n\n    function isGlobalConstraintRegistered(address _globalConstraint, address _avatar) external view returns(bool);\n}\n\n// File: contracts/universalSchemes/UniversalScheme.sol\n\npragma solidity ^0.5.4;\n\n\n\n\n\ncontract UniversalScheme is UniversalSchemeInterface {\n    /**\n    *  @dev get the parameters for the current scheme from the controller\n    */\n    function getParametersFromController(Avatar _avatar) internal view returns(bytes32) {\n        require(ControllerInterface(_avatar.owner()).isSchemeRegistered(address(this), address(_avatar)),\n        \"scheme is not registered\");\n        return ControllerInterface(_avatar.owner()).getSchemeParameters(address(this), address(_avatar));\n    }\n}\n\n// File: contracts/controller/UController.sol\n\npragma solidity ^0.5.4;\n\n\n\n\n\n/**\n * @title Universal Controller contract\n * @dev A universal controller hold organizations and controls their tokens ,reputations\n *       and avatar.\n * It is subject to a set of schemes and constraints that determine its behavior.\n * Each scheme has it own parameters and operation permissions.\n */\ncontract UController is ControllerInterface {\n\n    struct Scheme {\n        bytes32 paramsHash;  // a hash \"configuration\" of the scheme\n        bytes4  permissions; // A bitwise flags of permissions,\n                            // All 0: Not registered,\n                            // 1st bit: Flag if the scheme is registered,\n                            // 2nd bit: Scheme can register other schemes\n                            // 3th bit: Scheme can add/remove global constraints\n                            // 4rd bit: Scheme can upgrade the controller\n                            // 5th bit: Scheme can call delegatecall\n    }\n\n    struct GlobalConstraint {\n        address gcAddress;\n        bytes32 params;\n    }\n\n    struct GlobalConstraintRegister {\n        bool isRegistered; //is registered\n        uint256 index;    //index at globalConstraints\n    }\n\n    struct Organization {\n        DAOToken                  nativeToken;\n        Reputation                nativeReputation;\n        mapping(address=>Scheme)  schemes;\n      // globalConstraintsPre that determine pre- conditions for all actions on the controller\n        GlobalConstraint[] globalConstraintsPre;\n        // globalConstraintsPost that determine post-conditions for all actions on the controller\n        GlobalConstraint[] globalConstraintsPost;\n      // globalConstraintsRegisterPre indicate if a globalConstraints is registered as a Pre global constraint.\n        mapping(address=>GlobalConstraintRegister) globalConstraintsRegisterPre;\n      // globalConstraintsRegisterPost indicate if a globalConstraints is registered as a Post global constraint.\n        mapping(address=>GlobalConstraintRegister) globalConstraintsRegisterPost;\n    }\n\n    //mapping between organization's avatar address to Organization\n    mapping(address=>Organization) public organizations;\n    // newController will point to the new controller after the present controller is upgraded\n    //  address external newController;\n    mapping(address=>address) public newControllers;//mapping between avatar address and newController address\n    //mapping for all reputation system and tokens addresses registered.\n    mapping(address=>bool) public actors;\n\n    event MintReputation (address indexed _sender, address indexed _to, uint256 _amount, address indexed _avatar);\n    event BurnReputation (address indexed _sender, address indexed _from, uint256 _amount, address indexed _avatar);\n    event MintTokens (address indexed _sender, address indexed _beneficiary, uint256 _amount, address indexed _avatar);\n    event RegisterScheme (address indexed _sender, address indexed _scheme, address indexed _avatar);\n    event UnregisterScheme (address indexed _sender, address indexed _scheme, address indexed _avatar);\n    event UpgradeController(address indexed _oldController, address _newController, address _avatar);\n\n    event AddGlobalConstraint(\n        address indexed _globalConstraint,\n        bytes32 _params,\n        GlobalConstraintInterface.CallPhase _when,\n        address indexed _avatar\n    );\n\n    event RemoveGlobalConstraint(\n        address indexed _globalConstraint,\n        uint256 _index,\n        bool _isPre,\n        address indexed _avatar\n    );\n\n   /**\n    * @dev newOrganization set up a new organization with default daoCreator.\n    * @param _avatar the organization avatar\n    */\n    function newOrganization(\n        Avatar _avatar\n    ) external\n    {\n        require(!actors[address(_avatar)]);\n        actors[address(_avatar)] = true;\n        require(_avatar.owner() == address(this));\n        DAOToken nativeToken = _avatar.nativeToken();\n        Reputation nativeReputation = _avatar.nativeReputation();\n        require(nativeToken.owner() == address(this));\n        require(nativeReputation.owner() == address(this));\n        //To guaranty uniqueness for the reputation systems.\n        require(!actors[address(nativeReputation)]);\n        actors[address(nativeReputation)] = true;\n        //To guaranty uniqueness for the nativeToken.\n        require(!actors[address(nativeToken)]);\n        actors[address(nativeToken)] = true;\n        organizations[address(_avatar)].nativeToken = nativeToken;\n        organizations[address(_avatar)].nativeReputation = nativeReputation;\n        organizations[address(_avatar)].schemes[msg.sender] =\n        Scheme({paramsHash: bytes32(0), permissions: bytes4(0x0000001f)});\n        emit RegisterScheme(msg.sender, msg.sender, address(_avatar));\n    }\n\n  // Modifiers:\n    modifier onlyRegisteredScheme(address avatar) {\n        require(organizations[avatar].schemes[msg.sender].permissions&bytes4(0x00000001) == bytes4(0x00000001));\n        _;\n    }\n\n    modifier onlyRegisteringSchemes(address avatar) {\n        require(organizations[avatar].schemes[msg.sender].permissions&bytes4(0x00000002) == bytes4(0x00000002));\n        _;\n    }\n\n    modifier onlyGlobalConstraintsScheme(address avatar) {\n        require(organizations[avatar].schemes[msg.sender].permissions&bytes4(0x00000004) == bytes4(0x00000004));\n        _;\n    }\n\n    modifier onlyUpgradingScheme(address _avatar) {\n        require(organizations[_avatar].schemes[msg.sender].permissions&bytes4(0x00000008) == bytes4(0x00000008));\n        _;\n    }\n\n    modifier onlyGenericCallScheme(address _avatar) {\n        require(organizations[_avatar].schemes[msg.sender].permissions&bytes4(0x00000010) == bytes4(0x00000010));\n        _;\n    }\n\n    modifier onlyMetaDataScheme(address _avatar) {\n        require(organizations[_avatar].schemes[msg.sender].permissions&bytes4(0x00000010) == bytes4(0x00000010));\n        _;\n    }\n\n    modifier onlySubjectToConstraint(bytes32 func, address _avatar) {\n        uint256 idx;\n        GlobalConstraint[] memory globalConstraintsPre = organizations[_avatar].globalConstraintsPre;\n        GlobalConstraint[] memory globalConstraintsPost = organizations[_avatar].globalConstraintsPost;\n        for (idx = 0; idx < globalConstraintsPre.length; idx++) {\n            require(\n            (GlobalConstraintInterface(globalConstraintsPre[idx].gcAddress))\n            .pre(msg.sender, globalConstraintsPre[idx].params, func));\n        }\n        _;\n        for (idx = 0; idx < globalConstraintsPost.length; idx++) {\n            require(\n            (GlobalConstraintInterface(globalConstraintsPost[idx].gcAddress))\n            .post(msg.sender, globalConstraintsPost[idx].params, func));\n        }\n    }\n\n    /**\n     * @dev Mint `_amount` of reputation that are assigned to `_to` .\n     * @param  _amount amount of reputation to mint\n     * @param _to beneficiary address\n     * @param _avatar the address of the organization's avatar\n     * @return bool which represents a success\n     */\n    function mintReputation(uint256 _amount, address _to, address _avatar)\n    external\n    onlyRegisteredScheme(_avatar)\n    onlySubjectToConstraint(\"mintReputation\", _avatar)\n    returns(bool)\n    {\n        emit MintReputation(msg.sender, _to, _amount, _avatar);\n        return organizations[_avatar].nativeReputation.mint(_to, _amount);\n    }\n\n    /**\n     * @dev Burns `_amount` of reputation from `_from`\n     * @param _amount amount of reputation to burn\n     * @param _from The address that will lose the reputation\n     * @return bool which represents a success\n     */\n    function burnReputation(uint256 _amount, address _from, address _avatar)\n    external\n    onlyRegisteredScheme(_avatar)\n    onlySubjectToConstraint(\"burnReputation\", _avatar)\n    returns(bool)\n    {\n        emit BurnReputation(msg.sender, _from, _amount, _avatar);\n        return organizations[_avatar].nativeReputation.burn(_from, _amount);\n    }\n\n    /**\n     * @dev mint tokens .\n     * @param  _amount amount of token to mint\n     * @param _beneficiary beneficiary address\n     * @param _avatar the organization avatar.\n     * @return bool which represents a success\n     */\n    function mintTokens(uint256 _amount, address _beneficiary, address _avatar)\n    external\n    onlyRegisteredScheme(_avatar)\n    onlySubjectToConstraint(\"mintTokens\", _avatar)\n    returns(bool)\n    {\n        emit MintTokens(msg.sender, _beneficiary, _amount, _avatar);\n        return organizations[_avatar].nativeToken.mint(_beneficiary, _amount);\n    }\n\n  /**\n   * @dev register or update a scheme\n   * @param _scheme the address of the scheme\n   * @param _paramsHash a hashed configuration of the usage of the scheme\n   * @param _permissions the permissions the new scheme will have\n   * @param _avatar the organization avatar.\n   * @return bool which represents a success\n   */\n    function registerScheme(address _scheme, bytes32 _paramsHash, bytes4 _permissions, address _avatar)\n    external\n    onlyRegisteringSchemes(_avatar)\n    onlySubjectToConstraint(\"registerScheme\", _avatar)\n    returns(bool)\n    {\n        bytes4 schemePermission = organizations[_avatar].schemes[_scheme].permissions;\n        bytes4 senderPermission = organizations[_avatar].schemes[msg.sender].permissions;\n    // Check scheme has at least the permissions it is changing, and at least the current permissions:\n    // Implementation is a bit messy. One must recall logic-circuits ^^\n\n    // produces non-zero if sender does not have all of the perms that are changing between old and new\n        require(bytes4(0x0000001f)&(_permissions^schemePermission)&(~senderPermission) == bytes4(0));\n\n    // produces non-zero if sender does not have all of the perms in the old scheme\n        require(bytes4(0x0000001f)&(schemePermission&(~senderPermission)) == bytes4(0));\n\n    // Add or change the scheme:\n        organizations[_avatar].schemes[_scheme] =\n        Scheme({paramsHash:_paramsHash, permissions:_permissions|bytes4(0x00000001)});\n        emit RegisterScheme(msg.sender, _scheme, _avatar);\n        return true;\n    }\n\n    /**\n     * @dev unregister a scheme\n     * @param _scheme the address of the scheme\n     * @param _avatar the organization avatar.\n     * @return bool which represents a success\n     */\n    function unregisterScheme(address _scheme, address _avatar)\n    external\n    onlyRegisteringSchemes(_avatar)\n    onlySubjectToConstraint(\"unregisterScheme\", _avatar)\n    returns(bool)\n    {\n        bytes4 schemePermission = organizations[_avatar].schemes[_scheme].permissions;\n    //check if the scheme is registered\n        if (schemePermission&bytes4(0x00000001) == bytes4(0)) {\n            return false;\n        }\n    // Check the unregistering scheme has enough permissions:\n        require(\n        bytes4(0x0000001f)&(schemePermission&(~organizations[_avatar].schemes[msg.sender].permissions)) == bytes4(0));\n\n    // Unregister:\n        emit UnregisterScheme(msg.sender, _scheme, _avatar);\n        delete organizations[_avatar].schemes[_scheme];\n        return true;\n    }\n\n    /**\n     * @dev unregister the caller's scheme\n     * @param _avatar the organization avatar.\n     * @return bool which represents a success\n     */\n    function unregisterSelf(address _avatar) external returns(bool) {\n        if (_isSchemeRegistered(msg.sender, _avatar) == false) {\n            return false;\n        }\n        delete organizations[_avatar].schemes[msg.sender];\n        emit UnregisterScheme(msg.sender, msg.sender, _avatar);\n        return true;\n    }\n\n    /**\n     * @dev add or update Global Constraint\n     * @param _globalConstraint the address of the global constraint to be added.\n     * @param _params the constraint parameters hash.\n     * @param _avatar the avatar of the organization\n     * @return bool which represents a success\n     */\n    function addGlobalConstraint(address _globalConstraint, bytes32 _params, address _avatar)\n    external onlyGlobalConstraintsScheme(_avatar) returns(bool)\n    {\n        Organization storage organization = organizations[_avatar];\n        GlobalConstraintInterface.CallPhase when = GlobalConstraintInterface(_globalConstraint).when();\n        if ((when == GlobalConstraintInterface.CallPhase.Pre)||\n            (when == GlobalConstraintInterface.CallPhase.PreAndPost)) {\n            if (!organization.globalConstraintsRegisterPre[_globalConstraint].isRegistered) {\n                organization.globalConstraintsPre.push(GlobalConstraint(_globalConstraint, _params));\n                organization.globalConstraintsRegisterPre[_globalConstraint] =\n                GlobalConstraintRegister(true, organization.globalConstraintsPre.length-1);\n            }else {\n                organization\n                .globalConstraintsPre[organization.globalConstraintsRegisterPre[_globalConstraint].index]\n                .params = _params;\n            }\n        }\n\n        if ((when == GlobalConstraintInterface.CallPhase.Post)||\n            (when == GlobalConstraintInterface.CallPhase.PreAndPost)) {\n            if (!organization.globalConstraintsRegisterPost[_globalConstraint].isRegistered) {\n                organization.globalConstraintsPost.push(GlobalConstraint(_globalConstraint, _params));\n                organization.globalConstraintsRegisterPost[_globalConstraint] =\n                GlobalConstraintRegister(true, organization.globalConstraintsPost.length-1);\n            } else {\n                organization\n                .globalConstraintsPost[organization.globalConstraintsRegisterPost[_globalConstraint].index]\n                .params = _params;\n            }\n        }\n        emit AddGlobalConstraint(_globalConstraint, _params, when, _avatar);\n        return true;\n    }\n\n    /**\n     * @dev remove Global Constraint\n     * @param _globalConstraint the address of the global constraint to be remove.\n     * @param _avatar the organization avatar.\n     * @return bool which represents a success\n     */\n    function removeGlobalConstraint (address _globalConstraint, address _avatar)\n    external onlyGlobalConstraintsScheme(_avatar) returns(bool)\n    {\n        GlobalConstraintInterface.CallPhase when = GlobalConstraintInterface(_globalConstraint).when();\n        if ((when == GlobalConstraintInterface.CallPhase.Pre)||\n            (when == GlobalConstraintInterface.CallPhase.PreAndPost)) {\n            removeGlobalConstraintPre(_globalConstraint, _avatar);\n        }\n        if ((when == GlobalConstraintInterface.CallPhase.Post)||\n            (when == GlobalConstraintInterface.CallPhase.PreAndPost)) {\n            removeGlobalConstraintPost(_globalConstraint, _avatar);\n        }\n        return true;\n    }\n\n  /**\n    * @dev upgrade the Controller\n    *      The function will trigger an event 'UpgradeController'.\n    * @param  _newController the address of the new controller.\n    * @param _avatar the organization avatar.\n    * @return bool which represents a success\n    */\n    function upgradeController(address _newController, Avatar _avatar)\n    external onlyUpgradingScheme(address(_avatar)) returns(bool)\n    {\n        require(newControllers[address(_avatar)] == address(0));   // so the upgrade could be done once for a contract.\n        require(_newController != address(0));\n        newControllers[address(_avatar)] = _newController;\n        _avatar.transferOwnership(_newController);\n        require(_avatar.owner() == _newController);\n        if (organizations[address(_avatar)].nativeToken.owner() == address(this)) {\n            organizations[address(_avatar)].nativeToken.transferOwnership(_newController);\n            require(organizations[address(_avatar)].nativeToken.owner() == _newController);\n        }\n        if (organizations[address(_avatar)].nativeReputation.owner() == address(this)) {\n            organizations[address(_avatar)].nativeReputation.transferOwnership(_newController);\n            require(organizations[address(_avatar)].nativeReputation.owner() == _newController);\n        }\n        emit UpgradeController(address(this), _newController, address(_avatar));\n        return true;\n    }\n\n    /**\n    * @dev perform a generic call to an arbitrary contract\n    * @param _contract  the contract's address to call\n    * @param _data ABI-encoded contract call to call `_contract` address.\n    * @param _avatar the controller's avatar address\n    * @param _value value (ETH) to transfer with the transaction\n    * @return bool -success\n    *         bytes  - the return value of the called _contract's function.\n    */\n    function genericCall(address _contract, bytes calldata _data, Avatar _avatar, uint256 _value)\n    external\n    onlyGenericCallScheme(address(_avatar))\n    onlySubjectToConstraint(\"genericCall\", address(_avatar))\n    returns (bool, bytes memory)\n    {\n        return _avatar.genericCall(_contract, _data, _value);\n    }\n\n  /**\n   * @dev send some ether\n   * @param _amountInWei the amount of ether (in Wei) to send\n   * @param _to address of the beneficiary\n   * @param _avatar the organization avatar.\n   * @return bool which represents a success\n   */\n    function sendEther(uint256 _amountInWei, address payable _to, Avatar _avatar)\n    external\n    onlyRegisteredScheme(address(_avatar))\n    onlySubjectToConstraint(\"sendEther\", address(_avatar))\n    returns(bool)\n    {\n        return _avatar.sendEther(_amountInWei, _to);\n    }\n\n    /**\n    * @dev send some amount of arbitrary ERC20 Tokens\n    * @param _externalToken the address of the Token Contract\n    * @param _to address of the beneficiary\n    * @param _value the amount of ether (in Wei) to send\n    * @param _avatar the organization avatar.\n    * @return bool which represents a success\n    */\n    function externalTokenTransfer(IERC20 _externalToken, address _to, uint256 _value, Avatar _avatar)\n    external\n    onlyRegisteredScheme(address(_avatar))\n    onlySubjectToConstraint(\"externalTokenTransfer\", address(_avatar))\n    returns(bool)\n    {\n        return _avatar.externalTokenTransfer(_externalToken, _to, _value);\n    }\n\n    /**\n    * @dev transfer token \"from\" address \"to\" address\n    *      One must to approve the amount of tokens which can be spend from the\n    *      \"from\" account.This can be done using externalTokenApprove.\n    * @param _externalToken the address of the Token Contract\n    * @param _from address of the account to send from\n    * @param _to address of the beneficiary\n    * @param _value the amount of ether (in Wei) to send\n    * @param _avatar the organization avatar.\n    * @return bool which represents a success\n    */\n    function externalTokenTransferFrom(\n    IERC20 _externalToken,\n    address _from,\n    address _to,\n    uint256 _value,\n    Avatar _avatar)\n    external\n    onlyRegisteredScheme(address(_avatar))\n    onlySubjectToConstraint(\"externalTokenTransferFrom\", address(_avatar))\n    returns(bool)\n    {\n        return _avatar.externalTokenTransferFrom(_externalToken, _from, _to, _value);\n    }\n\n    /**\n    * @dev externalTokenApproval approve the spender address to spend a specified amount of tokens\n    *      on behalf of msg.sender.\n    * @param _externalToken the address of the Token Contract\n    * @param _spender address\n    * @param _value the amount of ether (in Wei) which the approval is referring to.\n    * @return bool which represents a success\n    */\n    function externalTokenApproval(IERC20 _externalToken, address _spender, uint256 _value, Avatar _avatar)\n    external\n    onlyRegisteredScheme(address(_avatar))\n    onlySubjectToConstraint(\"externalTokenApproval\", address(_avatar))\n    returns(bool)\n    {\n        return _avatar.externalTokenApproval(_externalToken, _spender, _value);\n    }\n\n    /**\n    * @dev metaData emits an event with a string, should contain the hash of some meta data.\n    * @param _metaData a string representing a hash of the meta data\n    * @param _avatar Avatar\n    * @return bool which represents a success\n    */\n    function metaData(string calldata _metaData, Avatar _avatar)\n        external\n        onlyMetaDataScheme(address(_avatar))\n        returns(bool)\n        {\n        return _avatar.metaData(_metaData);\n    }\n\n    function isSchemeRegistered( address _scheme, address _avatar) external view returns(bool) {\n        return _isSchemeRegistered(_scheme, _avatar);\n    }\n\n    function getSchemeParameters(address _scheme, address _avatar) external view returns(bytes32) {\n        return organizations[_avatar].schemes[_scheme].paramsHash;\n    }\n\n    function getSchemePermissions(address _scheme, address _avatar) external view returns(bytes4) {\n        return organizations[_avatar].schemes[_scheme].permissions;\n    }\n\n    function getGlobalConstraintParameters(address _globalConstraint, address _avatar) external view returns(bytes32) {\n\n        Organization storage organization = organizations[_avatar];\n\n        GlobalConstraintRegister memory register = organization.globalConstraintsRegisterPre[_globalConstraint];\n\n        if (register.isRegistered) {\n            return organization.globalConstraintsPre[register.index].params;\n        }\n\n        register = organization.globalConstraintsRegisterPost[_globalConstraint];\n\n        if (register.isRegistered) {\n            return organization.globalConstraintsPost[register.index].params;\n        }\n    }\n\n   /**\n   * @dev globalConstraintsCount return the global constraint pre and post count\n   * @return uint256 globalConstraintsPre count.\n   * @return uint256 globalConstraintsPost count.\n   */\n    function globalConstraintsCount(address _avatar) external view returns(uint, uint) {\n        return (\n        organizations[_avatar].globalConstraintsPre.length,\n        organizations[_avatar].globalConstraintsPost.length\n        );\n    }\n\n    function isGlobalConstraintRegistered(address _globalConstraint, address _avatar) external view returns(bool) {\n        return (organizations[_avatar].globalConstraintsRegisterPre[_globalConstraint].isRegistered ||\n        organizations[_avatar].globalConstraintsRegisterPost[_globalConstraint].isRegistered);\n    }\n\n    /**\n     * @dev getNativeReputation\n     * @param _avatar the organization avatar.\n     * @return organization native reputation\n     */\n    function getNativeReputation(address _avatar) external view returns(address) {\n        return address(organizations[_avatar].nativeReputation);\n    }\n\n    /**\n     * @dev removeGlobalConstraintPre\n     * @param _globalConstraint the address of the global constraint to be remove.\n     * @param _avatar the organization avatar.\n     * @return bool which represents a success\n     */\n    function removeGlobalConstraintPre(address _globalConstraint, address _avatar)\n    private returns(bool)\n    {\n        GlobalConstraintRegister memory globalConstraintRegister =\n        organizations[_avatar].globalConstraintsRegisterPre[_globalConstraint];\n        GlobalConstraint[] storage globalConstraints = organizations[_avatar].globalConstraintsPre;\n\n        if (globalConstraintRegister.isRegistered) {\n            if (globalConstraintRegister.index < globalConstraints.length-1) {\n                GlobalConstraint memory globalConstraint = globalConstraints[globalConstraints.length-1];\n                globalConstraints[globalConstraintRegister.index] = globalConstraint;\n                organizations[_avatar].globalConstraintsRegisterPre[globalConstraint.gcAddress].index =\n                globalConstraintRegister.index;\n            }\n            globalConstraints.length--;\n            delete organizations[_avatar].globalConstraintsRegisterPre[_globalConstraint];\n            emit RemoveGlobalConstraint(_globalConstraint, globalConstraintRegister.index, true, _avatar);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * @dev removeGlobalConstraintPost\n     * @param _globalConstraint the address of the global constraint to be remove.\n     * @param _avatar the organization avatar.\n     * @return bool which represents a success\n     */\n    function removeGlobalConstraintPost(address _globalConstraint, address _avatar)\n    private returns(bool)\n    {\n        GlobalConstraintRegister memory globalConstraintRegister =\n        organizations[_avatar].globalConstraintsRegisterPost[_globalConstraint];\n        GlobalConstraint[] storage globalConstraints = organizations[_avatar].globalConstraintsPost;\n\n        if (globalConstraintRegister.isRegistered) {\n            if (globalConstraintRegister.index < globalConstraints.length-1) {\n                GlobalConstraint memory globalConstraint = globalConstraints[globalConstraints.length-1];\n                globalConstraints[globalConstraintRegister.index] = globalConstraint;\n                organizations[_avatar].globalConstraintsRegisterPost[globalConstraint.gcAddress].index =\n                globalConstraintRegister.index;\n            }\n            globalConstraints.length--;\n            delete organizations[_avatar].globalConstraintsRegisterPost[_globalConstraint];\n            emit RemoveGlobalConstraint(_globalConstraint, globalConstraintRegister.index, false, _avatar);\n            return true;\n        }\n        return false;\n    }\n\n    function _isSchemeRegistered( address _scheme, address _avatar) private view returns(bool) {\n        return (organizations[_avatar].schemes[_scheme].permissions&bytes4(0x00000001) != bytes4(0));\n    }\n}\n\n// File: contracts/controller/Controller.sol\n\npragma solidity ^0.5.4;\n\n\n\n\n\n/**\n * @title Controller contract\n * @dev A controller controls the organizations tokens, reputation and avatar.\n * It is subject to a set of schemes and constraints that determine its behavior.\n * Each scheme has it own parameters and operation permissions.\n */\ncontract Controller is ControllerInterface {\n\n    struct Scheme {\n        bytes32 paramsHash;  // a hash \"configuration\" of the scheme\n        bytes4  permissions; // A bitwise flags of permissions,\n                             // All 0: Not registered,\n                             // 1st bit: Flag if the scheme is registered,\n                             // 2nd bit: Scheme can register other schemes\n                             // 3rd bit: Scheme can add/remove global constraints\n                             // 4th bit: Scheme can upgrade the controller\n                             // 5th bit: Scheme can call genericCall on behalf of\n                             //          the organization avatar\n    }\n\n    struct GlobalConstraint {\n        address gcAddress;\n        bytes32 params;\n    }\n\n    struct GlobalConstraintRegister {\n        bool isRegistered; //is registered\n        uint256 index;    //index at globalConstraints\n    }\n\n    mapping(address=>Scheme) public schemes;\n\n    Avatar public avatar;\n    DAOToken public nativeToken;\n    Reputation public nativeReputation;\n  // newController will point to the new controller after the present controller is upgraded\n    address public newController;\n  // globalConstraintsPre that determine pre conditions for all actions on the controller\n\n    GlobalConstraint[] public globalConstraintsPre;\n  // globalConstraintsPost that determine post conditions for all actions on the controller\n    GlobalConstraint[] public globalConstraintsPost;\n  // globalConstraintsRegisterPre indicate if a globalConstraints is registered as a pre global constraint\n    mapping(address=>GlobalConstraintRegister) public globalConstraintsRegisterPre;\n  // globalConstraintsRegisterPost indicate if a globalConstraints is registered as a post global constraint\n    mapping(address=>GlobalConstraintRegister) public globalConstraintsRegisterPost;\n\n    event MintReputation (address indexed _sender, address indexed _to, uint256 _amount);\n    event BurnReputation (address indexed _sender, address indexed _from, uint256 _amount);\n    event MintTokens (address indexed _sender, address indexed _beneficiary, uint256 _amount);\n    event RegisterScheme (address indexed _sender, address indexed _scheme);\n    event UnregisterScheme (address indexed _sender, address indexed _scheme);\n    event UpgradeController(address indexed _oldController, address _newController);\n\n    event AddGlobalConstraint(\n        address indexed _globalConstraint,\n        bytes32 _params,\n        GlobalConstraintInterface.CallPhase _when);\n\n    event RemoveGlobalConstraint(address indexed _globalConstraint, uint256 _index, bool _isPre);\n\n    constructor( Avatar _avatar) public {\n        avatar = _avatar;\n        nativeToken = avatar.nativeToken();\n        nativeReputation = avatar.nativeReputation();\n        schemes[msg.sender] = Scheme({paramsHash: bytes32(0), permissions: bytes4(0x0000001F)});\n    }\n\n  // Do not allow mistaken calls:\n   // solhint-disable-next-line payable-fallback\n    function() external {\n        revert();\n    }\n\n  // Modifiers:\n    modifier onlyRegisteredScheme() {\n        require(schemes[msg.sender].permissions&bytes4(0x00000001) == bytes4(0x00000001));\n        _;\n    }\n\n    modifier onlyRegisteringSchemes() {\n        require(schemes[msg.sender].permissions&bytes4(0x00000002) == bytes4(0x00000002));\n        _;\n    }\n\n    modifier onlyGlobalConstraintsScheme() {\n        require(schemes[msg.sender].permissions&bytes4(0x00000004) == bytes4(0x00000004));\n        _;\n    }\n\n    modifier onlyUpgradingScheme() {\n        require(schemes[msg.sender].permissions&bytes4(0x00000008) == bytes4(0x00000008));\n        _;\n    }\n\n    modifier onlyGenericCallScheme() {\n        require(schemes[msg.sender].permissions&bytes4(0x00000010) == bytes4(0x00000010));\n        _;\n    }\n\n    modifier onlyMetaDataScheme() {\n        require(schemes[msg.sender].permissions&bytes4(0x00000010) == bytes4(0x00000010));\n        _;\n    }\n\n    modifier onlySubjectToConstraint(bytes32 func) {\n        uint256 idx;\n        for (idx = 0; idx < globalConstraintsPre.length; idx++) {\n            require(\n            (GlobalConstraintInterface(globalConstraintsPre[idx].gcAddress))\n            .pre(msg.sender, globalConstraintsPre[idx].params, func));\n        }\n        _;\n        for (idx = 0; idx < globalConstraintsPost.length; idx++) {\n            require(\n            (GlobalConstraintInterface(globalConstraintsPost[idx].gcAddress))\n            .post(msg.sender, globalConstraintsPost[idx].params, func));\n        }\n    }\n\n    modifier isAvatarValid(address _avatar) {\n        require(_avatar == address(avatar));\n        _;\n    }\n\n    /**\n     * @dev Mint `_amount` of reputation that are assigned to `_to` .\n     * @param  _amount amount of reputation to mint\n     * @param _to beneficiary address\n     * @return bool which represents a success\n     */\n    function mintReputation(uint256 _amount, address _to, address _avatar)\n    external\n    onlyRegisteredScheme\n    onlySubjectToConstraint(\"mintReputation\")\n    isAvatarValid(_avatar)\n    returns(bool)\n    {\n        emit MintReputation(msg.sender, _to, _amount);\n        return nativeReputation.mint(_to, _amount);\n    }\n\n    /**\n     * @dev Burns `_amount` of reputation from `_from`\n     * @param _amount amount of reputation to burn\n     * @param _from The address that will lose the reputation\n     * @return bool which represents a success\n     */\n    function burnReputation(uint256 _amount, address _from, address _avatar)\n    external\n    onlyRegisteredScheme\n    onlySubjectToConstraint(\"burnReputation\")\n    isAvatarValid(_avatar)\n    returns(bool)\n    {\n        emit BurnReputation(msg.sender, _from, _amount);\n        return nativeReputation.burn(_from, _amount);\n    }\n\n    /**\n     * @dev mint tokens .\n     * @param  _amount amount of token to mint\n     * @param _beneficiary beneficiary address\n     * @return bool which represents a success\n     */\n    function mintTokens(uint256 _amount, address _beneficiary, address _avatar)\n    external\n    onlyRegisteredScheme\n    onlySubjectToConstraint(\"mintTokens\")\n    isAvatarValid(_avatar)\n    returns(bool)\n    {\n        emit MintTokens(msg.sender, _beneficiary, _amount);\n        return nativeToken.mint(_beneficiary, _amount);\n    }\n\n  /**\n   * @dev register a scheme\n   * @param _scheme the address of the scheme\n   * @param _paramsHash a hashed configuration of the usage of the scheme\n   * @param _permissions the permissions the new scheme will have\n   * @return bool which represents a success\n   */\n    function registerScheme(address _scheme, bytes32 _paramsHash, bytes4 _permissions, address _avatar)\n    external\n    onlyRegisteringSchemes\n    onlySubjectToConstraint(\"registerScheme\")\n    isAvatarValid(_avatar)\n    returns(bool)\n    {\n\n        Scheme memory scheme = schemes[_scheme];\n\n    // Check scheme has at least the permissions it is changing, and at least the current permissions:\n    // Implementation is a bit messy. One must recall logic-circuits ^^\n\n    // produces non-zero if sender does not have all of the perms that are changing between old and new\n        require(bytes4(0x0000001f)&(_permissions^scheme.permissions)&(~schemes[msg.sender].permissions) == bytes4(0));\n\n    // produces non-zero if sender does not have all of the perms in the old scheme\n        require(bytes4(0x0000001f)&(scheme.permissions&(~schemes[msg.sender].permissions)) == bytes4(0));\n\n    // Add or change the scheme:\n        schemes[_scheme].paramsHash = _paramsHash;\n        schemes[_scheme].permissions = _permissions|bytes4(0x00000001);\n        emit RegisterScheme(msg.sender, _scheme);\n        return true;\n    }\n\n    /**\n     * @dev unregister a scheme\n     * @param _scheme the address of the scheme\n     * @return bool which represents a success\n     */\n    function unregisterScheme( address _scheme, address _avatar)\n    external\n    onlyRegisteringSchemes\n    onlySubjectToConstraint(\"unregisterScheme\")\n    isAvatarValid(_avatar)\n    returns(bool)\n    {\n    //check if the scheme is registered\n        if (_isSchemeRegistered(_scheme) == false) {\n            return false;\n        }\n    // Check the unregistering scheme has enough permissions:\n        require(bytes4(0x0000001f)&(schemes[_scheme].permissions&(~schemes[msg.sender].permissions)) == bytes4(0));\n\n    // Unregister:\n        emit UnregisterScheme(msg.sender, _scheme);\n        delete schemes[_scheme];\n        return true;\n    }\n\n    /**\n     * @dev unregister the caller's scheme\n     * @return bool which represents a success\n     */\n    function unregisterSelf(address _avatar) external isAvatarValid(_avatar) returns(bool) {\n        if (_isSchemeRegistered(msg.sender) == false) {\n            return false;\n        }\n        delete schemes[msg.sender];\n        emit UnregisterScheme(msg.sender, msg.sender);\n        return true;\n    }\n\n    /**\n     * @dev add or update Global Constraint\n     * @param _globalConstraint the address of the global constraint to be added.\n     * @param _params the constraint parameters hash.\n     * @return bool which represents a success\n     */\n    function addGlobalConstraint(address _globalConstraint, bytes32 _params, address _avatar)\n    external\n    onlyGlobalConstraintsScheme\n    isAvatarValid(_avatar)\n    returns(bool)\n    {\n        GlobalConstraintInterface.CallPhase when = GlobalConstraintInterface(_globalConstraint).when();\n        if ((when == GlobalConstraintInterface.CallPhase.Pre)||\n            (when == GlobalConstraintInterface.CallPhase.PreAndPost)) {\n            if (!globalConstraintsRegisterPre[_globalConstraint].isRegistered) {\n                globalConstraintsPre.push(GlobalConstraint(_globalConstraint, _params));\n                globalConstraintsRegisterPre[_globalConstraint] =\n                GlobalConstraintRegister(true, globalConstraintsPre.length-1);\n            }else {\n                globalConstraintsPre[globalConstraintsRegisterPre[_globalConstraint].index].params = _params;\n            }\n        }\n        if ((when == GlobalConstraintInterface.CallPhase.Post)||\n            (when == GlobalConstraintInterface.CallPhase.PreAndPost)) {\n            if (!globalConstraintsRegisterPost[_globalConstraint].isRegistered) {\n                globalConstraintsPost.push(GlobalConstraint(_globalConstraint, _params));\n                globalConstraintsRegisterPost[_globalConstraint] =\n                GlobalConstraintRegister(true, globalConstraintsPost.length-1);\n            }else {\n                globalConstraintsPost[globalConstraintsRegisterPost[_globalConstraint].index].params = _params;\n            }\n        }\n        emit AddGlobalConstraint(_globalConstraint, _params, when);\n        return true;\n    }\n\n    /**\n     * @dev remove Global Constraint\n     * @param _globalConstraint the address of the global constraint to be remove.\n     * @return bool which represents a success\n     */\n     // solhint-disable-next-line code-complexity\n    function removeGlobalConstraint (address _globalConstraint, address _avatar)\n    external\n    onlyGlobalConstraintsScheme\n    isAvatarValid(_avatar)\n    returns(bool)\n    {\n        GlobalConstraintRegister memory globalConstraintRegister;\n        GlobalConstraint memory globalConstraint;\n        GlobalConstraintInterface.CallPhase when = GlobalConstraintInterface(_globalConstraint).when();\n        bool retVal = false;\n\n        if ((when == GlobalConstraintInterface.CallPhase.Pre)||\n            (when == GlobalConstraintInterface.CallPhase.PreAndPost)) {\n            globalConstraintRegister = globalConstraintsRegisterPre[_globalConstraint];\n            if (globalConstraintRegister.isRegistered) {\n                if (globalConstraintRegister.index < globalConstraintsPre.length-1) {\n                    globalConstraint = globalConstraintsPre[globalConstraintsPre.length-1];\n                    globalConstraintsPre[globalConstraintRegister.index] = globalConstraint;\n                    globalConstraintsRegisterPre[globalConstraint.gcAddress].index = globalConstraintRegister.index;\n                }\n                globalConstraintsPre.length--;\n                delete globalConstraintsRegisterPre[_globalConstraint];\n                retVal = true;\n            }\n        }\n        if ((when == GlobalConstraintInterface.CallPhase.Post)||\n            (when == GlobalConstraintInterface.CallPhase.PreAndPost)) {\n            globalConstraintRegister = globalConstraintsRegisterPost[_globalConstraint];\n            if (globalConstraintRegister.isRegistered) {\n                if (globalConstraintRegister.index < globalConstraintsPost.length-1) {\n                    globalConstraint = globalConstraintsPost[globalConstraintsPost.length-1];\n                    globalConstraintsPost[globalConstraintRegister.index] = globalConstraint;\n                    globalConstraintsRegisterPost[globalConstraint.gcAddress].index = globalConstraintRegister.index;\n                }\n                globalConstraintsPost.length--;\n                delete globalConstraintsRegisterPost[_globalConstraint];\n                retVal = true;\n            }\n        }\n        if (retVal) {\n            emit RemoveGlobalConstraint(\n            _globalConstraint,\n            globalConstraintRegister.index,\n            when == GlobalConstraintInterface.CallPhase.Pre\n            );\n        }\n        return retVal;\n    }\n\n  /**\n    * @dev upgrade the Controller\n    *      The function will trigger an event 'UpgradeController'.\n    * @param  _newController the address of the new controller.\n    * @return bool which represents a success\n    */\n    function upgradeController(address _newController, Avatar _avatar)\n    external\n    onlyUpgradingScheme\n    isAvatarValid(address(_avatar))\n    returns(bool)\n    {\n        require(newController == address(0));   // so the upgrade could be done once for a contract.\n        require(_newController != address(0));\n        newController = _newController;\n        avatar.transferOwnership(_newController);\n        require(avatar.owner() == _newController);\n        if (nativeToken.owner() == address(this)) {\n            nativeToken.transferOwnership(_newController);\n            require(nativeToken.owner() == _newController);\n        }\n        if (nativeReputation.owner() == address(this)) {\n            nativeReputation.transferOwnership(_newController);\n            require(nativeReputation.owner() == _newController);\n        }\n        emit UpgradeController(address(this), newController);\n        return true;\n    }\n\n    /**\n    * @dev perform a generic call to an arbitrary contract\n    * @param _contract  the contract's address to call\n    * @param _data ABI-encoded contract call to call `_contract` address.\n    * @param _avatar the controller's avatar address\n    * @param _value value (ETH) to transfer with the transaction\n    * @return bool -success\n    *         bytes  - the return value of the called _contract's function.\n    */\n    function genericCall(address _contract, bytes calldata _data, Avatar _avatar, uint256 _value)\n    external\n    onlyGenericCallScheme\n    onlySubjectToConstraint(\"genericCall\")\n    isAvatarValid(address(_avatar))\n    returns (bool, bytes memory)\n    {\n        return avatar.genericCall(_contract, _data, _value);\n    }\n\n  /**\n   * @dev send some ether\n   * @param _amountInWei the amount of ether (in Wei) to send\n   * @param _to address of the beneficiary\n   * @return bool which represents a success\n   */\n    function sendEther(uint256 _amountInWei, address payable _to, Avatar _avatar)\n    external\n    onlyRegisteredScheme\n    onlySubjectToConstraint(\"sendEther\")\n    isAvatarValid(address(_avatar))\n    returns(bool)\n    {\n        return avatar.sendEther(_amountInWei, _to);\n    }\n\n    /**\n    * @dev send some amount of arbitrary ERC20 Tokens\n    * @param _externalToken the address of the Token Contract\n    * @param _to address of the beneficiary\n    * @param _value the amount of ether (in Wei) to send\n    * @return bool which represents a success\n    */\n    function externalTokenTransfer(IERC20 _externalToken, address _to, uint256 _value, Avatar _avatar)\n    external\n    onlyRegisteredScheme\n    onlySubjectToConstraint(\"externalTokenTransfer\")\n    isAvatarValid(address(_avatar))\n    returns(bool)\n    {\n        return avatar.externalTokenTransfer(_externalToken, _to, _value);\n    }\n\n    /**\n    * @dev transfer token \"from\" address \"to\" address\n    *      One must to approve the amount of tokens which can be spend from the\n    *      \"from\" account.This can be done using externalTokenApprove.\n    * @param _externalToken the address of the Token Contract\n    * @param _from address of the account to send from\n    * @param _to address of the beneficiary\n    * @param _value the amount of ether (in Wei) to send\n    * @return bool which represents a success\n    */\n    function externalTokenTransferFrom(\n    IERC20 _externalToken,\n    address _from,\n    address _to,\n    uint256 _value,\n    Avatar _avatar)\n    external\n    onlyRegisteredScheme\n    onlySubjectToConstraint(\"externalTokenTransferFrom\")\n    isAvatarValid(address(_avatar))\n    returns(bool)\n    {\n        return avatar.externalTokenTransferFrom(_externalToken, _from, _to, _value);\n    }\n\n    /**\n    * @dev externalTokenApproval approve the spender address to spend a specified amount of tokens\n    *      on behalf of msg.sender.\n    * @param _externalToken the address of the Token Contract\n    * @param _spender address\n    * @param _value the amount of ether (in Wei) which the approval is referring to.\n    * @return bool which represents a success\n    */\n    function externalTokenApproval(IERC20 _externalToken, address _spender, uint256 _value, Avatar _avatar)\n    external\n    onlyRegisteredScheme\n    onlySubjectToConstraint(\"externalTokenIncreaseApproval\")\n    isAvatarValid(address(_avatar))\n    returns(bool)\n    {\n        return avatar.externalTokenApproval(_externalToken, _spender, _value);\n    }\n\n    /**\n    * @dev metaData emits an event with a string, should contain the hash of some meta data.\n    * @param _metaData a string representing a hash of the meta data\n    * @param _avatar Avatar\n    * @return bool which represents a success\n    */\n    function metaData(string calldata _metaData, Avatar _avatar)\n        external\n        onlyMetaDataScheme\n        isAvatarValid(address(_avatar))\n        returns(bool)\n        {\n        return avatar.metaData(_metaData);\n    }\n\n    /**\n     * @dev getNativeReputation\n     * @param _avatar the organization avatar.\n     * @return organization native reputation\n     */\n    function getNativeReputation(address _avatar) external isAvatarValid(_avatar) view returns(address) {\n        return address(nativeReputation);\n    }\n\n    function isSchemeRegistered(address _scheme, address _avatar) external isAvatarValid(_avatar) view returns(bool) {\n        return _isSchemeRegistered(_scheme);\n    }\n\n    function getSchemeParameters(address _scheme, address _avatar)\n    external\n    isAvatarValid(_avatar)\n    view\n    returns(bytes32)\n    {\n        return schemes[_scheme].paramsHash;\n    }\n\n    function getSchemePermissions(address _scheme, address _avatar)\n    external\n    isAvatarValid(_avatar)\n    view\n    returns(bytes4)\n    {\n        return schemes[_scheme].permissions;\n    }\n\n    function getGlobalConstraintParameters(address _globalConstraint, address) external view returns(bytes32) {\n\n        GlobalConstraintRegister memory register = globalConstraintsRegisterPre[_globalConstraint];\n\n        if (register.isRegistered) {\n            return globalConstraintsPre[register.index].params;\n        }\n\n        register = globalConstraintsRegisterPost[_globalConstraint];\n\n        if (register.isRegistered) {\n            return globalConstraintsPost[register.index].params;\n        }\n    }\n\n   /**\n    * @dev globalConstraintsCount return the global constraint pre and post count\n    * @return uint256 globalConstraintsPre count.\n    * @return uint256 globalConstraintsPost count.\n    */\n    function globalConstraintsCount(address _avatar)\n        external\n        isAvatarValid(_avatar)\n        view\n        returns(uint, uint)\n        {\n        return (globalConstraintsPre.length, globalConstraintsPost.length);\n    }\n\n    function isGlobalConstraintRegistered(address _globalConstraint, address _avatar)\n        external\n        isAvatarValid(_avatar)\n        view\n        returns(bool)\n        {\n        return (globalConstraintsRegisterPre[_globalConstraint].isRegistered ||\n                globalConstraintsRegisterPost[_globalConstraint].isRegistered);\n    }\n\n    function _isSchemeRegistered(address _scheme) private view returns(bool) {\n        return (schemes[_scheme].permissions&bytes4(0x00000001) != bytes4(0));\n    }\n}\n\n// File: contracts/universalSchemes/DaoCreator.sol\n\npragma solidity ^0.5.4;\n\n\n\n\n\n/**\n * @title ControllerCreator for creating a single controller.\n */\n\ncontract ControllerCreator {\n\n    function create(Avatar _avatar) public returns(address) {\n        Controller controller = new Controller(_avatar);\n        controller.registerScheme(msg.sender, bytes32(0), bytes4(0x0000001f), address(_avatar));\n        controller.unregisterScheme(address(this), address(_avatar));\n        return address(controller);\n    }\n}\n\n/**\n * @title Genesis Scheme that creates organizations\n */\n\n\ncontract DaoCreator {\n\n    mapping(address=>address) public locks;\n\n    event NewOrg (address _avatar);\n    event InitialSchemesSet (address _avatar);\n\n    ControllerCreator private controllerCreator;\n\n    constructor(ControllerCreator _controllerCreator) public {\n        controllerCreator = _controllerCreator;\n    }\n\n    /**\n      * @dev addFounders add founders to the organization.\n      *      this function can be called only after forgeOrg and before setSchemes\n      * @param _avatar the organization avatar\n      * @param _founders An array with the addresses of the founders of the organization\n      * @param _foundersTokenAmount An array of amount of tokens that the founders\n      *  receive in the new organization\n      * @param _foundersReputationAmount An array of amount of reputation that the\n      *   founders receive in the new organization\n      * @return bool true or false\n      */\n    function addFounders (\n        Avatar _avatar,\n        address[] calldata _founders,\n        uint[] calldata _foundersTokenAmount,\n        uint[] calldata _foundersReputationAmount\n    )\n    external\n    returns(bool)\n    {\n        require(_founders.length == _foundersTokenAmount.length);\n        require(_founders.length == _foundersReputationAmount.length);\n        require(_founders.length > 0);\n        require(locks[address(_avatar)] == msg.sender);\n        // Mint token and reputation for founders:\n        for (uint256 i = 0; i < _founders.length; i++) {\n            require(_founders[i] != address(0));\n            if (_foundersTokenAmount[i] > 0) {\n                ControllerInterface(\n                _avatar.owner()).mintTokens(_foundersTokenAmount[i], _founders[i], address(_avatar));\n            }\n            if (_foundersReputationAmount[i] > 0) {\n                ControllerInterface(\n                _avatar.owner()).mintReputation(_foundersReputationAmount[i], _founders[i], address(_avatar));\n            }\n        }\n        return true;\n    }\n\n  /**\n    * @dev Create a new organization\n    * @param _orgName The name of the new organization\n    * @param _tokenName The name of the token associated with the organization\n    * @param _tokenSymbol The symbol of the token\n    * @param _founders An array with the addresses of the founders of the organization\n    * @param _foundersTokenAmount An array of amount of tokens that the founders\n    *  receive in the new organization\n    * @param _foundersReputationAmount An array of amount of reputation that the\n    *   founders receive in the new organization\n    * @param  _uController universal controller instance\n    *         if _uController address equal to zero the organization will use none universal controller.\n    * @param  _cap token cap - 0 for no cap.\n    * @return The address of the avatar of the controller\n    */\n    function forgeOrg (\n        string calldata _orgName,\n        string calldata _tokenName,\n        string calldata _tokenSymbol,\n        address[] calldata _founders,\n        uint[] calldata _foundersTokenAmount,\n        uint[] calldata _foundersReputationAmount,\n        UController _uController,\n        uint256 _cap\n    )\n    external\n    returns(address)\n    {\n        //The call for the private function is needed to bypass a deep stack issues\n        return _forgeOrg(\n            _orgName,\n            _tokenName,\n            _tokenSymbol,\n            _founders,\n            _foundersTokenAmount,\n            _foundersReputationAmount,\n            _uController,\n            _cap);\n    }\n\n     /**\n      * @dev Set initial schemes for the organization.\n      * @param _avatar organization avatar (returns from forgeOrg)\n      * @param _schemes the schemes to register for the organization\n      * @param _params the schemes's params\n      * @param _permissions the schemes permissions.\n      * @param _metaData dao meta data hash\n      */\n    function setSchemes (\n        Avatar _avatar,\n        address[] calldata _schemes,\n        bytes32[] calldata _params,\n        bytes4[] calldata _permissions,\n        string calldata _metaData\n    )\n        external\n    {\n        // this action can only be executed by the account that holds the lock\n        // for this controller\n        require(locks[address(_avatar)] == msg.sender);\n        // register initial schemes:\n        ControllerInterface controller = ControllerInterface(_avatar.owner());\n        for (uint256 i = 0; i < _schemes.length; i++) {\n            controller.registerScheme(_schemes[i], _params[i], _permissions[i], address(_avatar));\n        }\n        controller.metaData(_metaData, _avatar);\n        // Unregister self:\n        controller.unregisterScheme(address(this), address(_avatar));\n        // Remove lock:\n        delete locks[address(_avatar)];\n        emit InitialSchemesSet(address(_avatar));\n    }\n\n    /**\n     * @dev Create a new organization\n     * @param _orgName The name of the new organization\n     * @param _tokenName The name of the token associated with the organization\n     * @param _tokenSymbol The symbol of the token\n     * @param _founders An array with the addresses of the founders of the organization\n     * @param _foundersTokenAmount An array of amount of tokens that the founders\n     *  receive in the new organization\n     * @param _foundersReputationAmount An array of amount of reputation that the\n     *   founders receive in the new organization\n     * @param  _uController universal controller instance\n     *         if _uController address equal to zero the organization will use none universal controller.\n     * @param  _cap token cap - 0 for no cap.\n     * @return The address of the avatar of the controller\n     */\n    function _forgeOrg (\n        string memory _orgName,\n        string memory _tokenName,\n        string memory _tokenSymbol,\n        address[] memory _founders,\n        uint[] memory _foundersTokenAmount,\n        uint[] memory _foundersReputationAmount,\n        UController _uController,\n        uint256 _cap\n    ) private returns(address)\n    {\n        // Create Token, Reputation and Avatar:\n        require(_founders.length == _foundersTokenAmount.length);\n        require(_founders.length == _foundersReputationAmount.length);\n        require(_founders.length > 0);\n        DAOToken  nativeToken = new DAOToken(_tokenName, _tokenSymbol, _cap);\n        Reputation  nativeReputation = new Reputation();\n        Avatar  avatar = new Avatar(_orgName, nativeToken, nativeReputation);\n        ControllerInterface  controller;\n\n        // Mint token and reputation for founders:\n        for (uint256 i = 0; i < _founders.length; i++) {\n            require(_founders[i] != address(0));\n            if (_foundersTokenAmount[i] > 0) {\n                nativeToken.mint(_founders[i], _foundersTokenAmount[i]);\n            }\n            if (_foundersReputationAmount[i] > 0) {\n                nativeReputation.mint(_founders[i], _foundersReputationAmount[i]);\n            }\n        }\n\n        // Create Controller:\n        if (UController(0) == _uController) {\n            controller = ControllerInterface(controllerCreator.create(avatar));\n            avatar.transferOwnership(address(controller));\n            // Transfer ownership:\n            nativeToken.transferOwnership(address(controller));\n            nativeReputation.transferOwnership(address(controller));\n        } else {\n            controller = _uController;\n            avatar.transferOwnership(address(controller));\n            // Transfer ownership:\n            nativeToken.transferOwnership(address(controller));\n            nativeReputation.transferOwnership(address(controller));\n            _uController.newOrganization(avatar);\n        }\n\n        locks[address(avatar)] = msg.sender;\n\n        emit NewOrg (address(avatar));\n        return (address(avatar));\n    }\n}",
  "abi": "[{\"constant\":false,\"inputs\":[{\"name\":\"_avatar\",\"type\":\"address\"},{\"name\":\"_schemes\",\"type\":\"address[]\"},{\"name\":\"_params\",\"type\":\"bytes32[]\"},{\"name\":\"_permissions\",\"type\":\"bytes4[]\"},{\"name\":\"_metaData\",\"type\":\"string\"}],\"name\":\"setSchemes\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_avatar\",\"type\":\"address\"},{\"name\":\"_founders\",\"type\":\"address[]\"},{\"name\":\"_foundersTokenAmount\",\"type\":\"uint256[]\"},{\"name\":\"_foundersReputationAmount\",\"type\":\"uint256[]\"}],\"name\":\"addFounders\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"locks\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_orgName\",\"type\":\"string\"},{\"name\":\"_tokenName\",\"type\":\"string\"},{\"name\":\"_tokenSymbol\",\"type\":\"string\"},{\"name\":\"_founders\",\"type\":\"address[]\"},{\"name\":\"_foundersTokenAmount\",\"type\":\"uint256[]\"},{\"name\":\"_foundersReputationAmount\",\"type\":\"uint256[]\"},{\"name\":\"_uController\",\"type\":\"address\"},{\"name\":\"_cap\",\"type\":\"uint256\"}],\"name\":\"forgeOrg\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"_controllerCreator\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_avatar\",\"type\":\"address\"}],\"name\":\"NewOrg\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_avatar\",\"type\":\"address\"}],\"name\":\"InitialSchemesSet\",\"type\":\"event\"}]",
  "bytecode": "608060405234801561001057600080fd5b5060405160208061432d8339810180604052602081101561003057600080fd5b505160018054600160a060020a031916600160a060020a039092169190911790556142cd806100606000396000f3fe60806040523480156200001157600080fd5b5060043610620000555760e060020a6000350463064bf38681146200005a578063571084bd14620001e15780635de9a1371462000325578063ff720f0f146200036a575b600080fd5b620001df600480360360a08110156200007257600080fd5b600160a060020a0382351691908101906040810160208201356401000000008111156200009e57600080fd5b820183602082011115620000b157600080fd5b80359060200191846020830284011164010000000083111715620000d457600080fd5b919390929091602081019035640100000000811115620000f357600080fd5b8201836020820111156200010657600080fd5b803590602001918460208302840111640100000000831117156200012957600080fd5b9193909290916020810190356401000000008111156200014857600080fd5b8201836020820111156200015b57600080fd5b803590602001918460208302840111640100000000831117156200017e57600080fd5b9193909290916020810190356401000000008111156200019d57600080fd5b820183602082011115620001b057600080fd5b80359060200191846001830284011164010000000083111715620001d357600080fd5b50909250905062000599565b005b6200031160048036036080811015620001f957600080fd5b600160a060020a0382351691908101906040810160208201356401000000008111156200022557600080fd5b8201836020820111156200023857600080fd5b803590602001918460208302840111640100000000831117156200025b57600080fd5b9193909290916020810190356401000000008111156200027a57600080fd5b8201836020820111156200028d57600080fd5b80359060200191846020830284011164010000000083111715620002b057600080fd5b919390929091602081019035640100000000811115620002cf57600080fd5b820183602082011115620002e257600080fd5b803590602001918460208302840111640100000000831117156200030557600080fd5b5090925090506200096e565b604080519115158252519081900360200190f35b6200034e600480360360208110156200033d57600080fd5b5035600160a060020a031662000ce3565b60408051600160a060020a039092168252519081900360200190f35b6200034e60048036036101008110156200038357600080fd5b8101906020810181356401000000008111156200039f57600080fd5b820183602082011115620003b257600080fd5b80359060200191846001830284011164010000000083111715620003d557600080fd5b919390929091602081019035640100000000811115620003f457600080fd5b8201836020820111156200040757600080fd5b803590602001918460018302840111640100000000831117156200042a57600080fd5b9193909290916020810190356401000000008111156200044957600080fd5b8201836020820111156200045c57600080fd5b803590602001918460018302840111640100000000831117156200047f57600080fd5b9193909290916020810190356401000000008111156200049e57600080fd5b820183602082011115620004b157600080fd5b80359060200191846020830284011164010000000083111715620004d457600080fd5b919390929091602081019035640100000000811115620004f357600080fd5b8201836020820111156200050657600080fd5b803590602001918460208302840111640100000000831117156200052957600080fd5b9193909290916020810190356401000000008111156200054857600080fd5b8201836020820111156200055b57600080fd5b803590602001918460208302840111640100000000831117156200057e57600080fd5b9193509150600160a060020a03813516906020013562000cfe565b600160a060020a03898116600090815260208190526040902054163314620005c057600080fd5b600089600160a060020a0316638da5cb5b6040518163ffffffff1660e060020a02815260040160206040518083038186803b158015620005ff57600080fd5b505afa15801562000614573d6000803e3d6000fd5b505050506040513d60208110156200062b57600080fd5b5051905060005b888110156200079b57600160a060020a03821663e869d45f8b8b848181106200065757fe5b90506020020135600160a060020a03168a8a8581811015156200067657fe5b9050602002013589898681811015156200068c57fe5b905060200201357bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19168f6040518563ffffffff1660e060020a0281526004018085600160a060020a0316600160a060020a03168152602001848152602001837bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19167bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916815260200182600160a060020a0316600160a060020a03168152602001945050505050602060405180830381600087803b1580156200076457600080fd5b505af115801562000779573d6000803e3d6000fd5b505050506040513d60208110156200079057600080fd5b505060010162000632565b50604080517fc9b62eb1000000000000000000000000000000000000000000000000000000008152600160a060020a038c81166024830152600482019283526044820185905283169163c9b62eb191869186918f91908190606401858580828437600081840152601f19601f820116905080830192505050945050505050602060405180830381600087803b1580156200083457600080fd5b505af115801562000849573d6000803e3d6000fd5b505050506040513d60208110156200086057600080fd5b5050604080517f039de01d000000000000000000000000000000000000000000000000000000008152306004820152600160a060020a038c8116602483015291519183169163039de01d916044808201926020929091908290030181600087803b158015620008ce57600080fd5b505af1158015620008e3573d6000803e3d6000fd5b505050506040513d6020811015620008fa57600080fd5b5050600160a060020a038a1660008181526020818152604091829020805473ffffffffffffffffffffffffffffffffffffffff19169055815192835290517f9007c9042f12be953f7dbe3909f56c3f088e9fe294dbebbef4a67afa63462b6a9281900390910190a150505050505050505050565b60008584146200097d57600080fd5b8582146200098a57600080fd5b600086116200099857600080fd5b600160a060020a03888116600090815260208190526040902054163314620009bf57600080fd5b60005b8681101562000cd4576000888883818110620009da57fe5b90506020020135600160a060020a0316600160a060020a03161415151562000a0157600080fd5b600086868381811062000a1057fe5b90506020020135111562000b665788600160a060020a0316638da5cb5b6040518163ffffffff1660e060020a02815260040160206040518083038186803b15801562000a5b57600080fd5b505afa15801562000a70573d6000803e3d6000fd5b505050506040513d602081101562000a8757600080fd5b5051600160a060020a0316636407e43287878481811062000aa457fe5b905060200201358a8a85818110151562000aba57fe5b90506020020135600160a060020a03168c6040518463ffffffff1660e060020a0281526004018084815260200183600160a060020a0316600160a060020a0316815260200182600160a060020a0316600160a060020a031681526020019350505050602060405180830381600087803b15801562000b3757600080fd5b505af115801562000b4c573d6000803e3d6000fd5b505050506040513d602081101562000b6357600080fd5b50505b600084848381811062000b7557fe5b90506020020135111562000ccb5788600160a060020a0316638da5cb5b6040518163ffffffff1660e060020a02815260040160206040518083038186803b15801562000bc057600080fd5b505afa15801562000bd5573d6000803e3d6000fd5b505050506040513d602081101562000bec57600080fd5b5051600160a060020a031663eaf994b285858481811062000c0957fe5b905060200201358a8a85818110151562000c1f57fe5b90506020020135600160a060020a03168c6040518463ffffffff1660e060020a0281526004018084815260200183600160a060020a0316600160a060020a0316815260200182600160a060020a0316600160a060020a031681526020019350505050602060405180830381600087803b15801562000c9c57600080fd5b505af115801562000cb1573d6000803e3d6000fd5b505050506040513d602081101562000cc857600080fd5b50505b600101620009c2565b50600198975050505050505050565b600060208190529081526040902054600160a060020a031681565b600062000e848f8f8080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050508e8e8080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050508d8d8080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050508c8c80806020026020016040519081016040528093929190818152602001838360200280828437600081840152601f19601f820116905080830192505050505050508b8b8080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525050604080516020808f0282810182019093528e82529093508e92508d9182918501908490808284376000920191909152508c92508b915062000e979050565b9f9e505050505050505050505050505050565b835185516000911462000ea957600080fd5b835186511462000eb857600080fd5b855160001062000ec757600080fd5b600088888460405162000eda9062001746565b60408101829052606080825284519082015283518190602080830191608084019188019080838360005b8381101562000f1e57818101518382015260200162000f04565b50505050905090810190601f16801562000f4c5780820380516001836020036101000a031916815260200191505b50838103825285518152855160209182019187019080838360005b8381101562000f8157818101518382015260200162000f67565b50505050905090810190601f16801562000faf5780820380516001836020036101000a031916815260200191505b5095505050505050604051809103906000f08015801562000fd4573d6000803e3d6000fd5b509050600060405162000fe79062001754565b604051809103906000f08015801562001004573d6000803e3d6000fd5b50905060008b83836040516200101a9062001762565b600160a060020a03808416602080840191909152908316604083015260608083528551908301528451829160808301919087019080838360005b838110156200106e57818101518382015260200162001054565b50505050905090810190601f1680156200109c5780820380516001836020036101000a031916815260200191505b50945050505050604051809103906000f080158015620010c0573d6000803e3d6000fd5b5090506000805b8a51811015620012d5578a516000908c9083908110620010e357fe5b60209081029091010151600160a060020a031614156200110257600080fd5b60008a828151811015156200111357fe5b906020019060200201511115620011e75784600160a060020a03166340c10f198c838151811015156200114257fe5b906020019060200201518c848151811015156200115b57fe5b906020019060200201516040518363ffffffff1660e060020a0281526004018083600160a060020a0316600160a060020a0316815260200182815260200192505050602060405180830381600087803b158015620011b857600080fd5b505af1158015620011cd573d6000803e3d6000fd5b505050506040513d6020811015620011e457600080fd5b50505b60008982815181101515620011f857fe5b906020019060200201511115620012cc5783600160a060020a03166340c10f198c838151811015156200122757fe5b906020019060200201518b848151811015156200124057fe5b906020019060200201516040518363ffffffff1660e060020a0281526004018083600160a060020a0316600160a060020a0316815260200182815260200192505050602060405180830381600087803b1580156200129d57600080fd5b505af1158015620012b2573d6000803e3d6000fd5b505050506040513d6020811015620012c957600080fd5b50505b600101620010c7565b50600160a060020a0387161515620014ef57600154604080517f9ed93318000000000000000000000000000000000000000000000000000000008152600160a060020a03858116600483015291519190921691639ed933189160248083019260209291908290030181600087803b1580156200135057600080fd5b505af115801562001365573d6000803e3d6000fd5b505050506040513d60208110156200137c57600080fd5b5051604080517ff2fde38b000000000000000000000000000000000000000000000000000000008152600160a060020a03808416600483015291519293509084169163f2fde38b9160248082019260009290919082900301818387803b158015620013e657600080fd5b505af1158015620013fb573d6000803e3d6000fd5b5050505083600160a060020a031663f2fde38b826040518263ffffffff1660e060020a0281526004018082600160a060020a0316600160a060020a03168152602001915050600060405180830381600087803b1580156200145b57600080fd5b505af115801562001470573d6000803e3d6000fd5b5050505082600160a060020a031663f2fde38b826040518263ffffffff1660e060020a0281526004018082600160a060020a0316600160a060020a03168152602001915050600060405180830381600087803b158015620014d057600080fd5b505af1158015620014e5573d6000803e3d6000fd5b50505050620016ce565b50604080517ff2fde38b000000000000000000000000000000000000000000000000000000008152600160a060020a0380891660048301529151889284169163f2fde38b91602480830192600092919082900301818387803b1580156200155557600080fd5b505af11580156200156a573d6000803e3d6000fd5b5050505083600160a060020a031663f2fde38b826040518263ffffffff1660e060020a0281526004018082600160a060020a0316600160a060020a03168152602001915050600060405180830381600087803b158015620015ca57600080fd5b505af1158015620015df573d6000803e3d6000fd5b5050505082600160a060020a031663f2fde38b826040518263ffffffff1660e060020a0281526004018082600160a060020a0316600160a060020a03168152602001915050600060405180830381600087803b1580156200163f57600080fd5b505af115801562001654573d6000803e3d6000fd5b5050505086600160a060020a031663b9981364836040518263ffffffff1660e060020a0281526004018082600160a060020a0316600160a060020a03168152602001915050600060405180830381600087803b158015620016b457600080fd5b505af1158015620016c9573d6000803e3d6000fd5b505050505b600160a060020a03821660008181526020818152604091829020805473ffffffffffffffffffffffffffffffffffffffff191633179055815192835290517f244496352f5e67e59ce96b4a53ef9ea7cb88b7db33eb13dc5e771bd04385a60e9281900390910190a1509b9a5050505050505050505050565b610e71806200177183390190565b61096780620025e283390190565b6113598062002f498339019056fe60806040523480156200001157600080fd5b5060405162000e7138038062000e71833981018060405260608110156200003757600080fd5b8101908080516401000000008111156200005057600080fd5b820160208101848111156200006457600080fd5b81516401000000008111828201871017156200007f57600080fd5b505092919060200180516401000000008111156200009c57600080fd5b82016020810184811115620000b057600080fd5b8151640100000000811182820187101715620000cb57600080fd5b505060209091015160038054600160a060020a031916331790819055604051929450909250600160a060020a0316906000907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908290a38251620001379060049060208601906200015a565b5081516200014d9060059060208501906200015a565b5060065550620001ff9050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200019d57805160ff1916838001178555620001cd565b82800160010185558215620001cd579182015b82811115620001cd578251825591602001919060010190620001b0565b50620001db929150620001df565b5090565b620001fc91905b80821115620001db5760008155600101620001e6565b90565b610c62806200020f6000396000f3fe608060405234801561001057600080fd5b506004361061013e576000357c01000000000000000000000000000000000000000000000000000000009004806370a08231116100ca57806395d89b411161008e57806395d89b4114610373578063a457c2d71461037b578063a9059cbb146103a7578063dd62ed3e146103d3578063f2fde38b146104015761013e565b806370a08231146102ed578063715018a61461031357806379cc67901461031b5780638da5cb5b146103475780638f32d59b1461036b5761013e565b8063313ce56711610111578063313ce56714610250578063355274ea1461026e578063395093511461027657806340c10f19146102a257806342966c68146102ce5761013e565b806306fdde0314610143578063095ea7b3146101c057806318160ddd1461020057806323b872dd1461021a575b600080fd5b61014b610427565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561018557818101518382015260200161016d565b50505050905090810190601f1680156101b25780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6101ec600480360360408110156101d657600080fd5b50600160a060020a0381351690602001356104b5565b604080519115158252519081900360200190f35b610208610521565b60408051918252519081900360200190f35b6101ec6004803603606081101561023057600080fd5b50600160a060020a03813581169160208101359091169060400135610527565b6102586105de565b6040805160ff9092168252519081900360200190f35b6102086105e3565b6101ec6004803603604081101561028c57600080fd5b50600160a060020a0381351690602001356105e9565b6101ec600480360360408110156102b857600080fd5b50600160a060020a038135169060200135610687565b6102eb600480360360208110156102e457600080fd5b50356106e0565b005b6102086004803603602081101561030357600080fd5b5035600160a060020a03166106ed565b6102eb610708565b6102eb6004803603604081101561033157600080fd5b50600160a060020a038135169060200135610772565b61034f610780565b60408051600160a060020a039092168252519081900360200190f35b6101ec61078f565b61014b6107a0565b6101ec6004803603604081101561039157600080fd5b50600160a060020a0381351690602001356107fb565b6101ec600480360360408110156103bd57600080fd5b50600160a060020a038135169060200135610846565b610208600480360360408110156103e957600080fd5b50600160a060020a0381358116916020013516610853565b6102eb6004803603602081101561041757600080fd5b5035600160a060020a031661087e565b6004805460408051602060026001851615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156104ad5780601f10610482576101008083540402835291602001916104ad565b820191906000526020600020905b81548152906001019060200180831161049057829003601f168201915b505050505081565b6000600160a060020a03831615156104cc57600080fd5b336000818152600160209081526040808320600160a060020a0388168085529083529281902086905580518681529051929392600080516020610c17833981519152929181900390910190a350600192915050565b60025490565b600160a060020a038316600090815260016020908152604080832033845290915281205461055b908363ffffffff61089a16565b600160a060020a038516600090815260016020908152604080832033845290915290205561058a8484846108af565b600160a060020a038416600081815260016020908152604080832033808552908352928190205481519081529051929392600080516020610c17833981519152929181900390910190a35060019392505050565b601281565b60065481565b6000600160a060020a038316151561060057600080fd5b336000908152600160209081526040808320600160a060020a0387168452909152902054610634908363ffffffff61097c16565b336000818152600160209081526040808320600160a060020a038916808552908352928190208590558051948552519193600080516020610c17833981519152929081900390910190a350600192915050565b600061069161078f565b151561069c57600080fd5b600060065411156106cd576006546106c2836106b6610521565b9063ffffffff61097c16565b11156106cd57600080fd5b6106d78383610995565b50600192915050565b6106ea3382610a3f565b50565b600160a060020a031660009081526020819052604090205490565b61071061078f565b151561071b57600080fd5b600354604051600091600160a060020a0316907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908390a36003805473ffffffffffffffffffffffffffffffffffffffff19169055565b61077c8282610ae8565b5050565b600354600160a060020a031690565b600354600160a060020a0316331490565b6005805460408051602060026001851615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156104ad5780601f10610482576101008083540402835291602001916104ad565b6000600160a060020a038316151561081257600080fd5b336000908152600160209081526040808320600160a060020a0387168452909152902054610634908363ffffffff61089a16565b60006106d73384846108af565b600160a060020a03918216600090815260016020908152604080832093909416825291909152205490565b61088661078f565b151561089157600080fd5b6106ea81610b98565b6000828211156108a957600080fd5b50900390565b600160a060020a03821615156108c457600080fd5b600160a060020a0383166000908152602081905260409020546108ed908263ffffffff61089a16565b600160a060020a038085166000908152602081905260408082209390935590841681522054610922908263ffffffff61097c16565b600160a060020a038084166000818152602081815260409182902094909455805185815290519193928716927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef92918290030190a3505050565b60008282018381101561098e57600080fd5b9392505050565b600160a060020a03821615156109aa57600080fd5b6002546109bd908263ffffffff61097c16565b600255600160a060020a0382166000908152602081905260409020546109e9908263ffffffff61097c16565b600160a060020a0383166000818152602081815260408083209490945583518581529351929391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9281900390910190a35050565b600160a060020a0382161515610a5457600080fd5b600254610a67908263ffffffff61089a16565b600255600160a060020a038216600090815260208190526040902054610a93908263ffffffff61089a16565b600160a060020a038316600081815260208181526040808320949094558351858152935191937fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef929081900390910190a35050565b600160a060020a0382166000908152600160209081526040808320338452909152902054610b1c908263ffffffff61089a16565b600160a060020a0383166000908152600160209081526040808320338452909152902055610b4a8282610a3f565b600160a060020a038216600081815260016020908152604080832033808552908352928190205481519081529051929392600080516020610c17833981519152929181900390910190a35050565b600160a060020a0381161515610bad57600080fd5b600354604051600160a060020a038084169216907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a36003805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a039290921691909117905556fe8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925a165627a7a72305820e2bbeb30419272f3204c024fcce4f455b6996980f1b9ff1a4e324c7530609213002960806040526000805460a060020a60ff0219167412000000000000000000000000000000000000000017905534801561003757600080fd5b5060008054600160a060020a0319163317808255604051600160a060020a039190911691907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908290a36108d7806100906000396000f3fe608060405234801561001057600080fd5b50600436106100c6576000357c010000000000000000000000000000000000000000000000000000000090048063715018a61161008e578063715018a6146101955780638da5cb5b1461019f5780638f32d59b146101c3578063981b24d0146101cb5780639dc29fac146101e8578063f2fde38b14610214576100c6565b806318160ddd146100cb578063313ce567146100e557806340c10f19146101035780634ee2cd7e1461014357806370a082311461016f575b600080fd5b6100d361023a565b60408051918252519081900360200190f35b6100ed61024b565b6040805160ff9092168252519081900360200190f35b61012f6004803603604081101561011957600080fd5b50600160a060020a03813516906020013561026c565b604080519115158252519081900360200190f35b6100d36004803603604081101561015957600080fd5b50600160a060020a038135169060200135610335565b6100d36004803603602081101561018557600080fd5b5035600160a060020a03166103c7565b61019d6103db565b005b6101a7610445565b60408051600160a060020a039092168252519081900360200190f35b61012f610454565b6100d3600480360360208110156101e157600080fd5b5035610465565b61012f600480360360408110156101fe57600080fd5b50600160a060020a0381351690602001356104b9565b61019d6004803603602081101561022a57600080fd5b5035600160a060020a0316610570565b600061024543610465565b90505b90565b60005474010000000000000000000000000000000000000000900460ff1681565b6000610276610454565b151561028157600080fd5b600061028b61023a565b905082810181111561029c57600080fd5b60006102a7856103c7565b90508381018111156102b857600080fd5b6102c5600285840161058f565b600160a060020a03851660009081526001602052604090206102e99082860161058f565b604080518581529051600160a060020a038716917f0f6798a560793a54c3bcfe86a93cde1e73087d944c0ea20544137d4121396885919081900360200190a26001925050505b92915050565b600160a060020a03821660009081526001602052604081205415806103915750600160a060020a03831660009081526001602052604081208054849290811061037a57fe5b6000918252602090912001546001608060020a0316115b1561039e5750600061032f565b600160a060020a03831660009081526001602052604090206103c09083610697565b905061032f565b60006103d38243610335565b90505b919050565b6103e3610454565b15156103ee57600080fd5b60008054604051600160a060020a03909116907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908390a36000805473ffffffffffffffffffffffffffffffffffffffff19169055565b600054600160a060020a031690565b600054600160a060020a0316331490565b600254600090158061049a5750816002600081548110151561048357fe5b6000918252602090912001546001608060020a0316115b156104a7575060006103d6565b6104b2600283610697565b90506103d6565b60006104c3610454565b15156104ce57600080fd5b60006104d861023a565b90508260006104e6866103c7565b9050818110156104f4578091505b610501600283850361058f565b600160a060020a03861660009081526001602052604090206105259083830361058f565b604080518381529051600160a060020a038816917fcc16f5dbb4873280815c1ee09dbd06736cffcc184412cf7a71a0fdb75d397ca5919081900360200190a250600195945050505050565b610578610454565b151561058357600080fd5b61058c816107e7565b50565b6001608060020a03811681146105a457600080fd5b815415806105d8575081544390839060001981019081106105c157fe5b6000918252602090912001546001608060020a0316105b1561064c57815460009083906105f18260018301610864565b815481106105fb57fe5b600091825260209091200180546001608060020a03848116700100000000000000000000000000000000024382166fffffffffffffffffffffffffffffffff19909316929092171617905550610693565b81546000908390600019810190811061066157fe5b600091825260209091200180546001608060020a03808516700100000000000000000000000000000000029116179055505b5050565b815460009015156106aa5750600061032f565b8254839060001981019081106106bc57fe5b6000918252602090912001546001608060020a03168210610719578254839060001981019081106106e957fe5b60009182526020909120015470010000000000000000000000000000000090046001608060020a0316905061032f565b82600081548110151561072857fe5b6000918252602090912001546001608060020a031682101561074c5750600061032f565b8254600090600019015b818111156107a757845460028383016001010490859087908390811061077857fe5b6000918252602090912001546001608060020a03161161079a578092506107a1565b6001810391505b50610756565b84828154811015156107b557fe5b60009182526020909120015470010000000000000000000000000000000090046001608060020a031695945050505050565b600160a060020a03811615156107fc57600080fd5b60008054604051600160a060020a03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b8154818355818111156108885760008381526020902061088891810190830161088d565b505050565b61024891905b808211156108a75760008155600101610893565b509056fea165627a7a723058203bca0af92dfcfede9bd26af6f6a767b02b188e0c1c60a9df19141bf497b87ecc002960806040523480156200001157600080fd5b506040516200135938038062001359833981018060405260608110156200003757600080fd5b8101908080516401000000008111156200005057600080fd5b820160208101848111156200006457600080fd5b81516401000000008111828201871017156200007f57600080fd5b5050602082015160409283015160008054600160a060020a0319163317808255945193965091945092600160a060020a0316917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908290a38251620000ec90600190602086019062000120565b5060028054600160a060020a03938416600160a060020a0319918216179091556003805492909316911617905550620001c5565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200016357805160ff191683800117855562000193565b8280016001018555821562000193579182015b828111156200019357825182559160200191906001019062000176565b50620001a1929150620001a5565b5090565b620001c291905b80821115620001a15760008155600101620001ac565b90565b61118480620001d56000396000f3fe6080604052600436106100df576000357c0100000000000000000000000000000000000000000000000000000000900480638f32d59b1161009c578063cb16d4a211610076578063cb16d4a2146104ae578063dab0efff146104e7578063e1758bd81461052a578063f2fde38b1461053f576100df565b80638f32d59b1461040d578063ab751f7114610422578063b756d5a214610465576100df565b80631386dc2d146101175780632bf16458146101a1578063715018a6146102e9578063890ac46c1461030057806389ae1c90146103c75780638da5cb5b146103f8575b60408051348152905133917ff32a9f77675fd5917534c7746608fd3e309eac68fbdcbf5925e24ca97a704396919081900360200190a2005b34801561012357600080fd5b5061012c610572565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561016657818101518382015260200161014e565b50505050905090810190601f1680156101935780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156101ad57600080fd5b50610266600480360360608110156101c457600080fd5b600160a060020a0382351691908101906040810160208201356401000000008111156101ef57600080fd5b82018360208201111561020157600080fd5b8035906020019184600183028401116401000000008311171561022357600080fd5b91908080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525092955050913592506105ff915050565b604051808315151515815260200180602001828103825283818151815260200191508051906020019080838360005b838110156102ad578181015183820152602001610295565b50505050905090810190601f1680156102da5780820380516001836020036101000a031916815260200191505b50935050505060405180910390f35b3480156102f557600080fd5b506102fe610780565b005b34801561030c57600080fd5b506103b36004803603602081101561032357600080fd5b81019060208101813564010000000081111561033e57600080fd5b82018360208201111561035057600080fd5b8035906020019184600183028401116401000000008311171561037257600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295506107ea945050505050565b604080519115158252519081900360200190f35b3480156103d357600080fd5b506103dc6108a0565b60408051600160a060020a039092168252519081900360200190f35b34801561040457600080fd5b506103dc6108af565b34801561041957600080fd5b506103b36108be565b34801561042e57600080fd5b506103b36004803603606081101561044557600080fd5b50600160a060020a038135811691602081013590911690604001356108cf565b34801561047157600080fd5b506103b36004803603608081101561048857600080fd5b50600160a060020a0381358116916020810135821691604082013516906060013561094e565b3480156104ba57600080fd5b506103b3600480360360408110156104d157600080fd5b5080359060200135600160a060020a03166109d8565b3480156104f357600080fd5b506103b36004803603606081101561050a57600080fd5b50600160a060020a03813581169160208101359091169060400135610a6c565b34801561053657600080fd5b506103dc610af0565b34801561054b57600080fd5b506102fe6004803603602081101561056257600080fd5b5035600160a060020a0316610aff565b60018054604080516020600284861615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156105f75780601f106105cc576101008083540402835291602001916105f7565b820191906000526020600020905b8154815290600101906020018083116105da57829003601f168201915b505050505081565b6000606061060b6108be565b151561061657600080fd5b84600160a060020a031683856040518082805190602001908083835b602083106106515780518252601f199092019160209182019101610632565b6001836020036101000a03801982511681845116808217855250505050505090500191505060006040518083038185875af1925050503d80600081146106b3576040519150601f19603f3d011682016040523d82523d6000602084013e6106b8565b606091505b50809250819350505084600160a060020a03167f534b52c783549f909f9e743120524d0b7154058e4a54cdc895c2c0b587a1c7e0858585604051808060200184815260200183151515158152602001828103825285818151815260200191508051906020019080838360005b8381101561073c578181015183820152602001610724565b50505050905090810190601f1680156107695780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a2935093915050565b6107886108be565b151561079357600080fd5b60008054604051600160a060020a03909116907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908390a36000805473ffffffffffffffffffffffffffffffffffffffff19169055565b60006107f46108be565b15156107ff57600080fd5b7ff9deba4938ba20070ec5a45ddf59bccba49cf83124215228ec1232182ef0ba2b826040518080602001828103825283818151815260200191508051906020019080838360005b8381101561085e578181015183820152602001610846565b50505050905090810190601f16801561088b5780820380516001836020036101000a031916815260200191505b509250505060405180910390a1506001919050565b600354600160a060020a031681565b600054600160a060020a031690565b600054600160a060020a0316331490565b60006108d96108be565b15156108e457600080fd5b6108fe600160a060020a038516848463ffffffff610b1e16565b60408051600160a060020a038581168252602082018590528251908716927f3a48a4d6253b30fd10e57a347c1f9bcb0604946481fae0b2fdad6e74f2a9cbb3928290030190a25060019392505050565b60006109586108be565b151561096357600080fd5b61097e600160a060020a03861685858563ffffffff610dbf16565b60408051600160a060020a03868116825285811660208301528183018590529151918716917f179c15de44aa7ab84896301974328eb40b5b40fe01cfe0fee2924ea712c3e8439181900360600190a2506001949350505050565b60006109e26108be565b15156109ed57600080fd5b604051600160a060020a0383169084156108fc029085906000818181858888f19350505050158015610a23573d6000803e3d6000fd5b50604080518481529051600160a060020a038416917f22fca66666089f39bc900dd6605b489df4aae6260cc8ea8257594cfb8c84926c919081900360200190a250600192915050565b6000610a766108be565b1515610a8157600080fd5b610a9b600160a060020a038516848463ffffffff610fb716565b82600160a060020a031684600160a060020a03167f49dc2a60d2599a7b6932d78fb694c30dfc596fe4e0282b5d0fd184b52472c04d846040518082815260200191505060405180910390a35060019392505050565b600254600160a060020a031681565b610b076108be565b1515610b1257600080fd5b610b1b816110ae565b50565b610b3083600160a060020a031661112b565b1515610b3b57600080fd5b801580610bda5750604080517fdd62ed3e000000000000000000000000000000000000000000000000000000008152306004820152600160a060020a03848116602483015291519185169163dd62ed3e91604480820192602092909190829003018186803b158015610bac57600080fd5b505afa158015610bc0573d6000803e3d6000fd5b505050506040513d6020811015610bd657600080fd5b5051155b1515610be557600080fd5b604080518082018252601881527f617070726f766528616464726573732c75696e743235362900000000000000006020918201528151600160a060020a0385811660248301526044808301869052845180840390910181526064909201845291810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167f095ea7b3000000000000000000000000000000000000000000000000000000001781529251815160009460609489169392918291908083835b60208310610cc05780518252601f199092019160209182019101610ca1565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d8060008114610d22576040519150601f19603f3d011682016040523d82523d6000602084013e610d27565b606091505b5091509150811515610d3857600080fd5b80511580610dad575080516020148015610dad575080601f815181101515610d5c57fe5b6020910101517f010000000000000000000000000000000000000000000000000000000000000090819004027fff000000000000000000000000000000000000000000000000000000000000001615155b1515610db857600080fd5b5050505050565b610dd184600160a060020a031661112b565b1515610ddc57600080fd5b6000606085600160a060020a03166060604051908101604052806025815260200161113460259139805160209182012060408051600160a060020a03808b166024830152891660448201526064808201899052825180830390910181526084909101825292830180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fffffffff00000000000000000000000000000000000000000000000000000000909316929092178252518251909182918083835b60208310610eb75780518252601f199092019160209182019101610e98565b6001836020036101000a0380198251168184511680821785525050505050509050019150506000604051808303816000865af19150503d8060008114610f19576040519150601f19603f3d011682016040523d82523d6000602084013e610f1e565b606091505b5091509150811515610f2f57600080fd5b80511580610fa4575080516020148015610fa4575080601f815181101515610f5357fe5b6020910101517f010000000000000000000000000000000000000000000000000000000000000090819004027fff000000000000000000000000000000000000000000000000000000000000001615155b1515610faf57600080fd5b505050505050565b610fc983600160a060020a031661112b565b1515610fd457600080fd5b604080518082018252601981527f7472616e7366657228616464726573732c75696e7432353629000000000000006020918201528151600160a060020a0385811660248301526044808301869052845180840390910181526064909201845291810180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fa9059cbb0000000000000000000000000000000000000000000000000000000017815292518151600094606094891693929182919080838360208310610cc05780518252601f199092019160209182019101610ca1565b600160a060020a03811615156110c357600080fd5b60008054604051600160a060020a03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b6000903b119056fe7472616e7366657246726f6d28616464726573732c616464726573732c75696e7432353629a165627a7a72305820794d93e7c218f64167e283a997b612dc78e72c56464abc44118920652159b29d0029a165627a7a723058205ac32143016932597e1e59a93d3a5d77b5878d62f81580eca0681f1378f6595e002900000000000000000000000002e472d11dc05afd8bd4136df24068d9cccb49a3",
  "constructorArguments": "00000000000000000000000002e472d11dc05afd8bd4136df24068d9cccb49a3"
}