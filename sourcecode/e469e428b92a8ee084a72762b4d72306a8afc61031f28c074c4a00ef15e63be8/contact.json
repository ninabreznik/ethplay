{
  "address": "0xa13db2f412cef4b4186ed1d2d12c9ec16bde82f4",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "GameV001",
  "compilerVersion": "v0.4.24+commit.e67f0147",
  "optimization": false,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2018-08-04\n*/\n\npragma solidity ^0.4.24;\n\n/**\n * @title Ownable\n * @dev The Ownable contract has an owner address, and provides basic authorization control\n * functions, this simplifies the implementation of \"user permissions\".\n */\ncontract Ownable {\n  address public owner;\n\n\n  event OwnershipRenounced(address indexed previousOwner);\n  event OwnershipTransferred(\n    address indexed previousOwner,\n    address indexed newOwner\n  );\n\n\n  /**\n   * @dev The Ownable constructor sets the original `owner` of the contract to the sender\n   * account.\n   */\n  constructor() public {\n    owner = msg.sender;\n  }\n\n  /**\n   * @dev Throws if called by any account other than the owner.\n   */\n  modifier onlyOwner() {\n    require(msg.sender == owner);\n    _;\n  }\n\n  /**\n   * @dev Allows the current owner to relinquish control of the contract.\n   */\n  function renounceOwnership() public onlyOwner {\n    emit OwnershipRenounced(owner);\n    owner = address(0);\n  }\n\n  /**\n   * @dev Allows the current owner to transfer control of the contract to a newOwner.\n   * @param _newOwner The address to transfer ownership to.\n   */\n  function transferOwnership(address _newOwner) public onlyOwner {\n    _transferOwnership(_newOwner);\n  }\n\n  /**\n   * @dev Transfers control of the contract to a newOwner.\n   * @param _newOwner The address to transfer ownership to.\n   */\n  function _transferOwnership(address _newOwner) internal {\n    require(_newOwner != address(0));\n    emit OwnershipTransferred(owner, _newOwner);\n    owner = _newOwner;\n  }\n}\n\n/**\n * @title Pausable\n * @dev Base contract which allows children to implement an emergency stop mechanism.\n */\ncontract Pausable is Ownable {\n  event Pause();\n  event Unpause();\n\n  bool public paused = false;\n\n\n  /**\n   * @dev Modifier to make a function callable only when the contract is not paused.\n   */\n  modifier whenNotPaused() {\n    require(!paused);\n    _;\n  }\n\n  /**\n   * @dev Modifier to make a function callable only when the contract is paused.\n   */\n  modifier whenPaused() {\n    require(paused);\n    _;\n  }\n\n  /**\n   * @dev called by the owner to pause, triggers stopped state\n   */\n  function pause() onlyOwner whenNotPaused public {\n    paused = true;\n    emit Pause();\n  }\n\n  /**\n   * @dev called by the owner to unpause, returns to normal state\n   */\n  function unpause() onlyOwner whenPaused public {\n    paused = false;\n    emit Unpause();\n  }\n}\n\n/**\n * @title Claimable\n * @dev Extension for the Ownable contract, where the ownership needs to be claimed.\n * This allows the new owner to accept the transfer.\n */\ncontract Claimable is Ownable {\n  address public pendingOwner;\n\n  /**\n   * @dev Modifier throws if called by any account other than the pendingOwner.\n   */\n  modifier onlyPendingOwner() {\n    require(msg.sender == pendingOwner);\n    _;\n  }\n\n  /**\n   * @dev Allows the current owner to set the pendingOwner address.\n   * @param newOwner The address to transfer ownership to.\n   */\n  function transferOwnership(address newOwner) onlyOwner public {\n    pendingOwner = newOwner;\n  }\n\n  /**\n   * @dev Allows the pendingOwner address to finalize the transfer.\n   */\n  function claimOwnership() onlyPendingOwner public {\n    emit OwnershipTransferred(owner, pendingOwner);\n    owner = pendingOwner;\n    pendingOwner = address(0);\n  }\n}\n\n/// @title AccessByGame\ncontract AccessByGame is Pausable, Claimable {\n  mapping(address => bool) internal contractAccess;\n\n  modifier onlyAccessByGame {\n    require(!paused && (msg.sender == owner || contractAccess[msg.sender] == true));\n    _;\n  }\n\n  function grantAccess(address _address)\n    onlyOwner\n    public\n  {\n    contractAccess[_address] = true;\n  }\n\n  function revokeAccess(address _address)\n    onlyOwner\n    public\n  {\n    contractAccess[_address] = false;\n  }\n}\n\n/**\n * @title ERC20Basic\n * @dev Simpler version of ERC20 interface\n * @dev see https://github.com/ethereum/EIPs/issues/179\n */\ncontract ERC20Basic {\n  function totalSupply() public view returns (uint256);\n  function balanceOf(address who) public view returns (uint256);\n  function transfer(address to, uint256 value) public returns (bool);\n  event Transfer(address indexed from, address indexed to, uint256 value);\n}\n\n/**\n * @title ERC20 interface\n * @dev see https://github.com/ethereum/EIPs/issues/20\n */\ncontract ERC20 is ERC20Basic {\n  function allowance(address owner, address spender)\n    public view returns (uint256);\n\n  function transferFrom(address from, address to, uint256 value)\n    public returns (bool);\n\n  function approve(address spender, uint256 value) public returns (bool);\n  event Approval(\n    address indexed owner,\n    address indexed spender,\n    uint256 value\n  );\n}\n\n/**\n * @title ERC827 interface, an extension of ERC20 token standard\n *\n * @dev Interface of a ERC827 token, following the ERC20 standard with extra\n * @dev methods to transfer value and data and execute calls in transfers and\n * @dev approvals.\n */\ncontract ERC827 is ERC20 {\n  function approveAndCall(\n    address _spender,\n    uint256 _value,\n    bytes _data\n  )\n    public\n    payable\n    returns (bool);\n\n  function transferAndCall(\n    address _to,\n    uint256 _value,\n    bytes _data\n  )\n    public\n    payable\n    returns (bool);\n\n  function transferFromAndCall(\n    address _from,\n    address _to,\n    uint256 _value,\n    bytes _data\n  )\n    public\n    payable\n    returns (bool);\n}\n\n/**\n * @title SafeMath\n * @dev Math operations with safety checks that throw on error\n */\nlibrary SafeMath {\n\n  /**\n  * @dev Multiplies two numbers, throws on overflow.\n  */\n  function mul(uint256 a, uint256 b) internal pure returns (uint256 c) {\n    // Gas optimization: this is cheaper than asserting 'a' not being zero, but the\n    // benefit is lost if 'b' is also tested.\n    // See: https://github.com/OpenZeppelin/openzeppelin-solidity/pull/522\n    if (a == 0) {\n      return 0;\n    }\n\n    c = a * b;\n    assert(c / a == b);\n    return c;\n  }\n\n  /**\n  * @dev Integer division of two numbers, truncating the quotient.\n  */\n  function div(uint256 a, uint256 b) internal pure returns (uint256) {\n    // assert(b > 0); // Solidity automatically throws when dividing by 0\n    // uint256 c = a / b;\n    // assert(a == b * c + a % b); // There is no case in which this doesn't hold\n    return a / b;\n  }\n\n  /**\n  * @dev Subtracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend).\n  */\n  function sub(uint256 a, uint256 b) internal pure returns (uint256) {\n    assert(b <= a);\n    return a - b;\n  }\n\n  /**\n  * @dev Adds two numbers, throws on overflow.\n  */\n  function add(uint256 a, uint256 b) internal pure returns (uint256 c) {\n    c = a + b;\n    assert(c >= a);\n    return c;\n  }\n}\n\n/**\n * @title Basic token\n * @dev Basic version of StandardToken, with no allowances.\n */\ncontract BasicToken is ERC20Basic {\n  using SafeMath for uint256;\n\n  mapping(address => uint256) balances;\n\n  uint256 totalSupply_;\n\n  /**\n  * @dev total number of tokens in existence\n  */\n  function totalSupply() public view returns (uint256) {\n    return totalSupply_;\n  }\n\n  /**\n  * @dev transfer token for a specified address\n  * @param _to The address to transfer to.\n  * @param _value The amount to be transferred.\n  */\n  function transfer(address _to, uint256 _value) public returns (bool) {\n    require(_to != address(0));\n    require(_value <= balances[msg.sender]);\n\n    balances[msg.sender] = balances[msg.sender].sub(_value);\n    balances[_to] = balances[_to].add(_value);\n    emit Transfer(msg.sender, _to, _value);\n    return true;\n  }\n\n  /**\n  * @dev Gets the balance of the specified address.\n  * @param _owner The address to query the the balance of.\n  * @return An uint256 representing the amount owned by the passed address.\n  */\n  function balanceOf(address _owner) public view returns (uint256) {\n    return balances[_owner];\n  }\n\n}\n\n/**\n * @title Standard ERC20 token\n *\n * @dev Implementation of the basic standard token.\n * @dev https://github.com/ethereum/EIPs/issues/20\n * @dev Based on code by FirstBlood: https://github.com/Firstbloodio/token/blob/master/smart_contract/FirstBloodToken.sol\n */\ncontract StandardToken is ERC20, BasicToken {\n\n  mapping (address => mapping (address => uint256)) internal allowed;\n\n\n  /**\n   * @dev Transfer tokens from one address to another\n   * @param _from address The address which you want to send tokens from\n   * @param _to address The address which you want to transfer to\n   * @param _value uint256 the amount of tokens to be transferred\n   */\n  function transferFrom(\n    address _from,\n    address _to,\n    uint256 _value\n  )\n    public\n    returns (bool)\n  {\n    require(_to != address(0));\n    require(_value <= balances[_from]);\n    require(_value <= allowed[_from][msg.sender]);\n\n    balances[_from] = balances[_from].sub(_value);\n    balances[_to] = balances[_to].add(_value);\n    allowed[_from][msg.sender] = allowed[_from][msg.sender].sub(_value);\n    emit Transfer(_from, _to, _value);\n    return true;\n  }\n\n  /**\n   * @dev Approve the passed address to spend the specified amount of tokens on behalf of msg.sender.\n   *\n   * Beware that changing an allowance with this method brings the risk that someone may use both the old\n   * and the new allowance by unfortunate transaction ordering. One possible solution to mitigate this\n   * race condition is to first reduce the spender's allowance to 0 and set the desired value afterwards:\n   * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\n   * @param _spender The address which will spend the funds.\n   * @param _value The amount of tokens to be spent.\n   */\n  function approve(address _spender, uint256 _value) public returns (bool) {\n    allowed[msg.sender][_spender] = _value;\n    emit Approval(msg.sender, _spender, _value);\n    return true;\n  }\n\n  /**\n   * @dev Function to check the amount of tokens that an owner allowed to a spender.\n   * @param _owner address The address which owns the funds.\n   * @param _spender address The address which will spend the funds.\n   * @return A uint256 specifying the amount of tokens still available for the spender.\n   */\n  function allowance(\n    address _owner,\n    address _spender\n   )\n    public\n    view\n    returns (uint256)\n  {\n    return allowed[_owner][_spender];\n  }\n\n  /**\n   * @dev Increase the amount of tokens that an owner allowed to a spender.\n   *\n   * approve should be called when allowed[_spender] == 0. To increment\n   * allowed value is better to use this function to avoid 2 calls (and wait until\n   * the first transaction is mined)\n   * From MonolithDAO Token.sol\n   * @param _spender The address which will spend the funds.\n   * @param _addedValue The amount of tokens to increase the allowance by.\n   */\n  function increaseApproval(\n    address _spender,\n    uint _addedValue\n  )\n    public\n    returns (bool)\n  {\n    allowed[msg.sender][_spender] = (\n      allowed[msg.sender][_spender].add(_addedValue));\n    emit Approval(msg.sender, _spender, allowed[msg.sender][_spender]);\n    return true;\n  }\n\n  /**\n   * @dev Decrease the amount of tokens that an owner allowed to a spender.\n   *\n   * approve should be called when allowed[_spender] == 0. To decrement\n   * allowed value is better to use this function to avoid 2 calls (and wait until\n   * the first transaction is mined)\n   * From MonolithDAO Token.sol\n   * @param _spender The address which will spend the funds.\n   * @param _subtractedValue The amount of tokens to decrease the allowance by.\n   */\n  function decreaseApproval(\n    address _spender,\n    uint _subtractedValue\n  )\n    public\n    returns (bool)\n  {\n    uint oldValue = allowed[msg.sender][_spender];\n    if (_subtractedValue > oldValue) {\n      allowed[msg.sender][_spender] = 0;\n    } else {\n      allowed[msg.sender][_spender] = oldValue.sub(_subtractedValue);\n    }\n    emit Approval(msg.sender, _spender, allowed[msg.sender][_spender]);\n    return true;\n  }\n\n}\n\ncontract ERC827Caller {\n  function makeCall(address _target, bytes _data) external payable returns (bool) {\n    // solium-disable-next-line security/no-call-value\n    return _target.call.value(msg.value)(_data);\n  }\n}\n\n/**\n * @title ERC827, an extension of ERC20 token standard\n *\n * @dev Implementation the ERC827, following the ERC20 standard with extra\n * @dev methods to transfer value and data and execute calls in transfers and\n * @dev approvals.\n *\n * @dev Uses OpenZeppelin StandardToken.\n */\ncontract ERC827Token is ERC827, StandardToken {\n  ERC827Caller internal caller_;\n\n  constructor() public {\n    caller_ = new ERC827Caller();\n  }\n\n  /**\n   * @dev Addition to ERC20 token methods. It allows to\n   * @dev approve the transfer of value and execute a call with the sent data.\n   *\n   * @dev Beware that changing an allowance with this method brings the risk that\n   * @dev someone may use both the old and the new allowance by unfortunate\n   * @dev transaction ordering. One possible solution to mitigate this race condition\n   * @dev is to first reduce the spender's allowance to 0 and set the desired value\n   * @dev afterwards:\n   * @dev https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\n   *\n   * @param _spender The address that will spend the funds.\n   * @param _value The amount of tokens to be spent.\n   * @param _data ABI-encoded contract call to call `_to` address.\n   *\n   * @return true if the call function was executed successfully\n   */\n  function approveAndCall(\n    address _spender,\n    uint256 _value,\n    bytes _data\n  )\n    public\n    payable\n    returns (bool)\n  {\n    require(_spender != address(this));\n\n    super.approve(_spender, _value);\n\n    // solium-disable-next-line security/no-call-value\n    require(caller_.makeCall.value(msg.value)(_spender, _data));\n\n    return true;\n  }\n\n  /**\n   * @dev Addition to ERC20 token methods. Transfer tokens to a specified\n   * @dev address and execute a call with the sent data on the same transaction\n   *\n   * @param _to address The address which you want to transfer to\n   * @param _value uint256 the amout of tokens to be transfered\n   * @param _data ABI-encoded contract call to call `_to` address.\n   *\n   * @return true if the call function was executed successfully\n   */\n  function transferAndCall(\n    address _to,\n    uint256 _value,\n    bytes _data\n  )\n    public\n    payable\n    returns (bool)\n  {\n    require(_to != address(this));\n\n    super.transfer(_to, _value);\n\n    // solium-disable-next-line security/no-call-value\n    require(caller_.makeCall.value(msg.value)(_to, _data));\n    return true;\n  }\n\n  /**\n   * @dev Addition to ERC20 token methods. Transfer tokens from one address to\n   * @dev another and make a contract call on the same transaction\n   *\n   * @param _from The address which you want to send tokens from\n   * @param _to The address which you want to transfer to\n   * @param _value The amout of tokens to be transferred\n   * @param _data ABI-encoded contract call to call `_to` address.\n   *\n   * @return true if the call function was executed successfully\n   */\n  function transferFromAndCall(\n    address _from,\n    address _to,\n    uint256 _value,\n    bytes _data\n  )\n    public payable returns (bool)\n  {\n    require(_to != address(this));\n\n    super.transferFrom(_from, _to, _value);\n\n    // solium-disable-next-line security/no-call-value\n    require(caller_.makeCall.value(msg.value)(_to, _data));\n    return true;\n  }\n\n  /**\n   * @dev Addition to StandardToken methods. Increase the amount of tokens that\n   * @dev an owner allowed to a spender and execute a call with the sent data.\n   *\n   * @dev approve should be called when allowed[_spender] == 0. To increment\n   * @dev allowed value is better to use this function to avoid 2 calls (and wait until\n   * @dev the first transaction is mined)\n   * @dev From MonolithDAO Token.sol\n   *\n   * @param _spender The address which will spend the funds.\n   * @param _addedValue The amount of tokens to increase the allowance by.\n   * @param _data ABI-encoded contract call to call `_spender` address.\n   */\n  function increaseApprovalAndCall(\n    address _spender,\n    uint _addedValue,\n    bytes _data\n  )\n    public\n    payable\n    returns (bool)\n  {\n    require(_spender != address(this));\n\n    super.increaseApproval(_spender, _addedValue);\n\n    // solium-disable-next-line security/no-call-value\n    require(caller_.makeCall.value(msg.value)(_spender, _data));\n\n    return true;\n  }\n\n  /**\n   * @dev Addition to StandardToken methods. Decrease the amount of tokens that\n   * @dev an owner allowed to a spender and execute a call with the sent data.\n   *\n   * @dev approve should be called when allowed[_spender] == 0. To decrement\n   * @dev allowed value is better to use this function to avoid 2 calls (and wait until\n   * @dev the first transaction is mined)\n   * @dev From MonolithDAO Token.sol\n   *\n   * @param _spender The address which will spend the funds.\n   * @param _subtractedValue The amount of tokens to decrease the allowance by.\n   * @param _data ABI-encoded contract call to call `_spender` address.\n   */\n  function decreaseApprovalAndCall(\n    address _spender,\n    uint _subtractedValue,\n    bytes _data\n  )\n    public\n    payable\n    returns (bool)\n  {\n    require(_spender != address(this));\n\n    super.decreaseApproval(_spender, _subtractedValue);\n\n    // solium-disable-next-line security/no-call-value\n    require(caller_.makeCall.value(msg.value)(_spender, _data));\n\n    return true;\n  }\n\n}\n\n/**\n * @title Mintable token\n * @dev Simple ERC20 Token example, with mintable token creation\n * @dev Issue: * https://github.com/OpenZeppelin/openzeppelin-solidity/issues/120\n * Based on code by TokenMarketNet: https://github.com/TokenMarketNet/ico/blob/master/contracts/MintableToken.sol\n */\ncontract MintableToken is StandardToken, Ownable {\n  event Mint(address indexed to, uint256 amount);\n  event MintFinished();\n\n  bool public mintingFinished = false;\n\n\n  modifier canMint() {\n    require(!mintingFinished);\n    _;\n  }\n\n  modifier hasMintPermission() {\n    require(msg.sender == owner);\n    _;\n  }\n\n  /**\n   * @dev Function to mint tokens\n   * @param _to The address that will receive the minted tokens.\n   * @param _amount The amount of tokens to mint.\n   * @return A boolean that indicates if the operation was successful.\n   */\n  function mint(\n    address _to,\n    uint256 _amount\n  )\n    hasMintPermission\n    canMint\n    public\n    returns (bool)\n  {\n    totalSupply_ = totalSupply_.add(_amount);\n    balances[_to] = balances[_to].add(_amount);\n    emit Mint(_to, _amount);\n    emit Transfer(address(0), _to, _amount);\n    return true;\n  }\n\n  /**\n   * @dev Function to stop minting new tokens.\n   * @return True if the operation was successful.\n   */\n  function finishMinting() onlyOwner canMint public returns (bool) {\n    mintingFinished = true;\n    emit MintFinished();\n    return true;\n  }\n}\n\n/// @title EverGold\n/// @dev ERC827 Token for games.\ncontract EverGold is ERC827Token, MintableToken, AccessByGame {\n  string public constant name = \"Ever Gold\";\n  string public constant symbol = \"EG\";\n  uint8 public constant decimals = 0;\n\n/**\n   * @dev Function to mint tokens\n   * @param _to The address that will receive the minted tokens.\n   * @param _amount The amount of tokens to mint.\n   * @return A boolean that indicates if the operation was successful.\n   */\n  function mint(\n    address _to,\n    uint256 _amount\n  )\n    onlyAccessByGame\n    canMint\n    public\n    returns (bool)\n  {\n    totalSupply_ = totalSupply_.add(_amount);\n    balances[_to] = balances[_to].add(_amount);\n    emit Mint(_to, _amount);\n    emit Transfer(address(0), _to, _amount);\n    return true;\n  }\n  function transfer(address _to, uint256 _value)\n    public\n    whenNotPaused\n    returns (bool)\n  {\n    return super.transfer(_to, _value);\n  }\n\n  function transferFrom(address _from, address _to, uint256 _value)\n    public\n    whenNotPaused\n    returns (bool)\n  {\n    return super.transferFrom(_from, _to, _value);\n  }\n\n  function approve(address _spender, uint256 _value)\n    public\n    whenNotPaused\n    returns (bool)\n  {\n    return super.approve(_spender, _value);\n  }\n\n  function approveAndCall(\n    address _spender,\n    uint256 _value,\n    bytes _data\n  )\n    public\n    payable\n    whenNotPaused\n    returns (bool)\n  {\n    return super.approveAndCall(_spender, _value, _data);\n  }\n\n  function transferAndCall(\n    address _to,\n    uint256 _value,\n    bytes _data\n  )\n    public\n    payable\n    whenNotPaused\n    returns (bool)\n  {\n    return super.transferAndCall(_to, _value, _data);\n  }\n\n  function transferFromAndCall(\n    address _from,\n    address _to,\n    uint256 _value,\n    bytes _data\n  )\n    public\n    payable\n    whenNotPaused\n    returns (bool)\n  {\n    return super.transferFromAndCall(_from, _to, _value, _data);\n  }\n\n  function increaseApprovalAndCall(\n    address _spender,\n    uint _addedValue,\n    bytes _data\n  )\n    public\n    payable\n    whenNotPaused\n    returns (bool)\n  {\n    return super.increaseApprovalAndCall(_spender, _addedValue, _data);\n  }\n\n  function decreaseApprovalAndCall(\n    address _spender,\n    uint _subtractedValue,\n    bytes _data\n  )\n    public\n    payable\n    whenNotPaused\n    returns (bool)\n  {\n    return super.decreaseApprovalAndCall(_spender, _subtractedValue, _data);\n  }\n}\n\nlibrary StringLib {\n  function generateName(bytes16 _s, uint256 _len, uint256 _n)\n    public\n    pure\n    returns (bytes16 ret)\n  {\n    uint256 v = _n;\n    bytes16 num = 0;\n    while (v > 0) {\n      num = bytes16(uint(num) / (2 ** 8));\n      num |= bytes16(((v % 10) + 48) * 2 ** (8 * 15));\n      v /= 10;\n    }\n    ret = _s | bytes16(uint(num) / (2 ** (8 * _len)));\n    return ret;\n  }\n}\n\n/**\n * @title ERC721 Non-Fungible Token Standard basic interface\n * @dev see https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\n */\ncontract ERC721Basic {\n  event Transfer(\n    address indexed _from,\n    address indexed _to,\n    uint256 _tokenId\n  );\n  event Approval(\n    address indexed _owner,\n    address indexed _approved,\n    uint256 _tokenId\n  );\n  event ApprovalForAll(\n    address indexed _owner,\n    address indexed _operator,\n    bool _approved\n  );\n\n  function balanceOf(address _owner) public view returns (uint256 _balance);\n  function ownerOf(uint256 _tokenId) public view returns (address _owner);\n  function exists(uint256 _tokenId) public view returns (bool _exists);\n\n  function approve(address _to, uint256 _tokenId) public;\n  function getApproved(uint256 _tokenId)\n    public view returns (address _operator);\n\n  function setApprovalForAll(address _operator, bool _approved) public;\n  function isApprovedForAll(address _owner, address _operator)\n    public view returns (bool);\n\n  function transferFrom(address _from, address _to, uint256 _tokenId) public;\n  function safeTransferFrom(address _from, address _to, uint256 _tokenId)\n    public;\n\n  function safeTransferFrom(\n    address _from,\n    address _to,\n    uint256 _tokenId,\n    bytes _data\n  )\n    public;\n}\n\n/**\n * @title ERC-721 Non-Fungible Token Standard, optional enumeration extension\n * @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\n */\ncontract ERC721Enumerable is ERC721Basic {\n  function totalSupply() public view returns (uint256);\n  function tokenOfOwnerByIndex(\n    address _owner,\n    uint256 _index\n  )\n    public\n    view\n    returns (uint256 _tokenId);\n\n  function tokenByIndex(uint256 _index) public view returns (uint256);\n}\n\n\n/**\n * @title ERC-721 Non-Fungible Token Standard, optional metadata extension\n * @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\n */\ncontract ERC721Metadata is ERC721Basic {\n  function name() public view returns (string _name);\n  function symbol() public view returns (string _symbol);\n  function tokenURI(uint256 _tokenId) public view returns (string);\n}\n\n\n/**\n * @title ERC-721 Non-Fungible Token Standard, full implementation interface\n * @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\n */\ncontract ERC721 is ERC721Basic, ERC721Enumerable, ERC721Metadata {\n}\n\n/**\n * Utility library of inline functions on addresses\n */\nlibrary AddressUtils {\n\n  /**\n   * Returns whether the target address is a contract\n   * @dev This function will return false if invoked during the constructor of a contract,\n   *  as the code is not actually created until after the constructor finishes.\n   * @param addr address to check\n   * @return whether the target address is a contract\n   */\n  function isContract(address addr) internal view returns (bool) {\n    uint256 size;\n    // XXX Currently there is no better way to check if there is a contract in an address\n    // than to check the size of the code at that address.\n    // See https://ethereum.stackexchange.com/a/14016/36603\n    // for more details about how this works.\n    // TODO Check this again before the Serenity release, because all addresses will be\n    // contracts then.\n    // solium-disable-next-line security/no-inline-assembly\n    assembly { size := extcodesize(addr) }\n    return size > 0;\n  }\n\n}\n\n/**\n * @title ERC721 token receiver interface\n * @dev Interface for any contract that wants to support safeTransfers\n *  from ERC721 asset contracts.\n */\ncontract ERC721Receiver {\n  /**\n   * @dev Magic value to be returned upon successful reception of an NFT\n   *  Equals to `bytes4(keccak256(\"onERC721Received(address,uint256,bytes)\"))`,\n   *  which can be also obtained as `ERC721Receiver(0).onERC721Received.selector`\n   */\n  bytes4 constant ERC721_RECEIVED = 0xf0b9e5ba;\n\n  /**\n   * @notice Handle the receipt of an NFT\n   * @dev The ERC721 smart contract calls this function on the recipient\n   *  after a `safetransfer`. This function MAY throw to revert and reject the\n   *  transfer. This function MUST use 50,000 gas or less. Return of other\n   *  than the magic value MUST result in the transaction being reverted.\n   *  Note: the contract address is always the message sender.\n   * @param _from The sending address\n   * @param _tokenId The NFT identifier which is being transfered\n   * @param _data Additional data with no specified format\n   * @return `bytes4(keccak256(\"onERC721Received(address,uint256,bytes)\"))`\n   */\n  function onERC721Received(\n    address _from,\n    uint256 _tokenId,\n    bytes _data\n  )\n    public\n    returns(bytes4);\n}\n\n/**\n * @title ERC721 Non-Fungible Token Standard basic implementation\n * @dev see https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\n */\ncontract ERC721BasicToken is ERC721Basic {\n  using SafeMath for uint256;\n  using AddressUtils for address;\n\n  // Equals to `bytes4(keccak256(\"onERC721Received(address,uint256,bytes)\"))`\n  // which can be also obtained as `ERC721Receiver(0).onERC721Received.selector`\n  bytes4 constant ERC721_RECEIVED = 0xf0b9e5ba;\n\n  // Mapping from token ID to owner\n  mapping (uint256 => address) internal tokenOwner;\n\n  // Mapping from token ID to approved address\n  mapping (uint256 => address) internal tokenApprovals;\n\n  // Mapping from owner to number of owned token\n  mapping (address => uint256) internal ownedTokensCount;\n\n  // Mapping from owner to operator approvals\n  mapping (address => mapping (address => bool)) internal operatorApprovals;\n\n  /**\n   * @dev Guarantees msg.sender is owner of the given token\n   * @param _tokenId uint256 ID of the token to validate its ownership belongs to msg.sender\n   */\n  modifier onlyOwnerOf(uint256 _tokenId) {\n    require(ownerOf(_tokenId) == msg.sender);\n    _;\n  }\n\n  /**\n   * @dev Checks msg.sender can transfer a token, by being owner, approved, or operator\n   * @param _tokenId uint256 ID of the token to validate\n   */\n  modifier canTransfer(uint256 _tokenId) {\n    require(isApprovedOrOwner(msg.sender, _tokenId));\n    _;\n  }\n\n  /**\n   * @dev Gets the balance of the specified address\n   * @param _owner address to query the balance of\n   * @return uint256 representing the amount owned by the passed address\n   */\n  function balanceOf(address _owner) public view returns (uint256) {\n    require(_owner != address(0));\n    return ownedTokensCount[_owner];\n  }\n\n  /**\n   * @dev Gets the owner of the specified token ID\n   * @param _tokenId uint256 ID of the token to query the owner of\n   * @return owner address currently marked as the owner of the given token ID\n   */\n  function ownerOf(uint256 _tokenId) public view returns (address) {\n    address owner = tokenOwner[_tokenId];\n    require(owner != address(0));\n    return owner;\n  }\n\n  /**\n   * @dev Returns whether the specified token exists\n   * @param _tokenId uint256 ID of the token to query the existence of\n   * @return whether the token exists\n   */\n  function exists(uint256 _tokenId) public view returns (bool) {\n    address owner = tokenOwner[_tokenId];\n    return owner != address(0);\n  }\n\n  /**\n   * @dev Approves another address to transfer the given token ID\n   * @dev The zero address indicates there is no approved address.\n   * @dev There can only be one approved address per token at a given time.\n   * @dev Can only be called by the token owner or an approved operator.\n   * @param _to address to be approved for the given token ID\n   * @param _tokenId uint256 ID of the token to be approved\n   */\n  function approve(address _to, uint256 _tokenId) public {\n    address owner = ownerOf(_tokenId);\n    require(_to != owner);\n    require(msg.sender == owner || isApprovedForAll(owner, msg.sender));\n\n    if (getApproved(_tokenId) != address(0) || _to != address(0)) {\n      tokenApprovals[_tokenId] = _to;\n      emit Approval(owner, _to, _tokenId);\n    }\n  }\n\n  /**\n   * @dev Gets the approved address for a token ID, or zero if no address set\n   * @param _tokenId uint256 ID of the token to query the approval of\n   * @return address currently approved for the given token ID\n   */\n  function getApproved(uint256 _tokenId) public view returns (address) {\n    return tokenApprovals[_tokenId];\n  }\n\n  /**\n   * @dev Sets or unsets the approval of a given operator\n   * @dev An operator is allowed to transfer all tokens of the sender on their behalf\n   * @param _to operator address to set the approval\n   * @param _approved representing the status of the approval to be set\n   */\n  function setApprovalForAll(address _to, bool _approved) public {\n    require(_to != msg.sender);\n    operatorApprovals[msg.sender][_to] = _approved;\n    emit ApprovalForAll(msg.sender, _to, _approved);\n  }\n\n  /**\n   * @dev Tells whether an operator is approved by a given owner\n   * @param _owner owner address which you want to query the approval of\n   * @param _operator operator address which you want to query the approval of\n   * @return bool whether the given operator is approved by the given owner\n   */\n  function isApprovedForAll(\n    address _owner,\n    address _operator\n  )\n    public\n    view\n    returns (bool)\n  {\n    return operatorApprovals[_owner][_operator];\n  }\n\n  /**\n   * @dev Transfers the ownership of a given token ID to another address\n   * @dev Usage of this method is discouraged, use `safeTransferFrom` whenever possible\n   * @dev Requires the msg sender to be the owner, approved, or operator\n   * @param _from current owner of the token\n   * @param _to address to receive the ownership of the given token ID\n   * @param _tokenId uint256 ID of the token to be transferred\n  */\n  function transferFrom(\n    address _from,\n    address _to,\n    uint256 _tokenId\n  )\n    public\n    canTransfer(_tokenId)\n  {\n    require(_from != address(0));\n    require(_to != address(0));\n\n    clearApproval(_from, _tokenId);\n    removeTokenFrom(_from, _tokenId);\n    addTokenTo(_to, _tokenId);\n\n    emit Transfer(_from, _to, _tokenId);\n  }\n\n  /**\n   * @dev Safely transfers the ownership of a given token ID to another address\n   * @dev If the target address is a contract, it must implement `onERC721Received`,\n   *  which is called upon a safe transfer, and return the magic value\n   *  `bytes4(keccak256(\"onERC721Received(address,uint256,bytes)\"))`; otherwise,\n   *  the transfer is reverted.\n   * @dev Requires the msg sender to be the owner, approved, or operator\n   * @param _from current owner of the token\n   * @param _to address to receive the ownership of the given token ID\n   * @param _tokenId uint256 ID of the token to be transferred\n  */\n  function safeTransferFrom(\n    address _from,\n    address _to,\n    uint256 _tokenId\n  )\n    public\n    canTransfer(_tokenId)\n  {\n    // solium-disable-next-line arg-overflow\n    safeTransferFrom(_from, _to, _tokenId, \"\");\n  }\n\n  /**\n   * @dev Safely transfers the ownership of a given token ID to another address\n   * @dev If the target address is a contract, it must implement `onERC721Received`,\n   *  which is called upon a safe transfer, and return the magic value\n   *  `bytes4(keccak256(\"onERC721Received(address,uint256,bytes)\"))`; otherwise,\n   *  the transfer is reverted.\n   * @dev Requires the msg sender to be the owner, approved, or operator\n   * @param _from current owner of the token\n   * @param _to address to receive the ownership of the given token ID\n   * @param _tokenId uint256 ID of the token to be transferred\n   * @param _data bytes data to send along with a safe transfer check\n   */\n  function safeTransferFrom(\n    address _from,\n    address _to,\n    uint256 _tokenId,\n    bytes _data\n  )\n    public\n    canTransfer(_tokenId)\n  {\n    transferFrom(_from, _to, _tokenId);\n    // solium-disable-next-line arg-overflow\n    require(checkAndCallSafeTransfer(_from, _to, _tokenId, _data));\n  }\n\n  /**\n   * @dev Returns whether the given spender can transfer a given token ID\n   * @param _spender address of the spender to query\n   * @param _tokenId uint256 ID of the token to be transferred\n   * @return bool whether the msg.sender is approved for the given token ID,\n   *  is an operator of the owner, or is the owner of the token\n   */\n  function isApprovedOrOwner(\n    address _spender,\n    uint256 _tokenId\n  )\n    internal\n    view\n    returns (bool)\n  {\n    address owner = ownerOf(_tokenId);\n    // Disable solium check because of\n    // https://github.com/duaraghav8/Solium/issues/175\n    // solium-disable-next-line operator-whitespace\n    return (\n      _spender == owner ||\n      getApproved(_tokenId) == _spender ||\n      isApprovedForAll(owner, _spender)\n    );\n  }\n\n  /**\n   * @dev Internal function to mint a new token\n   * @dev Reverts if the given token ID already exists\n   * @param _to The address that will own the minted token\n   * @param _tokenId uint256 ID of the token to be minted by the msg.sender\n   */\n  function _mint(address _to, uint256 _tokenId) internal {\n    require(_to != address(0));\n    addTokenTo(_to, _tokenId);\n    emit Transfer(address(0), _to, _tokenId);\n  }\n\n  /**\n   * @dev Internal function to burn a specific token\n   * @dev Reverts if the token does not exist\n   * @param _tokenId uint256 ID of the token being burned by the msg.sender\n   */\n  function _burn(address _owner, uint256 _tokenId) internal {\n    clearApproval(_owner, _tokenId);\n    removeTokenFrom(_owner, _tokenId);\n    emit Transfer(_owner, address(0), _tokenId);\n  }\n\n  /**\n   * @dev Internal function to clear current approval of a given token ID\n   * @dev Reverts if the given address is not indeed the owner of the token\n   * @param _owner owner of the token\n   * @param _tokenId uint256 ID of the token to be transferred\n   */\n  function clearApproval(address _owner, uint256 _tokenId) internal {\n    require(ownerOf(_tokenId) == _owner);\n    if (tokenApprovals[_tokenId] != address(0)) {\n      tokenApprovals[_tokenId] = address(0);\n      emit Approval(_owner, address(0), _tokenId);\n    }\n  }\n\n  /**\n   * @dev Internal function to add a token ID to the list of a given address\n   * @param _to address representing the new owner of the given token ID\n   * @param _tokenId uint256 ID of the token to be added to the tokens list of the given address\n   */\n  function addTokenTo(address _to, uint256 _tokenId) internal {\n    require(tokenOwner[_tokenId] == address(0));\n    tokenOwner[_tokenId] = _to;\n    ownedTokensCount[_to] = ownedTokensCount[_to].add(1);\n  }\n\n  /**\n   * @dev Internal function to remove a token ID from the list of a given address\n   * @param _from address representing the previous owner of the given token ID\n   * @param _tokenId uint256 ID of the token to be removed from the tokens list of the given address\n   */\n  function removeTokenFrom(address _from, uint256 _tokenId) internal {\n    require(ownerOf(_tokenId) == _from);\n    ownedTokensCount[_from] = ownedTokensCount[_from].sub(1);\n    tokenOwner[_tokenId] = address(0);\n  }\n\n  /**\n   * @dev Internal function to invoke `onERC721Received` on a target address\n   * @dev The call is not executed if the target address is not a contract\n   * @param _from address representing the previous owner of the given token ID\n   * @param _to target address that will receive the tokens\n   * @param _tokenId uint256 ID of the token to be transferred\n   * @param _data bytes optional data to send along with the call\n   * @return whether the call correctly returned the expected magic value\n   */\n  function checkAndCallSafeTransfer(\n    address _from,\n    address _to,\n    uint256 _tokenId,\n    bytes _data\n  )\n    internal\n    returns (bool)\n  {\n    if (!_to.isContract()) {\n      return true;\n    }\n    bytes4 retval = ERC721Receiver(_to).onERC721Received(\n      _from, _tokenId, _data);\n    return (retval == ERC721_RECEIVED);\n  }\n}\n\n/**\n * @title Full ERC721 Token\n * This implementation includes all the required and some optional functionality of the ERC721 standard\n * Moreover, it includes approve all functionality using operator terminology\n * @dev see https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\n */\ncontract ERC721Token is ERC721, ERC721BasicToken {\n  // Token name\n  string internal name_;\n\n  // Token symbol\n  string internal symbol_;\n\n  // Mapping from owner to list of owned token IDs\n  mapping(address => uint256[]) internal ownedTokens;\n\n  // Mapping from token ID to index of the owner tokens list\n  mapping(uint256 => uint256) internal ownedTokensIndex;\n\n  // Array with all token ids, used for enumeration\n  uint256[] internal allTokens;\n\n  // Mapping from token id to position in the allTokens array\n  mapping(uint256 => uint256) internal allTokensIndex;\n\n  // Optional mapping for token URIs\n  mapping(uint256 => string) internal tokenURIs;\n\n  /**\n   * @dev Constructor function\n   */\n  constructor(string _name, string _symbol) public {\n    name_ = _name;\n    symbol_ = _symbol;\n  }\n\n  /**\n   * @dev Gets the token name\n   * @return string representing the token name\n   */\n  function name() public view returns (string) {\n    return name_;\n  }\n\n  /**\n   * @dev Gets the token symbol\n   * @return string representing the token symbol\n   */\n  function symbol() public view returns (string) {\n    return symbol_;\n  }\n\n  /**\n   * @dev Returns an URI for a given token ID\n   * @dev Throws if the token ID does not exist. May return an empty string.\n   * @param _tokenId uint256 ID of the token to query\n   */\n  function tokenURI(uint256 _tokenId) public view returns (string) {\n    require(exists(_tokenId));\n    return tokenURIs[_tokenId];\n  }\n\n  /**\n   * @dev Gets the token ID at a given index of the tokens list of the requested owner\n   * @param _owner address owning the tokens list to be accessed\n   * @param _index uint256 representing the index to be accessed of the requested tokens list\n   * @return uint256 token ID at the given index of the tokens list owned by the requested address\n   */\n  function tokenOfOwnerByIndex(\n    address _owner,\n    uint256 _index\n  )\n    public\n    view\n    returns (uint256)\n  {\n    require(_index < balanceOf(_owner));\n    return ownedTokens[_owner][_index];\n  }\n\n  /**\n   * @dev Gets the total amount of tokens stored by the contract\n   * @return uint256 representing the total amount of tokens\n   */\n  function totalSupply() public view returns (uint256) {\n    return allTokens.length;\n  }\n\n  /**\n   * @dev Gets the token ID at a given index of all the tokens in this contract\n   * @dev Reverts if the index is greater or equal to the total number of tokens\n   * @param _index uint256 representing the index to be accessed of the tokens list\n   * @return uint256 token ID at the given index of the tokens list\n   */\n  function tokenByIndex(uint256 _index) public view returns (uint256) {\n    require(_index < totalSupply());\n    return allTokens[_index];\n  }\n\n  /**\n   * @dev Internal function to set the token URI for a given token\n   * @dev Reverts if the token ID does not exist\n   * @param _tokenId uint256 ID of the token to set its URI\n   * @param _uri string URI to assign\n   */\n  function _setTokenURI(uint256 _tokenId, string _uri) internal {\n    require(exists(_tokenId));\n    tokenURIs[_tokenId] = _uri;\n  }\n\n  /**\n   * @dev Internal function to add a token ID to the list of a given address\n   * @param _to address representing the new owner of the given token ID\n   * @param _tokenId uint256 ID of the token to be added to the tokens list of the given address\n   */\n  function addTokenTo(address _to, uint256 _tokenId) internal {\n    super.addTokenTo(_to, _tokenId);\n    uint256 length = ownedTokens[_to].length;\n    ownedTokens[_to].push(_tokenId);\n    ownedTokensIndex[_tokenId] = length;\n  }\n\n  /**\n   * @dev Internal function to remove a token ID from the list of a given address\n   * @param _from address representing the previous owner of the given token ID\n   * @param _tokenId uint256 ID of the token to be removed from the tokens list of the given address\n   */\n  function removeTokenFrom(address _from, uint256 _tokenId) internal {\n    super.removeTokenFrom(_from, _tokenId);\n\n    uint256 tokenIndex = ownedTokensIndex[_tokenId];\n    uint256 lastTokenIndex = ownedTokens[_from].length.sub(1);\n    uint256 lastToken = ownedTokens[_from][lastTokenIndex];\n\n    ownedTokens[_from][tokenIndex] = lastToken;\n    ownedTokens[_from][lastTokenIndex] = 0;\n    // Note that this will handle single-element arrays. In that case, both tokenIndex and lastTokenIndex are going to\n    // be zero. Then we can make sure that we will remove _tokenId from the ownedTokens list since we are first swapping\n    // the lastToken to the first position, and then dropping the element placed in the last position of the list\n\n    ownedTokens[_from].length--;\n    ownedTokensIndex[_tokenId] = 0;\n    ownedTokensIndex[lastToken] = tokenIndex;\n  }\n\n  /**\n   * @dev Internal function to mint a new token\n   * @dev Reverts if the given token ID already exists\n   * @param _to address the beneficiary that will own the minted token\n   * @param _tokenId uint256 ID of the token to be minted by the msg.sender\n   */\n  function _mint(address _to, uint256 _tokenId) internal {\n    super._mint(_to, _tokenId);\n\n    allTokensIndex[_tokenId] = allTokens.length;\n    allTokens.push(_tokenId);\n  }\n\n  /**\n   * @dev Internal function to burn a specific token\n   * @dev Reverts if the token does not exist\n   * @param _owner owner of the token to burn\n   * @param _tokenId uint256 ID of the token being burned by the msg.sender\n   */\n  function _burn(address _owner, uint256 _tokenId) internal {\n    super._burn(_owner, _tokenId);\n\n    // Clear metadata (if any)\n    if (bytes(tokenURIs[_tokenId]).length != 0) {\n      delete tokenURIs[_tokenId];\n    }\n\n    // Reorg all tokens array\n    uint256 tokenIndex = allTokensIndex[_tokenId];\n    uint256 lastTokenIndex = allTokens.length.sub(1);\n    uint256 lastToken = allTokens[lastTokenIndex];\n\n    allTokens[tokenIndex] = lastToken;\n    allTokens[lastTokenIndex] = 0;\n\n    allTokens.length--;\n    allTokensIndex[_tokenId] = 0;\n    allTokensIndex[lastToken] = tokenIndex;\n  }\n\n}\n\ncontract CastleToken is ERC721Token, AccessByGame {\n  string constant NAME = \"Crypto Ninja Game Castle\";\n  string constant SYMBOL = \"CNC\";\n\n  uint256 constant MAX_WIDTH = 10;\n\n  uint8 constant LOG_SET = 0;\n  uint8 constant LOG_RESET = 1;\n  uint8 constant LOG_WIN = 2;\n  uint8 constant LOG_LOSS = 3;\n\n  struct Castle {\n    bytes16 name;\n    uint16 level;\n    uint32 exp;\n    uint8 width;\n    uint8 depth;\n    uint32 readyTime;\n    uint16 tryCount;\n    uint16 winCount;\n    uint16 lossCount;\n    uint8 levelPoint;\n    uint16 reward;\n  }\n\n  mapping (uint256 => bytes) internal traps;\n  mapping (uint256 => bytes32[]) internal logs;\n\n  EverGold internal goldToken;\n\n  uint8 public initWidth = 5;\n  uint8 public initDepth = 8;\n\n  uint256 public itemsPerPage = 10;\n\n  uint8 internal expOnSuccess = 3;\n  uint8 internal expOnFault = 1;\n  uint8 internal leveupExp = 10;\n\n  uint256 internal cooldownTime = 5 minutes;\n\n  Castle[] internal castles;\n\n  uint16 public price = 1000;\n\n  event NewCastle(uint256 castleid, uint256 width, uint256 depth);\n  event SetTraps(uint256 castleid);\n  event ResetTraps(uint256 castleid);\n  event UseTrap(uint256 castleid, uint256 path, uint256 trapIndex, uint256 power);\n\n  event AddLog(uint8 id, uint32 datetime, uint256 castleid, uint256 ninjaid, uint8 x, uint8 y, bool win);\n\n  constructor()\n    public\n    ERC721Token(NAME, SYMBOL)\n  {\n    castles.push(Castle({\n      name: \"DUMMY\", level: 0, exp: 0,\n      width: 0, depth: 0,\n      readyTime: 0,\n      tryCount: 0, winCount: 0, lossCount: 0,\n      levelPoint: 0,\n      reward: 0}));\n  }\n\n  function mint(address _beneficiary)\n    public\n    whenNotPaused\n    onlyAccessByGame\n    returns (bool)\n  {\n    require(_beneficiary != address(0));\n    return _create(_beneficiary, initWidth, initDepth);\n  }\n\n  function setTraps(\n    uint256 _castleid,\n    uint16 _reward,\n    bytes _traps)\n    public\n    whenNotPaused()\n    onlyAccessByGame\n    returns (bool)\n  {\n    require((_castleid > 0) && (_castleid < castles.length));\n    require(_reward > 0);\n    Castle storage castle = castles[_castleid];\n    castle.reward = _reward;\n    traps[_castleid] = _traps;\n\n    logs[_castleid].push(_generateLog(uint32(now), LOG_SET, 0, 0, 0, 0));\n\n    emit SetTraps(_castleid);\n\n    return true;\n  }\n\n  function resetTraps(uint256 _castleid)\n    public\n    onlyAccessByGame\n    returns (bool)\n  {\n    require((_castleid > 0) && (_castleid < castles.length));\n    Castle storage castle = castles[_castleid];\n    for (uint256 i = 0; i < castle.width * castle.depth; i++) {\n      traps[_castleid][i] = byte(0);\n    }\n    castle.reward = 0;\n    logs[_castleid].push(_generateLog(uint32(now), LOG_RESET, 0, 0, 0, 0));\n\n    emit ResetTraps(_castleid);\n\n    return true;\n  }\n\n  function win(\n    uint256 _castleid, uint256 _ninjaid, uint256 _path, bytes _steps, uint256 _count)\n    public\n    onlyAccessByGame\n    returns (bool)\n  {\n    require((_castleid > 0) && (_castleid < castles.length));\n    uint8 width = getWidth(_castleid);\n    for (uint256 i = 0; i < _count; i++) {\n      traps[_castleid][uint256(_steps[i])] = byte(0);\n    }\n    Castle storage castle = castles[_castleid];\n    castle.winCount++;\n    castle.exp += expOnSuccess;\n    castle.levelPoint += expOnSuccess;\n    _levelUp(castle);\n    logs[_castleid].push(\n      _generateLog(\n        uint32(now), LOG_WIN, uint32(_ninjaid),\n        uint8(_path % width), uint8(_path / width), 1\n      )\n    );\n\n    _triggerCooldown(_castleid);\n\n    return true;\n  }\n\n  function lost(uint256 _castleid, uint256 _ninjaid)\n    public\n    onlyAccessByGame\n    returns (bool)\n  {\n    require((_castleid > 0) && (_castleid < castles.length));\n    Castle storage castle = castles[_castleid];\n    castle.reward = 0;\n    castle.lossCount++;\n    castle.exp += expOnFault;\n    castle.levelPoint += expOnFault;\n    _levelUp(castle);\n\n    logs[_castleid].push(_generateLog(uint32(now), LOG_LOSS, uint32(_ninjaid), 0, 0, 0));\n\n    resetTraps(_castleid);\n\n    _triggerCooldown(_castleid);\n\n    return true;\n  }\n\n  function setName(uint256 _castleid, bytes16 _newName)\n    external\n    onlyOwnerOf(_castleid)\n  {\n    castles[_castleid].name = _newName;\n  }\n\n  function setGoldContract(address _goldTokenAddress)\n    public\n    onlyOwner\n  {\n    require(_goldTokenAddress != address(0));\n\n    goldToken = EverGold(_goldTokenAddress);\n  }\n\n  function setFee(uint16 _price)\n    external\n    onlyOwner\n  {\n    price = _price;\n  }\n\n  function setItemPerPage(uint16 _amount)\n    external\n    onlyOwner\n  {\n    itemsPerPage = _amount;\n  }\n\n  function setMaxCoordinate(uint256 _cooldownTime)\n    public\n    onlyOwner\n  {\n    cooldownTime = _cooldownTime;\n  }\n\n  function _create(address _beneficiary, uint8 _width, uint8 _depth)\n    internal\n    onlyAccessByGame\n    returns (bool)\n  {\n    require(_beneficiary != address(0));\n    require((_width > 0) && (_depth > 0));\n    uint256 tokenid = castles.length;\n    bytes16 name = StringLib.generateName(\"CASTLE#\", 7, tokenid);\n\n    uint256 id = castles.push(Castle({\n      name: name, level: 1, exp: 0,\n      width: _width, depth: _depth,\n      readyTime: uint32(now + cooldownTime),\n      tryCount: 0, winCount: 0, lossCount: 0,\n      levelPoint: 0,\n      reward: 0})) - 1;\n\n    traps[id] = new bytes(_width * _depth);\n    _mint(_beneficiary, id);\n    emit NewCastle(id, _width, _depth);\n\n    return true;\n  }\n\n  function _levelUp(Castle storage _castle)\n    internal\n    onlyAccessByGame\n  {\n    if (_castle.levelPoint >= leveupExp) {\n      _castle.levelPoint -= leveupExp;\n      _castle.level++;\n    }\n  }\n\n  function _triggerCooldown(uint256 _castleid)\n    internal\n    onlyAccessByGame\n  {\n    require((_castleid > 0) && (_castleid < castles.length));\n    Castle storage castle = castles[_castleid];\n    castle.readyTime = uint32(now + cooldownTime);\n  }\n\n  function getAll()\n    external\n    view\n    returns (uint256[] result)\n  {\n    return allTokens;\n  }\n\n  function getOpen(uint256 _startIndex)\n    external\n    view\n    returns (uint256[] result)\n  {\n    uint256 n = 0;\n    uint256 i = 0;\n    for (i = _startIndex; i < castles.length; i++) {\n      Castle storage castle = castles[i];\n      if ((castle.reward > 0) &&\n          (ownerOf(i) != msg.sender)) {\n        n++;\n        if (n >= _startIndex) {\n          break;\n        }\n      }\n    }\n    uint256[] memory castleids = new uint256[](itemsPerPage + 1);\n    n = 0;\n    while (i < castles.length) {\n      castle = castles[i];\n      if ((castle.reward > 0) &&\n          (ownerOf(i) != msg.sender)) {\n        castleids[n++] = i;\n        if (n > itemsPerPage) {\n          break;\n        }\n      }\n      i++;\n    }\n    return castleids;\n  }\n\n  function getByOwner(address _owner)\n    external\n    view\n    returns (uint256[] result)\n  {\n    return ownedTokens[_owner];\n  }\n\n  function getInfo(uint256 _castleid)\n    external\n    view\n    returns (bytes16, uint16, uint32,\n      uint8, uint8, uint16, uint16,\n      uint16)\n  {\n    require((_castleid > 0) && (_castleid < castles.length));\n    Castle storage castle = castles[_castleid];\n    return (\n      castle.name,\n      castle.level,\n      castle.exp,\n      castle.width,\n      castle.depth,\n      castle.winCount,\n      castle.lossCount,\n      castle.reward);\n  }\n\n  function getLevel(uint256 _castleid)\n    external\n    view\n    returns (uint16)\n  {\n    Castle storage castle = castles[_castleid];\n    return castle.level;\n  }\n\n  function getLogs(uint256 _castleid)\n    external\n    view\n    returns (bytes32[])\n  {\n    require((_castleid > 0) && (_castleid < castles.length));\n    return logs[_castleid];\n  }\n\n  function getTrapInfo(uint256 _castleid)\n    external\n    view\n    returns (bytes)\n  {\n    require((ownerOf(_castleid) == msg.sender) || (contractAccess[msg.sender] == true));\n    return traps[_castleid];\n  }\n\n  function isReady(uint256 _castleid)\n    public\n    view\n    returns (bool)\n  {\n    require((_castleid > 0) && (_castleid < castles.length));\n    Castle storage castle = castles[_castleid];\n    return (castle.readyTime <= now);\n  }\n\n  function getReward(uint256 _castleid)\n    public\n    view\n    returns (uint16)\n  {\n    require((_castleid > 0) && (_castleid < castles.length));\n    Castle storage castle = castles[_castleid];\n    return castle.reward;\n  }\n\n  function getWidth(uint256 _castleid)\n    public\n    view\n    returns (uint8)\n  {\n    require((_castleid > 0) && (_castleid < castles.length));\n    Castle storage castle = castles[_castleid];\n    return castle.width;\n  }\n\n  function getTrapid(uint256 _castleid, uint8 _path)\n    public\n    onlyAccessByGame\n    view\n    returns (uint8)\n  {\n    return uint8(traps[_castleid][_path]);\n  }\n\n  function getPrice()\n    public\n    view\n    returns (uint256)\n  {\n    return price;\n  }\n\n  function _generateLog(\n    uint32 _datetime,\n    uint8 _id,\n    uint32 _ninjaid,\n    uint8 _x,\n    uint8 _y,\n    uint8 _win)\n    internal\n    pure\n    returns (bytes32)\n  {\n    return\n      bytes32(\n        (uint256(_datetime) * (2 ** (8 * 28))) |\n        (uint256(_id) * (2 ** (8 * 24))) |\n        (uint256(_ninjaid) * (2 ** (8 * 20))) |\n        (uint256(_x) * (2 ** (8 * 16))) |\n        (uint256(_y) * (2 ** (8 * 12))) |\n        (uint256(_win) * (2 ** (8 * 8))));\n  }\n}\n\ncontract ItemToken is AccessByGame {\n  struct Item {\n    bytes16 name;\n    uint16 price;\n    uint16 power;\n    bool enabled;\n  }\n\n  EverGold internal goldToken;\n\n  Item[] private items;\n\n  uint8 public itemKindCount = 0;\n\n  mapping (address => mapping (uint256 => uint256)) private ownedItems;\n\n  event NewItem(bytes32 name, uint16 price, uint16 power);\n  event UseItem(uint256 itemid, uint256 amount);\n\n  constructor()\n    public\n  {\n    addItem(\"None\", 0, 0, false);\n    addItem(\"Arrow\", 10, 10, true);\n    addItem(\"Tiger\", 30, 20, true);\n    addItem(\"Spear\", 50, 30, true);\n    addItem(\"Wood\", 50, 20, true);\n    addItem(\"Fire\", 50, 20, true);\n    addItem(\"Earth\", 50, 20, true);\n    addItem(\"Metal\", 50, 20, true);\n    addItem(\"Water\", 50, 20, true);\n  }\n\n  function setGoldContract(address _goldTokenAddress)\n    public\n    onlyOwner\n  {\n    require(_goldTokenAddress != address(0));\n\n    goldToken = EverGold(_goldTokenAddress);\n  }\n\n  function buy(address _to, uint256 _itemid, uint256 _amount)\n    public\n    onlyAccessByGame\n    whenNotPaused\n    returns (bool)\n  {\n    require(_amount > 0);\n    require(_itemid > 0 && _itemid < itemKindCount);\n    ownedItems[_to][_itemid] += _amount;\n\n    return true;\n  }\n\n  function useItem(address _owner, uint256 _itemid, uint256 _amount)\n    public\n    onlyAccessByGame\n    whenNotPaused\n    returns (bool)\n  {\n    require(_amount > 0);\n    require((_itemid > 0) && (_itemid < itemKindCount));\n    require(_amount <= ownedItems[_owner][_itemid]);\n\n    ownedItems[_owner][_itemid] -= _amount;\n\n    emit UseItem(_itemid, _amount);\n\n    return true;\n  }\n\n  function addItem(bytes16 _name, uint16 _price, uint16 _power, bool _enabled)\n    public\n    onlyOwner()\n    returns (bool)\n  {\n    require(_name != 0x0);\n    items.push(Item({\n      name:_name,\n      price: _price,\n      power: _power,\n      enabled: _enabled\n      }));\n    itemKindCount++;\n\n    emit NewItem(_name, _price, _power);\n    return true;\n  }\n\n  function setItemAvailable(uint256 _itemid, bool _enabled)\n    public\n    onlyOwner()\n  {\n    require(_itemid > 0 && _itemid < itemKindCount);\n\n    items[_itemid].enabled = _enabled;\n  }\n\n  function getItemCounts()\n    public\n    view\n    returns (uint256[])\n  {\n    uint256[] memory itemCounts = new uint256[](itemKindCount);\n    for (uint256 i = 0; i < itemKindCount; i++) {\n      itemCounts[i] = ownedItems[msg.sender][i];\n    }\n    return itemCounts;\n  }\n\n  function getItemCount(uint256 _itemid)\n    public\n    view\n    returns (uint256)\n  {\n    require(_itemid > 0 && _itemid < itemKindCount);\n    return ownedItems[msg.sender][_itemid];\n  }\n\n  function getItemKindCount()\n    public\n    view\n    returns (uint256)\n  {\n    return itemKindCount;\n  }\n\n  function getItem(uint256 _itemid)\n    public\n    view\n    returns (bytes16 name, uint16 price, uint16 power, bool enabled)\n  {\n    require(_itemid < itemKindCount);\n    return (items[_itemid].name, items[_itemid].price, items[_itemid].power, items[_itemid].enabled);\n  }\n\n  function getPower(uint256 _itemid)\n    public\n    view\n    returns (uint16 power)\n  {\n    require(_itemid < itemKindCount);\n    return items[_itemid].power;\n  }\n\n  function getPrice(uint256 _itemid)\n    public\n    view\n    returns (uint16)\n  {\n    require(_itemid < itemKindCount);\n    return items[_itemid].price;\n  }\n}\n\ncontract NinjaToken is ERC721Token, AccessByGame {\n  string public constant NAME = \"Crypto Ninja Game Ninja\";\n  string public constant SYMBOL = \"CNN\";\n\n  event NewNinja(uint256 ninjaid, bytes16 name, bytes32 pattern);\n\n  struct Ninja {\n    bytes32 pattern;\n    bytes16 name;\n    uint16 level;\n    uint32 exp;\n    uint8 dna1;\n    uint8 dna2;\n    uint32 readyTime;\n    uint16 winCount;\n    uint8 levelPoint;\n    uint16 lossCount;\n    uint16 reward;\n    uint256 lastAttackedCastleid;\n  }\n\n  mapping (uint256 => bytes) private paths;\n\n  mapping (uint256 => bytes) private steps;\n\n  EverGold internal goldToken;\n\n  uint8 internal expOnSuccess = 3;\n  uint8 internal expOnFault = 1;\n  uint8 internal leveupExp = 10;\n\n  uint256 internal cooldownTime = 5 minutes;\n\n  uint256 internal maxCoordinate = 12;\n\n  Ninja[] internal ninjas;\n\n  uint256 private randNonce = 0;\n\n  uint8 public kindCount = 2;\n  uint32[] public COLORS = [\n    0xD7003A00,\n    0xF3980000,\n    0x00552E00,\n    0x19448E00,\n    0x543F3200,\n    0xE7609E00,\n    0xFFEC4700,\n    0x68BE8D00,\n    0x0095D900,\n    0xE9DFE500,\n    0xEE836F00,\n    0xF2F2B000,\n    0xAACF5300,\n    0x0A3AF00,\n    0xF8FBF800,\n    0xF4B3C200,\n    0x928C3600,\n    0xA59ACA00,\n    0xABCED800,\n    0x30283300,\n    0xFDEFF200,\n    0xDDBB9900,\n    0x74539900,\n    0xAA4C8F00\n  ];\n\n  uint256 public price = 1000;\n\n  constructor()\n      public\n      ERC721Token(NAME, SYMBOL)\n  {\n    ninjas.push(Ninja({\n      pattern: 0, name: \"DUMMY\", level: 0, exp: 0,\n      dna1: 0, dna2: 0,\n      readyTime: 0,\n      winCount: 0, lossCount: 0,\n      levelPoint:0, reward: 0,\n      lastAttackedCastleid: 0 }));\n  }\n\n  function mint(address _beneficiary)\n    public\n    whenNotPaused\n    onlyAccessByGame\n    returns (bool)\n  {\n    require(_beneficiary != address(0));\n    return _create(_beneficiary, 0, 0);\n  }\n\n  function burn(uint256 _tokenId) external onlyOwnerOf(_tokenId) {\n    super._burn(msg.sender, _tokenId);\n  }\n\n  function setPath(\n    uint256 _ninjaid,\n    uint256 _castleid,\n    bytes _path,\n    bytes _steps)\n    public\n    onlyAccessByGame\n  {\n    Ninja storage ninja = ninjas[_ninjaid];\n    ninja.lastAttackedCastleid = _castleid;\n    paths[_ninjaid] = _path;\n    steps[_ninjaid] = _steps;\n  }\n\n  function win(uint256 _ninjaid)\n    public\n    onlyAccessByGame\n    returns (bool)\n  {\n    Ninja storage ninja = ninjas[_ninjaid];\n    ninja.winCount++;\n    ninja.exp += expOnSuccess;\n    ninja.levelPoint += expOnSuccess;\n    _levelUp(ninja);\n\n    _triggerCooldown(_ninjaid);\n\n    return true;\n  }\n\n  function lost(uint256 _ninjaid)\n    public\n    onlyAccessByGame\n    returns (bool)\n  {\n    Ninja storage ninja = ninjas[_ninjaid];\n    ninja.lossCount++;\n    ninja.exp += expOnFault;\n    ninja.levelPoint += expOnFault;\n    _levelUp(ninja);\n\n    _triggerCooldown(_ninjaid);\n\n    return true;\n  }\n\n  function setName(uint256 _ninjaid, bytes16 _newName)\n    external\n    onlyOwnerOf(_ninjaid)\n  {\n    ninjas[_ninjaid].name = _newName;\n  }\n\n  function setGoldContract(address _goldTokenAddress)\n    public\n    onlyOwner\n  {\n    require(_goldTokenAddress != address(0));\n\n    goldToken = EverGold(_goldTokenAddress);\n  }\n\n  function setNinjaKindCount(uint8 _kindCount)\n    public\n    onlyOwner\n  {\n    kindCount = _kindCount;\n  }\n\n  function setPrice(uint16 _price)\n    public\n    onlyOwner\n  {\n    price = _price;\n  }\n\n  function setMaxCoordinate(uint16 _maxCoordinate)\n    public\n    onlyOwner\n  {\n    maxCoordinate = _maxCoordinate;\n  }\n\n  function setMaxCoordinate(uint256 _cooldownTime)\n    public\n    onlyOwner\n  {\n    cooldownTime = _cooldownTime;\n  }\n\n  function _create(address _beneficiary, uint8 _dna1, uint8 _dna2)\n    private\n    returns (bool)\n  {\n    bytes32 pattern = _generateInitialPattern();\n    uint256 tokenid = ninjas.length;\n    bytes16 name = StringLib.generateName(\"NINJA#\", 6, tokenid);\n\n    uint256 id = ninjas.push(Ninja({\n      pattern: pattern, name: name, level: 1, exp: 0,\n      dna1: _dna1, dna2: _dna2,\n      readyTime: uint32(now + cooldownTime),\n      winCount: 0, lossCount: 0,\n      levelPoint:0, reward: 0,\n      lastAttackedCastleid: 0})) - 1;\n    super._mint(_beneficiary, id);\n\n    emit NewNinja(id, name, pattern);\n\n    return true;\n  }\n\n  function _triggerCooldown(uint256 _ninjaid)\n    internal\n    onlyAccessByGame\n  {\n    Ninja storage ninja = ninjas[_ninjaid];\n    ninja.readyTime = uint32(now + cooldownTime);\n  }\n\n  function _levelUp(Ninja storage _ninja)\n    internal\n    onlyAccessByGame\n  {\n    if (_ninja.levelPoint >= leveupExp) {\n      _ninja.levelPoint -= leveupExp;\n      _ninja.level++;\n      if (_ninja.level == 2) {\n        _ninja.dna1 = uint8(_getRandom(6));\n      } else if (_ninja.level == 5) {\n        _ninja.dna2 = uint8(_getRandom(6));\n      }\n    }\n  }\n\n  function getByOwner(address _owner)\n    external\n    view\n    returns(uint256[] result)\n  {\n    return ownedTokens[_owner];\n  }\n\n  function getInfo(uint256 _ninjaid)\n    external\n    view\n    returns (bytes16, uint32, uint16, uint16, bytes32, uint8, uint8)\n  {\n    Ninja storage ninja = ninjas[_ninjaid];\n    return (ninja.name, ninja.level, ninja.winCount, ninja.lossCount, ninja.pattern,\n      ninja.dna1, ninja.dna2);\n  }\n\n  function getHp(uint256 _ninjaid)\n    public\n    view\n    returns (uint32)\n  {\n    Ninja storage ninja = ninjas[_ninjaid];\n    return uint32(100 + (ninja.level - 1) * 10);\n  }\n\n  function getDna1(uint256 _ninjaid)\n    public\n    view\n    returns (uint8)\n  {\n    Ninja storage ninja = ninjas[_ninjaid];\n    return ninja.dna1;\n  }\n\n  function getDna2(uint256 _ninjaid)\n    public\n    view\n    returns (uint8)\n  {\n    Ninja storage ninja = ninjas[_ninjaid];\n    return ninja.dna2;\n  }\n\n  function isReady(uint256 _ninjaid)\n    public\n    view\n    returns (bool)\n  {\n    Ninja storage ninja = ninjas[_ninjaid];\n    return (ninja.readyTime <= now);\n  }\n\n  function getReward(uint256 _ninjaid)\n    public\n    view\n    onlyOwnerOf(_ninjaid)\n    returns (uint16)\n  {\n    Ninja storage ninja = ninjas[_ninjaid];\n    return ninja.reward;\n  }\n\n  function getPath(uint256 _ninjaid)\n    public\n    view\n    onlyOwnerOf(_ninjaid)\n    returns (bytes path)\n  {\n    return paths[_ninjaid];\n  }\n\n  function getLastAttack(uint256 _ninjaid)\n    public\n    view\n    onlyOwnerOf(_ninjaid)\n    returns (uint256 castleid, bytes path)\n  {\n    Ninja storage ninja = ninjas[_ninjaid];\n    return (ninja.lastAttackedCastleid, paths[_ninjaid]);\n  }\n\n  function getAttr(bytes32 _pattern, uint256 _n)\n    internal\n    pure\n    returns (bytes4)\n  {\n    require(_n < 8);\n    uint32 mask = 0xffffffff;\n    return bytes4(uint256(_pattern) / (2 ** ((7 - _n) * 8)) & mask);\n  }\n\n  function _getRandom(uint256 _modulus)\n    internal\n    onlyAccessByGame\n    returns(uint32)\n  {\n    randNonce = randNonce.add(1);\n    return uint32(uint256(keccak256(abi.encodePacked(now, msg.sender, randNonce))) % _modulus);\n//    return uint8(uint256(keccak256(block.timestamp, block.difficulty))%251);\n  }\n\n  function _generateInitialPattern()\n    internal\n    onlyAccessByGame\n    returns (bytes32)\n  {\n    uint256 pattern = 0;\n\n    uint32 color = COLORS[(_getRandom(COLORS.length))];\n    for (uint256 i = 0; i < 8; i++) {\n      uint32 temp = color;\n      if (i == 1) {\n        temp |= _getRandom(2);\n      } else {\n        temp |= _getRandom(maxCoordinate);\n      }\n      pattern = pattern | (temp * 2 ** (8 * 4 * (7 - i)));\n    }\n    return bytes32(pattern);\n  }\n\n  function getPrice()\n    public\n    view\n    returns (uint256)\n  {\n    return price;\n  }\n}\n\ncontract UserToken is AccessByGame {\n  struct User {\n    string name;\n    uint32 registeredDate;\n  }\n\n  string constant public DEFAULT_NAME = \"NONAME\";\n\n  User[] private users;\n\n  uint256 public userCount = 0;\n\n  mapping (address => uint256) private ownerToUser;\n\n  constructor()\n    public\n  {\n    mint(msg.sender, \"OWNER\");\n  }\n\n  function mint(address _beneficiary, string _name)\n    public\n    onlyAccessByGame\n    whenNotPaused()\n    returns (bool)\n  {\n    require(_beneficiary != address(0));\n    require(ownerToUser[_beneficiary] == 0);\n\n    User memory user = User({\n      name: _name,\n      registeredDate: uint32(now)\n    });\n\n    uint256 id = users.push(user) - 1;\n\n    ownerToUser[_beneficiary] = id;\n\n    userCount++;\n\n    return true;\n  }\n\n  function setName(string _name)\n    public\n    whenNotPaused()\n    returns (bool)\n  {\n    require(bytes(_name).length > 1);\n    require(ownerToUser[msg.sender] != 0);\n\n    uint256 userid = ownerToUser[msg.sender];\n    users[userid].name = _name;\n\n    return true;\n  }\n\n  function getUserid(address _owner)\n    external\n    view\n    onlyAccessByGame\n    returns(uint256 result)\n  {\n    if (ownerToUser[_owner] == 0) {\n      return 0;\n    }\n    return ownerToUser[_owner];\n  }\n\n  function getUserInfo()\n    public\n    view\n    returns (uint256, string, uint32)\n  {\n    uint256 userid = ownerToUser[msg.sender];\n    return getUserInfoById(userid);\n  }\n\n  function getUserInfoById(uint256 _userid)\n    public\n    view\n    returns (uint256, string, uint32)\n  {\n    User storage user = users[_userid];\n    return (_userid, user.name, user.registeredDate);\n  }\n}\n\n/**\n * @title TokenDestructible:\n * @author Remco Bloemen <[email protected]π.com>\n * @dev Base contract that can be destroyed by owner. All funds in contract including\n * listed tokens will be sent to the owner.\n */\ncontract TokenDestructible is Ownable {\n\n  constructor() public payable { }\n\n  /**\n   * @notice Terminate contract and refund to owner\n   * @param tokens List of addresses of ERC20 or ERC20Basic token contracts to\n   refund.\n   * @notice The called token contracts could try to re-enter this contract. Only\n   supply token contracts you trust.\n   */\n  function destroy(address[] tokens) onlyOwner public {\n\n    // Transfer tokens to owner\n    for (uint256 i = 0; i < tokens.length; i++) {\n      ERC20Basic token = ERC20Basic(tokens[i]);\n      uint256 balance = token.balanceOf(this);\n      token.transfer(owner, balance);\n    }\n\n    // Transfer Eth to owner and terminate contract\n    selfdestruct(owner);\n  }\n}\n\ncontract GameV001 is AccessByGame, TokenDestructible {\n  using SafeMath for uint256;\n\n  uint8 constant INIT_WIDTH = 5;\n  uint8 constant INIT_DEPTH = 8;\n\n  UserToken private userToken;\n  EverGold private goldToken;\n  CastleToken private castleToken;\n  NinjaToken private ninjaToken;\n  ItemToken private itemToken;\n\n  struct AttackLog {\n    uint256 castleid;\n    uint16 reward;\n    uint32 hp;\n    uint8 path;\n    uint32 trapDamage;\n    bool dead;\n  }\n\n  mapping (uint256 => AttackLog[]) private attackLogs;\n  mapping (uint256 => uint256) private numAttackLogs;\n\n  event Attack(uint256 ninjaid, uint256 castleid, uint32 hp, uint8 path, uint32 trapDamage, uint32 damage);\n  event AttackStart(uint256 ninjaid, uint256 castleid, uint32 hp);\n  event AttackEnd(uint256 ninjaid, uint256 castleid, bool result);\n\n  constructor(\n    address _goldTokenAddress,\n    address _castleTokenAddress,\n    address _ninjaTokenAddress,\n    address _userTokenAddress,\n    address _itemTokenAddress)\n    public\n  {\n    require(_goldTokenAddress != address(0));\n    require(_castleTokenAddress != address(0));\n    require(_ninjaTokenAddress != address(0));\n    require(_userTokenAddress != address(0));\n    require(_itemTokenAddress != address(0));\n\n    goldToken = EverGold(_goldTokenAddress);\n    castleToken = CastleToken(_castleTokenAddress);\n    ninjaToken = NinjaToken(_ninjaTokenAddress);\n    userToken = UserToken(_userTokenAddress);\n    itemToken = ItemToken(_itemTokenAddress);\n  }\n\n  function  registerUser(string _name)\n    public\n    returns (bool)\n  {\n    require(msg.sender != address(0));\n    require(userToken.mint(msg.sender, _name));\n\n    return true;\n  }\n\n  function  buyNinja(address _beneficiary)\n    public\n    payable\n    returns (bool)\n  {\n    require(msg.sender != address(0));\n    uint256 price = ninjaToken.getPrice();\n    require(msg.value == price);\n    require(ninjaToken.mint(_beneficiary));\n\n    return true;\n  }\n\n  function buyCastle(address _beneficiary)\n    public\n    payable\n    returns (bool)\n  {\n    require(msg.sender != address(0));\n    uint256 price = castleToken.getPrice();\n    require(msg.value == price);\n    require(castleToken.mint(_beneficiary));\n\n    return true;\n  }\n\n  function buyItem(address _beneficiary, uint8 _itemid, uint256 _amount)\n    public\n    payable\n    returns (bool)\n  {\n    require(msg.sender != address(0));\n    uint16 price = itemToken.getPrice(_itemid);\n    uint256 totalPrice = price * _amount;\n    require(msg.value == totalPrice);\n    require(itemToken.buy(_beneficiary, _itemid, _amount));\n\n    return true;\n  }\n\n  function defence(\n    address _beneficiary,\n    uint256 _castleid,\n    uint16 _reward,\n    bytes _traps,\n    uint256[] _useTraps)\n    public\n    payable\n    whenNotPaused\n    returns (bool)\n  {\n    require(msg.value == _reward);\n\n    for (uint256 i = 1; i < _useTraps.length; i++) {\n      if (_useTraps[i] > 0) {\n        require(itemToken.useItem(_beneficiary, i, _useTraps[i]));\n      }\n    }\n    require(castleToken.setTraps(_castleid, _reward, _traps));\n\n    return true;\n  }\n\n  function addTraps(\n    uint256 _castleid,\n    bytes _traps,\n    uint256[] _useTraps)\n    public\n    whenNotPaused\n    returns (bool)\n  {\n    require(castleToken.getReward(_castleid) > 0);\n    bytes memory traps = castleToken.getTrapInfo(_castleid);\n    for (uint256 i = 1; i < _useTraps.length; i++) {\n      if ((traps[i]) == 0 &&\n        (_useTraps[i] > 0)) {\n        require(itemToken.useItem(msg.sender, i, _useTraps[i]));\n      }\n    }\n    require(castleToken.setTraps(_castleid, castleToken.getReward(_castleid), _traps));\n    return true;\n  }\n\n  function attack(\n    uint256 _ninjaid,\n    uint256 _castleid,\n    bytes _path)\n    public\n    payable\n    whenNotPaused\n    returns (bool)\n  {\n    uint16 reward = castleToken.getReward(_castleid);\n    require(msg.value == reward / 2);\n\n    uint32 hp = ninjaToken.getHp(_ninjaid);\n\n    _clearAttackLog(_ninjaid);\n\n    bytes memory steps = new bytes(_path.length);\n    uint256 count = 0;\n    uint32 damage = 0;\n    for (uint256 i = 0; i < _path.length; i++) {\n      uint32 trapDamage = _computeDamage(_castleid, _ninjaid, uint8(_path[i]));\n      if (trapDamage > 0) {\n        steps[count++] = _path[i];\n        damage = damage + trapDamage;\n        if (hp <= damage) {\n          _insertAttackLog(_ninjaid, _castleid, reward, hp, uint8(_path[i]), trapDamage, true);\n          address castleOwner = castleToken.ownerOf(_castleid);\n          goldToken.transfer(castleOwner, reward / 2);\n          castleToken.win(_castleid, _ninjaid, uint256(_path[i]), steps, count);\n          ninjaToken.lost(_ninjaid);\n          ninjaToken.setPath(_ninjaid, _castleid, _path, steps);\n          emit AttackEnd(_ninjaid, _castleid, false);\n\n          return true;\n        }\n      }\n      _insertAttackLog(_ninjaid, _castleid, reward, hp, uint8(_path[i]), trapDamage, false);\n    }\n    require(goldToken.transfer(ninjaToken.ownerOf(_ninjaid), reward + reward / 2));\n    require(castleToken.lost(_castleid, _ninjaid));\n    require(ninjaToken.win(_ninjaid));\n    ninjaToken.setPath(_ninjaid, _castleid, _path, steps);\n    emit AttackEnd(_ninjaid, _castleid, true);\n    return true;\n  }\n\n  function _computeDamage(uint256 _castleid, uint256 _ninjaid, uint8 _itemid)\n    internal\n    view\n    returns (uint32)\n  {\n    uint32 trapPower = itemToken.getPower(castleToken.getTrapid(_castleid, uint8(_itemid)));\n    if (trapPower <= 0) {\n      return 0;\n    }\n    uint32 trapDamage = trapPower + castleToken.getLevel(_castleid) - 1;\n    uint8 dna1 = ninjaToken.getDna1(_ninjaid);\n    uint8 dna2 = ninjaToken.getDna2(_ninjaid);\n    if (_itemid == 1) {\n      if (dna1 == 4) {\n        trapDamage *= 2;\n      }\n      if (dna2 == 4) {\n        trapDamage *= 2;\n      }\n      if (dna1 == 3) {\n        trapDamage /= 2;\n      }\n      if (dna2 == 3) {\n        trapDamage /= 2;\n      }\n    } else if (_itemid == 2) {\n      if (dna1 == 5) {\n        trapDamage *= 2;\n      }\n      if (dna2 == 5) {\n        trapDamage *= 2;\n      }\n      if (dna1 == 4) {\n        trapDamage /= 2;\n      }\n      if (dna2 == 4) {\n        trapDamage /= 2;\n      }\n    } else if (_itemid == 3) {\n      if (dna1 == 1) {\n        trapDamage *= 2;\n      }\n      if (dna2 == 1) {\n        trapDamage *= 2;\n      }\n      if (dna1 == 5) {\n        trapDamage /= 2;\n      }\n      if (dna2 == 5) {\n        trapDamage /= 2;\n      }\n    } else if (_itemid == 4) {\n      if (dna1 == 2) {\n        trapDamage *= 2;\n      }\n      if (dna2 == 2) {\n        trapDamage *= 2;\n      }\n      if (dna1 == 1) {\n        trapDamage /= 2;\n      }\n      if (dna2 == 1) {\n        trapDamage /= 2;\n      }\n    } else if (_itemid == 5) {\n      if (dna1 == 3) {\n        trapDamage *= 2;\n      }\n      if (dna2 == 3) {\n        trapDamage *= 2;\n      }\n      if (dna1 == 2) {\n        trapDamage /= 2;\n      }\n      if (dna2 == 2) {\n        trapDamage /= 2;\n      }\n    }\n    return trapDamage;\n  }\n\n  function _insertAttackLog(\n    uint256 _ninjaid,\n    uint256 _castleid,\n    uint16 _reward,\n    uint32 _hp,\n    uint8 _path,\n    uint32 _trapDamage,\n    bool _dead)\n    private\n  {\n    if(numAttackLogs[_ninjaid] == attackLogs[_ninjaid].length) {\n      attackLogs[_ninjaid].length += 1;\n    }\n    AttackLog memory log = AttackLog(_castleid, _reward, _hp, _path, _trapDamage, _dead);\n    attackLogs[_ninjaid][numAttackLogs[_ninjaid]++] = log;\n  }\n\n  function _clearAttackLog(uint256 _ninjaid)\n    private\n  {\n    numAttackLogs[_ninjaid] = 0;\n  }\n\n  function setGoldContract(address _goldTokenAddress)\n    public\n    onlyOwner\n  {\n    require(_goldTokenAddress != address(0));\n\n    goldToken = EverGold(_goldTokenAddress);\n  }\n\n  function setCastleContract(address _castleTokenAddress)\n    public\n    onlyOwner\n  {\n    require(_castleTokenAddress != address(0));\n\n    castleToken = CastleToken(_castleTokenAddress);\n  }\n\n  function setNinjaContract(address _ninjaTokenAddress)\n    public\n    onlyOwner\n  {\n    require(_ninjaTokenAddress != address(0));\n\n    ninjaToken = NinjaToken(_ninjaTokenAddress);\n  }\n\n  function setItemContract(address _itemTokenAddress)\n    public\n    onlyOwner\n  {\n    require(_itemTokenAddress != address(0));\n\n    itemToken = ItemToken(_itemTokenAddress);\n  }\n\n  function setUserContract(address _userTokenAddress)\n    public\n    onlyOwner\n  {\n    require(_userTokenAddress != address(0));\n\n    userToken = UserToken(_userTokenAddress);\n  }\n\n  function getLastAttack(uint256 _ninjaid, uint256 _index)\n    public\n    view\n    returns (uint256 castleid, uint16 reward, uint32 hp, uint8 path, uint32 trapDamage, bool dead)\n  {\n    require(ninjaToken.ownerOf(_ninjaid) == msg.sender);\n    AttackLog memory log = attackLogs[_ninjaid][_index];\n    return (log.castleid, log.reward, log.hp, log.path, log.trapDamage, log.dead);\n  }\n\n  function getLastAttackCount(uint256 _ninjaid)\n    public\n    view\n    returns (uint256)\n  {\n    require(ninjaToken.ownerOf(_ninjaid) == msg.sender);\n    return numAttackLogs[_ninjaid];\n  }\n}",
  "abi": "[{\"constant\":false,\"inputs\":[{\"name\":\"_ninjaid\",\"type\":\"uint256\"},{\"name\":\"_castleid\",\"type\":\"uint256\"},{\"name\":\"_path\",\"type\":\"bytes\"}],\"name\":\"attack\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"grantAccess\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_castleid\",\"type\":\"uint256\"},{\"name\":\"_traps\",\"type\":\"bytes\"},{\"name\":\"_useTraps\",\"type\":\"uint256[]\"}],\"name\":\"addTraps\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_goldTokenAddress\",\"type\":\"address\"}],\"name\":\"setGoldContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_beneficiary\",\"type\":\"address\"}],\"name\":\"buyCastle\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"unpause\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_beneficiary\",\"type\":\"address\"},{\"name\":\"_castleid\",\"type\":\"uint256\"},{\"name\":\"_reward\",\"type\":\"uint16\"},{\"name\":\"_traps\",\"type\":\"bytes\"},{\"name\":\"_useTraps\",\"type\":\"uint256[]\"}],\"name\":\"defence\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"claimOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"paused\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_name\",\"type\":\"string\"}],\"name\":\"registerUser\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"pause\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"revokeAccess\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ninjaid\",\"type\":\"uint256\"}],\"name\":\"getLastAttackCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_userTokenAddress\",\"type\":\"address\"}],\"name\":\"setUserContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_itemTokenAddress\",\"type\":\"address\"}],\"name\":\"setItemContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_beneficiary\",\"type\":\"address\"}],\"name\":\"buyNinja\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ninjaid\",\"type\":\"uint256\"},{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"getLastAttack\",\"outputs\":[{\"name\":\"castleid\",\"type\":\"uint256\"},{\"name\":\"reward\",\"type\":\"uint16\"},{\"name\":\"hp\",\"type\":\"uint32\"},{\"name\":\"path\",\"type\":\"uint8\"},{\"name\":\"trapDamage\",\"type\":\"uint32\"},{\"name\":\"dead\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_castleTokenAddress\",\"type\":\"address\"}],\"name\":\"setCastleContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"tokens\",\"type\":\"address[]\"}],\"name\":\"destroy\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"pendingOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_ninjaTokenAddress\",\"type\":\"address\"}],\"name\":\"setNinjaContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_beneficiary\",\"type\":\"address\"},{\"name\":\"_itemid\",\"type\":\"uint8\"},{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"buyItem\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"_goldTokenAddress\",\"type\":\"address\"},{\"name\":\"_castleTokenAddress\",\"type\":\"address\"},{\"name\":\"_ninjaTokenAddress\",\"type\":\"address\"},{\"name\":\"_userTokenAddress\",\"type\":\"address\"},{\"name\":\"_itemTokenAddress\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"ninjaid\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"castleid\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"hp\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"path\",\"type\":\"uint8\"},{\"indexed\":false,\"name\":\"trapDamage\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"damage\",\"type\":\"uint32\"}],\"name\":\"Attack\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"ninjaid\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"castleid\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"hp\",\"type\":\"uint32\"}],\"name\":\"AttackStart\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"ninjaid\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"castleid\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"result\",\"type\":\"bool\"}],\"name\":\"AttackEnd\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"Pause\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"Unpause\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"}],\"name\":\"OwnershipRenounced\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"}]",
  "bytecode": "608060405260008060146101000a81548160ff0219169083151502179055503480156200002b57600080fd5b5060405160a080620049b18339810180604052810190808051906020019092919080519060200190929190805190602001909291908051906020019092919080519060200190929190505050336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600073ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff1614151515620000f457600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16141515156200013157600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16141515156200016e57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1614151515620001ab57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515620001e857600080fd5b84600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555083600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555082600660006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600760006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505050505061466f80620003426000396000f300608060405260043610610149576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806308151de11461014e5780630ae5e739146101d65780631a918bdd1461021957806333771860146102e75780633735ab751461032a5780633f4ba83a146103785780634319dfd91461038f5780634e71e0c81461047e5780635c975abb14610495578063704f1b94146104c4578063715018a6146105455780638456cb591461055c57806385e68531146105735780638da5cb5b146105b65780639ebafad61461060d578063a1206d4e1461064e578063a712043314610691578063acf1e9fa146106d4578063bd780d0d14610722578063c42890b6146107ba578063c6786e5a146107fd578063e30c397814610863578063ea636aca146108ba578063ec8fe065146108fd578063f2fde38b14610962575b600080fd5b6101bc6004803603810190808035906020019092919080359060200190929190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091929192905050506109a5565b604051808215151515815260200191505060405180910390f35b3480156101e257600080fd5b50610217600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611a3f565b005b34801561022557600080fd5b506102cd60048036038101908080359060200190929190803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919291929080359060200190820180359060200190808060200260200160405190810160405280939291908181526020018383602002808284378201915050505050509192919290505050611af5565b604051808215151515815260200191505060405180910390f35b3480156102f357600080fd5b50610328600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050612152565b005b61035e600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061222d565b604051808215151515815260200191505060405180910390f35b34801561038457600080fd5b5061038d61244a565b005b610464600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190803561ffff169060200190929190803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919291929080359060200190820180359060200190808060200260200160405190810160405280939291908181526020018383602002808284378201915050505050509192919290505050612508565b604051808215151515815260200191505060405180910390f35b34801561048a57600080fd5b50610493612801565b005b3480156104a157600080fd5b506104aa6129a0565b604051808215151515815260200191505060405180910390f35b3480156104d057600080fd5b5061052b600480360381019080803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091929192905050506129b3565b604051808215151515815260200191505060405180910390f35b34801561055157600080fd5b5061055a612b69565b005b34801561056857600080fd5b50610571612c6b565b005b34801561057f57600080fd5b506105b4600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050612d2b565b005b3480156105c257600080fd5b506105cb612de1565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561061957600080fd5b5061063860048036038101908080359060200190929190505050612e06565b6040518082815260200191505060405180910390f35b34801561065a57600080fd5b5061068f600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050612f28565b005b34801561069d57600080fd5b506106d2600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050613003565b005b610708600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506130de565b604051808215151515815260200191505060405180910390f35b34801561072e57600080fd5b5061075760048036038101908080359060200190929190803590602001909291905050506132fb565b604051808781526020018661ffff1661ffff1681526020018563ffffffff1663ffffffff1681526020018460ff1660ff1681526020018363ffffffff1663ffffffff16815260200182151515158152602001965050505050505060405180910390f35b3480156107c657600080fd5b506107fb600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050613530565b005b34801561080957600080fd5b506108616004803603810190808035906020019082018035906020019080806020026020016040519081016040528093929190818152602001838360200280828437820191505050505050919291929050505061360b565b005b34801561086f57600080fd5b506108786138b2565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156108c657600080fd5b506108fb600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506138d8565b005b610948600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803560ff169060200190929190803590602001909291905050506139b3565b604051808215151515815260200191505060405180910390f35b34801561096e57600080fd5b506109a3600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050613bfe565b005b6000806000606060008060008060008060149054906101000a900460ff161515156109cf57600080fd5b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16631c4b774b8c6040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b158015610a6057600080fd5b505af1158015610a74573d6000803e3d6000fd5b505050506040513d6020811015610a8a57600080fd5b8101908080519060200190929190505050975060028861ffff16811515610aad57fe5b0461ffff1634141515610abf57600080fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16638458bd708d6040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b158015610b5057600080fd5b505af1158015610b64573d6000803e3d6000fd5b505050506040513d6020811015610b7a57600080fd5b81019080805190602001909291905050509650610b968c613c9d565b89516040519080825280601f01601f191660200182016040528015610bca5781602001602082028038833980820191505090505b5095506000945060009350600092505b89518310156114b257610c698b8d8c86815181101515610bf657fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000027f01000000000000000000000000000000000000000000000000000000000000009004613cb9565b915060008263ffffffff16111561141a578983815181101515610c8857fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000028686806001019750815181101515610ce757fe5b9060200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a90535081840193508363ffffffff168763ffffffff1611151561141957610dbc8c8c8a8a8e88815181101515610d4657fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000027f01000000000000000000000000000000000000000000000000000000000000009004876001614371565b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16636352211e8c6040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b158015610e4d57600080fd5b505af1158015610e61573d6000803e3d6000fd5b505050506040513d6020811015610e7757600080fd5b81019080805190602001909291905050509050600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb8260028b61ffff16811515610ed957fe5b046040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018261ffff16815260200192505050602060405180830381600087803b158015610f6357600080fd5b505af1158015610f77573d6000803e3d6000fd5b505050506040513d6020811015610f8d57600080fd5b810190808051906020019092919050505050600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663ce8775a48c8e8d87815181101515610fed57fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000027f010000000000000000000000000000000000000000000000000000000000000090048a8a6040518663ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018086815260200185815260200184815260200180602001838152602001828103825284818151815260200191508051906020019080838360005b838110156110e05780820151818401526020810190506110c5565b50505050905090810190601f16801561110d5780820380516001836020036101000a031916815260200191505b509650505050505050602060405180830381600087803b15801561113057600080fd5b505af1158015611144573d6000803e3d6000fd5b505050506040513d602081101561115a57600080fd5b810190808051906020019092919050505050600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16637cbc4eb68d6040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b1580156111fd57600080fd5b505af1158015611211573d6000803e3d6000fd5b505050506040513d602081101561122757600080fd5b810190808051906020019092919050505050600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663896581638d8d8d8a6040518563ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808581526020018481526020018060200180602001838103835285818151815260200191508051906020019080838360005b838110156112f65780820151818401526020810190506112db565b50505050905090810190601f1680156113235780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019080838360005b8381101561135c578082015181840152602081019050611341565b50505050905090810190601f1680156113895780820380516001836020036101000a031916815260200191505b509650505050505050600060405180830381600087803b1580156113ac57600080fd5b505af11580156113c0573d6000803e3d6000fd5b505050507fd48638341d777adbc6fcdbeb2a9d73e8a0e177ad1d5e8f6c5285f41d33a061228c8c60006040518084815260200183815260200182151515158152602001935050505060405180910390a160019850611a30565b5b6114a58c8c8a8a8e8881518110151561142f57fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000027f01000000000000000000000000000000000000000000000000000000000000009004876000614371565b8280600101935050610bda565b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16636352211e8f6040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b15801561158157600080fd5b505af1158015611595573d6000803e3d6000fd5b505050506040513d60208110156115ab57600080fd5b810190808051906020019092919050505060028b61ffff168115156115cc57fe5b048b016040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018261ffff16815260200192505050602060405180830381600087803b15801561165857600080fd5b505af115801561166c573d6000803e3d6000fd5b505050506040513d602081101561168257600080fd5b8101908080519060200190929190505050151561169e57600080fd5b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663c9dfa7318c8e6040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018083815260200182815260200192505050602060405180830381600087803b15801561173757600080fd5b505af115801561174b573d6000803e3d6000fd5b505050506040513d602081101561176157600080fd5b8101908080519060200190929190505050151561177d57600080fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16635bc60cfc8d6040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b15801561180e57600080fd5b505af1158015611822573d6000803e3d6000fd5b505050506040513d602081101561183857600080fd5b8101908080519060200190929190505050151561185457600080fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663896581638d8d8d8a6040518563ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808581526020018481526020018060200180602001838103835285818151815260200191508051906020019080838360005b838110156119115780820151818401526020810190506118f6565b50505050905090810190601f16801561193e5780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019080838360005b8381101561197757808201518184015260208101905061195c565b50505050905090810190601f1680156119a45780820380516001836020036101000a031916815260200191505b509650505050505050600060405180830381600087803b1580156119c757600080fd5b505af11580156119db573d6000803e3d6000fd5b505050507fd48638341d777adbc6fcdbeb2a9d73e8a0e177ad1d5e8f6c5285f41d33a061228c8c60016040518084815260200183815260200182151515158152602001935050505060405180910390a1600198505b50505050505050509392505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515611a9a57600080fd5b6001600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b6000606060008060149054906101000a900460ff16151515611b1657600080fd5b6000600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16631c4b774b886040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b158015611ba957600080fd5b505af1158015611bbd573d6000803e3d6000fd5b505050506040513d6020811015611bd357600080fd5b810190808051906020019092919050505061ffff16111515611bf457600080fd5b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16638f50fb06876040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050600060405180830381600087803b158015611c8557600080fd5b505af1158015611c99573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f820116820180604052506020811015611cc357600080fd5b810190808051640100000000811115611cdb57600080fd5b82810190506020810184811115611cf157600080fd5b8151856001820283011164010000000082111715611d0e57600080fd5b50509291905050509150600190505b8351811015611f265760007f0100000000000000000000000000000000000000000000000000000000000000028282815181101515611d5857fe5b9060200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148015611de9575060008482815181101515611ddd57fe5b90602001906020020151115b15611f1957600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663345cad7e33838785815181101515611e3c57fe5b906020019060200201516040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018381526020018281526020019350505050602060405180830381600087803b158015611ed257600080fd5b505af1158015611ee6573d6000803e3d6000fd5b505050506040513d6020811015611efc57600080fd5b81019080805190602001909291905050501515611f1857600080fd5b5b8080600101915050611d1d565b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16634c207ac887600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16631c4b774b8a6040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b158015611ff657600080fd5b505af115801561200a573d6000803e3d6000fd5b505050506040513d602081101561202057600080fd5b8101908080519060200190929190505050886040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808481526020018361ffff1661ffff16815260200180602001828103825283818151815260200191508051906020019080838360005b838110156120b1578082015181840152602081019050612096565b50505050905090810190601f1680156120de5780820380516001836020036101000a031916815260200191505b50945050505050602060405180830381600087803b1580156120ff57600080fd5b505af1158015612113573d6000803e3d6000fd5b505050506040513d602081101561212957600080fd5b8101908080519060200190929190505050151561214557600080fd5b6001925050509392505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156121ad57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16141515156121e957600080fd5b80600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b600080600073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415151561226c57600080fd5b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166398d5fdca6040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b1580156122f257600080fd5b505af1158015612306573d6000803e3d6000fd5b505050506040513d602081101561231c57600080fd5b81019080805190602001909291905050509050803414151561233d57600080fd5b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16636a627842846040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1580156123fa57600080fd5b505af115801561240e573d6000803e3d6000fd5b505050506040513d602081101561242457600080fd5b8101908080519060200190929190505050151561244057600080fd5b6001915050919050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156124a557600080fd5b600060149054906101000a900460ff1615156124c057600080fd5b60008060146101000a81548160ff0219169083151502179055507f7805862f689e2f13df9f062ff482ad3ad112aca9e0847911ed832e158c525b3360405160405180910390a1565b600080600060149054906101000a900460ff1615151561252757600080fd5b8461ffff163414151561253957600080fd5b600190505b825181101561269f576000838281518110151561255757fe5b90602001906020020151111561269257600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663345cad7e888386858151811015156125b557fe5b906020019060200201516040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018381526020018281526020019350505050602060405180830381600087803b15801561264b57600080fd5b505af115801561265f573d6000803e3d6000fd5b505050506040513d602081101561267557600080fd5b8101908080519060200190929190505050151561269157600080fd5b5b808060010191505061253e565b600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16634c207ac88787876040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808481526020018361ffff1661ffff16815260200180602001828103825283818151815260200191508051906020019080838360005b8381101561275f578082015181840152602081019050612744565b50505050905090810190601f16801561278c5780820380516001836020036101000a031916815260200191505b50945050505050602060405180830381600087803b1580156127ad57600080fd5b505af11580156127c1573d6000803e3d6000fd5b505050506040513d60208110156127d757600080fd5b810190808051906020019092919050505015156127f357600080fd5b600191505095945050505050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561285d57600080fd5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a3600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550565b600060149054906101000a900460ff1681565b60008073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515156129f057600080fd5b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663d0def52133846040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001828103825283818151815260200191508051906020019080838360005b83811015612acd578082015181840152602081019050612ab2565b50505050905090810190601f168015612afa5780820380516001836020036101000a031916815260200191505b509350505050602060405180830381600087803b158015612b1a57600080fd5b505af1158015612b2e573d6000803e3d6000fd5b505050506040513d6020811015612b4457600080fd5b81019080805190602001909291905050501515612b6057600080fd5b60019050919050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515612bc457600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff167ff8df31144d9c2f0f6b59d69b8b98abd5459d07f2742c4df920b25aae33c6482060405160405180910390a260008060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515612cc657600080fd5b600060149054906101000a900460ff16151515612ce257600080fd5b6001600060146101000a81548160ff0219169083151502179055507f6985a02210a168e66602d3235cb6db0e70f92b3ba4d376a33c0f3d9434bff62560405160405180910390a1565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515612d8657600080fd5b6000600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60003373ffffffffffffffffffffffffffffffffffffffff16600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16636352211e846040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b158015612eb057600080fd5b505af1158015612ec4573d6000803e3d6000fd5b505050506040513d6020811015612eda57600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff16141515612f0d57600080fd5b60096000838152602001908152602001600020549050919050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515612f8357600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515612fbf57600080fd5b80600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561305e57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415151561309a57600080fd5b80600760006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b600080600073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415151561311d57600080fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166398d5fdca6040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b1580156131a357600080fd5b505af11580156131b7573d6000803e3d6000fd5b505050506040513d60208110156131cd57600080fd5b8101908080519060200190929190505050905080341415156131ee57600080fd5b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16636a627842846040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1580156132ab57600080fd5b505af11580156132bf573d6000803e3d6000fd5b505050506040513d60208110156132d557600080fd5b810190808051906020019092919050505015156132f157600080fd5b6001915050919050565b60008060008060008061330c614533565b3373ffffffffffffffffffffffffffffffffffffffff16600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16636352211e8b6040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b1580156133b457600080fd5b505af11580156133c8573d6000803e3d6000fd5b505050506040513d60208110156133de57600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff1614151561341157600080fd5b600860008a81526020019081526020016000208881548110151561343157fe5b906000526020600020906002020160c06040519081016040529081600082015481526020016001820160009054906101000a900461ffff1661ffff1661ffff1681526020016001820160029054906101000a900463ffffffff1663ffffffff1663ffffffff1681526020016001820160069054906101000a900460ff1660ff1660ff1681526020016001820160079054906101000a900463ffffffff1663ffffffff1663ffffffff16815260200160018201600b9054906101000a900460ff1615151515815250509050806000015181602001518260400151836060015184608001518560a00151965096509650965096509650509295509295509295565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561358b57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16141515156135c757600080fd5b80600560006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561366b57600080fd5b600092505b835183101561387857838381518110151561368757fe5b9060200190602002015191508173ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561372e57600080fd5b505af1158015613742573d6000803e3d6000fd5b505050506040513d602081101561375857600080fd5b810190808051906020019092919050505090508173ffffffffffffffffffffffffffffffffffffffff1663a9059cbb6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff16836040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b15801561382f57600080fd5b505af1158015613843573d6000803e3d6000fd5b505050506040513d602081101561385957600080fd5b8101908080519060200190929190505050508280600101935050613670565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561393357600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415151561396f57600080fd5b80600660006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b60008060008073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515156139f357600080fd5b600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663e7572230866040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808260ff168152602001915050602060405180830381600087803b158015613a8757600080fd5b505af1158015613a9b573d6000803e3d6000fd5b505050506040513d6020811015613ab157600080fd5b81019080805190602001909291905050509150838261ffff160290508034141515613adb57600080fd5b600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a59ac6dd8787876040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018360ff1681526020018281526020019350505050602060405180830381600087803b158015613bab57600080fd5b505af1158015613bbf573d6000803e3d6000fd5b505050506040513d6020811015613bd557600080fd5b81019080805190602001909291905050501515613bf157600080fd5b6001925050509392505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515613c5957600080fd5b80600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b6000600960008381526020019081526020016000208190555050565b6000806000806000600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663017fe809600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663f80eba7c8b8a6040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808381526020018260ff1660ff16815260200192505050602060405180830381600087803b158015613d9e57600080fd5b505af1158015613db2573d6000803e3d6000fd5b505050506040513d6020811015613dc857600080fd5b81019080805190602001909291905050506040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808260ff168152602001915050602060405180830381600087803b158015613e2e57600080fd5b505af1158015613e42573d6000803e3d6000fd5b505050506040513d6020811015613e5857600080fd5b810190808051906020019092919050505061ffff16935060008463ffffffff16111515613e885760009450614366565b6001600560009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166386481d408a6040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b158015613f1b57600080fd5b505af1158015613f2f573d6000803e3d6000fd5b505050506040513d6020811015613f4557600080fd5b810190808051906020019092919050505061ffff168501039250600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9b542bd886040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b158015613ff057600080fd5b505af1158015614004573d6000803e3d6000fd5b505050506040513d602081101561401a57600080fd5b81019080805190602001909291905050509150600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663b11b40a1886040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b1580156140be57600080fd5b505af11580156140d2573d6000803e3d6000fd5b505050506040513d60208110156140e857600080fd5b8101908080519060200190929190505050905060018660ff1614156141765760048260ff16141561411a576002830292505b60048160ff16141561412d576002830292505b60038260ff16141561414f5760028363ffffffff1681151561414b57fe5b0492505b60038160ff1614156141715760028363ffffffff1681151561416d57fe5b0492505b614362565b60028660ff1614156141f15760058260ff161415614195576002830292505b60058160ff1614156141a8576002830292505b60048260ff1614156141ca5760028363ffffffff168115156141c657fe5b0492505b60048160ff1614156141ec5760028363ffffffff168115156141e857fe5b0492505b614361565b60038660ff16141561426c5760018260ff161415614210576002830292505b60018160ff161415614223576002830292505b60058260ff1614156142455760028363ffffffff1681151561424157fe5b0492505b60058160ff1614156142675760028363ffffffff1681151561426357fe5b0492505b614360565b60048660ff1614156142e75760028260ff16141561428b576002830292505b60028160ff16141561429e576002830292505b60018260ff1614156142c05760028363ffffffff168115156142bc57fe5b0492505b60018160ff1614156142e25760028363ffffffff168115156142de57fe5b0492505b61435f565b60058660ff16141561435e5760038260ff161415614306576002830292505b60038160ff161415614319576002830292505b60028260ff16141561433b5760028363ffffffff1681151561433757fe5b0492505b60028160ff16141561435d5760028363ffffffff1681151561435957fe5b0492505b5b5b5b5b5b8294505b505050509392505050565b614379614533565b6008600089815260200190815260200160002080549050600960008a81526020019081526020016000205414156143d5576001600860008a8152602001908152602001600020818180549050019150816143d3919061457f565b505b60c0604051908101604052808881526020018761ffff1681526020018663ffffffff1681526020018560ff1681526020018463ffffffff168152602001831515815250905080600860008a8152602001908152602001600020600960008b815260200190815260200160002060008154809291906001019190505581548110151561445c57fe5b90600052602060002090600202016000820151816000015560208201518160010160006101000a81548161ffff021916908361ffff16021790555060408201518160010160026101000a81548163ffffffff021916908363ffffffff16021790555060608201518160010160066101000a81548160ff021916908360ff16021790555060808201518160010160076101000a81548163ffffffff021916908363ffffffff16021790555060a082015181600101600b6101000a81548160ff0219169083151502179055509050505050505050505050565b60c06040519081016040528060008152602001600061ffff168152602001600063ffffffff168152602001600060ff168152602001600063ffffffff1681526020016000151581525090565b8154818355818111156145ac576002028160020283600052602060002091820191016145ab91906145b1565b5b505050565b61464091905b8082111561463c576000808201600090556001820160006101000a81549061ffff02191690556001820160026101000a81549063ffffffff02191690556001820160066101000a81549060ff02191690556001820160076101000a81549063ffffffff021916905560018201600b6101000a81549060ff0219169055506002016145b7565b5090565b905600a165627a7a723058206748c88da20db5ca8e69cf19e896fd6989cb711c5591a57a1f710f617c670bbf00290000000000000000000000005c493a221ae9b49c3e45f2df8a3b34223855c1f4000000000000000000000000dfe6beca1e3cb35f051276d713e420de5de58577000000000000000000000000acf466567114ce47e4615f527d4dc4020a81438c000000000000000000000000f35470b6182cbd9a0f0c01d8f491b18445707c7d0000000000000000000000000a8b758bbc4a5791c5647ca80351e008f1e3bca1",
  "constructorArguments": "0000000000000000000000005c493a221ae9b49c3e45f2df8a3b34223855c1f4000000000000000000000000dfe6beca1e3cb35f051276d713e420de5de58577000000000000000000000000acf466567114ce47e4615f527d4dc4020a81438c000000000000000000000000f35470b6182cbd9a0f0c01d8f491b18445707c7d0000000000000000000000000a8b758bbc4a5791c5647ca80351e008f1e3bca1"
}