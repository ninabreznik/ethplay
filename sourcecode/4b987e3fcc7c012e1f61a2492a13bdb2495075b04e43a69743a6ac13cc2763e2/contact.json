{
  "address": "0x62f49e904af170ea377f399aca76c13ff25a6f5e",
  "chain": "ETH",
  "chainID": 1,
  "verifier": "etherscan.io",
  "commonName": "",
  "contractName": "TrustlessOTC",
  "compilerVersion": "v0.5.1+commit.c8a2cb62",
  "optimization": true,
  "runs": "200",
  "evmVersion": "default",
  "sourceCode": "/**\n *Submitted for verification at Etherscan.io on 2019-04-01\n*/\n\npragma solidity ^0.5.0;\n\n// This contract is still in Beta, use at your own risk\n\ncontract Ownable {\n  address public owner;\n\n\n  event OwnershipRenounced(address indexed previousOwner);\n  event OwnershipTransferred(\n    address indexed previousOwner,\n    address indexed newOwner\n  );\n\n\n  /**\n   * @dev The Ownable constructor sets the original `owner` of the contract to the sender\n   * account.\n   */\n  constructor() public {\n    owner = msg.sender;\n  }\n\n  /**\n   * @dev Throws if called by any account other than the owner.\n   */\n  modifier onlyOwner() {\n    require(msg.sender == owner);\n    _;\n  }\n\n  /**\n   * @dev Allows the current owner to relinquish control of the contract.\n   * @notice Renouncing to ownership will leave the contract without an owner.\n   * It will not be possible to call the functions with the `onlyOwner`\n   * modifier anymore.\n   */\n  function renounceOwnership() public onlyOwner {\n    emit OwnershipRenounced(owner);\n    owner = address(0);\n  }\n\n  /**\n   * @dev Allows the current owner to transfer control of the contract to a newOwner.\n   * @param _newOwner The address to transfer ownership to.\n   */\n  function transferOwnership(address _newOwner) public onlyOwner {\n    _transferOwnership(_newOwner);\n  }\n\n  /**\n   * @dev Transfers control of the contract to a newOwner.\n   * @param _newOwner The address to transfer ownership to.\n   */\n  function _transferOwnership(address _newOwner) internal {\n    require(_newOwner != address(0));\n    emit OwnershipTransferred(owner, _newOwner);\n    owner = _newOwner;\n  }\n}\n\n\ninterface Token {\n\n    function transfer(address _to, uint _value) external returns (bool);\n    function transferFrom(address _from, address _to, uint _value) external returns (bool);\n    function approve(address _spender, uint _value) external returns (bool);\n    function balanceOf(address _owner) external view returns (uint);\n    function allowance(address _owner, address _spender) external view returns (uint);\n\n    event Transfer(address indexed _from, address indexed _to, uint _value); // solhint-disable-line\n    event Approval(address indexed _owner, address indexed _spender, uint _value);\n}\n\ncontract TrustlessOTC is Ownable {\n    \n    mapping(address => uint256) public balanceTracker;\n    \n    event OfferCreated(uint indexed tradeID);\n    event OfferCancelled(uint indexed tradeID);\n    event OfferTaken(uint indexed tradeID);\n    \n    struct TradeOffer {\n        address tokenFrom;\n        address tokenTo;\n        uint256 amountFrom;\n        uint256 amountTo;\n        address creator;\n        bool active;\n        uint tradeID;\n    }\n    \n    TradeOffer[] public offers;\n    \n    function initiateTrade(\n        address _tokenFrom,\n        address _tokenTo, \n        uint256 _amountFrom,\n        uint256 _amountTo\n        ) public returns (uint newTradeID) {\n            require(Token(_tokenFrom).transferFrom(msg.sender, address(this), _amountFrom));\n            newTradeID = offers.length;\n            offers.length++;\n            TradeOffer storage o = offers[newTradeID];\n            balanceTracker[_tokenFrom] += _amountFrom;\n            o.tokenFrom = _tokenFrom;\n            o.tokenTo = _tokenTo;\n            o.amountFrom = _amountFrom;\n            o.amountTo = _amountTo;\n            o.creator = msg.sender;\n            o.active = true;\n            o.tradeID = newTradeID;\n            emit OfferCreated(newTradeID);\n    }\n    \n    function cancelTrade(uint tradeID) public returns (bool) {\n        TradeOffer storage o = offers[tradeID];\n        require(msg.sender == o.creator);\n        require(Token(o.tokenFrom).transfer(o.creator, o.amountFrom));\n        balanceTracker[o.tokenFrom] -= o.amountFrom;\n        o.active = false;\n        emit OfferCancelled(tradeID);\n        return true;\n    }\n    \n    function take(uint tradeID) public returns (bool) {\n        TradeOffer storage o = offers[tradeID];\n        require(o.active == true);\n        require(Token(o.tokenFrom).transfer(msg.sender, o.amountFrom));\n        balanceTracker[o.tokenFrom] -= o.amountFrom;\n        require(Token(o.tokenTo).transferFrom(msg.sender, o.creator, o.amountTo));\n        o.active = false;\n        emit OfferTaken(tradeID);\n        return true;\n    }\n    \n    function getOfferDetails(uint tradeID) external view returns (\n        address _tokenFrom,\n        address _tokenTo, \n        uint256 _amountFrom,\n        uint256 _amountTo,\n        address _creator,\n        bool _active\n    ) {\n        TradeOffer storage o = offers[tradeID];\n        _tokenFrom = o.tokenFrom;\n        _tokenTo = o.tokenTo;\n        _amountFrom = o.amountFrom;\n        _amountTo = o.amountTo;\n        _creator = o.creator;\n        _active = o.active;\n    }\n\n    \n    function reclaimToken(Token _token) external onlyOwner {\n        uint256 balance = _token.balanceOf(address(this));\n        uint256 excess = balance - balanceTracker[address(_token)];\n        require(excess > 0);\n        _token.transfer(owner, excess);\n    }\n    \n    \n}",
  "abi": "[{\"constant\":false,\"inputs\":[{\"name\":\"tradeID\",\"type\":\"uint256\"}],\"name\":\"cancelTrade\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_token\",\"type\":\"address\"}],\"name\":\"reclaimToken\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"tradeID\",\"type\":\"uint256\"}],\"name\":\"getOfferDetails\",\"outputs\":[{\"name\":\"_tokenFrom\",\"type\":\"address\"},{\"name\":\"_tokenTo\",\"type\":\"address\"},{\"name\":\"_amountFrom\",\"type\":\"uint256\"},{\"name\":\"_amountTo\",\"type\":\"uint256\"},{\"name\":\"_creator\",\"type\":\"address\"},{\"name\":\"_active\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"tradeID\",\"type\":\"uint256\"}],\"name\":\"take\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"offers\",\"outputs\":[{\"name\":\"tokenFrom\",\"type\":\"address\"},{\"name\":\"tokenTo\",\"type\":\"address\"},{\"name\":\"amountFrom\",\"type\":\"uint256\"},{\"name\":\"amountTo\",\"type\":\"uint256\"},{\"name\":\"creator\",\"type\":\"address\"},{\"name\":\"active\",\"type\":\"bool\"},{\"name\":\"tradeID\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"balanceTracker\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokenFrom\",\"type\":\"address\"},{\"name\":\"_tokenTo\",\"type\":\"address\"},{\"name\":\"_amountFrom\",\"type\":\"uint256\"},{\"name\":\"_amountTo\",\"type\":\"uint256\"}],\"name\":\"initiateTrade\",\"outputs\":[{\"name\":\"newTradeID\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"tradeID\",\"type\":\"uint256\"}],\"name\":\"OfferCreated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"tradeID\",\"type\":\"uint256\"}],\"name\":\"OfferCancelled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"tradeID\",\"type\":\"uint256\"}],\"name\":\"OfferTaken\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"}],\"name\":\"OwnershipRenounced\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"}]",
  "bytecode": "608060405260008054600160a060020a03191633179055610cc7806100256000396000f3fe60806040526004361061009d577c0100000000000000000000000000000000000000000000000000000000600035046309ec6cc781146100a257806317ffc320146100e05780634fb64be2146101155780634fd9efc414610183578063715018a6146101ad5780638a72ea6a146101c25780638da5cb5b146102375780639c1e89d614610268578063da5311dd146102ad578063f2fde38b146102f6575b600080fd5b3480156100ae57600080fd5b506100cc600480360360208110156100c557600080fd5b5035610329565b604080519115158252519081900360200190f35b3480156100ec57600080fd5b506101136004803603602081101561010357600080fd5b5035600160a060020a0316610490565b005b34801561012157600080fd5b5061013f6004803603602081101561013857600080fd5b5035610602565b60408051600160a060020a0397881681529587166020870152858101949094526060850192909252909316608083015291151560a082015290519081900360c00190f35b34801561018f57600080fd5b506100cc600480360360208110156101a657600080fd5b5035610683565b3480156101b957600080fd5b5061011361089a565b3480156101ce57600080fd5b506101ec600480360360208110156101e557600080fd5b5035610906565b60408051600160a060020a03988916815296881660208801528681019590955260608601939093529416608084015292151560a083015260c082019290925290519081900360e00190f35b34801561024357600080fd5b5061024c610978565b60408051600160a060020a039092168252519081900360200190f35b34801561027457600080fd5b5061029b6004803603602081101561028b57600080fd5b5035600160a060020a0316610987565b60408051918252519081900360200190f35b3480156102b957600080fd5b5061029b600480360360808110156102d057600080fd5b50600160a060020a03813581169160208101359091169060408101359060600135610999565b34801561030257600080fd5b506101136004803603602081101561031957600080fd5b5035600160a060020a0316610b50565b60008060028381548110151561033b57fe5b600091825260209091206006909102016004810154909150600160a060020a0316331461036757600080fd5b80546004808301546002840154604080517fa9059cbb000000000000000000000000000000000000000000000000000000008152600160a060020a039384169481019490945260248401919091525192169163a9059cbb916044808201926020929091908290030181600087803b1580156103e157600080fd5b505af11580156103f5573d6000803e3d6000fd5b505050506040513d602081101561040b57600080fd5b5051151561041857600080fd5b60028101548154600160a060020a031660009081526001602052604080822080549390930390925560048301805474ff000000000000000000000000000000000000000019169055905184917fc28b4aed030bfacc245c0501326e1beb8c0ef0d60e4edc21067fdeb52da2a7aa91a250600192915050565b600054600160a060020a031633146104a757600080fd5b604080517f70a082310000000000000000000000000000000000000000000000000000000081523060048201529051600091600160a060020a038416916370a0823191602480820192602092909190829003018186803b15801561050a57600080fd5b505afa15801561051e573d6000803e3d6000fd5b505050506040513d602081101561053457600080fd5b5051600160a060020a03831660009081526001602052604081205491925090820390811161056157600080fd5b60008054604080517fa9059cbb000000000000000000000000000000000000000000000000000000008152600160a060020a0392831660048201526024810185905290519186169263a9059cbb926044808401936020939083900390910190829087803b1580156105d157600080fd5b505af11580156105e5573d6000803e3d6000fd5b505050506040513d60208110156105fb57600080fd5b5050505050565b600080600080600080600060028881548110151561061c57fe5b600091825260209091206006909102018054600182015460028301546003840154600490940154600160a060020a039384169d9284169c50909a5092985090821696507401000000000000000000000000000000000000000090910460ff16945092505050565b60008060028381548110151561069557fe5b906000526020600020906006020190508060040160149054906101000a900460ff161515600115151415156106c957600080fd5b80546002820154604080517fa9059cbb000000000000000000000000000000000000000000000000000000008152336004820152602481019290925251600160a060020a039092169163a9059cbb916044808201926020929091908290030181600087803b15801561073a57600080fd5b505af115801561074e573d6000803e3d6000fd5b505050506040513d602081101561076457600080fd5b5051151561077157600080fd5b60028101548154600160a060020a03908116600090815260016020818152604080842080549690960390955590850154600480870154600388015487517f23b872dd00000000000000000000000000000000000000000000000000000000815233938101939093529086166024830152604482015294519316936323b872dd9360648083019491928390030190829087803b15801561080f57600080fd5b505af1158015610823573d6000803e3d6000fd5b505050506040513d602081101561083957600080fd5b5051151561084657600080fd5b60048101805474ff00000000000000000000000000000000000000001916905560405183907f8d41497c7e1d1f357a01f988d454a86c537c3800ab8da3f91bfa5f5e73a1d5f290600090a250600192915050565b600054600160a060020a031633146108b157600080fd5b60008054604051600160a060020a03909116917ff8df31144d9c2f0f6b59d69b8b98abd5459d07f2742c4df920b25aae33c6482091a26000805473ffffffffffffffffffffffffffffffffffffffff19169055565b600280548290811061091457fe5b6000918252602090912060069091020180546001820154600283015460038401546004850154600590950154600160a060020a03948516965092841694919390929082169174010000000000000000000000000000000000000000900460ff169087565b600054600160a060020a031681565b60016020526000908152604090205481565b604080517f23b872dd000000000000000000000000000000000000000000000000000000008152336004820152306024820152604481018490529051600091600160a060020a038716916323b872dd9160648082019260209290919082900301818787803b158015610a0a57600080fd5b505af1158015610a1e573d6000803e3d6000fd5b505050506040513d6020811015610a3457600080fd5b50511515610a4157600080fd5b5060028054908190610a569060018301610bf0565b506000600282815481101515610a6857fe5b60009182526020808320600160a060020a03808b16808652600193849052604080872080548c0190556006909502909201805473ffffffffffffffffffffffffffffffffffffffff1990811690931781559283018054918b16918316919091179055600282018890556003820187905560048201805474ff00000000000000000000000000000000000000001992163317919091167401000000000000000000000000000000000000000017905560058101859055905190925083917f682fd9923da5632e7c7702dabcfa626195d5f444833bc25f94e418e258e7918691a250949350505050565b600054600160a060020a03163314610b6757600080fd5b610b7081610b73565b50565b600160a060020a0381161515610b8857600080fd5b60008054604051600160a060020a03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b815481835581811115610c1c57600602816006028360005260206000209182019101610c1c9190610c21565b505050565b610c9891905b80821115610c9457805473ffffffffffffffffffffffffffffffffffffffff19908116825560018201805490911690556000600282018190556003820181905560048201805474ffffffffffffffffffffffffffffffffffffffffff191690556005820155600601610c27565b5090565b9056fea165627a7a723058206db37517c76922c733b5a26a57811f16e209ae64e6df0a4cfd5dc27ff3e4b7160029"
}